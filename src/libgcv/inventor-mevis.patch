diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/apps/converters/ivdowngrade/SoText3V2.c++ inventor/apps/converters/ivdowngrade/SoText3V2.c++
--- /tmp/inventor/apps/converters/ivdowngrade/SoText3V2.c++	2000-08-15 14:55:53.000000000 +0200
+++ inventor/apps/converters/ivdowngrade/SoText3V2.c++	2006-05-08 11:22:01.000000000 +0200
@@ -150,7 +150,7 @@
 	}
     }
 #ifdef DEBUG
-    if (trunc) SoDebugWarning::post("SoText3V2", 
+    if (trunc) SoDebugError::postWarning("SoText3V2", 
 	"Note that conversion modified an international text string");
 #endif /*DEBUG*/
     return newStr;            
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/apps/nodes/Decal/Decal.c++ inventor/apps/nodes/Decal/Decal.c++
--- /tmp/inventor/apps/nodes/Decal/Decal.c++	2000-12-14 07:20:52.000000000 +0100
+++ inventor/apps/nodes/Decal/Decal.c++	2005-08-01 17:36:15.000000000 +0200
@@ -115,10 +115,10 @@
 // Description:
 //    Traversal for GL rendering.
 //
-//    The polygon offset extension makes this really simple; we just
+//    The polygon offset feature makes this really simple; we just
 //    draw the on-top layers with a bigger and bigger offset.
 //
-//    If you don't have the polygon offset extension, this can be made
+//    If you don't have the polygon offset feature, this can be made
 //    to work for planar decal with the following two-pass algorithm:
 //    First the depth buffer update is turned off and the base is
 //    rendered followed by the layers in order.  Depth testing is
@@ -140,95 +140,70 @@
     SoState *state = action->getState();
     state->push();
 
-#ifdef GL_EXT_polygon_offset
-    // See the comments in the
-    // /usr/include/Inventor/elements/SoGLCacheContextElement for more
-    // details on this-- it is the correct way to determine whether or
-    // not an OpenGL extension is available:
-    static int offsetExtInt = -1;
-    if (offsetExtInt == -1) {
-	offsetExtInt = 
-	    SoGLCacheContextElement::getExtID("GL_EXT_polygon_offset");
-    }
-    if (SoGLCacheContextElement::extSupported(state, offsetExtInt)) {
-
 #ifdef GL_VERSION_1_1
-	glEnable(GL_POLYGON_OFFSET_FILL);
-	glEnable(GL_POLYGON_OFFSET_LINE);
-	glEnable(GL_POLYGON_OFFSET_POINT);
-#else
-	glEnable(GL_POLYGON_OFFSET_EXT);
-#endif
 
-	float offset = 0;
+    glEnable(GL_POLYGON_OFFSET_FILL);
+    glEnable(GL_POLYGON_OFFSET_LINE);
+    glEnable(GL_POLYGON_OFFSET_POINT);
 
-	for (int i=0; i < childList->getLength(); i++) {
-#ifdef GL_VERSION_1_1
-	    glPolygonOffset(offset, 0);
-#else
-	    glPolygonOffsetEXT(offset, 0);
-#endif
-	    childList->traverse(action, i);
+    float offset = 0;
 
-	    offset -= 0.1;
-	}
+    for (int i=0; i < childList->getLength(); i++) {
+	glPolygonOffset(offset, 0);
+	childList->traverse(action, i);
 
-#ifdef GL_VERSION_1_1
-	glDisable(GL_POLYGON_OFFSET_FILL);
-	glDisable(GL_POLYGON_OFFSET_LINE);
-	glDisable(GL_POLYGON_OFFSET_POINT);
-#else
-	glDisable(GL_POLYGON_OFFSET_EXT);
-#endif
+	offset -= 0.1;
+    }
 
-    } else {
+    glDisable(GL_POLYGON_OFFSET_FILL);
+    glDisable(GL_POLYGON_OFFSET_LINE);
+    glDisable(GL_POLYGON_OFFSET_POINT);
 
-#endif
-	// Extension not supported at compile time or at run-time:
+#else
 
-	// first pass
-	// turn off depth update, leaving color update on
-	GLboolean oldDepthMask;
-	glGetBooleanv(GL_DEPTH_WRITEMASK, &oldDepthMask);
-	if (oldDepthMask) 
-	    glDepthMask(GL_FALSE);
-	// render base followed by layers in order
-	childList->traverse(action);
-	if (oldDepthMask)
-	    glDepthMask(oldDepthMask);
-
-	state->pop();  // Pop and push state between passes to avoid
-	state->push(); // problems with non-Separator children
-
-	// second pass
-	// turn off color update leaving depth update on
-	GLboolean colorMode;
-	glGetBooleanv(GL_RGBA_MODE, &colorMode);
-	if (colorMode) { 	// RGBA mode
-	    GLboolean oldColorMask[4];
-	    glGetBooleanv(GL_COLOR_WRITEMASK, oldColorMask);
-	    GLboolean anyMask = (oldColorMask[0] || oldColorMask[1] ||
-				 oldColorMask[2] || oldColorMask[3]);
-	    if (anyMask) 
-		glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE);
-	    // only render base
-	    childList->traverse(action, 0);
-	    if (anyMask)
-		glColorMask(oldColorMask[0], oldColorMask[1],
-			    oldColorMask[2], oldColorMask[3]);
-	}
-	else {	// color index mode
-	    GLint	oldMask;
-	    glGetIntegerv(GL_INDEX_WRITEMASK, &oldMask);
-	    if (oldMask)
-		glIndexMask(0x0);
-	    // only render base
-	    childList->traverse(action, 0);
-	    if (oldMask)
-		glIndexMask(oldMask);
-	}
-#ifdef GL_EXT_polygon_offset
+    // first pass
+    // turn off depth update, leaving color update on
+    GLboolean oldDepthMask;
+    glGetBooleanv(GL_DEPTH_WRITEMASK, &oldDepthMask);
+    if (oldDepthMask) 
+	glDepthMask(GL_FALSE);
+    // render base followed by layers in order
+    childList->traverse(action);
+    if (oldDepthMask)
+	glDepthMask(oldDepthMask);
+
+    state->pop();  // Pop and push state between passes to avoid
+    state->push(); // problems with non-Separator children
+
+    // second pass
+    // turn off color update leaving depth update on
+    GLboolean colorMode;
+    glGetBooleanv(GL_RGBA_MODE, &colorMode);
+    if (colorMode) { 	// RGBA mode
+	GLboolean oldColorMask[4];
+	glGetBooleanv(GL_COLOR_WRITEMASK, oldColorMask);
+	GLboolean anyMask = (oldColorMask[0] || oldColorMask[1] ||
+			     oldColorMask[2] || oldColorMask[3]);
+	if (anyMask) 
+	    glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE);
+	// only render base
+	childList->traverse(action, 0);
+	if (anyMask)
+	    glColorMask(oldColorMask[0], oldColorMask[1],
+			oldColorMask[2], oldColorMask[3]);
+    }
+    else {	// color index mode
+	GLint	oldMask;
+	glGetIntegerv(GL_INDEX_WRITEMASK, &oldMask);
+	if (oldMask)
+	    glIndexMask(0x0);
+	// only render base
+	childList->traverse(action, 0);
+	if (oldMask)
+	    glIndexMask(oldMask);
     }
+    
 #endif
+
     state->pop();
 }
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/apps/tools/ivfix/ivfix.pro inventor/apps/tools/ivfix/ivfix.pro
--- /tmp/inventor/apps/tools/ivfix/ivfix.pro	1970-01-01 01:00:00.000000000 +0100
+++ inventor/apps/tools/ivfix/ivfix.pro	2007-04-24 21:54:52.000000000 +0200
@@ -0,0 +1,71 @@
+# ---------------- ivfix profile -------------------
+# Last changed by $Author$
+# $Id$
+# $Source$
+# --------------------------------------------------
+
+TEMPLATE = app
+
+TARGET = ivfix
+
+DESTDIR = $(MEVIS_THIRDPARTY_LIB)/bin
+
+MSVC_KEEP_DESTDIR = 1
+
+# set high warn level (warn 4 on MSCV)
+# WARN = HIGH
+
+# add used packages here (see mevisPackages.pro for packages):
+CONFIG += console inventor
+macx:CONFIG -= app_bundle
+
+QMAKE_EXT_CPP += .c++
+
+win32::QMAKE_CXXFLAGS += /TP
+
+win32::DEFINES += WIN32
+win32::DEFINES -= UNICODE
+
+unix:!macx:QMAKE_CFLAGS   += -idirafter $(MEVIS_THIRDPARTY_LIB)/Inventor/inventor/lib/mevis/include
+unix:!macx:QMAKE_CXXFLAGS += -idirafter $(MEVIS_THIRDPARTY_LIB)/Inventor/inventor/lib/mevis/include
+
+# include settings of required libraries
+include( $(MEVIS_THIRDPARTY_LIB)/make/thirdpartyPackages.pro )
+
+HEADERS += \
+  IfAssert.h \
+  IfBuilder.h \
+  IfCollector.h \
+  IfCondenser.h \
+  IfFixer.h \
+  IfFlattener.h \
+  IfHasher.h \
+  IfHolder.h \
+  IfMerger.h \
+  IfReplacer.h \
+  IfReporter.h \
+  IfShape.h \
+  IfShapeList.h \
+  IfSorter.h \
+  IfStripper.h \
+  IfTypes.h \
+  IfWeeder.h
+
+SOURCES += \
+  IfBuilder.c++ \
+  IfCollector.c++ \
+  IfCondenser.c++ \
+  IfFixer.c++ \
+  IfFlattener.c++ \
+  IfHasher.c++ \
+  IfHolder.c++ \
+  IfMerger.c++ \
+  IfReplacer.c++ \
+  IfReporter.c++ \
+  IfShape.c++ \
+  IfShapeList.c++ \
+  IfSorter.c++ \
+  IfStripper.c++ \
+  IfTypes.c++ \
+  IfWeeder.c++ \
+  ivfix.c++
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/close.d inventor/close.d
--- /tmp/inventor/close.d	1970-01-01 01:00:00.000000000 +0100
+++ inventor/close.d	2007-05-02 18:08:30.000000000 +0200
@@ -0,0 +1 @@
+close.o: libimage/close.c libimage/image.h
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/doc/help/GNUmakefile inventor/doc/help/GNUmakefile
--- /tmp/inventor/doc/help/GNUmakefile	2001-09-25 02:45:31.000000000 +0200
+++ inventor/doc/help/GNUmakefile	2005-08-01 17:36:15.000000000 +0200
@@ -3,8 +3,13 @@
 
 all:
 
+ifeq ($(usingWin32), 1)
+install:
+
+else
 install:
 	mkdir -p $(IVHELPDIR)/Inventor
 	for h in *.help; do $(INSTALL) -m 644 $$h $(IVHELPDIR)/Inventor; done
+endif
 
 include $(IVCOMMONRULES)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/doc/man/GNUmakefile inventor/doc/man/GNUmakefile
--- /tmp/inventor/doc/man/GNUmakefile	2000-09-18 11:11:13.000000000 +0200
+++ inventor/doc/man/GNUmakefile	2005-08-01 17:36:15.000000000 +0200
@@ -1,7 +1,11 @@
 IVDEPTH = ../..
 include $(IVDEPTH)/make/ivcommondefs
 
+ifeq ($(usingWin32), 1)
+SUBDIRS = tools ivman man3
+else
 SUBDIRS = tools ivman man1 man3
+endif
 
 all install:
 	$(SUBDIRS_MAKERULE)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/doc/man/ivman/BuildIssues.c++ inventor/doc/man/ivman/BuildIssues.c++
--- /tmp/inventor/doc/man/ivman/BuildIssues.c++	2000-08-15 14:56:12.000000000 +0200
+++ inventor/doc/man/ivman/BuildIssues.c++	2006-07-14 15:31:40.000000000 +0200
@@ -49,6 +49,7 @@
 /////////////////////////////////////////////////////////////////////////////
 
 
+#include <Inventor/system/inventor.h>
 #include <GL/glu.h>
 
 
@@ -60,18 +61,7 @@
 //
 /////////////////////////////////////////////////////////////////////////////
 
-#if !defined(GL_EXT_texture_object) && !defined(GL_VERSION_1_1)
-extern "C" {
-void
-glGenTexturesEXT() {}
-
-void
-glBindTextureEXT() {}
-
-void
-glDeleteTexturesEXT() {}
-}
-#endif
+// 2005-07-06 Felix: Obsolete
 
 
 /////////////////////////////////////////////////////////////////////////////
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/doc/man/ivman/GNUmakefile inventor/doc/man/ivman/GNUmakefile
--- /tmp/inventor/doc/man/ivman/GNUmakefile	2002-03-06 22:32:26.000000000 +0100
+++ inventor/doc/man/ivman/GNUmakefile	2005-08-01 17:36:15.000000000 +0200
@@ -5,7 +5,20 @@
 
 CXXFILES = Main.c++ ClassDef.c++ Man.c++ Reader.c++ Writer.c++ BuildIssues.c++
 
+ifeq ($(usingWin32), 1)
+LCXXOPTS += -DINVENTOR_IMPORTS
+
+CXXFILES += XGetopt.c++
+
+ifneq (, $(findstring debug, $(LIBTYPE)))
+LLDLIBS = -lInventor_d
+else
+LLDLIBS = -lInventor
+endif
+
+else
 LLDLIBS = -lInventor
+endif
 
 all install: $(PROGRAM)
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/doc/man/ivman/Main.c++ inventor/doc/man/ivman/Main.c++
--- /tmp/inventor/doc/man/ivman/Main.c++	2002-03-06 22:32:26.000000000 +0100
+++ inventor/doc/man/ivman/Main.c++	2005-08-05 10:23:02.000000000 +0200
@@ -35,10 +35,15 @@
  */
 
 #include <stdlib.h>
+#ifdef WIN32
+#include "XGetopt.h"
+#else
 #include <unistd.h>
+#endif
 #include <Inventor/SoDB.h>
 #include <Inventor/SoInteraction.h>
 #include <Inventor/nodekits/SoNodeKit.h>
+#include <Inventor/SoMeVis.h>
 #include "Man.h"
 
 /////////////////////////////////////////////////////////////////////////////
@@ -118,6 +123,7 @@
     SoDB::init();
     SoNodeKit::init();
     SoInteraction::init();
+    SoMeVis::init();
 
     // Process each class in turn
     ClassDef	*mainCd = NULL, *curCd = NULL, *cd;
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/doc/man/ivman/XGetopt.c++ inventor/doc/man/ivman/XGetopt.c++
--- /tmp/inventor/doc/man/ivman/XGetopt.c++	1970-01-01 01:00:00.000000000 +0100
+++ inventor/doc/man/ivman/XGetopt.c++	2005-08-03 12:50:38.000000000 +0200
@@ -0,0 +1,219 @@
+// XGetopt.cpp  Version 1.2
+//
+// Author:  Hans Dietrich
+//          hdietrich2@hotmail.com
+//
+// Description:
+//     XGetopt.cpp implements getopt(), a function to parse command lines.
+//
+// History
+//     Version 1.2 - 2003 May 17
+//     - Added Unicode support
+//
+//     Version 1.1 - 2002 March 10
+//     - Added example to XGetopt.cpp module header 
+//
+// This software is released into the public domain.
+// You are free to use it in any way you like.
+//
+// This software is provided "as is" with no expressed
+// or implied warranty.  I accept no liability for any
+// damage or loss of business that this software may cause.
+//
+///////////////////////////////////////////////////////////////////////////////
+
+
+///////////////////////////////////////////////////////////////////////////////
+// if you are using precompiled headers then include this line:
+//#include "stdafx.h"
+///////////////////////////////////////////////////////////////////////////////
+
+
+///////////////////////////////////////////////////////////////////////////////
+// if you are not using precompiled headers then include these lines:
+#include <windows.h>
+#include <stdio.h>
+#include <tchar.h>
+///////////////////////////////////////////////////////////////////////////////
+
+
+#include "XGetopt.h"
+
+
+///////////////////////////////////////////////////////////////////////////////
+//
+//  X G e t o p t . c p p
+//
+//
+//  NAME
+//       getopt -- parse command line options
+//
+//  SYNOPSIS
+//       int getopt(int argc, TCHAR *argv[], TCHAR *optstring)
+//
+//       extern TCHAR *optarg;
+//       extern int optind;
+//
+//  DESCRIPTION
+//       The getopt() function parses the command line arguments. Its
+//       arguments argc and argv are the argument count and array as
+//       passed into the application on program invocation.  In the case
+//       of Visual C++ programs, argc and argv are available via the
+//       variables __argc and __argv (double underscores), respectively.
+//       getopt returns the next option letter in argv that matches a
+//       letter in optstring.  (Note:  Unicode programs should use
+//       __targv instead of __argv.  Also, all character and string
+//       literals should be enclosed in _T( ) ).
+//
+//       optstring is a string of recognized option letters;  if a letter
+//       is followed by a colon, the option is expected to have an argument
+//       that may or may not be separated from it by white space.  optarg
+//       is set to point to the start of the option argument on return from
+//       getopt.
+//
+//       Option letters may be combined, e.g., "-ab" is equivalent to
+//       "-a -b".  Option letters are case sensitive.
+//
+//       getopt places in the external variable optind the argv index
+//       of the next argument to be processed.  optind is initialized
+//       to 0 before the first call to getopt.
+//
+//       When all options have been processed (i.e., up to the first
+//       non-option argument), getopt returns EOF, optarg will point
+//       to the argument, and optind will be set to the argv index of
+//       the argument.  If there are no non-option arguments, optarg
+//       will be set to NULL.
+//
+//       The special option "--" may be used to delimit the end of the
+//       options;  EOF will be returned, and "--" (and everything after it)
+//       will be skipped.
+//
+//  RETURN VALUE
+//       For option letters contained in the string optstring, getopt
+//       will return the option letter.  getopt returns a question mark (?)
+//       when it encounters an option letter not included in optstring.
+//       EOF is returned when processing is finished.
+//
+//  BUGS
+//       1)  Long options are not supported.
+//       2)  The GNU double-colon extension is not supported.
+//       3)  The environment variable POSIXLY_CORRECT is not supported.
+//       4)  The + syntax is not supported.
+//       5)  The automatic permutation of arguments is not supported.
+//       6)  This implementation of getopt() returns EOF if an error is
+//           encountered, instead of -1 as the latest standard requires.
+//
+//  EXAMPLE
+//       BOOL CMyApp::ProcessCommandLine(int argc, TCHAR *argv[])
+//       {
+//           int c;
+//
+//           while ((c = getopt(argc, argv, _T("aBn:"))) != EOF)
+//           {
+//               switch (c)
+//               {
+//                   case _T('a'):
+//                       TRACE(_T("option a\n"));
+//                       //
+//                       // set some flag here
+//                       //
+//                       break;
+//
+//                   case _T('B'):
+//                       TRACE( _T("option B\n"));
+//                       //
+//                       // set some other flag here
+//                       //
+//                       break;
+//
+//                   case _T('n'):
+//                       TRACE(_T("option n: value=%d\n"), atoi(optarg));
+//                       //
+//                       // do something with value here
+//                       //
+//                       break;
+//
+//                   case _T('?'):
+//                       TRACE(_T("ERROR: illegal option %s\n"), argv[optind-1]);
+//                       return FALSE;
+//                       break;
+//
+//                   default:
+//                       TRACE(_T("WARNING: no handler for option %c\n"), c);
+//                       return FALSE;
+//                       break;
+//               }
+//           }
+//           //
+//           // check for non-option args here
+//           //
+//           return TRUE;
+//       }
+//
+///////////////////////////////////////////////////////////////////////////////
+
+TCHAR	*optarg;		// global argument pointer
+int		optind = 0; 	// global argv index
+
+int getopt(int argc, TCHAR *argv[], TCHAR *optstring)
+{
+	static TCHAR *next = NULL;
+	if (optind == 0)
+		next = NULL;
+
+	optarg = NULL;
+
+	if (next == NULL || *next == _T('\0'))
+	{
+		if (optind == 0)
+			optind++;
+
+		if (optind >= argc || argv[optind][0] != _T('-') || argv[optind][1] == _T('\0'))
+		{
+			optarg = NULL;
+			if (optind < argc)
+				optarg = argv[optind];
+			return EOF;
+		}
+
+		if (_tcscmp(argv[optind], _T("--")) == 0)
+		{
+			optind++;
+			optarg = NULL;
+			if (optind < argc)
+				optarg = argv[optind];
+			return EOF;
+		}
+
+		next = argv[optind];
+		next++;		// skip past -
+		optind++;
+	}
+
+	TCHAR c = *next++;
+	TCHAR *cp = _tcschr(optstring, c);
+
+	if (cp == NULL || c == _T(':'))
+		return _T('?');
+
+	cp++;
+	if (*cp == _T(':'))
+	{
+		if (*next != _T('\0'))
+		{
+			optarg = next;
+			next = NULL;
+		}
+		else if (optind < argc)
+		{
+			optarg = argv[optind];
+			optind++;
+		}
+		else
+		{
+			return _T('?');
+		}
+	}
+
+	return c;
+}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/doc/man/ivman/XGetopt.h inventor/doc/man/ivman/XGetopt.h
--- /tmp/inventor/doc/man/ivman/XGetopt.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/doc/man/ivman/XGetopt.h	2005-08-03 12:50:38.000000000 +0200
@@ -0,0 +1,25 @@
+// XGetopt.h  Version 1.2
+//
+// Author:  Hans Dietrich
+//          hdietrich2@hotmail.com
+//
+// This software is released into the public domain.
+// You are free to use it in any way you like.
+//
+// This software is provided "as is" with no expressed
+// or implied warranty.  I accept no liability for any
+// damage or loss of business that this software may cause.
+//
+///////////////////////////////////////////////////////////////////////////////
+
+#ifndef XGETOPT_H
+#define XGETOPT_H
+
+#include <windows.h>
+
+extern int optind, opterr;
+extern TCHAR *optarg;
+
+int getopt(int argc, TCHAR *argv[], TCHAR *optstring);
+
+#endif //XGETOPT_H
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/doc/man/man3/ivm/basics/SbString.ivm inventor/doc/man/man3/ivm/basics/SbString.ivm
--- /tmp/inventor/doc/man/man3/ivm/basics/SbString.ivm	2000-08-15 14:56:12.000000000 +0200
+++ inventor/doc/man/man3/ivm/basics/SbString.ivm	2005-08-09 12:28:39.000000000 +0200
@@ -71,5 +71,13 @@
 Inequality operator for \cSbString\./\kchar*\. and
 \cSbString\./\cSbString\. comparison.
 }
+BEGIN C++
+METHOD "" int          operator <(const char *s, const SbString &str) {}
+END
+METHOD "" int          operator <(const SbString &str, const char *s) {}
+METHOD "" int          operator <(const SbString &str1, const SbString &str2) {
+Lexically less than operator for \cSbString\./\kchar*\. and
+\cSbString\./\cSbString\. comparison.
+}
 ALSO { SbName }
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/filbuf.d inventor/filbuf.d
--- /tmp/inventor/filbuf.d	1970-01-01 01:00:00.000000000 +0100
+++ inventor/filbuf.d	2007-05-02 18:08:30.000000000 +0200
@@ -0,0 +1 @@
+filbuf.o: libimage/filbuf.c libimage/image.h
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/FL.bat inventor/FL.bat
--- /tmp/inventor/FL.bat	1970-01-01 01:00:00.000000000 +0100
+++ inventor/FL.bat	2006-07-10 09:15:59.000000000 +0200
@@ -0,0 +1 @@
+"%MEVIS_LIB%\make\win32\createDsp.bat" FL
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/FL.pro inventor/FL.pro
--- /tmp/inventor/FL.pro	1970-01-01 01:00:00.000000000 +0100
+++ inventor/FL.pro	2007-04-05 10:23:49.000000000 +0200
@@ -0,0 +1,37 @@
+TEMPLATE = lib
+
+TARGET = FL
+
+CONFIG += staticlib exceptions thread
+CONFIG += freetype
+
+DESTDIR    = libFL
+DLLDESTDIR = libFL
+
+!win32::OBJECTS_DIR = obj
+
+win32::DEFINES += WIN32 INVENTOR_EXPORTS __SGIOIV_BUILD_DLL
+win32::DEFINES -= UNICODE
+unix::!macx::DEFINES += IVPREFIX="/*_*/"
+
+debug::DEFINES += DEBUG
+
+# include settings of required libraries
+include( $(MEVIS_THIRDPARTY_LIB)/make/thirdpartyPackages.pro )
+
+# libFL    
+INCLUDEPATH += \
+    libFL/ang \
+    libFL/src
+
+# libFL    
+HEADERS += \
+    libFL/ang/fl.h \
+    libFL/ang/flendian.h \
+    libFL/ang/flfreetype.h \
+    libFL/src/flclient.h
+
+SOURCES += \
+    libFL/ang/fl.c \
+    libFL/ang/flclient.c \
+    libFL/ang/flfreetype.c
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/flsbuf.d inventor/flsbuf.d
--- /tmp/inventor/flsbuf.d	1970-01-01 01:00:00.000000000 +0100
+++ inventor/flsbuf.d	2007-05-02 18:08:31.000000000 +0200
@@ -0,0 +1 @@
+flsbuf.o: libimage/flsbuf.c libimage/image.h
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/gensources.bat inventor/gensources.bat
--- /tmp/inventor/gensources.bat	1970-01-01 01:00:00.000000000 +0100
+++ inventor/gensources.bat	2006-07-10 09:15:59.000000000 +0200
@@ -0,0 +1,14 @@
+set BUILDTOOLS=tools/ppp
+
+"%BUILDTOOLS%\ppp" < lib/database/src/so/nodes/SoCone.pp                        > lib/database/src/so/nodes/SoCone.c++
+"%BUILDTOOLS%\ppp" < lib/database/src/so/nodes/SoCube.pp			> lib/database/src/so/nodes/SoCube.c++
+"%BUILDTOOLS%\ppp" < lib/database/src/so/nodes/SoCylinder.pp			> lib/database/src/so/nodes/SoCylinder.c++
+"%BUILDTOOLS%\ppp" < lib/database/src/so/nodes/SoFaceSet.pp			> lib/database/src/so/nodes/SoFaceSet.c++
+"%BUILDTOOLS%\ppp" < lib/database/src/so/nodes/SoIndexedFaceSet.pp		> lib/database/src/so/nodes/SoIndexedFaceSet.c++
+"%BUILDTOOLS%\ppp" < lib/database/src/so/nodes/SoIndexedLineSet.pp		> lib/database/src/so/nodes/SoIndexedLineSet.c++
+"%BUILDTOOLS%\ppp" < lib/database/src/so/nodes/SoIndexedTriangleStripSet.pp	> lib/database/src/so/nodes/SoIndexedTriangleStripSet.c++
+"%BUILDTOOLS%\ppp" < lib/database/src/so/nodes/SoLineSet.pp			> lib/database/src/so/nodes/SoLineSet.c++
+"%BUILDTOOLS%\ppp" < lib/database/src/so/nodes/SoPointSet.pp			> lib/database/src/so/nodes/SoPointSet.c++
+"%BUILDTOOLS%\ppp" < lib/database/src/so/nodes/SoQuadMesh.pp			> lib/database/src/so/nodes/SoQuadMesh.c++
+"%BUILDTOOLS%\ppp" < lib/database/src/so/nodes/SoSphere.pp			> lib/database/src/so/nodes/SoSphere.c++
+"%BUILDTOOLS%\ppp" < lib/database/src/so/nodes/SoTriangleStripSet.pp		> lib/database/src/so/nodes/SoTriangleStripSet.c++
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/gensources.sh inventor/gensources.sh
--- /tmp/inventor/gensources.sh	1970-01-01 01:00:00.000000000 +0100
+++ inventor/gensources.sh	2006-07-12 18:01:38.000000000 +0200
@@ -0,0 +1,16 @@
+#! /bin/sh
+
+BUILDTOOLS=tools/ppp
+
+$BUILDTOOLS/ppp < lib/database/src/so/nodes/SoCone.pp                        	> lib/database/src/so/nodes/SoCone.c++
+$BUILDTOOLS/ppp < lib/database/src/so/nodes/SoCube.pp				> lib/database/src/so/nodes/SoCube.c++
+$BUILDTOOLS/ppp < lib/database/src/so/nodes/SoCylinder.pp			> lib/database/src/so/nodes/SoCylinder.c++
+$BUILDTOOLS/ppp < lib/database/src/so/nodes/SoFaceSet.pp			> lib/database/src/so/nodes/SoFaceSet.c++
+$BUILDTOOLS/ppp < lib/database/src/so/nodes/SoIndexedFaceSet.pp			> lib/database/src/so/nodes/SoIndexedFaceSet.c++
+$BUILDTOOLS/ppp < lib/database/src/so/nodes/SoIndexedLineSet.pp			> lib/database/src/so/nodes/SoIndexedLineSet.c++
+$BUILDTOOLS/ppp < lib/database/src/so/nodes/SoIndexedTriangleStripSet.pp	> lib/database/src/so/nodes/SoIndexedTriangleStripSet.c++
+$BUILDTOOLS/ppp < lib/database/src/so/nodes/SoLineSet.pp			> lib/database/src/so/nodes/SoLineSet.c++
+$BUILDTOOLS/ppp < lib/database/src/so/nodes/SoPointSet.pp			> lib/database/src/so/nodes/SoPointSet.c++
+$BUILDTOOLS/ppp < lib/database/src/so/nodes/SoQuadMesh.pp			> lib/database/src/so/nodes/SoQuadMesh.c++
+$BUILDTOOLS/ppp < lib/database/src/so/nodes/SoSphere.pp				> lib/database/src/so/nodes/SoSphere.c++
+$BUILDTOOLS/ppp < lib/database/src/so/nodes/SoTriangleStripSet.pp		> lib/database/src/so/nodes/SoTriangleStripSet.c++
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/GNUmakefile inventor/GNUmakefile
--- /tmp/inventor/GNUmakefile	2005-01-14 23:49:52.000000000 +0100
+++ inventor/GNUmakefile	2005-08-09 16:18:27.000000000 +0200
@@ -4,8 +4,26 @@
 # Use of LSUBDIRS is to allow override using environment variable without
 # conflicting with SUBDIRS in subdirectory makefiles.
 
+ifeq ($(usingWin32), 1)
+LSUBDIRS = libimage tools libFL lib data
+# LSUBDIRS += doc 
+else
 LSUBDIRS = libimage tools libFL lib libSoXt doc data apps
+endif
 SUBDIRS = $(LSUBDIRS)
 
-all install $(COMMONTARGS):
+all install: setup_src
 	$(SUBDIRS_MAKERULE)
+
+$(COMMONTARGS):
+	$(SUBDIRS_MAKERULE)
+
+# setup sources
+
+ifeq ($(usingWin32), 1)
+setup_src:
+	
+else
+setup_src:
+	rm -f ./lib/mevis/include/inttypes.h
+endif
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/image.bat inventor/image.bat
--- /tmp/inventor/image.bat	1970-01-01 01:00:00.000000000 +0100
+++ inventor/image.bat	2006-07-10 09:15:59.000000000 +0200
@@ -0,0 +1 @@
+"%MEVIS_LIB%\make\win32\createDsp.bat" image
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/image.pro inventor/image.pro
--- /tmp/inventor/image.pro	1970-01-01 01:00:00.000000000 +0100
+++ inventor/image.pro	2007-04-02 09:23:51.000000000 +0200
@@ -0,0 +1,33 @@
+TEMPLATE = lib
+
+TARGET = image
+
+CONFIG += staticlib exceptions thread
+
+DESTDIR    = libimage
+DLLDESTDIR = libimage
+
+!win32::OBJECTS_DIR = obj
+
+win32::DEFINES += WIN32 INVENTOR_EXPORTS __SGIOIV_BUILD_DLL
+win32::DEFINES -= UNICODE
+
+debug::DEFINES += DEBUG
+
+# include settings of required libraries
+include( $(MEVIS_THIRDPARTY_LIB)/make/thirdpartyPackages.pro )
+
+# libimage
+HEADERS += \
+    libimage/image.h
+
+SOURCES += \
+    libimage/close.c \
+    libimage/filbuf.c \
+    libimage/flsbuf.c \
+    libimage/name.c \
+    libimage/open.c \
+    libimage/pix.c \
+    libimage/rdwr.c \
+    libimage/rle.c \
+    libimage/row.c
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/inventor.bat inventor/inventor.bat
--- /tmp/inventor/inventor.bat	1970-01-01 01:00:00.000000000 +0100
+++ inventor/inventor.bat	2006-07-06 17:14:10.000000000 +0200
@@ -0,0 +1 @@
+"%MEVIS_LIB%\make\win32\createDsp.bat" inventor
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/inventor.pro inventor/inventor.pro
--- /tmp/inventor/inventor.pro	1970-01-01 01:00:00.000000000 +0100
+++ inventor/inventor.pro	2007-04-17 12:26:26.000000000 +0200
@@ -0,0 +1,1835 @@
+TEMPLATE = lib
+
+TARGET = Inventor
+
+# build a framework bundle on Mac OS X
+macx::CONFIG += lib_bundle
+
+CONFIG += dll exceptions shared thread ivgensources
+CONFIG += opengl libFL libimage jpeg_static iconv
+
+DESTDIR    = $(MEVIS_THIRDPARTY_LIB)/lib
+DLLDESTDIR = $(MEVIS_THIRDPARTY_LIB)/lib
+
+!win32::OBJECTS_DIR = obj
+
+QMAKE_EXT_CPP += .c++
+
+# postprocessing flags
+MSVC_USE_SUBDIRS = 1
+
+win32 {
+  QMAKE_YACC = $(MEVIS_THIRDPARTY_LIB)/inventor/Inventor/build/windows/yacc.exe
+  QMAKE_CXXFLAGS += /TP
+
+  DEFINES += WIN32 INVENTOR_EXPORTS __SGIOIV_BUILD_DLL
+  DEFINES += HAVE_BOOLEAN
+  DEFINES -= UNICODE
+  LIBS += Ws2_32.lib shell32.lib
+}
+else:macx {
+  # see also end of file for mac framework config
+  LIBS += -framework Carbon
+}
+else:unix:!macx {
+  # ensure the local inttypes.h is found last
+  QMAKE_CFLAGS   += -idirafter lib/mevis/include
+  QMAKE_CXXFLAGS += -idirafter lib/mevis/include
+}
+
+debug::DEFINES += DEBUG
+
+# this is required to define ${d}
+isEmpty(TP_NO_SYSTEM_INCLUDE) {
+  include( $(MEVIS_LIB)/make/systemInit.pro )
+}
+
+# libFL
+libFL {
+  INCLUDEPATH += \
+    libFL/ang \
+    libFL/src
+
+  QMAKE_LIBDIR += libFL
+  win32::LIBS += FL$${d}.lib
+  unix ::LIBS += -lFL$${d}
+
+  CONFIG += freetype
+}
+
+# libimage
+libimage {
+  QMAKE_LIBDIR += libimage
+  win32::LIBS += image$${d}.lib
+  unix ::LIBS += -limage$${d}
+}
+
+# include settings of required libraries
+include( $(MEVIS_THIRDPARTY_LIB)/make/thirdpartyPackages.pro )
+
+INCLUDEPATH += \
+    lib/database/include \
+    lib/interaction/include \
+    lib/nodekits/include \
+    lib/mevis/include
+    
+# nurbs
+INCLUDEPATH += \
+    lib/database/src/so/nodes \
+    lib/database/src/so/nodes/nurbs \
+    lib/database/src/so/nodes/nurbs/head
+DEFINES += LIBRARYBUILD
+
+#
+#  MeVis extensions to Open Inventor
+#
+
+win32::HEADERS += \
+    lib/mevis/include/SoWinEnterScope.h \
+    lib/mevis/include/SoWinLeaveScope.h \
+    lib/mevis/include/inttypes.h \
+    lib/mevis/src/utf8_filesupport_win32.h
+
+HEADERS += \
+    lib/mevis/include/Inventor/SoCatch.h \
+    lib/mevis/include/Inventor/SoInventor.h \
+    lib/mevis/include/Inventor/SoMeVis.h \
+    lib/mevis/include/Inventor/SoTrace.h \
+    lib/mevis/include/Inventor/elements/SoGLPolygonOffsetElement.h \
+    lib/mevis/include/Inventor/elements/SoGLStencilBitsElement.h \
+    lib/mevis/include/Inventor/elements/SoPolygonOffsetElement.h \
+    lib/mevis/include/Inventor/elements/SoStencilBitsElement.h \
+    lib/mevis/include/Inventor/fields/SoSFVec2s.h \
+    lib/mevis/include/Inventor/fields/SoSFVec3s.h \
+    lib/mevis/include/Inventor/nodes/SoPolygonOffset.h \
+    lib/mevis/include/Inventor/system/SbConfig.h \
+    lib/mevis/include/Inventor/system/SbSystem.h
+
+SOURCES += \
+    lib/mevis/src/SoCatch.c++ \
+    lib/mevis/src/SoMeVis.c++ \
+    lib/mevis/src/SoTrace.c++ \
+    lib/mevis/src/elements/SoGLPolygonOffsetElement.c++ \
+    lib/mevis/src/elements/SoGLStencilBitsElement.c++ \
+    lib/mevis/src/elements/SoPolygonOffsetElement.c++ \
+    lib/mevis/src/elements/SoStencilBitsElement.c++ \
+    lib/mevis/src/fields/SoSFVec2s.c++ \
+    lib/mevis/src/fields/SoSFVec3s.c++ \
+    lib/mevis/src/nodes/SoPolygonOffset.c++
+
+win32::SOURCES += \
+    lib/mevis/src/utf8_filesupport_win32.c++
+
+
+#
+#  SGI Open Inventor 2.1.x
+#
+
+unix:!macx::HEADERS += \
+    lib/database/include/Inventor/SoOffscreenRenderer.h
+
+unix:!macx::SOURCES += \
+    lib/database/src/so/SoOffscreenRenderer.c++
+
+HEADERS += \
+    lib/database/include/Inventor/Sb.h \
+    lib/database/include/Inventor/SbBasic.h \
+    lib/database/include/Inventor/SbBox.h \
+    lib/database/include/Inventor/SbColor.h \
+    lib/database/include/Inventor/SbDict.h \
+    lib/database/include/Inventor/SbLinear.h \
+    lib/database/include/Inventor/SbPList.h \
+    lib/database/include/Inventor/SbString.h \
+    lib/database/include/Inventor/SbTime.h \
+    lib/database/include/Inventor/SbViewportRegion.h \
+    lib/database/include/Inventor/So.h \
+    lib/database/include/Inventor/SoDB.h \
+    lib/database/include/Inventor/SoInput.h \
+    lib/database/include/Inventor/SoLists.h \
+    lib/database/include/Inventor/SoOutput.h \
+    lib/database/include/Inventor/SoPath.h \
+    lib/database/include/Inventor/SoPickedPoint.h \
+    lib/database/include/Inventor/SoPrimitiveVertex.h \
+    lib/database/include/Inventor/SoType.h \
+    lib/database/include/Inventor/actions/SoAction.h \
+    lib/database/include/Inventor/actions/SoActions.h \
+    lib/database/include/Inventor/actions/SoCallbackAction.h \
+    lib/database/include/Inventor/actions/SoGLRenderAction.h \
+    lib/database/include/Inventor/actions/SoGetBoundingBoxAction.h \
+    lib/database/include/Inventor/actions/SoGetMatrixAction.h \
+    lib/database/include/Inventor/actions/SoHandleEventAction.h \
+    lib/database/include/Inventor/actions/SoPickAction.h \
+    lib/database/include/Inventor/actions/SoRayPickAction.h \
+    lib/database/include/Inventor/actions/SoSearchAction.h \
+    lib/database/include/Inventor/actions/SoSubAction.h \
+    lib/database/include/Inventor/actions/SoWriteAction.h \
+    lib/database/include/Inventor/bundles/SoBundle.h \
+    lib/database/include/Inventor/bundles/SoMaterialBundle.h \
+    lib/database/include/Inventor/bundles/SoNormalBundle.h \
+    lib/database/include/Inventor/bundles/SoTextureCoordinateBundle.h \
+    lib/database/include/Inventor/caches/SoBoundingBoxCache.h \
+    lib/database/include/Inventor/caches/SoCache.h \
+    lib/database/include/Inventor/caches/SoGLCacheList.h \
+    lib/database/include/Inventor/caches/SoGLRenderCache.h \
+    lib/database/include/Inventor/caches/SoNormalCache.h \
+    lib/database/include/Inventor/details/SoConeDetail.h \
+    lib/database/include/Inventor/details/SoCubeDetail.h \
+    lib/database/include/Inventor/details/SoCylinderDetail.h \
+    lib/database/include/Inventor/details/SoDetail.h \
+    lib/database/include/Inventor/details/SoDetails.h \
+    lib/database/include/Inventor/details/SoFaceDetail.h \
+    lib/database/include/Inventor/details/SoLineDetail.h \
+    lib/database/include/Inventor/details/SoPointDetail.h \
+    lib/database/include/Inventor/details/SoSubDetail.h \
+    lib/database/include/Inventor/details/SoTextDetail.h \
+    lib/database/include/Inventor/elements/SoAccumulatedElement.h \
+    lib/database/include/Inventor/elements/SoAmbientColorElement.h \
+    lib/database/include/Inventor/elements/SoBBoxModelMatrixElement.h \
+    lib/database/include/Inventor/elements/SoCacheElement.h \
+    lib/database/include/Inventor/elements/SoClipPlaneElement.h \
+    lib/database/include/Inventor/elements/SoComplexityElement.h \
+    lib/database/include/Inventor/elements/SoComplexityTypeElement.h \
+    lib/database/include/Inventor/elements/SoCoordinateElement.h \
+    lib/database/include/Inventor/elements/SoCreaseAngleElement.h \
+    lib/database/include/Inventor/elements/SoCullVolumeElement.h \
+    lib/database/include/Inventor/elements/SoCurrentGLMaterialElement.h \
+    lib/database/include/Inventor/elements/SoDiffuseColorElement.h \
+    lib/database/include/Inventor/elements/SoDrawStyleElement.h \
+    lib/database/include/Inventor/elements/SoElement.h \
+    lib/database/include/Inventor/elements/SoElements.h \
+    lib/database/include/Inventor/elements/SoEmissiveColorElement.h \
+    lib/database/include/Inventor/elements/SoFloatElement.h \
+    lib/database/include/Inventor/elements/SoFocalDistanceElement.h \
+    lib/database/include/Inventor/elements/SoFontNameElement.h \
+    lib/database/include/Inventor/elements/SoFontSizeElement.h \
+    lib/database/include/Inventor/elements/SoGLAmbientColorElement.h \
+    lib/database/include/Inventor/elements/SoGLCacheContextElement.h \
+    lib/database/include/Inventor/elements/SoGLClipPlaneElement.h \
+    lib/database/include/Inventor/elements/SoGLColorIndexElement.h \
+    lib/database/include/Inventor/elements/SoGLCoordinateElement.h \
+    lib/database/include/Inventor/elements/SoGLDiffuseColorElement.h \
+    lib/database/include/Inventor/elements/SoGLDrawStyleElement.h \
+    lib/database/include/Inventor/elements/SoGLEmissiveColorElement.h \
+    lib/database/include/Inventor/elements/SoGLLazyElement.h \
+    lib/database/include/Inventor/elements/SoGLLightIdElement.h \
+    lib/database/include/Inventor/elements/SoGLLightModelElement.h \
+    lib/database/include/Inventor/elements/SoGLLinePatternElement.h \
+    lib/database/include/Inventor/elements/SoGLLineWidthElement.h \
+    lib/database/include/Inventor/elements/SoGLModelMatrixElement.h \
+    lib/database/include/Inventor/elements/SoGLNormalElement.h \
+    lib/database/include/Inventor/elements/SoGLPointSizeElement.h \
+    lib/database/include/Inventor/elements/SoGLPolygonStippleElement.h \
+    lib/database/include/Inventor/elements/SoGLProjectionMatrixElement.h \
+    lib/database/include/Inventor/elements/SoGLRenderPassElement.h \
+    lib/database/include/Inventor/elements/SoGLShapeHintsElement.h \
+    lib/database/include/Inventor/elements/SoGLShininessElement.h \
+    lib/database/include/Inventor/elements/SoGLSpecularColorElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureBlendColorElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureCoordinateElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureEnabledElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureImageElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureMatrixElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureModelElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureQualityElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureWrapSElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureWrapTElement.h \
+    lib/database/include/Inventor/elements/SoGLUpdateAreaElement.h \
+    lib/database/include/Inventor/elements/SoGLViewingMatrixElement.h \
+    lib/database/include/Inventor/elements/SoGLViewportRegionElement.h \
+    lib/database/include/Inventor/elements/SoInt32Element.h \
+    lib/database/include/Inventor/elements/SoLazyElement.h \
+    lib/database/include/Inventor/elements/SoLightAttenuationElement.h \
+    lib/database/include/Inventor/elements/SoLightModelElement.h \
+    lib/database/include/Inventor/elements/SoLinePatternElement.h \
+    lib/database/include/Inventor/elements/SoLineWidthElement.h \
+    lib/database/include/Inventor/elements/SoLocalBBoxMatrixElement.h \
+    lib/database/include/Inventor/elements/SoLongElement.h \
+    lib/database/include/Inventor/elements/SoMaterialBindingElement.h \
+    lib/database/include/Inventor/elements/SoModelMatrixElement.h \
+    lib/database/include/Inventor/elements/SoNormalBindingElement.h \
+    lib/database/include/Inventor/elements/SoNormalElement.h \
+    lib/database/include/Inventor/elements/SoOverrideElement.h \
+    lib/database/include/Inventor/elements/SoPickRayElement.h \
+    lib/database/include/Inventor/elements/SoPickStyleElement.h \
+    lib/database/include/Inventor/elements/SoPointSizeElement.h \
+    lib/database/include/Inventor/elements/SoProfileCoordinateElement.h \
+    lib/database/include/Inventor/elements/SoProfileElement.h \
+    lib/database/include/Inventor/elements/SoProjectionMatrixElement.h \
+    lib/database/include/Inventor/elements/SoReplacedElement.h \
+    lib/database/include/Inventor/elements/SoShapeHintsElement.h \
+    lib/database/include/Inventor/elements/SoShapeStyleElement.h \
+    lib/database/include/Inventor/elements/SoShininessElement.h \
+    lib/database/include/Inventor/elements/SoSpecularColorElement.h \
+    lib/database/include/Inventor/elements/SoSubElement.h \
+    lib/database/include/Inventor/elements/SoSwitchElement.h \
+    lib/database/include/Inventor/elements/SoTextureBlendColorElement.h \
+    lib/database/include/Inventor/elements/SoTextureCoordinateBindingElement.h \
+    lib/database/include/Inventor/elements/SoTextureCoordinateElement.h \
+    lib/database/include/Inventor/elements/SoTextureImageElement.h \
+    lib/database/include/Inventor/elements/SoTextureMatrixElement.h \
+    lib/database/include/Inventor/elements/SoTextureModelElement.h \
+    lib/database/include/Inventor/elements/SoTextureQualityElement.h \
+    lib/database/include/Inventor/elements/SoTextureWrapSElement.h \
+    lib/database/include/Inventor/elements/SoTextureWrapTElement.h \
+    lib/database/include/Inventor/elements/SoTransparencyElement.h \
+    lib/database/include/Inventor/elements/SoUnitsElement.h \
+    lib/database/include/Inventor/elements/SoViewVolumeElement.h \
+    lib/database/include/Inventor/elements/SoViewingMatrixElement.h \
+    lib/database/include/Inventor/elements/SoViewportRegionElement.h \
+    lib/database/include/Inventor/elements/SoWindowElement.h \
+    lib/database/include/Inventor/engines/SoBoolOperation.h \
+    lib/database/include/Inventor/engines/SoCalculator.h \
+    lib/database/include/Inventor/engines/SoCompose.h \
+    lib/database/include/Inventor/engines/SoComputeBoundingBox.h \
+    lib/database/include/Inventor/engines/SoConcatenate.h \
+    lib/database/include/Inventor/engines/SoCounter.h \
+    lib/database/include/Inventor/engines/SoElapsedTime.h \
+    lib/database/include/Inventor/engines/SoEngine.h \
+    lib/database/include/Inventor/engines/SoEngines.h \
+    lib/database/include/Inventor/engines/SoFieldConverter.h \
+    lib/database/include/Inventor/engines/SoGate.h \
+    lib/database/include/Inventor/engines/SoInterpolate.h \
+    lib/database/include/Inventor/engines/SoOnOff.h \
+    lib/database/include/Inventor/engines/SoOneShot.h \
+    lib/database/include/Inventor/engines/SoOutputData.h \
+    lib/database/include/Inventor/engines/SoSelectOne.h \
+    lib/database/include/Inventor/engines/SoSubEngine.h \
+    lib/database/include/Inventor/engines/SoTimeCounter.h \
+    lib/database/include/Inventor/engines/SoTransformVec3f.h \
+    lib/database/include/Inventor/engines/SoTriggerAny.h \
+    lib/database/include/Inventor/errors/SoDebugError.h \
+    lib/database/include/Inventor/errors/SoError.h \
+    lib/database/include/Inventor/errors/SoErrors.h \
+    lib/database/include/Inventor/errors/SoMemoryError.h \
+    lib/database/include/Inventor/errors/SoReadError.h \
+    lib/database/include/Inventor/events/SoButtonEvent.h \
+    lib/database/include/Inventor/events/SoEvent.h \
+    lib/database/include/Inventor/events/SoEvents.h \
+    lib/database/include/Inventor/events/SoKeyboardEvent.h \
+    lib/database/include/Inventor/events/SoLocation2Event.h \
+    lib/database/include/Inventor/events/SoMotion3Event.h \
+    lib/database/include/Inventor/events/SoMouseButtonEvent.h \
+    lib/database/include/Inventor/events/SoSpaceballButtonEvent.h \
+    lib/database/include/Inventor/events/SoSubEvent.h \
+    lib/database/include/Inventor/fields/SoField.h \
+    lib/database/include/Inventor/fields/SoFieldContainer.h \
+    lib/database/include/Inventor/fields/SoFieldData.h \
+    lib/database/include/Inventor/fields/SoFields.h \
+    lib/database/include/Inventor/fields/SoMFBitMask.h \
+    lib/database/include/Inventor/fields/SoMFBool.h \
+    lib/database/include/Inventor/fields/SoMFColor.h \
+    lib/database/include/Inventor/fields/SoMFEngine.h \
+    lib/database/include/Inventor/fields/SoMFEnum.h \
+    lib/database/include/Inventor/fields/SoMFFloat.h \
+    lib/database/include/Inventor/fields/SoMFInt32.h \
+    lib/database/include/Inventor/fields/SoMFLong.h \
+    lib/database/include/Inventor/fields/SoMFMatrix.h \
+    lib/database/include/Inventor/fields/SoMFName.h \
+    lib/database/include/Inventor/fields/SoMFNode.h \
+    lib/database/include/Inventor/fields/SoMFPath.h \
+    lib/database/include/Inventor/fields/SoMFPlane.h \
+    lib/database/include/Inventor/fields/SoMFRotation.h \
+    lib/database/include/Inventor/fields/SoMFShort.h \
+    lib/database/include/Inventor/fields/SoMFString.h \
+    lib/database/include/Inventor/fields/SoMFTime.h \
+    lib/database/include/Inventor/fields/SoMFUInt32.h \
+    lib/database/include/Inventor/fields/SoMFULong.h \
+    lib/database/include/Inventor/fields/SoMFUShort.h \
+    lib/database/include/Inventor/fields/SoMFVec2f.h \
+    lib/database/include/Inventor/fields/SoMFVec3f.h \
+    lib/database/include/Inventor/fields/SoMFVec4f.h \
+    lib/database/include/Inventor/fields/SoSFBitMask.h \
+    lib/database/include/Inventor/fields/SoSFBool.h \
+    lib/database/include/Inventor/fields/SoSFColor.h \
+    lib/database/include/Inventor/fields/SoSFEngine.h \
+    lib/database/include/Inventor/fields/SoSFEnum.h \
+    lib/database/include/Inventor/fields/SoSFFloat.h \
+    lib/database/include/Inventor/fields/SoSFImage.h \
+    lib/database/include/Inventor/fields/SoSFInt32.h \
+    lib/database/include/Inventor/fields/SoSFLong.h \
+    lib/database/include/Inventor/fields/SoSFMatrix.h \
+    lib/database/include/Inventor/fields/SoSFName.h \
+    lib/database/include/Inventor/fields/SoSFNode.h \
+    lib/database/include/Inventor/fields/SoSFPath.h \
+    lib/database/include/Inventor/fields/SoSFPlane.h \
+    lib/database/include/Inventor/fields/SoSFRotation.h \
+    lib/database/include/Inventor/fields/SoSFShort.h \
+    lib/database/include/Inventor/fields/SoSFString.h \
+    lib/database/include/Inventor/fields/SoSFTime.h \
+    lib/database/include/Inventor/fields/SoSFTrigger.h \
+    lib/database/include/Inventor/fields/SoSFUInt32.h \
+    lib/database/include/Inventor/fields/SoSFULong.h \
+    lib/database/include/Inventor/fields/SoSFUShort.h \
+    lib/database/include/Inventor/fields/SoSFVec2f.h \
+    lib/database/include/Inventor/fields/SoSFVec3f.h \
+    lib/database/include/Inventor/fields/SoSFVec4f.h \
+    lib/database/include/Inventor/fields/SoSubField.h \
+    lib/database/include/Inventor/misc/SoAuditorList.h \
+    lib/database/include/Inventor/misc/SoBase.h \
+    lib/database/include/Inventor/misc/SoBasic.h \
+    lib/database/include/Inventor/misc/SoByteStream.h \
+    lib/database/include/Inventor/misc/SoCallbackList.h \
+    lib/database/include/Inventor/misc/SoChildList.h \
+    lib/database/include/Inventor/misc/SoCompactPathList.h \
+    lib/database/include/Inventor/misc/SoNormalGenerator.h \
+    lib/database/include/Inventor/misc/SoNotification.h \
+    lib/database/include/Inventor/misc/SoState.h \
+    lib/database/include/Inventor/misc/SoTempPath.h \
+    lib/database/include/Inventor/misc/SoTranscribe.h \
+    lib/database/include/Inventor/misc/upgraders/SoUpgrader.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1CustomNode.h \
+    lib/database/include/Inventor/nodes/SoAnnotation.h \
+    lib/database/include/Inventor/nodes/SoArray.h \
+    lib/database/include/Inventor/nodes/SoAsciiText.h \
+    lib/database/include/Inventor/nodes/SoBaseColor.h \
+    lib/database/include/Inventor/nodes/SoBlinker.h \
+    lib/database/include/Inventor/nodes/SoCallback.h \
+    lib/database/include/Inventor/nodes/SoCamera.h \
+    lib/database/include/Inventor/nodes/SoClipPlane.h \
+    lib/database/include/Inventor/nodes/SoColorIndex.h \
+    lib/database/include/Inventor/nodes/SoComplexity.h \
+    lib/database/include/Inventor/nodes/SoCone.h \
+    lib/database/include/Inventor/nodes/SoCoordinate3.h \
+    lib/database/include/Inventor/nodes/SoCoordinate4.h \
+    lib/database/include/Inventor/nodes/SoCube.h \
+    lib/database/include/Inventor/nodes/SoCylinder.h \
+    lib/database/include/Inventor/nodes/SoDirectionalLight.h \
+    lib/database/include/Inventor/nodes/SoDrawStyle.h \
+    lib/database/include/Inventor/nodes/SoEnvironment.h \
+    lib/database/include/Inventor/nodes/SoEventCallback.h \
+    lib/database/include/Inventor/nodes/SoFaceSet.h \
+    lib/database/include/Inventor/nodes/SoFile.h \
+    lib/database/include/Inventor/nodes/SoFont.h \
+    lib/database/include/Inventor/nodes/SoFontStyle.h \
+    lib/database/include/Inventor/nodes/SoGroup.h \
+    lib/database/include/Inventor/nodes/SoIndexedFaceSet.h \
+    lib/database/include/Inventor/nodes/SoIndexedLineSet.h \
+    lib/database/include/Inventor/nodes/SoIndexedNurbsCurve.h \
+    lib/database/include/Inventor/nodes/SoIndexedNurbsSurface.h \
+    lib/database/include/Inventor/nodes/SoIndexedShape.h \
+    lib/database/include/Inventor/nodes/SoIndexedTriangleStripSet.h \
+    lib/database/include/Inventor/nodes/SoInfo.h \
+    lib/database/include/Inventor/nodes/SoLOD.h \
+    lib/database/include/Inventor/nodes/SoLabel.h \
+    lib/database/include/Inventor/nodes/SoLevelOfDetail.h \
+    lib/database/include/Inventor/nodes/SoLight.h \
+    lib/database/include/Inventor/nodes/SoLightModel.h \
+    lib/database/include/Inventor/nodes/SoLineSet.h \
+    lib/database/include/Inventor/nodes/SoLinearProfile.h \
+    lib/database/include/Inventor/nodes/SoLocateHighlight.h \
+    lib/database/include/Inventor/nodes/SoMaterial.h \
+    lib/database/include/Inventor/nodes/SoMaterialBinding.h \
+    lib/database/include/Inventor/nodes/SoMaterialIndex.h \
+    lib/database/include/Inventor/nodes/SoMatrixTransform.h \
+    lib/database/include/Inventor/nodes/SoMultipleCopy.h \
+    lib/database/include/Inventor/nodes/SoNode.h \
+    lib/database/include/Inventor/nodes/SoNodes.h \
+    lib/database/include/Inventor/nodes/SoNonIndexedShape.h \
+    lib/database/include/Inventor/nodes/SoNormal.h \
+    lib/database/include/Inventor/nodes/SoNormalBinding.h \
+    lib/database/include/Inventor/nodes/SoNurbsCurve.h \
+    lib/database/include/Inventor/nodes/SoNurbsProfile.h \
+    lib/database/include/Inventor/nodes/SoNurbsSurface.h \
+    lib/database/include/Inventor/nodes/SoOrthographicCamera.h \
+    lib/database/include/Inventor/nodes/SoPackedColor.h \
+    lib/database/include/Inventor/nodes/SoPathSwitch.h \
+    lib/database/include/Inventor/nodes/SoPendulum.h \
+    lib/database/include/Inventor/nodes/SoPerspectiveCamera.h \
+    lib/database/include/Inventor/nodes/SoPickStyle.h \
+    lib/database/include/Inventor/nodes/SoPointLight.h \
+    lib/database/include/Inventor/nodes/SoPointSet.h \
+    lib/database/include/Inventor/nodes/SoProfile.h \
+    lib/database/include/Inventor/nodes/SoProfileCoordinate2.h \
+    lib/database/include/Inventor/nodes/SoProfileCoordinate3.h \
+    lib/database/include/Inventor/nodes/SoQuadMesh.h \
+    lib/database/include/Inventor/nodes/SoResetTransform.h \
+    lib/database/include/Inventor/nodes/SoRotation.h \
+    lib/database/include/Inventor/nodes/SoRotationXYZ.h \
+    lib/database/include/Inventor/nodes/SoRotor.h \
+    lib/database/include/Inventor/nodes/SoScale.h \
+    lib/database/include/Inventor/nodes/SoSeparator.h \
+    lib/database/include/Inventor/nodes/SoShape.h \
+    lib/database/include/Inventor/nodes/SoShapeHints.h \
+    lib/database/include/Inventor/nodes/SoShuttle.h \
+    lib/database/include/Inventor/nodes/SoSphere.h \
+    lib/database/include/Inventor/nodes/SoSpotLight.h \
+    lib/database/include/Inventor/nodes/SoSubNode.h \
+    lib/database/include/Inventor/nodes/SoSwitch.h \
+    lib/database/include/Inventor/nodes/SoText2.h \
+    lib/database/include/Inventor/nodes/SoText3.h \
+    lib/database/include/Inventor/nodes/SoTexture2.h \
+    lib/database/include/Inventor/nodes/SoTexture2Transform.h \
+    lib/database/include/Inventor/nodes/SoTextureCoordinate2.h \
+    lib/database/include/Inventor/nodes/SoTextureCoordinateBinding.h \
+    lib/database/include/Inventor/nodes/SoTextureCoordinateDefault.h \
+    lib/database/include/Inventor/nodes/SoTextureCoordinateEnvironment.h \
+    lib/database/include/Inventor/nodes/SoTextureCoordinateFunction.h \
+    lib/database/include/Inventor/nodes/SoTextureCoordinatePlane.h \
+    lib/database/include/Inventor/nodes/SoTransform.h \
+    lib/database/include/Inventor/nodes/SoTransformSeparator.h \
+    lib/database/include/Inventor/nodes/SoTransformation.h \
+    lib/database/include/Inventor/nodes/SoTranslation.h \
+    lib/database/include/Inventor/nodes/SoTriangleStripSet.h \
+    lib/database/include/Inventor/nodes/SoUnits.h \
+    lib/database/include/Inventor/nodes/SoVertexArray.h \
+    lib/database/include/Inventor/nodes/SoVertexProperty.h \
+    lib/database/include/Inventor/nodes/SoVertexShape.h \
+    lib/database/include/Inventor/nodes/SoWWWAnchor.h \
+    lib/database/include/Inventor/nodes/SoWWWInline.h \
+    lib/database/include/Inventor/nodes/glVertArray.h \
+    lib/database/include/Inventor/projectors/SbCylinderPlaneProjector.h \
+    lib/database/include/Inventor/projectors/SbCylinderProjector.h \
+    lib/database/include/Inventor/projectors/SbCylinderSectionProjector.h \
+    lib/database/include/Inventor/projectors/SbCylinderSheetProjector.h \
+    lib/database/include/Inventor/projectors/SbLineProjector.h \
+    lib/database/include/Inventor/projectors/SbPlaneProjector.h \
+    lib/database/include/Inventor/projectors/SbProjector.h \
+    lib/database/include/Inventor/projectors/SbProjectors.h \
+    lib/database/include/Inventor/projectors/SbSpherePlaneProjector.h \
+    lib/database/include/Inventor/projectors/SbSphereProjector.h \
+    lib/database/include/Inventor/projectors/SbSphereSectionProjector.h \
+    lib/database/include/Inventor/projectors/SbSphereSheetProjector.h \
+    lib/database/include/Inventor/sensors/SoAlarmSensor.h \
+    lib/database/include/Inventor/sensors/SoDataSensor.h \
+    lib/database/include/Inventor/sensors/SoDelayQueueSensor.h \
+    lib/database/include/Inventor/sensors/SoFieldSensor.h \
+    lib/database/include/Inventor/sensors/SoIdleSensor.h \
+    lib/database/include/Inventor/sensors/SoNodeSensor.h \
+    lib/database/include/Inventor/sensors/SoOneShotSensor.h \
+    lib/database/include/Inventor/sensors/SoPathSensor.h \
+    lib/database/include/Inventor/sensors/SoSensor.h \
+    lib/database/include/Inventor/sensors/SoSensorManager.h \
+    lib/database/include/Inventor/sensors/SoSensors.h \
+    lib/database/include/Inventor/sensors/SoTimerQueueSensor.h \
+    lib/database/include/Inventor/sensors/SoTimerSensor.h \
+    lib/database/include/SoDebug.h \
+    lib/database/include/SoUnknownEngine.h \
+    lib/database/include/SoUnknownNode.h \
+    lib/database/include/machine.h \
+    lib/database/src/so/engines/SoCalcExpr.h \
+    lib/database/src/so/engines/SoEngineUtil.h \
+    lib/database/src/so/engines/SoFieldConverters.h \
+    lib/database/src/so/fields/SoGlobalField.h \
+    lib/database/src/so/nodes/nurbs/SoAddPrefix.h \
+    lib/database/src/so/nodes/nurbs/SoCurveMaps.h \
+    lib/database/src/so/nodes/nurbs/SoCurveRender.h \
+    lib/database/src/so/nodes/nurbs/SoCurveRenderEval.h \
+    lib/database/src/so/nodes/nurbs/SoGLRender.h \
+    lib/database/src/so/nodes/nurbs/SoPickEvals.h \
+    lib/database/src/so/nodes/nurbs/SoPickMaps.h \
+    lib/database/src/so/nodes/nurbs/SoPickRender.h \
+    lib/database/src/so/nodes/nurbs/SoPrimEvals.h \
+    lib/database/src/so/nodes/nurbs/SoPrimMaps.h \
+    lib/database/src/so/nodes/nurbs/SoPrimRender.h \
+    lib/database/src/so/nodes/nurbs/_defines.h \
+    lib/database/src/so/nodes/nurbs/_undefs.h \
+    lib/database/src/so/nodes/nurbs/clients/gl4base.h \
+    lib/database/src/so/nodes/nurbs/clients/gl4curveval.h \
+    lib/database/src/so/nodes/nurbs/clients/gl4surfeval.h \
+    lib/database/src/so/nodes/nurbs/clients/gl4types.h \
+    lib/database/src/so/nodes/nurbs/clients/isocurveeval.h \
+    lib/database/src/so/nodes/nurbs/clients/softcurvemaps.h \
+    lib/database/src/so/nodes/nurbs/clients/softcurveval.h \
+    lib/database/src/so/nodes/nurbs/clients/softcurvmap.h \
+    lib/database/src/so/nodes/nurbs/clients/softrenderer.h \
+    lib/database/src/so/nodes/nurbs/clients/softsurfacemaps.h \
+    lib/database/src/so/nodes/nurbs/clients/softsurfeval.h \
+    lib/database/src/so/nodes/nurbs/clients/softsurfmap.h \
+    lib/database/src/so/nodes/nurbs/clients/typestringtable.h \
+    lib/database/src/so/nodes/nurbs/head/arc.h \
+    lib/database/src/so/nodes/nurbs/head/arcsorter.h \
+    lib/database/src/so/nodes/nurbs/head/arctess.h \
+    lib/database/src/so/nodes/nurbs/head/backend.h \
+    lib/database/src/so/nodes/nurbs/head/basiccrveval.h \
+    lib/database/src/so/nodes/nurbs/head/basicsurfeval.h \
+    lib/database/src/so/nodes/nurbs/head/bezierarc.h \
+    lib/database/src/so/nodes/nurbs/head/bin.h \
+    lib/database/src/so/nodes/nurbs/head/bufpool.h \
+    lib/database/src/so/nodes/nurbs/head/cachingeval.h \
+    lib/database/src/so/nodes/nurbs/head/coveandtiler.h \
+    lib/database/src/so/nodes/nurbs/head/curve.h \
+    lib/database/src/so/nodes/nurbs/head/curvelist.h \
+    lib/database/src/so/nodes/nurbs/head/defines.h \
+    lib/database/src/so/nodes/nurbs/head/displaylist.h \
+    lib/database/src/so/nodes/nurbs/head/displaymode.h \
+    lib/database/src/so/nodes/nurbs/head/flist.h \
+    lib/database/src/so/nodes/nurbs/head/flistsorter.h \
+    lib/database/src/so/nodes/nurbs/head/glimports.h \
+    lib/database/src/so/nodes/nurbs/head/gridline.h \
+    lib/database/src/so/nodes/nurbs/head/gridtrimvertex.h \
+    lib/database/src/so/nodes/nurbs/head/gridvertex.h \
+    lib/database/src/so/nodes/nurbs/head/hull.h \
+    lib/database/src/so/nodes/nurbs/head/jarcloc.h \
+    lib/database/src/so/nodes/nurbs/head/jumpbuffer.h \
+    lib/database/src/so/nodes/nurbs/head/knot.h \
+    lib/database/src/so/nodes/nurbs/head/knotvector.h \
+    lib/database/src/so/nodes/nurbs/head/mapdesc.h \
+    lib/database/src/so/nodes/nurbs/head/maplist.h \
+    lib/database/src/so/nodes/nurbs/head/mesher.h \
+    lib/database/src/so/nodes/nurbs/head/myassert.h \
+    lib/database/src/so/nodes/nurbs/head/myglimports.h \
+    lib/database/src/so/nodes/nurbs/head/mymath.h \
+    lib/database/src/so/nodes/nurbs/head/mysetjmp.h \
+    lib/database/src/so/nodes/nurbs/head/mystdio.h \
+    lib/database/src/so/nodes/nurbs/head/mystdlib.h \
+    lib/database/src/so/nodes/nurbs/head/mystring.h \
+    lib/database/src/so/nodes/nurbs/head/nurbsconsts.h \
+    lib/database/src/so/nodes/nurbs/head/nurbstess.h \
+    lib/database/src/so/nodes/nurbs/head/patch.h \
+    lib/database/src/so/nodes/nurbs/head/patchlist.h \
+    lib/database/src/so/nodes/nurbs/head/pwlarc.h \
+    lib/database/src/so/nodes/nurbs/head/quilt.h \
+    lib/database/src/so/nodes/nurbs/head/reader.h \
+    lib/database/src/so/nodes/nurbs/head/renderhints.h \
+    lib/database/src/so/nodes/nurbs/head/simplemath.h \
+    lib/database/src/so/nodes/nurbs/head/slicer.h \
+    lib/database/src/so/nodes/nurbs/head/sorter.h \
+    lib/database/src/so/nodes/nurbs/head/subdivider.h \
+    lib/database/src/so/nodes/nurbs/head/trimline.h \
+    lib/database/src/so/nodes/nurbs/head/trimregion.h \
+    lib/database/src/so/nodes/nurbs/head/trimvertex.h \
+    lib/database/src/so/nodes/nurbs/head/trimvertpool.h \
+    lib/database/src/so/nodes/nurbs/head/types.h \
+    lib/database/src/so/nodes/nurbs/head/uarray.h \
+    lib/database/src/so/nodes/nurbs/head/varray.h \
+    lib/database/src/so/nodes/readGIF.h \
+    lib/database/src/so/upgraders/SoUpgraders.h \
+    lib/database/src/so/upgraders/SoV1DrawStyle.h \
+    lib/database/src/so/upgraders/SoV1Environment.h \
+    lib/database/src/so/upgraders/SoV1IndexedTriangleMesh.h \
+    lib/database/src/so/upgraders/SoV1LayerGroup.h \
+    lib/database/src/so/upgraders/SoV1LightModel.h \
+    lib/database/src/so/upgraders/SoV1Material.h \
+    lib/database/src/so/upgraders/SoV1PackedColor.h \
+    lib/database/src/so/upgraders/SoV1PickStyle.h \
+    lib/database/src/so/upgraders/SoV1Separator.h \
+    lib/database/src/so/upgraders/SoV1ShapeHints.h \
+    lib/database/src/so/upgraders/SoV1Text2.h \
+    lib/database/src/so/upgraders/SoV1Text3.h \
+    lib/database/src/so/upgraders/SoV1Texture2.h \
+    lib/database/src/so/upgraders/SoV1TextureCoordinateCube.h \
+    lib/database/src/so/upgraders/SoV1TextureCoordinateCylinder.h \
+    lib/database/src/so/upgraders/SoV1TextureCoordinateEnvironment.h \
+    lib/database/src/so/upgraders/SoV1TextureCoordinatePlane.h \
+    lib/database/src/so/upgraders/SoV1TextureCoordinateSphere.h \
+    lib/database/src/so/upgraders/SoV2AsciiText.h \
+    lib/database/src/so/upgraders/SoV2FontStyle.h \
+    lib/database/src/so/upgraders/SoV2LOD.h \
+    lib/database/src/so/upgraders/SoV2MaterialIndex.h \
+    lib/database/src/so/upgraders/SoV2Text2.h \
+    lib/database/src/so/upgraders/SoV2Text3.h \
+    lib/database/src/so/upgraders/SoV2VertexProperty.h \
+    lib/database/src/so/upgraders/SoV2WWWAnchor.h \
+    lib/database/src/so/upgraders/SoV2WWWInline.h \
+    lib/interaction/include/Inventor/SoInteraction.h \
+    lib/interaction/include/Inventor/SoSceneManager.h \
+    lib/interaction/include/Inventor/actions/SoBoxHighlightRenderAction.h \
+    lib/interaction/include/Inventor/actions/SoLineHighlightRenderAction.h \
+    lib/interaction/include/Inventor/draggers/SoCenterballDragger.h \
+    lib/interaction/include/Inventor/draggers/SoDirectionalLightDragger.h \
+    lib/interaction/include/Inventor/draggers/SoDragPointDragger.h \
+    lib/interaction/include/Inventor/draggers/SoDragger.h \
+    lib/interaction/include/Inventor/draggers/SoHandleBoxDragger.h \
+    lib/interaction/include/Inventor/draggers/SoJackDragger.h \
+    lib/interaction/include/Inventor/draggers/SoPointLightDragger.h \
+    lib/interaction/include/Inventor/draggers/SoRotateCylindricalDragger.h \
+    lib/interaction/include/Inventor/draggers/SoRotateDiscDragger.h \
+    lib/interaction/include/Inventor/draggers/SoRotateSphericalDragger.h \
+    lib/interaction/include/Inventor/draggers/SoScale1Dragger.h \
+    lib/interaction/include/Inventor/draggers/SoScale2Dragger.h \
+    lib/interaction/include/Inventor/draggers/SoScale2UniformDragger.h \
+    lib/interaction/include/Inventor/draggers/SoScaleUniformDragger.h \
+    lib/interaction/include/Inventor/draggers/SoSpotLightDragger.h \
+    lib/interaction/include/Inventor/draggers/SoTabBoxDragger.h \
+    lib/interaction/include/Inventor/draggers/SoTabPlaneDragger.h \
+    lib/interaction/include/Inventor/draggers/SoTrackballDragger.h \
+    lib/interaction/include/Inventor/draggers/SoTransformBoxDragger.h \
+    lib/interaction/include/Inventor/draggers/SoTransformerDragger.h \
+    lib/interaction/include/Inventor/draggers/SoTranslate1Dragger.h \
+    lib/interaction/include/Inventor/draggers/SoTranslate2Dragger.h \
+    lib/interaction/include/Inventor/manips/SoCenterballManip.h \
+    lib/interaction/include/Inventor/manips/SoDirectionalLightManip.h \
+    lib/interaction/include/Inventor/manips/SoHandleBoxManip.h \
+    lib/interaction/include/Inventor/manips/SoJackManip.h \
+    lib/interaction/include/Inventor/manips/SoPointLightManip.h \
+    lib/interaction/include/Inventor/manips/SoSpotLightManip.h \
+    lib/interaction/include/Inventor/manips/SoTabBoxManip.h \
+    lib/interaction/include/Inventor/manips/SoTrackballManip.h \
+    lib/interaction/include/Inventor/manips/SoTransformBoxManip.h \
+    lib/interaction/include/Inventor/manips/SoTransformManip.h \
+    lib/interaction/include/Inventor/manips/SoTransformerManip.h \
+    lib/interaction/include/Inventor/nodekits/SoInteractionKit.h \
+    lib/interaction/include/Inventor/nodes/SoAntiSquish.h \
+    lib/interaction/include/Inventor/nodes/SoSelection.h \
+    lib/interaction/include/Inventor/nodes/SoSurroundScale.h \
+    lib/interaction/src/draggers/geom/SoCenterballDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoDirectionalLightDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoDragPointDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoHandleBoxDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoJackDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoPointLightDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoRotateCylindricalDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoRotateDiscDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoRotateSphericalDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoScale1DraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoScale2DraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoScale2UniformDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoScaleUniformDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoSpotLightDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoTabBoxDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoTabPlaneDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoTrackballDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoTransformBoxDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoTransformerDraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoTranslate1DraggerGeom.h \
+    lib/interaction/src/draggers/geom/SoTranslate2DraggerGeom.h \
+    lib/nodekits/include/Inventor/SoNodeKitPath.h \
+    lib/nodekits/include/Inventor/details/SoNodeKitDetail.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1AppearanceKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1BaseKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1CameraKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1ConeKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1CubeKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1CylinderKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1DirectionalLightKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1FaceSetKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1GroupKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1IndexedFaceSetKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1IndexedLineSetKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1IndexedNurbsCurveKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1IndexedNurbsSurfaceKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1IndexedTriangleMeshKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1LightKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1LineSetKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1NodeKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1NodekitCatalog.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1NodekitParts.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1NurbsCurveKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1NurbsSurfaceKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1OrthographicCameraKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1PerspectiveCameraKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1PointLightKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1PointSetKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1QuadMeshKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1SceneKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1ShapeKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1SphereKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1SpotLightKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1SubKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1Text2Kit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1Text3Kit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1TriangleStripSetKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1VertexShapeKit.h \
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1WrapperKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoAppearanceKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoBaseKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoCameraKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoLightKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoNodeKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoNodeKitListPart.h \
+    lib/nodekits/include/Inventor/nodekits/SoNodekitCatalog.h \
+    lib/nodekits/include/Inventor/nodekits/SoNodekitParts.h \
+    lib/nodekits/include/Inventor/nodekits/SoSceneKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoSeparatorKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoShapeKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoSubKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoWrapperKit.h
+
+PPSOURCES += \
+    lib/database/src/so/nodes/SoCone.pp \
+    lib/database/src/so/nodes/SoCube.pp \
+    lib/database/src/so/nodes/SoCylinder.pp \
+    lib/database/src/so/nodes/SoFaceSet.pp \
+    lib/database/src/so/nodes/SoIndexedFaceSet.pp \
+    lib/database/src/so/nodes/SoIndexedLineSet.pp \
+    lib/database/src/so/nodes/SoIndexedTriangleStripSet.pp \
+    lib/database/src/so/nodes/SoLineSet.pp \
+    lib/database/src/so/nodes/SoPointSet.pp \
+    lib/database/src/so/nodes/SoQuadMesh.pp \
+    lib/database/src/so/nodes/SoSphere.pp \
+    lib/database/src/so/nodes/SoTriangleStripSet.pp
+
+YACCSOURCES = \
+    lib/database/src/so/engines/SoCalcParse.y
+
+SOURCES += \
+    lib/database/src/sb/SbBox.c++ \
+    lib/database/src/sb/SbColor.c++ \
+    lib/database/src/sb/SbCylinder.c++ \
+    lib/database/src/sb/SbDict.c++ \
+    lib/database/src/sb/SbLine.c++ \
+    lib/database/src/sb/SbMatrix.c++ \
+    lib/database/src/sb/SbName.c++ \
+    lib/database/src/sb/SbPList.c++ \
+    lib/database/src/sb/SbPlane.c++ \
+    lib/database/src/sb/SbRotation.c++ \
+    lib/database/src/sb/SbSphere.c++ \
+    lib/database/src/sb/SbString.c++ \
+    lib/database/src/sb/SbTime.c++ \
+    lib/database/src/sb/SbVec.c++ \
+    lib/database/src/sb/SbView.c++ \
+    lib/database/src/sb/SbViewportRegion.c++ \
+    lib/database/src/sb/projectors/SbCylinderPlaneProjector.c++ \
+    lib/database/src/sb/projectors/SbCylinderProjector.c++ \
+    lib/database/src/sb/projectors/SbCylinderSectionProjector.c++ \
+    lib/database/src/sb/projectors/SbCylinderSheetProjector.c++ \
+    lib/database/src/sb/projectors/SbLineProjector.c++ \
+    lib/database/src/sb/projectors/SbPlaneProjector.c++ \
+    lib/database/src/sb/projectors/SbProjector.c++ \
+    lib/database/src/sb/projectors/SbSpherePlaneProjector.c++ \
+    lib/database/src/sb/projectors/SbSphereProjector.c++ \
+    lib/database/src/sb/projectors/SbSphereSectionProjector.c++ \
+    lib/database/src/sb/projectors/SbSphereSheetProjector.c++ \
+    lib/database/src/so/SoAuditorList.c++ \
+    lib/database/src/so/SoBase.c++ \
+    lib/database/src/so/SoByteStream.c++ \
+    lib/database/src/so/SoCBList.c++ \
+    lib/database/src/so/SoChildList.c++ \
+    lib/database/src/so/SoCompactPathList.c++ \
+    lib/database/src/so/SoDB.c++ \
+    lib/database/src/so/SoDebug.c++ \
+    lib/database/src/so/SoInput.c++ \
+    lib/database/src/so/SoLists.c++ \
+    lib/database/src/so/SoNormalGenerator.c++ \
+    lib/database/src/so/SoNotification.c++ \
+    lib/database/src/so/SoOutput.c++ \
+    lib/database/src/so/SoPath.c++ \
+    lib/database/src/so/SoPickedPoint.c++ \
+    lib/database/src/so/SoPrimitiveVertex.c++ \
+    lib/database/src/so/SoState.c++ \
+    lib/database/src/so/SoTempPath.c++ \
+    lib/database/src/so/SoTranscribe.c++ \
+    lib/database/src/so/SoType.c++ \
+    lib/database/src/so/actions/SoAction.c++ \
+    lib/database/src/so/actions/SoActionInit.c++ \
+    lib/database/src/so/actions/SoCallbackAction.c++ \
+    lib/database/src/so/actions/SoGLRenderAction.c++ \
+    lib/database/src/so/actions/SoGetBoundingBoxAction.c++ \
+    lib/database/src/so/actions/SoGetMatrixAction.c++ \
+    lib/database/src/so/actions/SoHandleEventAction.c++ \
+    lib/database/src/so/actions/SoPickAction.c++ \
+    lib/database/src/so/actions/SoRayPickAction.c++ \
+    lib/database/src/so/actions/SoSearchAction.c++ \
+    lib/database/src/so/actions/SoWriteAction.c++ \
+    lib/database/src/so/bundles/SoMaterialBundle.c++ \
+    lib/database/src/so/bundles/SoNormalBundle.c++ \
+    lib/database/src/so/bundles/SoTextureCoordinateBundle.c++ \
+    lib/database/src/so/caches/SoBoundingBoxCache.c++ \
+    lib/database/src/so/caches/SoCache.c++ \
+    lib/database/src/so/caches/SoGLCacheList.c++ \
+    lib/database/src/so/caches/SoGLRenderCache.c++ \
+    lib/database/src/so/caches/SoNormalCache.c++ \
+    lib/database/src/so/details/SoConeDetail.c++ \
+    lib/database/src/so/details/SoCubeDetail.c++ \
+    lib/database/src/so/details/SoCylinderDetail.c++ \
+    lib/database/src/so/details/SoDetail.c++ \
+    lib/database/src/so/details/SoDetailInit.c++ \
+    lib/database/src/so/details/SoFaceDetail.c++ \
+    lib/database/src/so/details/SoLineDetail.c++ \
+    lib/database/src/so/details/SoPointDetail.c++ \
+    lib/database/src/so/details/SoTextDetail.c++ \
+    lib/database/src/so/elements/SoAccumulatedElement.c++ \
+    lib/database/src/so/elements/SoAmbientColorElement.c++ \
+    lib/database/src/so/elements/SoBBoxModelMatrixElement.c++ \
+    lib/database/src/so/elements/SoCacheElement.c++ \
+    lib/database/src/so/elements/SoClipPlaneElement.c++ \
+    lib/database/src/so/elements/SoComplexityElement.c++ \
+    lib/database/src/so/elements/SoComplexityTypeElement.c++ \
+    lib/database/src/so/elements/SoCoordinateElement.c++ \
+    lib/database/src/so/elements/SoCreaseAngleElement.c++ \
+    lib/database/src/so/elements/SoDiffuseColorElement.c++ \
+    lib/database/src/so/elements/SoDrawStyleElement.c++ \
+    lib/database/src/so/elements/SoElement.c++ \
+    lib/database/src/so/elements/SoElementInit.c++ \
+    lib/database/src/so/elements/SoEmissiveColorElement.c++ \
+    lib/database/src/so/elements/SoFloatElement.c++ \
+    lib/database/src/so/elements/SoFocalDistanceElement.c++ \
+    lib/database/src/so/elements/SoFontNameElement.c++ \
+    lib/database/src/so/elements/SoFontSizeElement.c++ \
+    lib/database/src/so/elements/SoGLAmbientColorElement.c++ \
+    lib/database/src/so/elements/SoGLCacheContextElement.c++ \
+    lib/database/src/so/elements/SoGLClipPlaneElement.c++ \
+    lib/database/src/so/elements/SoGLCoordinateElement.c++ \
+    lib/database/src/so/elements/SoGLDiffuseColorElement.c++ \
+    lib/database/src/so/elements/SoGLDrawStyleElement.c++ \
+    lib/database/src/so/elements/SoGLEmissiveColorElement.c++ \
+    lib/database/src/so/elements/SoGLLazyElement.c++ \
+    lib/database/src/so/elements/SoGLLightIdElement.c++ \
+    lib/database/src/so/elements/SoGLLinePatternElement.c++ \
+    lib/database/src/so/elements/SoGLLineWidthElement.c++ \
+    lib/database/src/so/elements/SoGLModelMatrixElement.c++ \
+    lib/database/src/so/elements/SoGLNormalElement.c++ \
+    lib/database/src/so/elements/SoGLPointSizeElement.c++ \
+    lib/database/src/so/elements/SoGLProjectionMatrixElement.c++ \
+    lib/database/src/so/elements/SoGLRenderPassElement.c++ \
+    lib/database/src/so/elements/SoGLShapeHintsElement.c++ \
+    lib/database/src/so/elements/SoGLShininessElement.c++ \
+    lib/database/src/so/elements/SoGLSpecularColorElement.c++ \
+    lib/database/src/so/elements/SoGLTextureCoordinateElement.c++ \
+    lib/database/src/so/elements/SoGLTextureEnabledElement.c++ \
+    lib/database/src/so/elements/SoGLTextureImageElement.c++ \
+    lib/database/src/so/elements/SoGLTextureMatrixElement.c++ \
+    lib/database/src/so/elements/SoGLUpdateAreaElement.c++ \
+    lib/database/src/so/elements/SoGLViewingMatrixElement.c++ \
+    lib/database/src/so/elements/SoGLViewportRegionElement.c++ \
+    lib/database/src/so/elements/SoInt32Element.c++ \
+    lib/database/src/so/elements/SoLazyElement.c++ \
+    lib/database/src/so/elements/SoLightAttenuationElement.c++ \
+    lib/database/src/so/elements/SoLinePatternElement.c++ \
+    lib/database/src/so/elements/SoLineWidthElement.c++ \
+    lib/database/src/so/elements/SoLocalBBoxMatrixElement.c++ \
+    lib/database/src/so/elements/SoMaterialBindingElement.c++ \
+    lib/database/src/so/elements/SoModelMatrixElement.c++ \
+    lib/database/src/so/elements/SoNormalBindingElement.c++ \
+    lib/database/src/so/elements/SoNormalElement.c++ \
+    lib/database/src/so/elements/SoOverrideElement.c++ \
+    lib/database/src/so/elements/SoPickRayElement.c++ \
+    lib/database/src/so/elements/SoPickStyleElement.c++ \
+    lib/database/src/so/elements/SoPointSizeElement.c++ \
+    lib/database/src/so/elements/SoProfileCoordinateElement.c++ \
+    lib/database/src/so/elements/SoProfileElement.c++ \
+    lib/database/src/so/elements/SoProjectionMatrixElement.c++ \
+    lib/database/src/so/elements/SoReplacedElement.c++ \
+    lib/database/src/so/elements/SoShapeHintsElement.c++ \
+    lib/database/src/so/elements/SoShapeStyleElement.c++ \
+    lib/database/src/so/elements/SoShininessElement.c++ \
+    lib/database/src/so/elements/SoSpecularColorElement.c++ \
+    lib/database/src/so/elements/SoSwitchElement.c++ \
+    lib/database/src/so/elements/SoTextureCoordinateBindingElement.c++ \
+    lib/database/src/so/elements/SoTextureCoordinateElement.c++ \
+    lib/database/src/so/elements/SoTextureImageElement.c++ \
+    lib/database/src/so/elements/SoTextureMatrixElement.c++ \
+    lib/database/src/so/elements/SoTextureQualityElement.c++ \
+    lib/database/src/so/elements/SoUnitsElement.c++ \
+    lib/database/src/so/elements/SoViewVolumeElement.c++ \
+    lib/database/src/so/elements/SoViewingMatrixElement.c++ \
+    lib/database/src/so/elements/SoViewportRegionElement.c++ \
+    lib/database/src/so/elements/SoWindowElement.c++ \
+    lib/database/src/so/engines/SoBoolOperation.c++ \
+    lib/database/src/so/engines/SoCalcExpr.c++ \
+    lib/database/src/so/engines/SoCalculator.c++ \
+    lib/database/src/so/engines/SoCompose.c++ \
+    lib/database/src/so/engines/SoComputeBoundingBox.c++ \
+    lib/database/src/so/engines/SoConcatenate.c++ \
+    lib/database/src/so/engines/SoCounter.c++ \
+    lib/database/src/so/engines/SoElapsedTime.c++ \
+    lib/database/src/so/engines/SoEngine.c++ \
+    lib/database/src/so/engines/SoEngineInit.c++ \
+    lib/database/src/so/engines/SoFieldConverter.c++ \
+    lib/database/src/so/engines/SoFieldConverters.c++ \
+    lib/database/src/so/engines/SoGate.c++ \
+    lib/database/src/so/engines/SoInterpolate.c++ \
+    lib/database/src/so/engines/SoOnOff.c++ \
+    lib/database/src/so/engines/SoOneShot.c++ \
+    lib/database/src/so/engines/SoOutputData.c++ \
+    lib/database/src/so/engines/SoSelectOne.c++ \
+    lib/database/src/so/engines/SoTimeCounter.c++ \
+    lib/database/src/so/engines/SoTransformVec3f.c++ \
+    lib/database/src/so/engines/SoTriggerAny.c++ \
+    lib/database/src/so/engines/SoUnknownEngine.c++ \
+    lib/database/src/so/errors/SoDebugError.c++ \
+    lib/database/src/so/errors/SoError.c++ \
+    lib/database/src/so/errors/SoErrorInit.c++ \
+    lib/database/src/so/errors/SoMemoryError.c++ \
+    lib/database/src/so/errors/SoReadError.c++ \
+    lib/database/src/so/events/SoButtonEvent.c++ \
+    lib/database/src/so/events/SoEvent.c++ \
+    lib/database/src/so/events/SoEventInit.c++ \
+    lib/database/src/so/events/SoKeyboardEvent.c++ \
+    lib/database/src/so/events/SoLocation2Event.c++ \
+    lib/database/src/so/events/SoMotion3Event.c++ \
+    lib/database/src/so/events/SoMouseButtonEvent.c++ \
+    lib/database/src/so/events/SoSpaceballButtonEvent.c++ \
+    lib/database/src/so/fields/SoField.c++ \
+    lib/database/src/so/fields/SoFieldContainer.c++ \
+    lib/database/src/so/fields/SoFieldData.c++ \
+    lib/database/src/so/fields/SoFieldInit.c++ \
+    lib/database/src/so/fields/SoGlobalField.c++ \
+    lib/database/src/so/fields/SoMFBitMask.c++ \
+    lib/database/src/so/fields/SoMFBool.c++ \
+    lib/database/src/so/fields/SoMFColor.c++ \
+    lib/database/src/so/fields/SoMFEngine.c++ \
+    lib/database/src/so/fields/SoMFEnum.c++ \
+    lib/database/src/so/fields/SoMFFloat.c++ \
+    lib/database/src/so/fields/SoMFInt32.c++ \
+    lib/database/src/so/fields/SoMFMatrix.c++ \
+    lib/database/src/so/fields/SoMFName.c++ \
+    lib/database/src/so/fields/SoMFNode.c++ \
+    lib/database/src/so/fields/SoMFPath.c++ \
+    lib/database/src/so/fields/SoMFPlane.c++ \
+    lib/database/src/so/fields/SoMFRotation.c++ \
+    lib/database/src/so/fields/SoMFShort.c++ \
+    lib/database/src/so/fields/SoMFString.c++ \
+    lib/database/src/so/fields/SoMFTime.c++ \
+    lib/database/src/so/fields/SoMFUInt32.c++ \
+    lib/database/src/so/fields/SoMFUShort.c++ \
+    lib/database/src/so/fields/SoMFVec2f.c++ \
+    lib/database/src/so/fields/SoMFVec3f.c++ \
+    lib/database/src/so/fields/SoMFVec4f.c++ \
+    lib/database/src/so/fields/SoSFBitMask.c++ \
+    lib/database/src/so/fields/SoSFBool.c++ \
+    lib/database/src/so/fields/SoSFColor.c++ \
+    lib/database/src/so/fields/SoSFEngine.c++ \
+    lib/database/src/so/fields/SoSFEnum.c++ \
+    lib/database/src/so/fields/SoSFFloat.c++ \
+    lib/database/src/so/fields/SoSFImage.c++ \
+    lib/database/src/so/fields/SoSFInt32.c++ \
+    lib/database/src/so/fields/SoSFMatrix.c++ \
+    lib/database/src/so/fields/SoSFName.c++ \
+    lib/database/src/so/fields/SoSFNode.c++ \
+    lib/database/src/so/fields/SoSFPath.c++ \
+    lib/database/src/so/fields/SoSFPlane.c++ \
+    lib/database/src/so/fields/SoSFRotation.c++ \
+    lib/database/src/so/fields/SoSFShort.c++ \
+    lib/database/src/so/fields/SoSFString.c++ \
+    lib/database/src/so/fields/SoSFTime.c++ \
+    lib/database/src/so/fields/SoSFTrigger.c++ \
+    lib/database/src/so/fields/SoSFUInt32.c++ \
+    lib/database/src/so/fields/SoSFUShort.c++ \
+    lib/database/src/so/fields/SoSFVec2f.c++ \
+    lib/database/src/so/fields/SoSFVec3f.c++ \
+    lib/database/src/so/fields/SoSFVec4f.c++ \
+    lib/database/src/so/nodes/SoAnnotation.c++ \
+    lib/database/src/so/nodes/SoArray.c++ \
+    lib/database/src/so/nodes/SoAsciiText.c++ \
+    lib/database/src/so/nodes/SoBaseColor.c++ \
+    lib/database/src/so/nodes/SoBlinker.c++ \
+    lib/database/src/so/nodes/SoCallback.c++ \
+    lib/database/src/so/nodes/SoCamera.c++ \
+    lib/database/src/so/nodes/SoClipPlane.c++ \
+    lib/database/src/so/nodes/SoColorIndex.c++ \
+    lib/database/src/so/nodes/SoComplexity.c++ \
+    lib/database/src/so/nodes/SoCoordinate3.c++ \
+    lib/database/src/so/nodes/SoCoordinate4.c++ \
+    lib/database/src/so/nodes/SoDirectionalLight.c++ \
+    lib/database/src/so/nodes/SoDrawStyle.c++ \
+    lib/database/src/so/nodes/SoEnvironment.c++ \
+    lib/database/src/so/nodes/SoEventCallback.c++ \
+    lib/database/src/so/nodes/SoFile.c++ \
+    lib/database/src/so/nodes/SoFont.c++ \
+    lib/database/src/so/nodes/SoFontStyle.c++ \
+    lib/database/src/so/nodes/SoGroup.c++ \
+    lib/database/src/so/nodes/SoIndexedNurbsCurve.c++ \
+    lib/database/src/so/nodes/SoIndexedNurbsSurface.c++ \
+    lib/database/src/so/nodes/SoIndexedShape.c++ \
+    lib/database/src/so/nodes/SoInfo.c++ \
+    lib/database/src/so/nodes/SoLOD.c++ \
+    lib/database/src/so/nodes/SoLabel.c++ \
+    lib/database/src/so/nodes/SoLevelOfDetail.c++ \
+    lib/database/src/so/nodes/SoLight.c++ \
+    lib/database/src/so/nodes/SoLightModel.c++ \
+    lib/database/src/so/nodes/SoLinearProfile.c++ \
+    lib/database/src/so/nodes/SoLocateHighlight.c++ \
+    lib/database/src/so/nodes/SoMaterial.c++ \
+    lib/database/src/so/nodes/SoMaterialBinding.c++ \
+    lib/database/src/so/nodes/SoMatrixTransform.c++ \
+    lib/database/src/so/nodes/SoMultipleCopy.c++ \
+    lib/database/src/so/nodes/SoNode.c++ \
+    lib/database/src/so/nodes/SoNodeInit.c++ \
+    lib/database/src/so/nodes/SoNonIndexedShape.c++ \
+    lib/database/src/so/nodes/SoNormal.c++ \
+    lib/database/src/so/nodes/SoNormalBinding.c++ \
+    lib/database/src/so/nodes/SoNurbsCurve.c++ \
+    lib/database/src/so/nodes/SoNurbsProfile.c++ \
+    lib/database/src/so/nodes/SoNurbsSurface.c++ \
+    lib/database/src/so/nodes/SoOrthographicCamera.c++ \
+    lib/database/src/so/nodes/SoPackedColor.c++ \
+    lib/database/src/so/nodes/SoPathSwitch.c++ \
+    lib/database/src/so/nodes/SoPendulum.c++ \
+    lib/database/src/so/nodes/SoPerspectiveCamera.c++ \
+    lib/database/src/so/nodes/SoPickStyle.c++ \
+    lib/database/src/so/nodes/SoPointLight.c++ \
+    lib/database/src/so/nodes/SoProfile.c++ \
+    lib/database/src/so/nodes/SoProfileCoordinate2.c++ \
+    lib/database/src/so/nodes/SoProfileCoordinate3.c++ \
+    lib/database/src/so/nodes/SoResetTransform.c++ \
+    lib/database/src/so/nodes/SoRotation.c++ \
+    lib/database/src/so/nodes/SoRotationXYZ.c++ \
+    lib/database/src/so/nodes/SoRotor.c++ \
+    lib/database/src/so/nodes/SoScale.c++ \
+    lib/database/src/so/nodes/SoSeparator.c++ \
+    lib/database/src/so/nodes/SoShape.c++ \
+    lib/database/src/so/nodes/SoShapeHints.c++ \
+    lib/database/src/so/nodes/SoShuttle.c++ \
+    lib/database/src/so/nodes/SoSpotLight.c++ \
+    lib/database/src/so/nodes/SoSwitch.c++ \
+    lib/database/src/so/nodes/SoText2.c++ \
+    lib/database/src/so/nodes/SoText3.c++ \
+    lib/database/src/so/nodes/SoTexture2.c++ \
+    lib/database/src/so/nodes/SoTexture2Transform.c++ \
+    lib/database/src/so/nodes/SoTextureCoordinate2.c++ \
+    lib/database/src/so/nodes/SoTextureCoordinateBinding.c++ \
+    lib/database/src/so/nodes/SoTextureCoordinateDefault.c++ \
+    lib/database/src/so/nodes/SoTextureCoordinateEnvironment.c++ \
+    lib/database/src/so/nodes/SoTextureCoordinateFunction.c++ \
+    lib/database/src/so/nodes/SoTextureCoordinatePlane.c++ \
+    lib/database/src/so/nodes/SoTransform.c++ \
+    lib/database/src/so/nodes/SoTransformSeparator.c++ \
+    lib/database/src/so/nodes/SoTransformation.c++ \
+    lib/database/src/so/nodes/SoTranslation.c++ \
+    lib/database/src/so/nodes/SoUnits.c++ \
+    lib/database/src/so/nodes/SoUnknownNode.c++ \
+    lib/database/src/so/nodes/SoVertexArray.c++ \
+    lib/database/src/so/nodes/SoVertexProperty.c++ \
+    lib/database/src/so/nodes/SoVertexShape.c++ \
+    lib/database/src/so/nodes/SoWWWAnchor.c++ \
+    lib/database/src/so/nodes/SoWWWInline.c++ \
+    lib/database/src/so/nodes/nurbs/SoCurveMaps.c++ \
+    lib/database/src/so/nodes/nurbs/SoCurveRender.c++ \
+    lib/database/src/so/nodes/nurbs/SoCurveRndEvl.c++ \
+    lib/database/src/so/nodes/nurbs/SoGLRender.c++ \
+    lib/database/src/so/nodes/nurbs/SoPickEvals.c++ \
+    lib/database/src/so/nodes/nurbs/SoPickMaps.c++ \
+    lib/database/src/so/nodes/nurbs/SoPickRender.c++ \
+    lib/database/src/so/nodes/nurbs/SoPrimEvals.c++ \
+    lib/database/src/so/nodes/nurbs/SoPrimMaps.c++ \
+    lib/database/src/so/nodes/nurbs/SoPrimRender.c++ \
+    lib/database/src/so/nodes/nurbs/clients/nurbsClient.c++ \
+    lib/database/src/so/nodes/nurbs/libnurbs/libNurbs.c++ \
+    lib/database/src/so/sensors/SoAlarmSensor.c++ \
+    lib/database/src/so/sensors/SoDataSensor.c++ \
+    lib/database/src/so/sensors/SoDelayQueueSensor.c++ \
+    lib/database/src/so/sensors/SoFieldSensor.c++ \
+    lib/database/src/so/sensors/SoIdleSensor.c++ \
+    lib/database/src/so/sensors/SoNodeSensor.c++ \
+    lib/database/src/so/sensors/SoOneShotSensor.c++ \
+    lib/database/src/so/sensors/SoPathSensor.c++ \
+    lib/database/src/so/sensors/SoSensor.c++ \
+    lib/database/src/so/sensors/SoSensorMgr.c++ \
+    lib/database/src/so/sensors/SoTimerQueueSensor.c++ \
+    lib/database/src/so/sensors/SoTimerSensor.c++ \
+    lib/database/src/so/upgraders/SoUpgrader.c++ \
+    lib/database/src/so/upgraders/SoUpgraderInit.c++ \
+    lib/database/src/so/upgraders/SoV1CustomNode.c++ \
+    lib/database/src/so/upgraders/SoV1DrawStyle.c++ \
+    lib/database/src/so/upgraders/SoV1Environment.c++ \
+    lib/database/src/so/upgraders/SoV1IndexedTriangleMesh.c++ \
+    lib/database/src/so/upgraders/SoV1LayerGroup.c++ \
+    lib/database/src/so/upgraders/SoV1LightModel.c++ \
+    lib/database/src/so/upgraders/SoV1Material.c++ \
+    lib/database/src/so/upgraders/SoV1PackedColor.c++ \
+    lib/database/src/so/upgraders/SoV1PickStyle.c++ \
+    lib/database/src/so/upgraders/SoV1Separator.c++ \
+    lib/database/src/so/upgraders/SoV1ShapeHints.c++ \
+    lib/database/src/so/upgraders/SoV1Text2.c++ \
+    lib/database/src/so/upgraders/SoV1Text3.c++ \
+    lib/database/src/so/upgraders/SoV1Texture2.c++ \
+    lib/database/src/so/upgraders/SoV1TextureCoordinateCube.c++ \
+    lib/database/src/so/upgraders/SoV1TextureCoordinateCylinder.c++ \
+    lib/database/src/so/upgraders/SoV1TextureCoordinateEnvironment.c++ \
+    lib/database/src/so/upgraders/SoV1TextureCoordinatePlane.c++ \
+    lib/database/src/so/upgraders/SoV1TextureCoordinateSphere.c++ \
+    lib/database/src/so/upgraders/SoV2AsciiText.c++ \
+    lib/database/src/so/upgraders/SoV2FontStyle.c++ \
+    lib/database/src/so/upgraders/SoV2LOD.c++ \
+    lib/database/src/so/upgraders/SoV2MaterialIndex.c++ \
+    lib/database/src/so/upgraders/SoV2Text2.c++ \
+    lib/database/src/so/upgraders/SoV2Text3.c++ \
+    lib/database/src/so/upgraders/SoV2VertexProperty.c++ \
+    lib/database/src/so/upgraders/SoV2WWWAnchor.c++ \
+    lib/database/src/so/upgraders/SoV2WWWInline.c++ \
+    lib/database/src/so/linux.c++ \
+    lib/interaction/src/SoInteraction.c++ \
+    lib/interaction/src/SoSceneMgr.c++ \
+    lib/interaction/src/SoSelection.c++ \
+    lib/interaction/src/actions/SoBoxHL.c++ \
+    lib/interaction/src/actions/SoLineHL.c++ \
+    lib/interaction/src/draggers/SoCenterballDragger.c++ \
+    lib/interaction/src/draggers/SoDirectionalLightDragger.c++ \
+    lib/interaction/src/draggers/SoDragPointDragger.c++ \
+    lib/interaction/src/draggers/SoDragger.c++ \
+    lib/interaction/src/draggers/SoDraggerInit.c++ \
+    lib/interaction/src/draggers/SoHandleBoxDragger.c++ \
+    lib/interaction/src/draggers/SoJackDragger.c++ \
+    lib/interaction/src/draggers/SoPointLightDragger.c++ \
+    lib/interaction/src/draggers/SoRotateCylindricalDragger.c++ \
+    lib/interaction/src/draggers/SoRotateDiscDragger.c++ \
+    lib/interaction/src/draggers/SoRotateSphericalDragger.c++ \
+    lib/interaction/src/draggers/SoScale1Dragger.c++ \
+    lib/interaction/src/draggers/SoScale2Dragger.c++ \
+    lib/interaction/src/draggers/SoScale2UniformDragger.c++ \
+    lib/interaction/src/draggers/SoScaleUniformDragger.c++ \
+    lib/interaction/src/draggers/SoSpotLightDragger.c++ \
+    lib/interaction/src/draggers/SoTabBoxDragger.c++ \
+    lib/interaction/src/draggers/SoTabPlaneDragger.c++ \
+    lib/interaction/src/draggers/SoTrackballDragger.c++ \
+    lib/interaction/src/draggers/SoTransformBoxDragger.c++ \
+    lib/interaction/src/draggers/SoTransformerDragger.c++ \
+    lib/interaction/src/draggers/SoTranslate1Dragger.c++ \
+    lib/interaction/src/draggers/SoTranslate2Dragger.c++ \
+    lib/interaction/src/manips/SoCenterballManip.c++ \
+    lib/interaction/src/manips/SoDirLtManip.c++ \
+    lib/interaction/src/manips/SoHbox.c++ \
+    lib/interaction/src/manips/SoJackManip.c++ \
+    lib/interaction/src/manips/SoPtLtManip.c++ \
+    lib/interaction/src/manips/SoSpotLtManip.c++ \
+    lib/interaction/src/manips/SoTabBoxManip.c++ \
+    lib/interaction/src/manips/SoTball.c++ \
+    lib/interaction/src/manips/SoTransformManip.c++ \
+    lib/interaction/src/manips/SoTransformerManip.c++ \
+    lib/interaction/src/manips/SoXformBox.c++ \
+    lib/interaction/src/nodekits/SoInteractionKit.c++ \
+    lib/interaction/src/nodes/SoAntiSquish.c++ \
+    lib/interaction/src/nodes/SoSurroundScale.c++ \
+    lib/nodekits/src/SoNodeKitPath.c++ \
+    lib/nodekits/src/details/SoNodeKitDetail.c++ \
+    lib/nodekits/src/nodekits/SoAppearKit.c++ \
+    lib/nodekits/src/nodekits/SoBaseKit.c++ \
+    lib/nodekits/src/nodekits/SoCameraKit.c++ \
+    lib/nodekits/src/nodekits/SoLightKit.c++ \
+    lib/nodekits/src/nodekits/SoNkCatalog.c++ \
+    lib/nodekits/src/nodekits/SoNkParts.c++ \
+    lib/nodekits/src/nodekits/SoNodeKit.c++ \
+    lib/nodekits/src/nodekits/SoNodeKitListPart.c++ \
+    lib/nodekits/src/nodekits/SoSceneKit.c++ \
+    lib/nodekits/src/nodekits/SoSeparatorKit.c++ \
+    lib/nodekits/src/nodekits/SoShapeKit.c++ \
+    lib/nodekits/src/nodekits/SoWrapperKit.c++ \
+    lib/nodekits/src/upgraders/SoV1AppearKit.c++ \
+    lib/nodekits/src/upgraders/SoV1BaseKit.c++ \
+    lib/nodekits/src/upgraders/SoV1CameraKit.c++ \
+    lib/nodekits/src/upgraders/SoV1ConeKit.c++ \
+    lib/nodekits/src/upgraders/SoV1CubeKit.c++ \
+    lib/nodekits/src/upgraders/SoV1CylinderKit.c++ \
+    lib/nodekits/src/upgraders/SoV1DirLtKit.c++ \
+    lib/nodekits/src/upgraders/SoV1FaceSetKit.c++ \
+    lib/nodekits/src/upgraders/SoV1GroupKit.c++ \
+    lib/nodekits/src/upgraders/SoV1IFaceSetKit.c++ \
+    lib/nodekits/src/upgraders/SoV1ILineSetKit.c++ \
+    lib/nodekits/src/upgraders/SoV1INrbCurvKit.c++ \
+    lib/nodekits/src/upgraders/SoV1INrbSurfKit.c++ \
+    lib/nodekits/src/upgraders/SoV1ITMshSetKit.c++ \
+    lib/nodekits/src/upgraders/SoV1LightKit.c++ \
+    lib/nodekits/src/upgraders/SoV1LineSetKit.c++ \
+    lib/nodekits/src/upgraders/SoV1NkCatalog.c++ \
+    lib/nodekits/src/upgraders/SoV1NkParts.c++ \
+    lib/nodekits/src/upgraders/SoV1NodeKit.c++ \
+    lib/nodekits/src/upgraders/SoV1NurbCurvKit.c++ \
+    lib/nodekits/src/upgraders/SoV1NurbSurfKit.c++ \
+    lib/nodekits/src/upgraders/SoV1OrthoCamKit.c++ \
+    lib/nodekits/src/upgraders/SoV1PerspCamKit.c++ \
+    lib/nodekits/src/upgraders/SoV1PointLtKit.c++ \
+    lib/nodekits/src/upgraders/SoV1PointSetKit.c++ \
+    lib/nodekits/src/upgraders/SoV1QuadMeshKit.c++ \
+    lib/nodekits/src/upgraders/SoV1SceneKit.c++ \
+    lib/nodekits/src/upgraders/SoV1ShapeKit.c++ \
+    lib/nodekits/src/upgraders/SoV1SphereKit.c++ \
+    lib/nodekits/src/upgraders/SoV1SpotLtKit.c++ \
+    lib/nodekits/src/upgraders/SoV1Text2Kit.c++ \
+    lib/nodekits/src/upgraders/SoV1Text3Kit.c++ \
+    lib/nodekits/src/upgraders/SoV1TriStripKit.c++ \
+    lib/nodekits/src/upgraders/SoV1VtxShapeKit.c++ \
+    lib/nodekits/src/upgraders/SoV1WrapperKit.c++
+
+# PPP Generated sources
+SOURCES += \
+    lib/database/src/so/nodes/SoCone.c++ \
+    lib/database/src/so/nodes/SoCube.c++ \
+    lib/database/src/so/nodes/SoCylinder.c++ \
+    lib/database/src/so/nodes/SoFaceSet.c++ \
+    lib/database/src/so/nodes/SoIndexedFaceSet.c++ \
+    lib/database/src/so/nodes/SoIndexedLineSet.c++ \
+    lib/database/src/so/nodes/SoIndexedTriangleStripSet.c++ \
+    lib/database/src/so/nodes/SoLineSet.c++ \
+    lib/database/src/so/nodes/SoPointSet.c++ \
+    lib/database/src/so/nodes/SoQuadMesh.c++ \
+    lib/database/src/so/nodes/SoSphere.c++ \
+    lib/database/src/so/nodes/SoTriangleStripSet.c++
+
+# image loaders
+SOURCES += \
+    lib/database/src/so/nodes/readGIF.c
+
+RELATEDFILES += \
+    lib/database/src/so/nodes/SoCone.pp \
+    lib/database/src/so/nodes/SoCube.pp \
+    lib/database/src/so/nodes/SoCylinder.pp \
+    lib/database/src/so/nodes/SoFaceSet.pp \
+    lib/database/src/so/nodes/SoIndexedFaceSet.pp \
+    lib/database/src/so/nodes/SoIndexedLineSet.pp \
+    lib/database/src/so/nodes/SoIndexedTriangleStripSet.pp \
+    lib/database/src/so/nodes/SoLineSet.pp \
+    lib/database/src/so/nodes/SoPointSet.pp \
+    lib/database/src/so/nodes/SoQuadMesh.pp \
+    lib/database/src/so/nodes/SoSphere.pp \
+    lib/database/src/so/nodes/SoTriangleStripSet.pp    
+
+win32::SOURCES += \
+    lib/initDll.c++
+
+win32::RC_FILE += \
+    lib/resource.rc
+
+# mac framework config
+macx::lib_bundle {
+  QMAKE_FRAMEWORK_BUNDLE_NAME = Inventor
+  QMAKE_FRAMEWORK_VERSION = 2.4.0
+    
+  FRAMEWORK_PRIVHEADERS1.version = Versions
+  FRAMEWORK_PRIVHEADERS1.path = PrivateHeaders
+  FRAMEWORK_PRIVHEADERS1.files = \
+    lib/database/include/SoDebug.h \
+    lib/database/include/SoUnknownEngine.h \
+    lib/database/include/SoUnknownNode.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_PRIVHEADERS1
+
+  FRAMEWORK_HEADERS1.version = Versions
+  FRAMEWORK_HEADERS1.path = Headers
+  FRAMEWORK_HEADERS1.files = \
+    lib/database/include/Inventor/SoOffscreenRenderer.h \
+  # QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS1
+
+  FRAMEWORK_HEADERS2.version = Versions
+  FRAMEWORK_HEADERS2.path = Headers
+  FRAMEWORK_HEADERS2.files = \
+    lib/mevis/include/Inventor/SoCatch.h \
+    lib/mevis/include/Inventor/SoInventor.h \
+    lib/mevis/include/Inventor/SoMeVis.h \
+    lib/mevis/include/Inventor/SoTrace.h \
+    lib/database/include/Inventor/Sb.h \
+    lib/database/include/Inventor/SbBasic.h \
+    lib/database/include/Inventor/SbBox.h \
+    lib/database/include/Inventor/SbColor.h \
+    lib/database/include/Inventor/SbDict.h \
+    lib/database/include/Inventor/SbLinear.h \
+    lib/database/include/Inventor/SbPList.h \
+    lib/database/include/Inventor/SbString.h \
+    lib/database/include/Inventor/SbTime.h \
+    lib/database/include/Inventor/SbViewportRegion.h \
+    lib/database/include/Inventor/So.h \
+    lib/database/include/Inventor/SoDB.h \
+    lib/database/include/Inventor/SoInput.h \
+    lib/database/include/Inventor/SoLists.h \
+    lib/database/include/Inventor/SoOffscreenRenderer.h \
+    lib/database/include/Inventor/SoOutput.h \
+    lib/database/include/Inventor/SoPath.h \
+    lib/database/include/Inventor/SoPickedPoint.h \
+    lib/database/include/Inventor/SoPrimitiveVertex.h \
+    lib/database/include/Inventor/SoType.h \
+    lib/interaction/include/Inventor/SoInteraction.h \
+    lib/interaction/include/Inventor/SoSceneManager.h \
+    lib/nodekits/include/Inventor/SoNodeKitPath.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS2
+
+  FRAMEWORK_HEADERS3.path = Headers/actions
+  FRAMEWORK_HEADERS3.files = \
+    lib/database/include/Inventor/actions/SoAction.h \
+    lib/database/include/Inventor/actions/SoActions.h \
+    lib/database/include/Inventor/actions/SoCallbackAction.h \
+    lib/database/include/Inventor/actions/SoGetBoundingBoxAction.h \
+    lib/database/include/Inventor/actions/SoGetMatrixAction.h \
+    lib/database/include/Inventor/actions/SoGLRenderAction.h \
+    lib/database/include/Inventor/actions/SoHandleEventAction.h \
+    lib/database/include/Inventor/actions/SoPickAction.h \
+    lib/database/include/Inventor/actions/SoRayPickAction.h \
+    lib/database/include/Inventor/actions/SoSearchAction.h \
+    lib/database/include/Inventor/actions/SoSubAction.h \
+    lib/database/include/Inventor/actions/SoWriteAction.h \
+    lib/interaction/include/Inventor/actions/SoBoxHighlightRenderAction.h \
+    lib/interaction/include/Inventor/actions/SoLineHighlightRenderAction.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS3
+
+  FRAMEWORK_HEADERS4.path = Headers/bundles
+  FRAMEWORK_HEADERS4.files = \
+    lib/database/include/Inventor/bundles/SoBundle.h \
+    lib/database/include/Inventor/bundles/SoMaterialBundle.h \
+    lib/database/include/Inventor/bundles/SoNormalBundle.h \
+    lib/database/include/Inventor/bundles/SoTextureCoordinateBundle.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS4
+
+  FRAMEWORK_HEADERS5.path = Headers/caches
+  FRAMEWORK_HEADERS5.files = \
+    lib/database/include/Inventor/caches/SoBoundingBoxCache.h \
+    lib/database/include/Inventor/caches/SoCache.h \
+    lib/database/include/Inventor/caches/SoGLCacheList.h \
+    lib/database/include/Inventor/caches/SoGLRenderCache.h \
+    lib/database/include/Inventor/caches/SoNormalCache.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS5
+
+  FRAMEWORK_HEADERS6.path = Headers/details
+  FRAMEWORK_HEADERS6.files = \
+    lib/database/include/Inventor/details/SoConeDetail.h \
+    lib/database/include/Inventor/details/SoCubeDetail.h \
+    lib/database/include/Inventor/details/SoCylinderDetail.h \
+    lib/database/include/Inventor/details/SoDetail.h \
+    lib/database/include/Inventor/details/SoDetails.h \
+    lib/database/include/Inventor/details/SoFaceDetail.h \
+    lib/database/include/Inventor/details/SoLineDetail.h \
+    lib/database/include/Inventor/details/SoPointDetail.h \
+    lib/database/include/Inventor/details/SoSubDetail.h \
+    lib/database/include/Inventor/details/SoTextDetail.h \
+    lib/nodekits/include/Inventor/details/SoNodeKitDetail.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS6
+
+  FRAMEWORK_HEADERS7.path = Headers/draggers
+  FRAMEWORK_HEADERS7.files = \
+    lib/interaction/include/Inventor/draggers/SoRotateSphericalDragger.h \
+    lib/interaction/include/Inventor/draggers/SoCenterballDragger.h \
+    lib/interaction/include/Inventor/draggers/SoDirectionalLightDragger.h \
+    lib/interaction/include/Inventor/draggers/SoDragger.h \
+    lib/interaction/include/Inventor/draggers/SoDragPointDragger.h \
+    lib/interaction/include/Inventor/draggers/SoHandleBoxDragger.h \
+    lib/interaction/include/Inventor/draggers/SoJackDragger.h \
+    lib/interaction/include/Inventor/draggers/SoPointLightDragger.h \
+    lib/interaction/include/Inventor/draggers/SoRotateCylindricalDragger.h \
+    lib/interaction/include/Inventor/draggers/SoRotateDiscDragger.h \
+    lib/interaction/include/Inventor/draggers/SoScale1Dragger.h \
+    lib/interaction/include/Inventor/draggers/SoScale2Dragger.h \
+    lib/interaction/include/Inventor/draggers/SoScale2UniformDragger.h \
+    lib/interaction/include/Inventor/draggers/SoScaleUniformDragger.h \
+    lib/interaction/include/Inventor/draggers/SoSpotLightDragger.h \
+    lib/interaction/include/Inventor/draggers/SoTabBoxDragger.h \
+    lib/interaction/include/Inventor/draggers/SoTabPlaneDragger.h \
+    lib/interaction/include/Inventor/draggers/SoTrackballDragger.h \
+    lib/interaction/include/Inventor/draggers/SoTransformBoxDragger.h \
+    lib/interaction/include/Inventor/draggers/SoTransformerDragger.h \
+    lib/interaction/include/Inventor/draggers/SoTranslate1Dragger.h \
+    lib/interaction/include/Inventor/draggers/SoTranslate2Dragger.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS7
+
+  FRAMEWORK_HEADERS8.path = Headers/elements
+  FRAMEWORK_HEADERS8.files = \
+    lib/mevis/include/Inventor/elements/SoGLPolygonOffsetElement.h \
+    lib/mevis/include/Inventor/elements/SoGLStencilBitsElement.h \
+    lib/mevis/include/Inventor/elements/SoPolygonOffsetElement.h \
+    lib/mevis/include/Inventor/elements/SoStencilBitsElement.h \
+    lib/database/include/Inventor/elements/SoAccumulatedElement.h \
+    lib/database/include/Inventor/elements/SoAmbientColorElement.h \
+    lib/database/include/Inventor/elements/SoBBoxModelMatrixElement.h \
+    lib/database/include/Inventor/elements/SoCacheElement.h \
+    lib/database/include/Inventor/elements/SoClipPlaneElement.h \
+    lib/database/include/Inventor/elements/SoComplexityElement.h \
+    lib/database/include/Inventor/elements/SoComplexityTypeElement.h \
+    lib/database/include/Inventor/elements/SoCoordinateElement.h \
+    lib/database/include/Inventor/elements/SoCreaseAngleElement.h \
+    lib/database/include/Inventor/elements/SoCullVolumeElement.h \
+    lib/database/include/Inventor/elements/SoCurrentGLMaterialElement.h \
+    lib/database/include/Inventor/elements/SoDiffuseColorElement.h \
+    lib/database/include/Inventor/elements/SoDrawStyleElement.h \
+    lib/database/include/Inventor/elements/SoElement.h \
+    lib/database/include/Inventor/elements/SoElements.h \
+    lib/database/include/Inventor/elements/SoEmissiveColorElement.h \
+    lib/database/include/Inventor/elements/SoFloatElement.h \
+    lib/database/include/Inventor/elements/SoFocalDistanceElement.h \
+    lib/database/include/Inventor/elements/SoFontNameElement.h \
+    lib/database/include/Inventor/elements/SoFontSizeElement.h \
+    lib/database/include/Inventor/elements/SoGLAmbientColorElement.h \
+    lib/database/include/Inventor/elements/SoGLCacheContextElement.h \
+    lib/database/include/Inventor/elements/SoGLClipPlaneElement.h \
+    lib/database/include/Inventor/elements/SoGLColorIndexElement.h \
+    lib/database/include/Inventor/elements/SoGLCoordinateElement.h \
+    lib/database/include/Inventor/elements/SoGLDiffuseColorElement.h \
+    lib/database/include/Inventor/elements/SoGLDrawStyleElement.h \
+    lib/database/include/Inventor/elements/SoGLEmissiveColorElement.h \
+    lib/database/include/Inventor/elements/SoGLLazyElement.h \
+    lib/database/include/Inventor/elements/SoGLLightIdElement.h \
+    lib/database/include/Inventor/elements/SoGLLightModelElement.h \
+    lib/database/include/Inventor/elements/SoGLLinePatternElement.h \
+    lib/database/include/Inventor/elements/SoGLLineWidthElement.h \
+    lib/database/include/Inventor/elements/SoGLModelMatrixElement.h \
+    lib/database/include/Inventor/elements/SoGLNormalElement.h \
+    lib/database/include/Inventor/elements/SoGLPointSizeElement.h \
+    lib/database/include/Inventor/elements/SoGLPolygonStippleElement.h \
+    lib/database/include/Inventor/elements/SoGLProjectionMatrixElement.h \
+    lib/database/include/Inventor/elements/SoGLRenderPassElement.h \
+    lib/database/include/Inventor/elements/SoGLShapeHintsElement.h \
+    lib/database/include/Inventor/elements/SoGLShininessElement.h \
+    lib/database/include/Inventor/elements/SoGLSpecularColorElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureBlendColorElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureCoordinateElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureEnabledElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureImageElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureMatrixElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureModelElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureQualityElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureWrapSElement.h \
+    lib/database/include/Inventor/elements/SoGLTextureWrapTElement.h \
+    lib/database/include/Inventor/elements/SoGLUpdateAreaElement.h \
+    lib/database/include/Inventor/elements/SoGLViewingMatrixElement.h \
+    lib/database/include/Inventor/elements/SoGLViewportRegionElement.h \
+    lib/database/include/Inventor/elements/SoInt32Element.h \
+    lib/database/include/Inventor/elements/SoLazyElement.h \
+    lib/database/include/Inventor/elements/SoLightAttenuationElement.h \
+    lib/database/include/Inventor/elements/SoLightModelElement.h \
+    lib/database/include/Inventor/elements/SoLinePatternElement.h \
+    lib/database/include/Inventor/elements/SoLineWidthElement.h \
+    lib/database/include/Inventor/elements/SoLocalBBoxMatrixElement.h \
+    lib/database/include/Inventor/elements/SoLongElement.h \
+    lib/database/include/Inventor/elements/SoMaterialBindingElement.h \
+    lib/database/include/Inventor/elements/SoModelMatrixElement.h \
+    lib/database/include/Inventor/elements/SoNormalBindingElement.h \
+    lib/database/include/Inventor/elements/SoNormalElement.h \
+    lib/database/include/Inventor/elements/SoOverrideElement.h \
+    lib/database/include/Inventor/elements/SoPickRayElement.h \
+    lib/database/include/Inventor/elements/SoPickStyleElement.h \
+    lib/database/include/Inventor/elements/SoPointSizeElement.h \
+    lib/database/include/Inventor/elements/SoProfileCoordinateElement.h \
+    lib/database/include/Inventor/elements/SoProfileElement.h \
+    lib/database/include/Inventor/elements/SoProjectionMatrixElement.h \
+    lib/database/include/Inventor/elements/SoReplacedElement.h \
+    lib/database/include/Inventor/elements/SoShapeHintsElement.h \
+    lib/database/include/Inventor/elements/SoShapeStyleElement.h \
+    lib/database/include/Inventor/elements/SoShininessElement.h \
+    lib/database/include/Inventor/elements/SoSpecularColorElement.h \
+    lib/database/include/Inventor/elements/SoSubElement.h \
+    lib/database/include/Inventor/elements/SoSwitchElement.h \
+    lib/database/include/Inventor/elements/SoTextureBlendColorElement.h \
+    lib/database/include/Inventor/elements/SoTextureCoordinateBindingElement.h \
+    lib/database/include/Inventor/elements/SoTextureCoordinateElement.h \
+    lib/database/include/Inventor/elements/SoTextureImageElement.h \
+    lib/database/include/Inventor/elements/SoTextureMatrixElement.h \
+    lib/database/include/Inventor/elements/SoTextureModelElement.h \
+    lib/database/include/Inventor/elements/SoTextureQualityElement.h \
+    lib/database/include/Inventor/elements/SoTextureWrapSElement.h \
+    lib/database/include/Inventor/elements/SoTextureWrapTElement.h \
+    lib/database/include/Inventor/elements/SoTransparencyElement.h \
+    lib/database/include/Inventor/elements/SoUnitsElement.h \
+    lib/database/include/Inventor/elements/SoViewVolumeElement.h \
+    lib/database/include/Inventor/elements/SoViewingMatrixElement.h \
+    lib/database/include/Inventor/elements/SoViewportRegionElement.h \
+    lib/database/include/Inventor/elements/SoWindowElement.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS8
+
+  FRAMEWORK_HEADERS9.path = Headers/engines
+  FRAMEWORK_HEADERS9.files = \
+    lib/database/include/Inventor/engines/SoBoolOperation.h \
+    lib/database/include/Inventor/engines/SoCalculator.h \
+    lib/database/include/Inventor/engines/SoCompose.h \
+    lib/database/include/Inventor/engines/SoComputeBoundingBox.h \
+    lib/database/include/Inventor/engines/SoConcatenate.h \
+    lib/database/include/Inventor/engines/SoCounter.h \
+    lib/database/include/Inventor/engines/SoElapsedTime.h \
+    lib/database/include/Inventor/engines/SoEngine.h \
+    lib/database/include/Inventor/engines/SoEngines.h \
+    lib/database/include/Inventor/engines/SoFieldConverter.h \
+    lib/database/include/Inventor/engines/SoGate.h \
+    lib/database/include/Inventor/engines/SoInterpolate.h \
+    lib/database/include/Inventor/engines/SoOneShot.h \
+    lib/database/include/Inventor/engines/SoOnOff.h \
+    lib/database/include/Inventor/engines/SoOutputData.h \
+    lib/database/include/Inventor/engines/SoSelectOne.h \
+    lib/database/include/Inventor/engines/SoSubEngine.h \
+    lib/database/include/Inventor/engines/SoTimeCounter.h \
+    lib/database/include/Inventor/engines/SoTransformVec3f.h \
+    lib/database/include/Inventor/engines/SoTriggerAny.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS9
+
+  FRAMEWORK_HEADERS10.path = Headers/errors
+  FRAMEWORK_HEADERS10.files = \
+    lib/database/include/Inventor/errors/SoDebugError.h \
+    lib/database/include/Inventor/errors/SoError.h \
+    lib/database/include/Inventor/errors/SoErrors.h \
+    lib/database/include/Inventor/errors/SoMemoryError.h \
+    lib/database/include/Inventor/errors/SoReadError.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS10
+
+  FRAMEWORK_HEADERS11.path = Headers/events
+  FRAMEWORK_HEADERS11.files = \
+    lib/database/include/Inventor/events/SoButtonEvent.h \
+    lib/database/include/Inventor/events/SoEvent.h \
+    lib/database/include/Inventor/events/SoEvents.h \
+    lib/database/include/Inventor/events/SoKeyboardEvent.h \
+    lib/database/include/Inventor/events/SoLocation2Event.h \
+    lib/database/include/Inventor/events/SoMotion3Event.h \
+    lib/database/include/Inventor/events/SoMouseButtonEvent.h \
+    lib/database/include/Inventor/events/SoSpaceballButtonEvent.h \
+    lib/database/include/Inventor/events/SoSubEvent.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS11
+
+  FRAMEWORK_HEADERS12.path = Headers/fields
+  FRAMEWORK_HEADERS12.files = \
+    lib/mevis/include/Inventor/fields/SoSFVec2s.h \
+    lib/mevis/include/Inventor/fields/SoSFVec3s.h \
+    lib/database/include/Inventor/fields/SoMFLong.h \
+    lib/database/include/Inventor/fields/SoMFUShort.h \
+    lib/database/include/Inventor/fields/SoSFInt32.h \
+    lib/database/include/Inventor/fields/SoField.h \
+    lib/database/include/Inventor/fields/SoFieldContainer.h \
+    lib/database/include/Inventor/fields/SoFieldData.h \
+    lib/database/include/Inventor/fields/SoFields.h \
+    lib/database/include/Inventor/fields/SoMFBitMask.h \
+    lib/database/include/Inventor/fields/SoMFBool.h \
+    lib/database/include/Inventor/fields/SoMFColor.h \
+    lib/database/include/Inventor/fields/SoMFEngine.h \
+    lib/database/include/Inventor/fields/SoMFEnum.h \
+    lib/database/include/Inventor/fields/SoMFFloat.h \
+    lib/database/include/Inventor/fields/SoMFInt32.h \
+    lib/database/include/Inventor/fields/SoMFMatrix.h \
+    lib/database/include/Inventor/fields/SoMFName.h \
+    lib/database/include/Inventor/fields/SoMFNode.h \
+    lib/database/include/Inventor/fields/SoMFPath.h \
+    lib/database/include/Inventor/fields/SoMFPlane.h \
+    lib/database/include/Inventor/fields/SoMFRotation.h \
+    lib/database/include/Inventor/fields/SoMFShort.h \
+    lib/database/include/Inventor/fields/SoMFString.h \
+    lib/database/include/Inventor/fields/SoMFTime.h \
+    lib/database/include/Inventor/fields/SoMFUInt32.h \
+    lib/database/include/Inventor/fields/SoMFULong.h \
+    lib/database/include/Inventor/fields/SoMFVec2f.h \
+    lib/database/include/Inventor/fields/SoMFVec3f.h \
+    lib/database/include/Inventor/fields/SoMFVec4f.h \
+    lib/database/include/Inventor/fields/SoSFBitMask.h \
+    lib/database/include/Inventor/fields/SoSFBool.h \
+    lib/database/include/Inventor/fields/SoSFColor.h \
+    lib/database/include/Inventor/fields/SoSFEngine.h \
+    lib/database/include/Inventor/fields/SoSFEnum.h \
+    lib/database/include/Inventor/fields/SoSFFloat.h \
+    lib/database/include/Inventor/fields/SoSFImage.h \
+    lib/database/include/Inventor/fields/SoSFLong.h \
+    lib/database/include/Inventor/fields/SoSFMatrix.h \
+    lib/database/include/Inventor/fields/SoSFName.h \
+    lib/database/include/Inventor/fields/SoSFNode.h \
+    lib/database/include/Inventor/fields/SoSFPath.h \
+    lib/database/include/Inventor/fields/SoSFPlane.h \
+    lib/database/include/Inventor/fields/SoSFRotation.h \
+    lib/database/include/Inventor/fields/SoSFShort.h \
+    lib/database/include/Inventor/fields/SoSFString.h \
+    lib/database/include/Inventor/fields/SoSFTime.h \
+    lib/database/include/Inventor/fields/SoSFTrigger.h \
+    lib/database/include/Inventor/fields/SoSFUInt32.h \
+    lib/database/include/Inventor/fields/SoSFULong.h \
+    lib/database/include/Inventor/fields/SoSFUShort.h \
+    lib/database/include/Inventor/fields/SoSFVec2f.h \
+    lib/database/include/Inventor/fields/SoSFVec3f.h \
+    lib/database/include/Inventor/fields/SoSFVec4f.h \
+    lib/database/include/Inventor/fields/SoSubField.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS12
+
+  FRAMEWORK_HEADERS13.path = Headers/manips
+  FRAMEWORK_HEADERS13.files = \
+    lib/interaction/include/Inventor/manips/SoCenterballManip.h \
+    lib/interaction/include/Inventor/manips/SoDirectionalLightManip.h \
+    lib/interaction/include/Inventor/manips/SoHandleBoxManip.h \
+    lib/interaction/include/Inventor/manips/SoJackManip.h \
+    lib/interaction/include/Inventor/manips/SoPointLightManip.h \
+    lib/interaction/include/Inventor/manips/SoSpotLightManip.h \
+    lib/interaction/include/Inventor/manips/SoTabBoxManip.h \
+    lib/interaction/include/Inventor/manips/SoTrackballManip.h \
+    lib/interaction/include/Inventor/manips/SoTransformBoxManip.h \
+    lib/interaction/include/Inventor/manips/SoTransformerManip.h \
+    lib/interaction/include/Inventor/manips/SoTransformManip.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS13
+
+  FRAMEWORK_HEADERS14.path = Headers/misc
+  FRAMEWORK_HEADERS14.files = \
+    lib/database/include/Inventor/misc/SoAuditorList.h \
+    lib/database/include/Inventor/misc/SoBase.h \
+    lib/database/include/Inventor/misc/SoBasic.h \
+    lib/database/include/Inventor/misc/SoByteStream.h \
+    lib/database/include/Inventor/misc/SoCallbackList.h \
+    lib/database/include/Inventor/misc/SoChildList.h \
+    lib/database/include/Inventor/misc/SoCompactPathList.h \
+    lib/database/include/Inventor/misc/SoNormalGenerator.h \
+    lib/database/include/Inventor/misc/SoNotification.h \
+    lib/database/include/Inventor/misc/SoState.h \
+    lib/database/include/Inventor/misc/SoTempPath.h \
+    lib/database/include/Inventor/misc/SoTranscribe.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS14
+
+  FRAMEWORK_HEADERS15.path = Headers/misc/upgraders
+  FRAMEWORK_HEADERS15.files = \
+    lib/database/include/Inventor/misc/upgraders/SoV1QuadMeshKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoUpgrader.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1AppearanceKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1BaseKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1CameraKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1ConeKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1CubeKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1CustomNode.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1CylinderKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1DirectionalLightKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1FaceSetKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1GroupKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1IndexedFaceSetKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1IndexedLineSetKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1IndexedNurbsCurveKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1IndexedNurbsSurfaceKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1IndexedTriangleMeshKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1LightKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1LineSetKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1NodekitCatalog.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1NodekitParts.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1NurbsCurveKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1NurbsSurfaceKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1OrthographicCameraKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1PerspectiveCameraKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1PointLightKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1PointSetKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1SceneKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1ShapeKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1SphereKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1SpotLightKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1SubKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1Text2Kit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1Text3Kit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1TriangleStripSetKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1VertexShapeKit.h \
+    lib/database/include/Inventor/misc/upgraders/SoV1WrapperKit.h
+    lib/nodekits/include/Inventor/misc/upgraders/SoV1NodeKit.h \
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS15
+
+  FRAMEWORK_HEADERS16.path = Headers/nodekits
+  FRAMEWORK_HEADERS16.files = \
+    lib/interaction/include/Inventor/nodekits/SoInteractionKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoAppearanceKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoBaseKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoCameraKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoLightKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoNodeKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoNodekitCatalog.h \
+    lib/nodekits/include/Inventor/nodekits/SoNodeKitListPart.h \
+    lib/nodekits/include/Inventor/nodekits/SoNodekitParts.h \
+    lib/nodekits/include/Inventor/nodekits/SoSceneKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoSeparatorKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoShapeKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoSubKit.h \
+    lib/nodekits/include/Inventor/nodekits/SoWrapperKit.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS16
+
+  FRAMEWORK_HEADERS17.path = Headers/nodes
+  FRAMEWORK_HEADERS17.files = \
+    lib/mevis/include/Inventor/nodes/SoPolygonOffset.h \
+    lib/database/include/Inventor/nodes/SoAnnotation.h \
+    lib/database/include/Inventor/nodes/SoArray.h \
+    lib/database/include/Inventor/nodes/SoAsciiText.h \
+    lib/database/include/Inventor/nodes/SoBaseColor.h \
+    lib/database/include/Inventor/nodes/SoBlinker.h \
+    lib/database/include/Inventor/nodes/SoCallback.h \
+    lib/database/include/Inventor/nodes/SoCamera.h \
+    lib/database/include/Inventor/nodes/SoClipPlane.h \
+    lib/database/include/Inventor/nodes/SoColorIndex.h \
+    lib/database/include/Inventor/nodes/SoComplexity.h \
+    lib/database/include/Inventor/nodes/SoCone.h \
+    lib/database/include/Inventor/nodes/SoCoordinate3.h \
+    lib/database/include/Inventor/nodes/SoCoordinate4.h \
+    lib/database/include/Inventor/nodes/SoCube.h \
+    lib/database/include/Inventor/nodes/SoCylinder.h \
+    lib/database/include/Inventor/nodes/SoDirectionalLight.h \
+    lib/database/include/Inventor/nodes/SoDrawStyle.h \
+    lib/database/include/Inventor/nodes/SoEnvironment.h \
+    lib/database/include/Inventor/nodes/SoEventCallback.h \
+    lib/database/include/Inventor/nodes/SoFaceSet.h \
+    lib/database/include/Inventor/nodes/SoFile.h \
+    lib/database/include/Inventor/nodes/SoFont.h \
+    lib/database/include/Inventor/nodes/SoFontStyle.h \
+    lib/database/include/Inventor/nodes/SoGroup.h \
+    lib/database/include/Inventor/nodes/SoIndexedFaceSet.h \
+    lib/database/include/Inventor/nodes/SoIndexedLineSet.h \
+    lib/database/include/Inventor/nodes/SoIndexedNurbsCurve.h \
+    lib/database/include/Inventor/nodes/SoIndexedNurbsSurface.h \
+    lib/database/include/Inventor/nodes/SoIndexedShape.h \
+    lib/database/include/Inventor/nodes/SoIndexedTriangleStripSet.h \
+    lib/database/include/Inventor/nodes/SoInfo.h \
+    lib/database/include/Inventor/nodes/SoLOD.h \
+    lib/database/include/Inventor/nodes/SoLabel.h \
+    lib/database/include/Inventor/nodes/SoLevelOfDetail.h \
+    lib/database/include/Inventor/nodes/SoLight.h \
+    lib/database/include/Inventor/nodes/SoLightModel.h \
+    lib/database/include/Inventor/nodes/SoLineSet.h \
+    lib/database/include/Inventor/nodes/SoLinearProfile.h \
+    lib/database/include/Inventor/nodes/SoLocateHighlight.h \
+    lib/database/include/Inventor/nodes/SoMaterial.h \
+    lib/database/include/Inventor/nodes/SoMaterialBinding.h \
+    lib/database/include/Inventor/nodes/SoMatrixTransform.h \
+    lib/database/include/Inventor/nodes/SoMultipleCopy.h \
+    lib/database/include/Inventor/nodes/SoNode.h \
+    lib/database/include/Inventor/nodes/SoNodes.h \
+    lib/database/include/Inventor/nodes/SoNonIndexedShape.h \
+    lib/database/include/Inventor/nodes/SoNormal.h \
+    lib/database/include/Inventor/nodes/SoNormalBinding.h \
+    lib/database/include/Inventor/nodes/SoNurbsCurve.h \
+    lib/database/include/Inventor/nodes/SoNurbsProfile.h \
+    lib/database/include/Inventor/nodes/SoNurbsSurface.h \
+    lib/database/include/Inventor/nodes/SoOrthographicCamera.h \
+    lib/database/include/Inventor/nodes/SoPackedColor.h \
+    lib/database/include/Inventor/nodes/SoPathSwitch.h \
+    lib/database/include/Inventor/nodes/SoPendulum.h \
+    lib/database/include/Inventor/nodes/SoPerspectiveCamera.h \
+    lib/database/include/Inventor/nodes/SoPickStyle.h \
+    lib/database/include/Inventor/nodes/SoPointLight.h \
+    lib/database/include/Inventor/nodes/SoPointSet.h \
+    lib/database/include/Inventor/nodes/SoProfile.h \
+    lib/database/include/Inventor/nodes/SoProfileCoordinate2.h \
+    lib/database/include/Inventor/nodes/SoProfileCoordinate3.h \
+    lib/database/include/Inventor/nodes/SoQuadMesh.h \
+    lib/database/include/Inventor/nodes/SoResetTransform.h \
+    lib/database/include/Inventor/nodes/SoRotation.h \
+    lib/database/include/Inventor/nodes/SoRotationXYZ.h \
+    lib/database/include/Inventor/nodes/SoRotor.h \
+    lib/database/include/Inventor/nodes/SoScale.h \
+    lib/database/include/Inventor/nodes/SoSeparator.h \
+    lib/database/include/Inventor/nodes/SoShape.h \
+    lib/database/include/Inventor/nodes/SoShapeHints.h \
+    lib/database/include/Inventor/nodes/SoShuttle.h \
+    lib/database/include/Inventor/nodes/SoSphere.h \
+    lib/database/include/Inventor/nodes/SoSpotLight.h \
+    lib/database/include/Inventor/nodes/SoSubNode.h \
+    lib/database/include/Inventor/nodes/SoSwitch.h \
+    lib/database/include/Inventor/nodes/SoText2.h \
+    lib/database/include/Inventor/nodes/SoText3.h \
+    lib/database/include/Inventor/nodes/SoTexture2.h \
+    lib/database/include/Inventor/nodes/SoTexture2Transform.h \
+    lib/database/include/Inventor/nodes/SoTextureCoordinate2.h \
+    lib/database/include/Inventor/nodes/SoTextureCoordinateBinding.h \
+    lib/database/include/Inventor/nodes/SoTextureCoordinateDefault.h \
+    lib/database/include/Inventor/nodes/SoTextureCoordinateEnvironment.h \
+    lib/database/include/Inventor/nodes/SoTextureCoordinateFunction.h \
+    lib/database/include/Inventor/nodes/SoTextureCoordinatePlane.h \
+    lib/database/include/Inventor/nodes/SoTransform.h \
+    lib/database/include/Inventor/nodes/SoTransformSeparator.h \
+    lib/database/include/Inventor/nodes/SoTransformation.h \
+    lib/database/include/Inventor/nodes/SoTranslation.h \
+    lib/database/include/Inventor/nodes/SoTriangleStripSet.h \
+    lib/database/include/Inventor/nodes/SoUnits.h \
+    lib/database/include/Inventor/nodes/SoVertexProperty.h \
+    lib/database/include/Inventor/nodes/SoVertexShape.h \
+    lib/database/include/Inventor/nodes/SoWWWAnchor.h \
+    lib/database/include/Inventor/nodes/SoWWWInline.h \
+    lib/interaction/include/Inventor/nodes/SoAntiSquish.h \
+    lib/interaction/include/Inventor/nodes/SoSelection.h \
+    lib/interaction/include/Inventor/nodes/SoSurroundScale.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS17
+
+  FRAMEWORK_HEADERS18.path = Headers/projectors
+  FRAMEWORK_HEADERS18.files = \
+    lib/database/include/Inventor/projectors/SbCylinderPlaneProjector.h \
+    lib/database/include/Inventor/projectors/SbCylinderProjector.h \
+    lib/database/include/Inventor/projectors/SbCylinderSectionProjector.h \
+    lib/database/include/Inventor/projectors/SbCylinderSheetProjector.h \
+    lib/database/include/Inventor/projectors/SbLineProjector.h \
+    lib/database/include/Inventor/projectors/SbPlaneProjector.h \
+    lib/database/include/Inventor/projectors/SbProjector.h \
+    lib/database/include/Inventor/projectors/SbProjectors.h \
+    lib/database/include/Inventor/projectors/SbSpherePlaneProjector.h \
+    lib/database/include/Inventor/projectors/SbSphereProjector.h \
+    lib/database/include/Inventor/projectors/SbSphereSectionProjector.h \
+    lib/database/include/Inventor/projectors/SbSphereSheetProjector.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS18
+
+  FRAMEWORK_HEADERS19.path = Headers/sensors
+  FRAMEWORK_HEADERS19.files = \
+    lib/database/include/Inventor/sensors/SoAlarmSensor.h \
+    lib/database/include/Inventor/sensors/SoDataSensor.h \
+    lib/database/include/Inventor/sensors/SoDelayQueueSensor.h \
+    lib/database/include/Inventor/sensors/SoFieldSensor.h \
+    lib/database/include/Inventor/sensors/SoIdleSensor.h \
+    lib/database/include/Inventor/sensors/SoNodeSensor.h \
+    lib/database/include/Inventor/sensors/SoOneShotSensor.h \
+    lib/database/include/Inventor/sensors/SoPathSensor.h \
+    lib/database/include/Inventor/sensors/SoSensor.h \
+    lib/database/include/Inventor/sensors/SoSensorManager.h \
+    lib/database/include/Inventor/sensors/SoSensors.h \
+    lib/database/include/Inventor/sensors/SoTimerQueueSensor.h \
+    lib/database/include/Inventor/sensors/SoTimerSensor.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS19
+
+  FRAMEWORK_HEADERS20.path = Headers/system
+  FRAMEWORK_HEADERS20.files = \
+    lib/mevis/include/Inventor/system/SbConfig.h \
+    lib/mevis/include/Inventor/system/SbSystem.h
+  QMAKE_BUNDLE_DATA += FRAMEWORK_HEADERS20
+  
+  build_oiv_installer {
+    QMAKE_LFLAGS_SONAME = -Wl,-install_name,/Library/Frameworks/
+  }
+}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/GNUmakefile inventor/lib/database/include/GNUmakefile
--- /tmp/inventor/lib/database/include/GNUmakefile	2000-09-18 12:45:01.000000000 +0200
+++ inventor/lib/database/include/GNUmakefile	2005-08-02 12:52:12.000000000 +0200
@@ -1,9 +1,18 @@
 IVDEPTH = ../../..
 include $(IVDEPTH)/make/ivcommondefs
 
+HDRSUBDIR = ../
+
+HEADERS = \
+	SoDebug.h \
+	SoUnknownEngine.h \
+	SoUnknownNode.h
+
 HEADERS_SUBDIRS = Inventor
 
-all install:
+all:
+
+install: install_ivheaders
 	$(HEADERS_SUBDIRS_MAKERULE)
 
 COMMONPREF = xxx
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/actions/SoAction.h inventor/lib/database/include/Inventor/actions/SoAction.h
--- /tmp/inventor/lib/database/include/Inventor/actions/SoAction.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/actions/SoAction.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_ACTION_
 #define  _SO_ACTION_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/misc/SoBasic.h>
 #include <Inventor/misc/SoTempPath.h>
 #include <Inventor/SoPath.h>
@@ -82,7 +83,7 @@
 #  pragma set woff 1375
 #endif
 
-SoINTERNAL class SoActionMethodList : public SbPList {
+SoINTERNAL class INVENTOR_API SoActionMethodList : public SbPList {
 
   public:
     // Constructor.  Pass in list from parent action.
@@ -126,7 +127,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoINTERNAL class SoEnabledElementsList {
+SoINTERNAL class INVENTOR_API SoEnabledElementsList {
 
   public:
     // Constructor
@@ -178,7 +179,7 @@
 
 // C-api: abstract
 // C-api: prefix=SoAct
-class SoAction {
+class INVENTOR_API SoAction {
 
   public:
     // Destructor
@@ -279,9 +280,7 @@
 
 
     // Does traversal of a graph rooted by a node
-    void		traverse(SoNode *node)
-	{ (*traversalMethods)[
-	    SoNode::getActionMethodIndex(node->getTypeId())](this, node); }
+    void		traverse(SoNode *node);
 
     // Returns TRUE if the traversal has reached a termination condition
     SbBool		hasTerminated() const	{ return terminated; }
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/actions/SoActions.h inventor/lib/database/include/Inventor/actions/SoActions.h
--- /tmp/inventor/lib/database/include/Inventor/actions/SoActions.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/actions/SoActions.h	2006-07-17 15:46:47.000000000 +0200
@@ -61,6 +61,7 @@
 #ifndef  _SO_ACTIONS_
 #define  _SO_ACTIONS_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/actions/SoCallbackAction.h>
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/actions/SoGetBoundingBoxAction.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/actions/SoCallbackAction.h inventor/lib/database/include/Inventor/actions/SoCallbackAction.h
--- /tmp/inventor/lib/database/include/Inventor/actions/SoCallbackAction.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/actions/SoCallbackAction.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_CALLBACK_ACTION_
 #define  _SO_CALLBACK_ACTION_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbBox.h>
 #include <Inventor/actions/SoSubAction.h>
 #include <Inventor/nodes/SoComplexity.h>
@@ -101,7 +102,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoCBAct
-class SoCallbackAction : public SoAction {
+class INVENTOR_API SoCallbackAction : public SoAction {
 
     SO_ACTION_HEADER(SoCallbackAction);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/actions/SoGetBoundingBoxAction.h inventor/lib/database/include/Inventor/actions/SoGetBoundingBoxAction.h
--- /tmp/inventor/lib/database/include/Inventor/actions/SoGetBoundingBoxAction.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/actions/SoGetBoundingBoxAction.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_GET_BOUNDING_BOX_ACTION_
 #define  _SO_GET_BOUNDING_BOX_ACTION_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbBox.h>
 #include <Inventor/SbViewportRegion.h>
 #include <Inventor/actions/SoSubAction.h>
@@ -73,7 +74,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoBBoxAct
-class SoGetBoundingBoxAction : public SoAction {
+class INVENTOR_API SoGetBoundingBoxAction : public SoAction {
 
     SO_ACTION_HEADER(SoGetBoundingBoxAction);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/actions/SoGetMatrixAction.h inventor/lib/database/include/Inventor/actions/SoGetMatrixAction.h
--- /tmp/inventor/lib/database/include/Inventor/actions/SoGetMatrixAction.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/actions/SoGetMatrixAction.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_GET_MATRIX_ACTION_
 #define  _SO_GET_MATRIX_ACTION_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbLinear.h>
 #include <Inventor/actions/SoSubAction.h>
 #include <Inventor/SbViewportRegion.h>
@@ -85,7 +86,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMxAct
-class SoGetMatrixAction : public SoAction {
+class INVENTOR_API SoGetMatrixAction : public SoAction {
 
     SO_ACTION_HEADER(SoGetMatrixAction);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/actions/SoGLRenderAction.h inventor/lib/database/include/Inventor/actions/SoGLRenderAction.h
--- /tmp/inventor/lib/database/include/Inventor/actions/SoGLRenderAction.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/actions/SoGLRenderAction.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_GL_RENDER_ACTION_
 #define  _SO_GL_RENDER_ACTION_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbViewportRegion.h>
 #include <Inventor/actions/SoSubAction.h>
 #include <Inventor/elements/SoShapeStyleElement.h>
@@ -75,7 +76,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoGLRenderAct
-class SoGLRenderAction : public SoAction {
+class INVENTOR_API SoGLRenderAction : public SoAction {
 
     SO_ACTION_HEADER(SoGLRenderAction);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/actions/SoHandleEventAction.h inventor/lib/database/include/Inventor/actions/SoHandleEventAction.h
--- /tmp/inventor/lib/database/include/Inventor/actions/SoHandleEventAction.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/actions/SoHandleEventAction.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_HANDLE_EVENT_ACTION_
 #define  _SO_HANDLE_EVENT_ACTION_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbViewportRegion.h>
 #include <Inventor/actions/SoSubAction.h>
 #include <Inventor/actions/SoRayPickAction.h>
@@ -72,7 +73,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoEvAct
-class SoHandleEventAction : public SoAction {
+class INVENTOR_API SoHandleEventAction : public SoAction {
 
     SO_ACTION_HEADER(SoHandleEventAction);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/actions/SoPickAction.h inventor/lib/database/include/Inventor/actions/SoPickAction.h
--- /tmp/inventor/lib/database/include/Inventor/actions/SoPickAction.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/actions/SoPickAction.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_PICK_ACTION_
 #define  _SO_PICK_ACTION_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbViewportRegion.h>
 #include <Inventor/actions/SoSubAction.h>
 
@@ -69,7 +70,7 @@
 
 // C-api: abstract
 // C-api: prefix=SoPickAct
-class SoPickAction : public SoAction {
+class INVENTOR_API SoPickAction : public SoAction {
 
     SO_ACTION_HEADER(SoPickAction);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/actions/SoRayPickAction.h inventor/lib/database/include/Inventor/actions/SoRayPickAction.h
--- /tmp/inventor/lib/database/include/Inventor/actions/SoRayPickAction.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/actions/SoRayPickAction.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_RAY_PICK_ACTION_
 #define  _SO_RAY_PICK_ACTION_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SoLists.h>
 #include <Inventor/actions/SoPickAction.h>
 
@@ -80,7 +81,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoRayAct
-class SoRayPickAction : public SoPickAction {
+class INVENTOR_API SoRayPickAction : public SoPickAction {
 
     SO_ACTION_HEADER(SoRayPickAction);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/actions/SoSearchAction.h inventor/lib/database/include/Inventor/actions/SoSearchAction.h
--- /tmp/inventor/lib/database/include/Inventor/actions/SoSearchAction.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/actions/SoSearchAction.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_SEARCH_ACTION_
 #define  _SO_SEARCH_ACTION_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/actions/SoSubAction.h>
 
 //////////////////////////////////////////////////////////////////////////////
@@ -73,7 +74,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSearchAct
-class SoSearchAction : public SoAction {
+class INVENTOR_API SoSearchAction : public SoAction {
 
     SO_ACTION_HEADER(SoSearchAction);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/actions/SoWriteAction.h inventor/lib/database/include/Inventor/actions/SoWriteAction.h
--- /tmp/inventor/lib/database/include/Inventor/actions/SoWriteAction.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/actions/SoWriteAction.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_WRITE_ACTION_
 #define  _SO_WRITE_ACTION_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/actions/SoAction.h>
 #include <Inventor/actions/SoSubAction.h>
 #include <Inventor/SoOutput.h>
@@ -72,7 +73,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoWriteAct
-class SoWriteAction : public SoAction {
+class INVENTOR_API SoWriteAction : public SoAction {
 
     SO_ACTION_HEADER(SoWriteAction);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/bundles/SoBundle.h inventor/lib/database/include/Inventor/bundles/SoBundle.h
--- /tmp/inventor/lib/database/include/Inventor/bundles/SoBundle.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/bundles/SoBundle.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoBundle {
+SoEXTENDER class INVENTOR_API SoBundle {
 
   protected:
     SoState	*state;		// Stores state for any bundle
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/bundles/SoMaterialBundle.h inventor/lib/database/include/Inventor/bundles/SoMaterialBundle.h
--- /tmp/inventor/lib/database/include/Inventor/bundles/SoMaterialBundle.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/bundles/SoMaterialBundle.h	2005-08-01 17:36:15.000000000 +0200
@@ -74,7 +74,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoMaterialBundle : public SoBundle {
+SoEXTENDER class INVENTOR_API SoMaterialBundle : public SoBundle {
 
   public:
     // Constructor - takes the action the bundle is used for
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/bundles/SoNormalBundle.h inventor/lib/database/include/Inventor/bundles/SoNormalBundle.h
--- /tmp/inventor/lib/database/include/Inventor/bundles/SoNormalBundle.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/bundles/SoNormalBundle.h	2005-08-01 17:36:15.000000000 +0200
@@ -75,7 +75,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoNormalBundle : public SoBundle {
+SoEXTENDER class INVENTOR_API SoNormalBundle : public SoBundle {
 
   public:
     // Constructor - takes the action the bundle is used for and a
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/bundles/SoTextureCoordinateBundle.h inventor/lib/database/include/Inventor/bundles/SoTextureCoordinateBundle.h
--- /tmp/inventor/lib/database/include/Inventor/bundles/SoTextureCoordinateBundle.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/bundles/SoTextureCoordinateBundle.h	2005-08-01 17:36:15.000000000 +0200
@@ -89,7 +89,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoTextureCoordinateBundle : public SoBundle {
+SoEXTENDER class INVENTOR_API SoTextureCoordinateBundle : public SoBundle {
 
   public:
     // Constructor - takes the action the bundle is used for and a
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/caches/SoBoundingBoxCache.h inventor/lib/database/include/Inventor/caches/SoBoundingBoxCache.h
--- /tmp/inventor/lib/database/include/Inventor/caches/SoBoundingBoxCache.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/caches/SoBoundingBoxCache.h	2005-08-01 17:36:15.000000000 +0200
@@ -73,7 +73,7 @@
 //
 ////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoBoundingBoxCache : public SoCache {
+SoEXTENDER class INVENTOR_API SoBoundingBoxCache : public SoCache {
 
   public:
     // Constructor and destructor
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/caches/SoCache.h inventor/lib/database/include/Inventor/caches/SoCache.h
--- /tmp/inventor/lib/database/include/Inventor/caches/SoCache.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/caches/SoCache.h	2005-08-01 17:36:15.000000000 +0200
@@ -81,7 +81,7 @@
 class SoElement;
 class SoState;
 
-SoEXTENDER class SoCache {
+SoEXTENDER class INVENTOR_API SoCache {
 
   public:
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/caches/SoGLCacheList.h inventor/lib/database/include/Inventor/caches/SoGLCacheList.h
--- /tmp/inventor/lib/database/include/Inventor/caches/SoGLCacheList.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/caches/SoGLCacheList.h	2005-08-01 17:36:15.000000000 +0200
@@ -80,7 +80,7 @@
 class SoState;
 class SoElement;
 
-SoEXTENDER class SoGLCacheList {
+SoEXTENDER class INVENTOR_API SoGLCacheList {
     
   public:
     // Constructor.  Takes the maximum number of caches to build.
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/caches/SoGLRenderCache.h inventor/lib/database/include/Inventor/caches/SoGLRenderCache.h
--- /tmp/inventor/lib/database/include/Inventor/caches/SoGLRenderCache.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/caches/SoGLRenderCache.h	2006-07-17 15:46:47.000000000 +0200
@@ -59,7 +59,8 @@
 #ifndef  _SO_GL_RENDER_CACHE
 #define  _SO_GL_RENDER_CACHE
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/caches/SoCache.h>
 #include <Inventor/elements/SoGLLazyElement.h>
 
@@ -82,7 +83,7 @@
 
 class SoGLDisplayList;
 
-SoEXTENDER class SoGLRenderCache : public SoCache {
+SoEXTENDER class INVENTOR_API SoGLRenderCache : public SoCache {
 
   public:
     // Constructor and destructor
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/caches/SoNormalCache.h inventor/lib/database/include/Inventor/caches/SoNormalCache.h
--- /tmp/inventor/lib/database/include/Inventor/caches/SoNormalCache.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/caches/SoNormalCache.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 //
 ////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoNormalCache : public SoCache {
+SoEXTENDER class INVENTOR_API SoNormalCache : public SoCache {
 
   public:
     // Constructor and destructor
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/details/SoConeDetail.h inventor/lib/database/include/Inventor/details/SoConeDetail.h
--- /tmp/inventor/lib/database/include/Inventor/details/SoConeDetail.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/details/SoConeDetail.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef _SO_CONE_DETAIL_
 #define _SO_CONE_DETAIL_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/details/SoSubDetail.h>
 
 //////////////////////////////////////////////////////////////////////////////
@@ -68,7 +69,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoConeDtl
-class SoConeDetail : public SoDetail {
+class INVENTOR_API SoConeDetail : public SoDetail {
 
     SO_DETAIL_HEADER(SoConeDetail);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/details/SoCubeDetail.h inventor/lib/database/include/Inventor/details/SoCubeDetail.h
--- /tmp/inventor/lib/database/include/Inventor/details/SoCubeDetail.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/details/SoCubeDetail.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef _SO_CUBE_DETAIL_
 #define _SO_CUBE_DETAIL_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/details/SoSubDetail.h>
 
 //////////////////////////////////////////////////////////////////////////////
@@ -68,7 +69,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoCubeDtl
-class SoCubeDetail : public SoDetail {
+class INVENTOR_API SoCubeDetail : public SoDetail {
 
     SO_DETAIL_HEADER(SoCubeDetail);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/details/SoCylinderDetail.h inventor/lib/database/include/Inventor/details/SoCylinderDetail.h
--- /tmp/inventor/lib/database/include/Inventor/details/SoCylinderDetail.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/details/SoCylinderDetail.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef _SO_CYLINDER_DETAIL_
 #define _SO_CYLINDER_DETAIL_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/details/SoSubDetail.h>
 
 //////////////////////////////////////////////////////////////////////////////
@@ -68,7 +69,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoCylDtl
-class SoCylinderDetail : public SoDetail {
+class INVENTOR_API SoCylinderDetail : public SoDetail {
 
     SO_DETAIL_HEADER(SoCylinderDetail);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/details/SoDetail.h inventor/lib/database/include/Inventor/details/SoDetail.h
--- /tmp/inventor/lib/database/include/Inventor/details/SoDetail.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/details/SoDetail.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef _SO_DETAIL_
 #define _SO_DETAIL_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SoType.h>
 
 //////////////////////////////////////////////////////////////////////////////
@@ -75,7 +76,7 @@
 
 // C-api: abstract
 // C-api: prefix=SoDtl
-class SoDetail {
+class INVENTOR_API SoDetail {
   public:
     // Destructor
     // C-api: expose
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/details/SoFaceDetail.h inventor/lib/database/include/Inventor/details/SoFaceDetail.h
--- /tmp/inventor/lib/database/include/Inventor/details/SoFaceDetail.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/details/SoFaceDetail.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef _SO_FACE_DETAIL_
 #define _SO_FACE_DETAIL_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/details/SoPointDetail.h>
 
 //////////////////////////////////////////////////////////////////////////////
@@ -68,7 +69,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoFaceDtl
-class SoFaceDetail : public SoDetail {
+class INVENTOR_API SoFaceDetail : public SoDetail {
 
     SO_DETAIL_HEADER(SoFaceDetail);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/details/SoLineDetail.h inventor/lib/database/include/Inventor/details/SoLineDetail.h
--- /tmp/inventor/lib/database/include/Inventor/details/SoLineDetail.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/details/SoLineDetail.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef _SO_LINE_DETAIL_
 #define _SO_LINE_DETAIL_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/details/SoPointDetail.h>
 
 //////////////////////////////////////////////////////////////////////////////
@@ -69,7 +70,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoLineDtl
-class SoLineDetail : public SoDetail {
+class INVENTOR_API SoLineDetail : public SoDetail {
 
     SO_DETAIL_HEADER(SoLineDetail);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/details/SoPointDetail.h inventor/lib/database/include/Inventor/details/SoPointDetail.h
--- /tmp/inventor/lib/database/include/Inventor/details/SoPointDetail.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/details/SoPointDetail.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef _SO_POINT_DETAIL_
 #define _SO_POINT_DETAIL_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/details/SoSubDetail.h>
 
 //////////////////////////////////////////////////////////////////////////////
@@ -68,7 +69,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoPtDtl
-class SoPointDetail : public SoDetail {
+class INVENTOR_API SoPointDetail : public SoDetail {
 
     SO_DETAIL_HEADER(SoPointDetail);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/details/SoTextDetail.h inventor/lib/database/include/Inventor/details/SoTextDetail.h
--- /tmp/inventor/lib/database/include/Inventor/details/SoTextDetail.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/details/SoTextDetail.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoTxtDtl
-class SoTextDetail : public SoDetail {
+class INVENTOR_API SoTextDetail : public SoDetail {
 
     SO_DETAIL_HEADER(SoTextDetail);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoAccumulatedElement.h inventor/lib/database/include/Inventor/elements/SoAccumulatedElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoAccumulatedElement.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoAccumulatedElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -85,7 +85,7 @@
 
 #include <Inventor/elements/SoSubElement.h>
 
-SoEXTENDER class SoAccumulatedElement : public SoElement {
+SoEXTENDER class INVENTOR_API SoAccumulatedElement : public SoElement {
 
     SO_ELEMENT_ABSTRACT_HEADER(SoAccumulatedElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoAmbientColorElement.h inventor/lib/database/include/Inventor/elements/SoAmbientColorElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoAmbientColorElement.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoAmbientColorElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -75,7 +75,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoAmbientColorElement {
+SoEXTENDER class INVENTOR_API SoAmbientColorElement {
 
 
   public:
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoBBoxModelMatrixElement.h inventor/lib/database/include/Inventor/elements/SoBBoxModelMatrixElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoBBoxModelMatrixElement.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoBBoxModelMatrixElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -72,7 +72,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoBBoxModelMatrixElement : public SoModelMatrixElement {
+SoEXTENDER class INVENTOR_API SoBBoxModelMatrixElement : public SoModelMatrixElement {
 
     SO_ELEMENT_HEADER(SoBBoxModelMatrixElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoCacheElement.h inventor/lib/database/include/Inventor/elements/SoCacheElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoCacheElement.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoCacheElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoCacheElement : public SoElement {
+SoEXTENDER class INVENTOR_API SoCacheElement : public SoElement {
 
     SO_ELEMENT_HEADER(SoCacheElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoClipPlaneElement.h inventor/lib/database/include/Inventor/elements/SoClipPlaneElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoClipPlaneElement.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoClipPlaneElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -74,7 +74,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoClipPlaneElement : public SoAccumulatedElement {
+SoEXTENDER class INVENTOR_API SoClipPlaneElement : public SoAccumulatedElement {
 
     SO_ELEMENT_HEADER(SoClipPlaneElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoComplexityElement.h inventor/lib/database/include/Inventor/elements/SoComplexityElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoComplexityElement.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoComplexityElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoComplexityElement : public SoFloatElement {
+SoEXTENDER class INVENTOR_API SoComplexityElement : public SoFloatElement {
 
     SO_ELEMENT_HEADER(SoComplexityElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoComplexityTypeElement.h inventor/lib/database/include/Inventor/elements/SoComplexityTypeElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoComplexityTypeElement.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoComplexityTypeElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoComplexityTypeElement : public SoInt32Element {
+SoEXTENDER class INVENTOR_API SoComplexityTypeElement : public SoInt32Element {
 
     SO_ELEMENT_HEADER(SoComplexityTypeElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoCoordinateElement.h inventor/lib/database/include/Inventor/elements/SoCoordinateElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoCoordinateElement.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoCoordinateElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -74,7 +74,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoCoordinateElement : public SoReplacedElement {
+SoEXTENDER class INVENTOR_API SoCoordinateElement : public SoReplacedElement {
 
     SO_ELEMENT_HEADER(SoCoordinateElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoCreaseAngleElement.h inventor/lib/database/include/Inventor/elements/SoCreaseAngleElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoCreaseAngleElement.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoCreaseAngleElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoCreaseAngleElement : public SoFloatElement {
+SoEXTENDER class INVENTOR_API SoCreaseAngleElement : public SoFloatElement {
 
     SO_ELEMENT_HEADER(SoCreaseAngleElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoDrawStyleElement.h inventor/lib/database/include/Inventor/elements/SoDrawStyleElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoDrawStyleElement.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoDrawStyleElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoDrawStyleElement : public SoInt32Element {
+SoEXTENDER class INVENTOR_API SoDrawStyleElement : public SoInt32Element {
 
     SO_ELEMENT_HEADER(SoDrawStyleElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoElement.h inventor/lib/database/include/Inventor/elements/SoElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoElement.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoElement.h	2006-07-17 15:46:47.000000000 +0200
@@ -59,6 +59,7 @@
 #ifndef  _SO_ELEMENT
 #define  _SO_ELEMENT
 
+#include <Inventor/system/SbSystem.h>
 //////////////////////////////////////////////////////////////////////////////
 //
 //  Class: SoElement
@@ -92,7 +93,7 @@
 
 class SoTypeList;
 
-SoEXTENDER class SoElement {
+SoEXTENDER class INVENTOR_API SoElement {
 
   public:
     // Initializes element. Called for first element of its kind in
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoEmissiveColorElement.h inventor/lib/database/include/Inventor/elements/SoEmissiveColorElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoEmissiveColorElement.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoEmissiveColorElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -75,7 +75,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoEmissiveColorElement {
+SoEXTENDER class INVENTOR_API SoEmissiveColorElement {
 
 
   public:
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoFloatElement.h inventor/lib/database/include/Inventor/elements/SoFloatElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoFloatElement.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoFloatElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -73,7 +73,7 @@
 
 #include <Inventor/elements/SoSubElement.h>
 
-SoEXTENDER class SoFloatElement : public SoElement {
+SoEXTENDER class INVENTOR_API SoFloatElement : public SoElement {
 
     SO_ELEMENT_ABSTRACT_HEADER(SoFloatElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoFocalDistanceElement.h inventor/lib/database/include/Inventor/elements/SoFocalDistanceElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoFocalDistanceElement.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoFocalDistanceElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -67,7 +67,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoFocalDistanceElement : public SoFloatElement {
+SoEXTENDER class INVENTOR_API SoFocalDistanceElement : public SoFloatElement {
 
     SO_ELEMENT_HEADER(SoFocalDistanceElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoFontNameElement.h inventor/lib/database/include/Inventor/elements/SoFontNameElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoFontNameElement.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoFontNameElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -67,7 +67,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoFontNameElement : public SoReplacedElement {
+SoEXTENDER class INVENTOR_API SoFontNameElement : public SoReplacedElement {
 
     SO_ELEMENT_HEADER(SoFontNameElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoFontSizeElement.h inventor/lib/database/include/Inventor/elements/SoFontSizeElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoFontSizeElement.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoFontSizeElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -67,7 +67,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoFontSizeElement : public SoFloatElement {
+SoEXTENDER class INVENTOR_API SoFontSizeElement : public SoFloatElement {
 
     SO_ELEMENT_HEADER(SoFontSizeElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLCacheContextElement.h inventor/lib/database/include/Inventor/elements/SoGLCacheContextElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLCacheContextElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLCacheContextElement.h	2006-07-12 18:01:38.000000000 +0200
@@ -56,7 +56,7 @@
 #ifndef  _SO_CACHE_CONTEXT_ELEMENT
 #define  _SO_CACHE_CONTEXT_ELEMENT
 
-#include <GL/gl.h>
+#include OPENGL_GL_H
 #include <Inventor/elements/SoSubElement.h>
 
 //////////////////////////////////////////////////////////////////////////////
@@ -107,7 +107,7 @@
 //
 ////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLDisplayList {
+SoEXTENDER class INVENTOR_API SoGLDisplayList {
 
   public:
     //
@@ -171,7 +171,7 @@
 
 class SbIntList;
 
-SoEXTENDER class SoGLCacheContextElement : public SoElement {
+SoEXTENDER class INVENTOR_API SoGLCacheContextElement : public SoElement {
 
     SO_ELEMENT_HEADER(SoGLCacheContextElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLClipPlaneElement.h inventor/lib/database/include/Inventor/elements/SoGLClipPlaneElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLClipPlaneElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLClipPlaneElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLClipPlaneElement : public SoClipPlaneElement {
+SoEXTENDER class INVENTOR_API SoGLClipPlaneElement : public SoClipPlaneElement {
 
     SO_ELEMENT_HEADER(SoGLClipPlaneElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLColorIndexElement.h inventor/lib/database/include/Inventor/elements/SoGLColorIndexElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLColorIndexElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLColorIndexElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLColorIndexElement {
+SoEXTENDER class INVENTOR_API SoGLColorIndexElement {
 
 
   public:
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLCoordinateElement.h inventor/lib/database/include/Inventor/elements/SoGLCoordinateElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLCoordinateElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLCoordinateElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -72,7 +72,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLCoordinateElement : public SoCoordinateElement {
+SoEXTENDER class INVENTOR_API SoGLCoordinateElement : public SoCoordinateElement {
 
     SO_ELEMENT_HEADER(SoGLCoordinateElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLDrawStyleElement.h inventor/lib/database/include/Inventor/elements/SoGLDrawStyleElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLDrawStyleElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLDrawStyleElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -75,7 +75,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLDrawStyleElement : public SoDrawStyleElement {
+SoEXTENDER class INVENTOR_API SoGLDrawStyleElement : public SoDrawStyleElement {
 
     SO_ELEMENT_HEADER(SoGLDrawStyleElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLLazyElement.h inventor/lib/database/include/Inventor/elements/SoGLLazyElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLLazyElement.h	2000-10-14 12:46:07.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLLazyElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -72,7 +72,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLLazyElement : public SoLazyElement {
+SoEXTENDER class INVENTOR_API SoGLLazyElement : public SoLazyElement {
 
     SO_ELEMENT_HEADER(SoGLLazyElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLLightIdElement.h inventor/lib/database/include/Inventor/elements/SoGLLightIdElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLLightIdElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLLightIdElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -76,7 +76,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLLightIdElement : public SoInt32Element {
+SoEXTENDER class INVENTOR_API SoGLLightIdElement : public SoInt32Element {
 
     SO_ELEMENT_HEADER(SoGLLightIdElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLLinePatternElement.h inventor/lib/database/include/Inventor/elements/SoGLLinePatternElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLLinePatternElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLLinePatternElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLLinePatternElement : public SoLinePatternElement {
+SoEXTENDER class INVENTOR_API SoGLLinePatternElement : public SoLinePatternElement {
 
     SO_ELEMENT_HEADER(SoGLLinePatternElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLLineWidthElement.h inventor/lib/database/include/Inventor/elements/SoGLLineWidthElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLLineWidthElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLLineWidthElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLLineWidthElement : public SoLineWidthElement {
+SoEXTENDER class INVENTOR_API SoGLLineWidthElement : public SoLineWidthElement {
 
     SO_ELEMENT_HEADER(SoGLLineWidthElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLMaterialIndexElement.h inventor/lib/database/include/Inventor/elements/SoGLMaterialIndexElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLMaterialIndexElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLMaterialIndexElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -72,7 +72,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLMaterialIndexElement : public SoReplacedElement {
+SoEXTENDER class INVENTOR_API SoGLMaterialIndexElement : public SoReplacedElement {
 
     SO_ELEMENT_HEADER(SoGLMaterialIndexElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLModelMatrixElement.h inventor/lib/database/include/Inventor/elements/SoGLModelMatrixElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLModelMatrixElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLModelMatrixElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -77,7 +77,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLModelMatrixElement : public SoModelMatrixElement {
+SoEXTENDER class INVENTOR_API SoGLModelMatrixElement : public SoModelMatrixElement {
 
     SO_ELEMENT_HEADER(SoGLModelMatrixElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLNormalElement.h inventor/lib/database/include/Inventor/elements/SoGLNormalElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLNormalElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLNormalElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLNormalElement : public SoNormalElement {
+SoEXTENDER class INVENTOR_API SoGLNormalElement : public SoNormalElement {
 
     SO_ELEMENT_HEADER(SoGLNormalElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLPointSizeElement.h inventor/lib/database/include/Inventor/elements/SoGLPointSizeElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLPointSizeElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLPointSizeElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLPointSizeElement : public SoPointSizeElement {
+SoEXTENDER class INVENTOR_API SoGLPointSizeElement : public SoPointSizeElement {
 
     SO_ELEMENT_HEADER(SoGLPointSizeElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLProjectionMatrixElement.h inventor/lib/database/include/Inventor/elements/SoGLProjectionMatrixElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLProjectionMatrixElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLProjectionMatrixElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLProjectionMatrixElement :
+SoEXTENDER class INVENTOR_API SoGLProjectionMatrixElement :
 		public SoProjectionMatrixElement {
 
     SO_ELEMENT_HEADER(SoGLProjectionMatrixElement);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLRenderPassElement.h inventor/lib/database/include/Inventor/elements/SoGLRenderPassElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLRenderPassElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLRenderPassElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLRenderPassElement : public SoElement {
+SoEXTENDER class INVENTOR_API SoGLRenderPassElement : public SoElement {
 
     SO_ELEMENT_HEADER(SoGLRenderPassElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLShapeHintsElement.h inventor/lib/database/include/Inventor/elements/SoGLShapeHintsElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLShapeHintsElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLShapeHintsElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLShapeHintsElement : public SoShapeHintsElement {
+SoEXTENDER class INVENTOR_API SoGLShapeHintsElement : public SoShapeHintsElement {
 
     SO_ELEMENT_HEADER(SoGLShapeHintsElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLTextureCoordinateElement.h inventor/lib/database/include/Inventor/elements/SoGLTextureCoordinateElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLTextureCoordinateElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLTextureCoordinateElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -82,7 +82,7 @@
 //
 typedef void SoTexCoordTexgenCB(void *userdata);
 
-SoEXTENDER class SoGLTextureCoordinateElement :
+SoEXTENDER class INVENTOR_API SoGLTextureCoordinateElement :
 				public SoTextureCoordinateElement {
 
     SO_ELEMENT_HEADER(SoGLTextureCoordinateElement);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLTextureEnabledElement.h inventor/lib/database/include/Inventor/elements/SoGLTextureEnabledElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLTextureEnabledElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLTextureEnabledElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -81,7 +81,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLTextureEnabledElement :
+SoEXTENDER class INVENTOR_API SoGLTextureEnabledElement :
 	public SoInt32Element {
 
     SO_ELEMENT_HEADER(SoGLTextureEnabledElement);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLTextureImageElement.h inventor/lib/database/include/Inventor/elements/SoGLTextureImageElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLTextureImageElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLTextureImageElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -73,7 +73,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLTextureImageElement : public SoTextureImageElement {
+SoEXTENDER class INVENTOR_API SoGLTextureImageElement : public SoTextureImageElement {
 
     SO_ELEMENT_HEADER(SoGLTextureImageElement);
     
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLTextureMatrixElement.h inventor/lib/database/include/Inventor/elements/SoGLTextureMatrixElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLTextureMatrixElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLTextureMatrixElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLTextureMatrixElement : public SoTextureMatrixElement {
+SoEXTENDER class INVENTOR_API SoGLTextureMatrixElement : public SoTextureMatrixElement {
 
     SO_ELEMENT_HEADER(SoGLTextureMatrixElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLUpdateAreaElement.h inventor/lib/database/include/Inventor/elements/SoGLUpdateAreaElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLUpdateAreaElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLUpdateAreaElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -77,7 +77,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLUpdateAreaElement : public SoElement {
+SoEXTENDER class INVENTOR_API SoGLUpdateAreaElement : public SoElement {
 
     SO_ELEMENT_HEADER(SoGLUpdateAreaElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLViewingMatrixElement.h inventor/lib/database/include/Inventor/elements/SoGLViewingMatrixElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLViewingMatrixElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLViewingMatrixElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLViewingMatrixElement : public SoViewingMatrixElement {
+SoEXTENDER class INVENTOR_API SoGLViewingMatrixElement : public SoViewingMatrixElement {
 
     SO_ELEMENT_HEADER(SoGLViewingMatrixElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoGLViewportRegionElement.h inventor/lib/database/include/Inventor/elements/SoGLViewportRegionElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoGLViewportRegionElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoGLViewportRegionElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoGLViewportRegionElement : public SoViewportRegionElement {
+SoEXTENDER class INVENTOR_API SoGLViewportRegionElement : public SoViewportRegionElement {
 
     SO_ELEMENT_HEADER(SoGLViewportRegionElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoInt32Element.h inventor/lib/database/include/Inventor/elements/SoInt32Element.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoInt32Element.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoInt32Element.h	2005-08-01 17:36:15.000000000 +0200
@@ -72,7 +72,7 @@
 
 #include <Inventor/elements/SoSubElement.h>
 
-SoEXTENDER class SoInt32Element : public SoElement {
+SoEXTENDER class INVENTOR_API SoInt32Element : public SoElement {
 
     SO_ELEMENT_ABSTRACT_HEADER(SoInt32Element);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoLazyElement.h inventor/lib/database/include/Inventor/elements/SoLazyElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoLazyElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoLazyElement.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,7 +56,7 @@
 #ifndef  _SO_LAZY_ELEMENT
 #define  _SO_LAZY_ELEMENT
 
-
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbColor.h>
 #include <Inventor/elements/SoElement.h>
 #include <Inventor/elements/SoSubElement.h>
@@ -86,7 +86,7 @@
 // number of components (subelements) in this element:
 #define SO_LAZY_NUM_COMPONENTS  	9
 
-SoEXTENDER class SoLazyElement : public SoElement {
+SoEXTENDER class INVENTOR_API SoLazyElement : public SoElement {
 
     SO_ELEMENT_HEADER(SoLazyElement);
 
@@ -281,7 +281,11 @@
     virtual void	registerGetDependence(SoState *, uint32_t);		
      
     //Struct to hold the inventor state:
+#ifdef WIN32
+    struct ivStateStructName{ 
+#else
     struct {
+#endif
 	//Keep nodeID to compare diffuse GL and diffuse inventor state:
 	//0 is initial value, 1 is invalid    
 	uint32_t	    diffuseNodeId;
@@ -370,7 +374,7 @@
 // color array.
 //////////////////////////////////////////////////////////////////////////
 
-class SoColorPacker {
+class INVENTOR_API SoColorPacker {
     public:
     //Constructor, makes a colorPacker with NULL packedColor pointer:
     SoColorPacker();
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoLightAttenuationElement.h inventor/lib/database/include/Inventor/elements/SoLightAttenuationElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoLightAttenuationElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoLightAttenuationElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoLightAttenuationElement : public SoReplacedElement {
+SoEXTENDER class INVENTOR_API SoLightAttenuationElement : public SoReplacedElement {
 
     SO_ELEMENT_HEADER(SoLightAttenuationElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoLightModelElement.h inventor/lib/database/include/Inventor/elements/SoLightModelElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoLightModelElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoLightModelElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoLightModelElement  {
+SoEXTENDER class INVENTOR_API SoLightModelElement  {
 
   public:
     // These are the available lighting models:
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoLinePatternElement.h inventor/lib/database/include/Inventor/elements/SoLinePatternElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoLinePatternElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoLinePatternElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoLinePatternElement : public SoInt32Element {
+SoEXTENDER class INVENTOR_API SoLinePatternElement : public SoInt32Element {
 
     SO_ELEMENT_HEADER(SoLinePatternElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoLineWidthElement.h inventor/lib/database/include/Inventor/elements/SoLineWidthElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoLineWidthElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoLineWidthElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoLineWidthElement : public SoFloatElement {
+SoEXTENDER class INVENTOR_API SoLineWidthElement : public SoFloatElement {
 
     SO_ELEMENT_HEADER(SoLineWidthElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoLocalBBoxMatrixElement.h inventor/lib/database/include/Inventor/elements/SoLocalBBoxMatrixElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoLocalBBoxMatrixElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoLocalBBoxMatrixElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -81,7 +81,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoLocalBBoxMatrixElement : public SoElement {
+SoEXTENDER class INVENTOR_API SoLocalBBoxMatrixElement : public SoElement {
 
     SO_ELEMENT_HEADER(SoLocalBBoxMatrixElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoMaterialBindingElement.h inventor/lib/database/include/Inventor/elements/SoMaterialBindingElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoMaterialBindingElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoMaterialBindingElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoMaterialBindingElement : public SoInt32Element {
+SoEXTENDER class INVENTOR_API SoMaterialBindingElement : public SoInt32Element {
 
     SO_ELEMENT_HEADER(SoMaterialBindingElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoModelMatrixElement.h inventor/lib/database/include/Inventor/elements/SoModelMatrixElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoModelMatrixElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoModelMatrixElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -77,7 +77,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoModelMatrixElement : public SoAccumulatedElement {
+SoEXTENDER class INVENTOR_API SoModelMatrixElement : public SoAccumulatedElement {
 
     SO_ELEMENT_HEADER(SoModelMatrixElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoNormalBindingElement.h inventor/lib/database/include/Inventor/elements/SoNormalBindingElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoNormalBindingElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoNormalBindingElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoNormalBindingElement : public SoInt32Element {
+SoEXTENDER class INVENTOR_API SoNormalBindingElement : public SoInt32Element {
 
     SO_ELEMENT_HEADER(SoNormalBindingElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoNormalElement.h inventor/lib/database/include/Inventor/elements/SoNormalElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoNormalElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoNormalElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -74,7 +74,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoNormalElement : public SoReplacedElement {
+SoEXTENDER class INVENTOR_API SoNormalElement : public SoReplacedElement {
 
     SO_ELEMENT_HEADER(SoNormalElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoOverrideElement.h inventor/lib/database/include/Inventor/elements/SoOverrideElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoOverrideElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoOverrideElement.h	2005-08-01 19:25:42.000000000 +0200
@@ -91,7 +91,7 @@
 //  
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoOverrideElement : public SoElement {
+SoEXTENDER class INVENTOR_API SoOverrideElement : public SoElement {
 
     SO_ELEMENT_HEADER(SoOverrideElement);
 
@@ -102,6 +102,7 @@
 	COMPLEXITY_TYPE	= 0x8,
 	CREASE_ANGLE	= 0x10,
 	DIFFUSE_COLOR	= 0x20,
+	TRANSPARENCY	= 0x20, // TRANSPARENCY is same as diffuse color:  overriding one will override both.
 	DRAW_STYLE	= 0x40,
 	EMISSIVE_COLOR	= 0x80,
 	FONT_NAME	= 0x100,
@@ -115,8 +116,7 @@
 	SHAPE_HINTS	= 0x10000,
 	SHININESS	= 0x20000,
 	SPECULAR_COLOR	= 0x40000,
-// TRANSPARENCY is same as diffuse color:  overriding one will override both.
-	TRANSPARENCY	= 0x20
+	POLYGON_OFFSET  = 0x80000
     };
 
   public:
@@ -134,86 +134,90 @@
     // "get" methods for each element which can be overridden.
     //
 
-    // Returns TRUE iff SoAmbientColorElement is overridden.
+    // Returns TRUE if SoAmbientColorElement is overridden.
     static SbBool	getAmbientColorOverride(SoState *state)
 	{ SO_GET_OVERRIDE(AMBIENT_COLOR); }
 
-    // Returns TRUE iff SoColorIndexElement is overridden.
+    // Returns TRUE if SoColorIndexElement is overridden.
     static SbBool	getColorIndexOverride(SoState *state)
 	{ SO_GET_OVERRIDE(COLOR_INDEX); }
 
-    // Returns TRUE iff SoComplexityElement is overridden.
+    // Returns TRUE if SoComplexityElement is overridden.
     static SbBool	getComplexityOverride(SoState *state)
 	{ SO_GET_OVERRIDE(COMPLEXITY); }
 
-    // Returns TRUE iff SoComplexityTypeElement is overridden.
+    // Returns TRUE if SoComplexityTypeElement is overridden.
     static SbBool	getComplexityTypeOverride(SoState *state)
 	{ SO_GET_OVERRIDE(COMPLEXITY_TYPE); }
 
-    // Returns TRUE iff SoCreaseAngleElement is overridden.
+    // Returns TRUE if SoCreaseAngleElement is overridden.
     static SbBool	getCreaseAngleOverride(SoState *state)
 	{ SO_GET_OVERRIDE(CREASE_ANGLE); }
 
-    // Returns TRUE iff SoDiffuseColorElement is overridden.
+    // Returns TRUE if SoDiffuseColorElement is overridden.
     static SbBool	getDiffuseColorOverride(SoState *state)
 	{ SO_GET_OVERRIDE(DIFFUSE_COLOR); }
 
-    // Returns TRUE iff SoDrawStyleElement is overridden.
+    // Returns TRUE if SoDrawStyleElement is overridden.
     static SbBool	getDrawStyleOverride(SoState *state)
 	{ SO_GET_OVERRIDE(DRAW_STYLE); }
 
-    // Returns TRUE iff SoEmissiveColorElement is overridden.
+    // Returns TRUE if SoEmissiveColorElement is overridden.
     static SbBool	getEmissiveColorOverride(SoState *state)
 	{ SO_GET_OVERRIDE(EMISSIVE_COLOR); }
 
-    // Returns TRUE iff SoFontNameElement is overridden.
+    // Returns TRUE if SoFontNameElement is overridden.
     static SbBool	getFontNameOverride(SoState *state)
 	{ SO_GET_OVERRIDE(FONT_NAME); }
 
-    // Returns TRUE iff SoFontSizeElement is overridden.
+    // Returns TRUE if SoFontSizeElement is overridden.
     static SbBool	getFontSizeOverride(SoState *state)
 	{ SO_GET_OVERRIDE(FONT_SIZE); }
 
-    // Returns TRUE iff SoLightModelElement is overridden.
+    // Returns TRUE if SoLightModelElement is overridden.
     static SbBool	getLightModelOverride(SoState *state)
 	{ SO_GET_OVERRIDE(LIGHT_MODEL); }
 
-    // Returns TRUE iff SoLinePatternElement is overridden.
+    // Returns TRUE if SoLinePatternElement is overridden.
     static SbBool	getLinePatternOverride(SoState *state)
 	{ SO_GET_OVERRIDE(LINE_PATTERN); }
 
-    // Returns TRUE iff SoLineWidthElement is overridden.
+    // Returns TRUE if SoLineWidthElement is overridden.
     static SbBool	getLineWidthOverride(SoState *state)
 	{ SO_GET_OVERRIDE(LINE_WIDTH); }
 	
-   // Returns TRUE iff SoMaterialBindingElement is overridden.
+    // Returns TRUE if SoMaterialBindingElement is overridden.
     static SbBool	getMaterialBindingOverride(SoState *state)
 	{ SO_GET_OVERRIDE(MATERIAL_BINDING); }
 
-    // Returns TRUE iff SoPointSizeElement is overridden.
+    // Returns TRUE if SoPointSizeElement is overridden.
     static SbBool	getPointSizeOverride(SoState *state)
 	{ SO_GET_OVERRIDE(POINT_SIZE); }
 
-    // Returns TRUE iff SoPickStyleElement is overridden.
+    // Returns TRUE if SoPickStyleElement is overridden.
     static SbBool	getPickStyleOverride(SoState *state)
 	{ SO_GET_OVERRIDE(PICK_STYLE); }
 
-    // Returns TRUE iff SoShapeHintsElement is overridden.
+    // Returns TRUE if SoShapeHintsElement is overridden.
     static SbBool	getShapeHintsOverride(SoState *state)
 	{ SO_GET_OVERRIDE(SHAPE_HINTS); }
 
-    // Returns TRUE iff SoShininessElement is overridden.
+    // Returns TRUE if SoShininessElement is overridden.
     static SbBool	getShininessOverride(SoState *state)
 	{ SO_GET_OVERRIDE(SHININESS); }
 
-    // Returns TRUE iff SoSpecularColorElement is overridden.
+    // Returns TRUE if SoSpecularColorElement is overridden.
     static SbBool	getSpecularColorOverride(SoState *state)
 	{ SO_GET_OVERRIDE(SPECULAR_COLOR); }
 
-    // Returns TRUE iff SoTransparencyElement is overridden.
+    // Returns TRUE if SoTransparencyElement is overridden.
     static SbBool	getTransparencyOverride(SoState *state)
 	{ SO_GET_OVERRIDE(TRANSPARENCY); }
 
+    // Returns TRUE if SoPolygonOffsetElement is overridden.
+    static SbBool	getPolygonOffsetOverride(SoState *state)
+	{ SO_GET_OVERRIDE(POLYGON_OFFSET); }
+
     //
     // "set" methods for each element which can be overridden.
     //
@@ -314,7 +318,11 @@
     // set override flag for SoTransparencyElement.
     static void		setTransparencyOverride(SoState *state, SoNode *,
 						 SbBool override);
-	
+
+    // set override flag for SoPolygonOffsetElement.
+    static void		setPolygonOffsetOverride(SoState *state, SoNode *,
+						 SbBool override)
+         { SO_SET_OVERRIDE(POLYGON_OFFSET); }
 
     // Prints element (for debugging)
     virtual void	print(FILE *fp) const;
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoPickRayElement.h inventor/lib/database/include/Inventor/elements/SoPickRayElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoPickRayElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoPickRayElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -73,7 +73,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoPickRayElement : public SoElement {
+SoEXTENDER class INVENTOR_API SoPickRayElement : public SoElement {
 
     SO_ELEMENT_HEADER(SoPickRayElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoPickStyleElement.h inventor/lib/database/include/Inventor/elements/SoPickStyleElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoPickStyleElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoPickStyleElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoPickStyleElement : public SoInt32Element {
+SoEXTENDER class INVENTOR_API SoPickStyleElement : public SoInt32Element {
 
     SO_ELEMENT_HEADER(SoPickStyleElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoPointSizeElement.h inventor/lib/database/include/Inventor/elements/SoPointSizeElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoPointSizeElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoPointSizeElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoPointSizeElement : public SoFloatElement {
+SoEXTENDER class INVENTOR_API SoPointSizeElement : public SoFloatElement {
 
     SO_ELEMENT_HEADER(SoPointSizeElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoProfileCoordinateElement.h inventor/lib/database/include/Inventor/elements/SoProfileCoordinateElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoProfileCoordinateElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoProfileCoordinateElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -72,7 +72,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoProfileCoordinateElement : public SoReplacedElement {
+SoEXTENDER class INVENTOR_API SoProfileCoordinateElement : public SoReplacedElement {
 
     SO_ELEMENT_HEADER(SoProfileCoordinateElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoProfileElement.h inventor/lib/database/include/Inventor/elements/SoProfileElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoProfileElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoProfileElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoProfileElement : public SoAccumulatedElement {
+SoEXTENDER class INVENTOR_API SoProfileElement : public SoAccumulatedElement {
 
     SO_ELEMENT_HEADER(SoProfileElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoProjectionMatrixElement.h inventor/lib/database/include/Inventor/elements/SoProjectionMatrixElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoProjectionMatrixElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoProjectionMatrixElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoProjectionMatrixElement : public SoReplacedElement {
+SoEXTENDER class INVENTOR_API SoProjectionMatrixElement : public SoReplacedElement {
 
     SO_ELEMENT_HEADER(SoProjectionMatrixElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoReplacedElement.h inventor/lib/database/include/Inventor/elements/SoReplacedElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoReplacedElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoReplacedElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -79,7 +79,7 @@
 
 #include <Inventor/elements/SoSubElement.h>
 
-SoEXTENDER class SoReplacedElement : public SoElement {
+SoEXTENDER class INVENTOR_API SoReplacedElement : public SoElement {
 
     SO_ELEMENT_ABSTRACT_HEADER(SoReplacedElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoShapeHintsElement.h inventor/lib/database/include/Inventor/elements/SoShapeHintsElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoShapeHintsElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoShapeHintsElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoShapeHintsElement : public SoElement {
+SoEXTENDER class INVENTOR_API SoShapeHintsElement : public SoElement {
 
     SO_ELEMENT_HEADER(SoShapeHintsElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoShapeStyleElement.h inventor/lib/database/include/Inventor/elements/SoShapeStyleElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoShapeStyleElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoShapeStyleElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -91,7 +91,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoShapeStyleElement : public SoElement {
+SoEXTENDER class INVENTOR_API SoShapeStyleElement : public SoElement {
 
     SO_ELEMENT_HEADER(SoShapeStyleElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoShininessElement.h inventor/lib/database/include/Inventor/elements/SoShininessElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoShininessElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoShininessElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoShininessElement {
+SoEXTENDER class INVENTOR_API SoShininessElement {
 
 
   public:
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoSpecularColorElement.h inventor/lib/database/include/Inventor/elements/SoSpecularColorElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoSpecularColorElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoSpecularColorElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -75,7 +75,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoSpecularColorElement {
+SoEXTENDER class INVENTOR_API SoSpecularColorElement {
 
 
   public:
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoSubElement.h inventor/lib/database/include/Inventor/elements/SoSubElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoSubElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoSubElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -182,7 +182,8 @@
 // should be the class that this subclass is derived from.
 //
 
-#define SO_ELEMENT_INIT_ABSTRACT_CLASS(className,parentClass)		      \
+#define SO_ELEMENT_INIT_ABSTRACT_CLASS(className,parentClass) {		      \
+    int _value_false= 0;						      \
     do {								      \
 	classTypeId = SoType::createType(parentClass::getClassTypeId(),	      \
 					 SO__QUOTE(className),		      \
@@ -191,9 +192,11 @@
 	    classStackIndex = createStackIndex(classTypeId);		      \
 	else								      \
 	    classStackIndex = parentClass::classStackIndex;		      \
-    } while (0)
+    } while (_value_false);						      \
+    }
 
-#define SO_ELEMENT_INIT_CLASS(className,parentClass)			      \
+#define SO_ELEMENT_INIT_CLASS(className,parentClass) {			      \
+    int _value_false= 0;						      \
     do {								      \
 	classTypeId = SoType::createType(parentClass::getClassTypeId(),	      \
 					 SO__QUOTE(className),		      \
@@ -202,7 +205,8 @@
 	    classStackIndex = createStackIndex(classTypeId);		      \
 	else								      \
 	    classStackIndex = parentClass::classStackIndex;		      \
-    } while (0)
+    } while (_value_false);						      \
+    }
 
 // C-api: begin
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoSwitchElement.h inventor/lib/database/include/Inventor/elements/SoSwitchElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoSwitchElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoSwitchElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoSwitchElement : public SoInt32Element {
+SoEXTENDER class INVENTOR_API SoSwitchElement : public SoInt32Element {
 
     SO_ELEMENT_HEADER(SoSwitchElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoTextureCoordinateBindingElement.h inventor/lib/database/include/Inventor/elements/SoTextureCoordinateBindingElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoTextureCoordinateBindingElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoTextureCoordinateBindingElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoTextureCoordinateBindingElement : public SoInt32Element {
+SoEXTENDER class INVENTOR_API SoTextureCoordinateBindingElement : public SoInt32Element {
 
     SO_ELEMENT_HEADER(SoTextureCoordinateBindingElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoTextureCoordinateElement.h inventor/lib/database/include/Inventor/elements/SoTextureCoordinateElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoTextureCoordinateElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoTextureCoordinateElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -88,7 +88,7 @@
 				      const SbVec3f &normal);
 // C-api: begin
 
-SoEXTENDER class SoTextureCoordinateElement : public SoReplacedElement {
+SoEXTENDER class INVENTOR_API SoTextureCoordinateElement : public SoReplacedElement {
 
     SO_ELEMENT_HEADER(SoTextureCoordinateElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoTextureImageElement.h inventor/lib/database/include/Inventor/elements/SoTextureImageElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoTextureImageElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoTextureImageElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -67,7 +67,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoTextureImageElement : public SoReplacedElement {
+SoEXTENDER class INVENTOR_API SoTextureImageElement : public SoReplacedElement {
 
     SO_ELEMENT_HEADER(SoTextureImageElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoTextureMatrixElement.h inventor/lib/database/include/Inventor/elements/SoTextureMatrixElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoTextureMatrixElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoTextureMatrixElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -72,7 +72,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoTextureMatrixElement : public SoAccumulatedElement {
+SoEXTENDER class INVENTOR_API SoTextureMatrixElement : public SoAccumulatedElement {
 
     SO_ELEMENT_HEADER(SoTextureMatrixElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoTextureQualityElement.h inventor/lib/database/include/Inventor/elements/SoTextureQualityElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoTextureQualityElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoTextureQualityElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -67,7 +67,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoTextureQualityElement : public SoFloatElement {
+SoEXTENDER class INVENTOR_API SoTextureQualityElement : public SoFloatElement {
 
     SO_ELEMENT_HEADER(SoTextureQualityElement);
 
@@ -105,7 +105,7 @@
 //  
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoTextureOverrideElement : public SoElement {
+SoEXTENDER class INVENTOR_API SoTextureOverrideElement : public SoElement {
 
     SO_ELEMENT_HEADER(SoTextureOverrideElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoUnitsElement.h inventor/lib/database/include/Inventor/elements/SoUnitsElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoUnitsElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoUnitsElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoUnitsElement : public SoInt32Element {
+SoEXTENDER class INVENTOR_API SoUnitsElement : public SoInt32Element {
 
     SO_ELEMENT_HEADER(SoUnitsElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoViewingMatrixElement.h inventor/lib/database/include/Inventor/elements/SoViewingMatrixElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoViewingMatrixElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoViewingMatrixElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoViewingMatrixElement : public SoReplacedElement {
+SoEXTENDER class INVENTOR_API SoViewingMatrixElement : public SoReplacedElement {
 
     SO_ELEMENT_HEADER(SoViewingMatrixElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoViewportRegionElement.h inventor/lib/database/include/Inventor/elements/SoViewportRegionElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoViewportRegionElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoViewportRegionElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoViewportRegionElement : public SoElement {
+SoEXTENDER class INVENTOR_API SoViewportRegionElement : public SoElement {
 
     SO_ELEMENT_HEADER(SoViewportRegionElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoViewVolumeElement.h inventor/lib/database/include/Inventor/elements/SoViewVolumeElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoViewVolumeElement.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/elements/SoViewVolumeElement.h	2005-08-01 17:36:15.000000000 +0200
@@ -67,7 +67,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoViewVolumeElement : public SoReplacedElement {
+SoEXTENDER class INVENTOR_API SoViewVolumeElement : public SoReplacedElement {
 
     SO_ELEMENT_HEADER(SoViewVolumeElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/elements/SoWindowElement.h inventor/lib/database/include/Inventor/elements/SoWindowElement.h
--- /tmp/inventor/lib/database/include/Inventor/elements/SoWindowElement.h	2001-02-27 03:17:40.000000000 +0100
+++ inventor/lib/database/include/Inventor/elements/SoWindowElement.h	2007-01-30 10:37:13.000000000 +0100
@@ -56,8 +56,15 @@
 #ifndef  _SO_WINDOW_ELEMENT
 #define  _SO_WINDOW_ELEMENT
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/elements/SoSubElement.h>
+#if defined(WIN32) || (defined(__APPLE__) && !defined(APPLE_GLX))
+typedef void * Window;
+typedef void * GLXContext;
+typedef void Display;
+#else
 #include <GL/glx.h>
+#endif
 
 class SoGLRenderAction;
 
@@ -71,7 +78,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoWindowElement : public SoElement {
+SoEXTENDER class INVENTOR_API SoWindowElement : public SoElement {
 
     SO_ELEMENT_HEADER(SoWindowElement);
 
@@ -87,8 +94,22 @@
     virtual SoElement	*copyMatchInfo() const;
 
     // Sets the window, context and glRenderAction info
+#ifdef WIN32
+    // (HWND)window
+    // (HGLRC)context
+    // (HDC)display
+    static void		set(SoState *state, void *window, void *context, 
+			    void *display, SoGLRenderAction *glAction);
+#elif defined(__APPLE__) && !defined(APPLE_GLX)
+    // (AGLDrawable)window
+    // (AGLContext)context
+    // (void)display
+    static void		set(SoState *state, void *window, void *context, 
+			    void *display, SoGLRenderAction *glAction);
+#else
     static void		set(SoState *state, Window window, GLXContext context, 
 			    Display *display, SoGLRenderAction *glAction);
+#endif
 
     // Returns the current window, context and glRenderAction
     static void	get(SoState *state, Window &window, GLXContext &context, 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoBoolOperation.h inventor/lib/database/include/Inventor/engines/SoBoolOperation.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoBoolOperation.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoBoolOperation.h	2006-07-17 15:46:47.000000000 +0200
@@ -59,6 +59,7 @@
 #ifndef  _SO_BOOL_OPERATION_
 #define  _SO_BOOL_OPERATION_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/engines/SoSubEngine.h>
 #include <Inventor/fields/SoMFEnum.h>
 #include <Inventor/fields/SoMFBool.h>
@@ -66,7 +67,7 @@
 // C-api: prefix=SoBoolOper
 // C-api: public=a,b,operation
 // C-api: public=output,inverse
-class SoBoolOperation : public SoEngine {
+class INVENTOR_API SoBoolOperation : public SoEngine {
 
     SO_ENGINE_HEADER(SoBoolOperation);
     
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoCalculator.h inventor/lib/database/include/Inventor/engines/SoCalculator.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoCalculator.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoCalculator.h	2006-07-17 15:46:47.000000000 +0200
@@ -59,6 +59,7 @@
 #ifndef  _SO_CALCULATOR_
 #define  _SO_CALCULATOR_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/engines/SoSubEngine.h>
 #include <Inventor/fields/SoMFFloat.h>
 #include <Inventor/fields/SoMFString.h>
@@ -69,7 +70,7 @@
 // C-api: public=a,b,c,d,e,f,g,h,A,B,C,D,E,F,G,H,expression
 // C-api: public=oa,ob,oc,od,oA,oB,oC,oD
 // C-api: prefix=SoCalc
-class SoCalculator : public SoEngine {
+class INVENTOR_API SoCalculator : public SoEngine {
 
     SO_ENGINE_HEADER(SoCalculator);
     
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoCompose.h inventor/lib/database/include/Inventor/engines/SoCompose.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoCompose.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoCompose.h	2006-07-17 15:46:47.000000000 +0200
@@ -68,6 +68,7 @@
 #ifndef  _SO_COMPOSE_
 #define  _SO_COMPOSE_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/engines/SoSubEngine.h>
 #include <Inventor/fields/SoMFFloat.h>
 #include <Inventor/fields/SoMFMatrix.h>
@@ -97,7 +98,7 @@
 // 
 // C-api: prefix=SoCmpsV2f
 // C-api: public=x,y,vector
-class SoComposeVec2f : public SoEngine {
+class INVENTOR_API SoComposeVec2f : public SoEngine {
     SO_COMPOSE__HEADER(SoComposeVec2f);
     SoMFFloat		x;	// Input
     SoMFFloat		y;	// Input
@@ -105,7 +106,7 @@
 };
 // C-api: prefix=SoCmpsV3f
 // C-api: public=x,y,z,vector
-class SoComposeVec3f : public SoEngine {
+class INVENTOR_API SoComposeVec3f : public SoEngine {
     SO_COMPOSE__HEADER(SoComposeVec3f);
     SoMFFloat		x;	// Input
     SoMFFloat		y;	// Input
@@ -114,7 +115,7 @@
 };
 // C-api: prefix=SoCmpsV4f
 // C-api: public=x,y,z,w,vector
-class SoComposeVec4f : public SoEngine {
+class INVENTOR_API SoComposeVec4f : public SoEngine {
     SO_COMPOSE__HEADER(SoComposeVec4f);
     SoMFFloat		x;	// Input
     SoMFFloat		y;	// Input
@@ -129,7 +130,7 @@
 // 
 // C-api: prefix=SoDecmpsV2f
 // C-api: public=vector,x,y
-class SoDecomposeVec2f : public SoEngine {
+class INVENTOR_API SoDecomposeVec2f : public SoEngine {
     SO_COMPOSE__HEADER(SoDecomposeVec2f);
     SoMFVec2f		vector;	// Input
     SoEngineOutput	x;	// Output (SoMFFloat)
@@ -137,7 +138,7 @@
 };
 // C-api: prefix=SoDecmpsV3f
 // C-api: public=vector,x,y,z
-class SoDecomposeVec3f : public SoEngine {
+class INVENTOR_API SoDecomposeVec3f : public SoEngine {
     SO_COMPOSE__HEADER(SoDecomposeVec3f);
     SoMFVec3f		vector;	// Input
     SoEngineOutput	x;	// Output (SoMFFloat)
@@ -146,7 +147,7 @@
 };
 // C-api: prefix=SoDecmpsV4f
 // C-api: public=vector,x,y,z,w
-class SoDecomposeVec4f : public SoEngine {
+class INVENTOR_API SoDecomposeVec4f : public SoEngine {
     SO_COMPOSE__HEADER(SoDecomposeVec4f);
     SoMFVec4f		vector;	// Input
     SoEngineOutput	x;	// Output (SoMFFloat)
@@ -161,7 +162,7 @@
 // 
 // C-api: prefix=SoCmpsRot
 // C-api: public=axis,angle,rotation
-class SoComposeRotation : public SoEngine {
+class INVENTOR_API SoComposeRotation : public SoEngine {
     SO_COMPOSE__HEADER(SoComposeRotation);
     SoMFVec3f		axis;		// Input
     SoMFFloat		angle;		// Input
@@ -169,7 +170,7 @@
 };
 // C-api: prefix=SoCmpsRotFromTo
 // C-api: public=from,to,rotation
-class SoComposeRotationFromTo : public SoEngine {
+class INVENTOR_API SoComposeRotationFromTo : public SoEngine {
     SO_COMPOSE__HEADER(SoComposeRotationFromTo);
     SoMFVec3f		from;		// Input
     SoMFVec3f		to;		// Input
@@ -183,7 +184,7 @@
 // 
 // C-api: prefix=SoDecmpsRot
 // C-api: public=rotation,axis,angle
-class SoDecomposeRotation : public SoEngine {
+class INVENTOR_API SoDecomposeRotation : public SoEngine {
     SO_COMPOSE__HEADER(SoDecomposeRotation);
     SoMFRotation	rotation;	// Input
     SoEngineOutput	axis;		// Output (SoMFVec3f)
@@ -198,7 +199,7 @@
 // C-api: prefix=SoCmpsMx
 // C-api: public=translation,rotation,scaleFactor
 // C-api: public=scaleOrientation,center,matrix
-class SoComposeMatrix : public SoEngine {
+class INVENTOR_API SoComposeMatrix : public SoEngine {
     SO_COMPOSE__HEADER(SoComposeMatrix);
     SoMFVec3f		translation;	// Input
     SoMFRotation	rotation;	// Input
@@ -220,7 +221,7 @@
 // C-api: prefix=SoDecmpsMx
 // C-api: public=marix,center,translation,rotation,scaleFactor
 // C-api: public=scaleOrientation
-class SoDecomposeMatrix : public SoEngine {
+class INVENTOR_API SoDecomposeMatrix : public SoEngine {
     SO_COMPOSE__HEADER(SoDecomposeMatrix);
     SoMFMatrix		matrix;		// Input
     SoMFVec3f		center;		// Input
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoComputeBoundingBox.h inventor/lib/database/include/Inventor/engines/SoComputeBoundingBox.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoComputeBoundingBox.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoComputeBoundingBox.h	2006-07-17 15:46:47.000000000 +0200
@@ -60,6 +60,7 @@
 #ifndef  _SO_COMPUTE_BOUNDING_BOX_
 #define  _SO_COMPUTE_BOUNDING_BOX_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbViewportRegion.h>
 #include <Inventor/engines/SoSubEngine.h>
 #include <Inventor/fields/SoSFPath.h>
@@ -96,7 +97,7 @@
 
 // C-api: prefix=SoComputeBBox
 // C-api: public=node,path,min,max,boxCenter,objectCenter
-class SoComputeBoundingBox : public SoEngine {
+class INVENTOR_API SoComputeBoundingBox : public SoEngine {
 
     SO_ENGINE_HEADER(SoComputeBoundingBox);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoConcatenate.h inventor/lib/database/include/Inventor/engines/SoConcatenate.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoConcatenate.h	2000-08-23 07:42:50.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoConcatenate.h	2006-07-17 15:46:47.000000000 +0200
@@ -67,6 +67,7 @@
 #ifndef  _SO_CONCATENATE_
 #define  _SO_CONCATENATE_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/engines/SoSubEngine.h>
 #include <Inventor/fields/SoSFName.h>
 
@@ -82,7 +83,7 @@
 
 // C-api: public=input,output
 // C-api: prefix=SoConcat
-class SoConcatenate : public SoEngine {
+class INVENTOR_API SoConcatenate : public SoEngine {
 
     SO_ENGINE_HEADER(SoConcatenate);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoCounter.h inventor/lib/database/include/Inventor/engines/SoCounter.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoCounter.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoCounter.h	2006-07-17 15:46:47.000000000 +0200
@@ -59,6 +59,7 @@
 #ifndef  _SO_COUNTER_
 #define  _SO_COUNTER_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/engines/SoSubEngine.h>
 #include <Inventor/fields/SoSFShort.h>
 #include <Inventor/fields/SoSFBool.h>
@@ -66,7 +67,7 @@
 
 // C-api: public=min,max,step,trigger,reset
 // C-api: public=output,syncOut
-class SoCounter : public SoEngine {
+class INVENTOR_API SoCounter : public SoEngine {
 
     SO_ENGINE_HEADER(SoCounter);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoElapsedTime.h inventor/lib/database/include/Inventor/engines/SoElapsedTime.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoElapsedTime.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoElapsedTime.h	2006-07-17 15:46:47.000000000 +0200
@@ -59,6 +59,7 @@
 #ifndef  _SO_ELAPSED_TIME_
 #define  _SO_ELAPSED_TIME_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/engines/SoSubEngine.h>
 #include <Inventor/fields/SoSFBool.h>
 #include <Inventor/fields/SoSFFloat.h>
@@ -67,7 +68,7 @@
 
 // C-api: public=timeIn,speed,on,pause,reset
 // C-api: public=timeOut
-class SoElapsedTime : public SoEngine {
+class INVENTOR_API SoElapsedTime : public SoEngine {
 
     SO_ENGINE_HEADER(SoElapsedTime);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoEngine.h inventor/lib/database/include/Inventor/engines/SoEngine.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoEngine.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoEngine.h	2005-08-01 17:36:15.000000000 +0200
@@ -81,7 +81,7 @@
 class SoOutput;
 class SoInput;
 
-class SoEngine : public SoFieldContainer {
+class INVENTOR_API SoEngine : public SoFieldContainer {
 
   public:
 
@@ -197,7 +197,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-class SoEngineOutput {
+class INVENTOR_API SoEngineOutput {
 
   public:
     // type of field this output can connect to
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoFieldConverter.h inventor/lib/database/include/Inventor/engines/SoFieldConverter.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoFieldConverter.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoFieldConverter.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_FIELD_CONVERTER_
 #define  _SO_FIELD_CONVERTER_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SoDB.h>
 #include <Inventor/engines/SoSubEngine.h>
 
@@ -77,7 +78,7 @@
 
 // C-api: abstract
 
-SoEXTENDER class SoFieldConverter : public SoEngine {
+SoEXTENDER class INVENTOR_API SoFieldConverter : public SoEngine {
 
     SO_ENGINE_ABSTRACT_HEADER(SoFieldConverter);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoGate.h inventor/lib/database/include/Inventor/engines/SoGate.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoGate.h	2000-08-23 07:42:50.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoGate.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_GATE_
 #define  _SO_GATE_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SoDB.h>
 #include <Inventor/engines/SoSubEngine.h>
 #include <Inventor/fields/SoSFBool.h>
@@ -74,7 +75,7 @@
 
 // C-api: public=enable,trigger,input,output
 
-class SoGate : public SoEngine {
+class INVENTOR_API SoGate : public SoEngine {
 
     SO_ENGINE_HEADER(SoGate);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoInterpolate.h inventor/lib/database/include/Inventor/engines/SoInterpolate.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoInterpolate.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoInterpolate.h	2006-07-17 15:46:47.000000000 +0200
@@ -72,6 +72,7 @@
 #ifndef  _SO_INTERPOLATE_
 #define  _SO_INTERPOLATE_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SoDB.h>
 #include <Inventor/engines/SoSubEngine.h>
 #include <Inventor/fields/SoSFFloat.h>
@@ -94,7 +95,7 @@
 // C-api: abstract
 // C-api: prefix=SoInterp
 // C-api: public=alpha,output
-class SoInterpolate : public SoEngine {
+class INVENTOR_API SoInterpolate : public SoEngine {
 
     SO_ENGINE_ABSTRACT_HEADER(SoInterpolate);
 
@@ -208,7 +209,7 @@
 // C-api: prefix=SoInterpFloat
 // C-api: public=alpha,output
 // C-api: public=input0, input1
-class SoInterpolateFloat : public SoInterpolate {
+class INVENTOR_API SoInterpolateFloat : public SoInterpolate {
     SO_INTERPOLATE_HEADER(SoInterpolateFloat);
     SoMFFloat		input0;
     SoMFFloat		input1;
@@ -217,7 +218,7 @@
 // C-api: prefix=SoInterpRot
 // C-api: public=alpha,output
 // C-api: public=input0, input1
-class SoInterpolateRotation : public SoInterpolate {
+class INVENTOR_API SoInterpolateRotation : public SoInterpolate {
     SO_INTERPOLATE_HEADER(SoInterpolateRotation);
     SoMFRotation	input0;
     SoMFRotation	input1;
@@ -226,7 +227,7 @@
 // C-api: prefix=SoInterpV2f
 // C-api: public=alpha,output
 // C-api: public=input0, input1
-class SoInterpolateVec2f : public SoInterpolate {
+class INVENTOR_API SoInterpolateVec2f : public SoInterpolate {
     SO_INTERPOLATE_HEADER(SoInterpolateVec2f);
     SoMFVec2f		input0;
     SoMFVec2f		input1;
@@ -235,7 +236,7 @@
 // C-api: prefix=SoInterpV3f
 // C-api: public=alpha,output
 // C-api: public=input0, input1
-class SoInterpolateVec3f : public SoInterpolate {
+class INVENTOR_API SoInterpolateVec3f : public SoInterpolate {
     SO_INTERPOLATE_HEADER(SoInterpolateVec3f);
     SoMFVec3f		input0;
     SoMFVec3f		input1;
@@ -244,7 +245,7 @@
 // C-api: prefix=SoInterpV4f
 // C-api: public=alpha,output
 // C-api: public=input0, input1
-class SoInterpolateVec4f : public SoInterpolate {
+class INVENTOR_API SoInterpolateVec4f : public SoInterpolate {
     SO_INTERPOLATE_HEADER(SoInterpolateVec4f);
     SoMFVec4f		input0;
     SoMFVec4f		input1;
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoOneShot.h inventor/lib/database/include/Inventor/engines/SoOneShot.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoOneShot.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoOneShot.h	2006-07-17 15:46:47.000000000 +0200
@@ -59,6 +59,7 @@
 #ifndef  _SO_ONE_SHOT_
 #define  _SO_ONE_SHOT_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/engines/SoSubEngine.h>
 #include <Inventor/fields/SoSFBool.h>
 #include <Inventor/fields/SoSFTrigger.h>
@@ -67,7 +68,7 @@
 
 // C-api: public=duration,trigger,flags,disable,timeIn
 // C-api: public=timeOut,isActive,ramp
-class SoOneShot : public SoEngine {
+class INVENTOR_API SoOneShot : public SoEngine {
 
     SO_ENGINE_HEADER(SoOneShot);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoOnOff.h inventor/lib/database/include/Inventor/engines/SoOnOff.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoOnOff.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoOnOff.h	2006-07-17 15:46:47.000000000 +0200
@@ -59,11 +59,12 @@
 #ifndef  _SO_ON_OFF_
 #define  _SO_ON_OFF_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/engines/SoSubEngine.h>
 #include <Inventor/fields/SoSFTrigger.h>
 
 // C-api: public=on,off,toggle,isOn,isOff
-class SoOnOff : public SoEngine {
+class INVENTOR_API SoOnOff : public SoEngine {
 
     SO_ENGINE_HEADER(SoOnOff);
     
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoOutputData.h inventor/lib/database/include/Inventor/engines/SoOutputData.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoOutputData.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoOutputData.h	2005-08-01 17:36:15.000000000 +0200
@@ -85,7 +85,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoINTERNAL class SoEngineOutputData {
+SoINTERNAL class INVENTOR_API SoEngineOutputData {
   public:
     // Default constructor
     SoEngineOutputData() { }
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoSelectOne.h inventor/lib/database/include/Inventor/engines/SoSelectOne.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoSelectOne.h	2000-08-23 07:42:50.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoSelectOne.h	2006-07-17 15:46:47.000000000 +0200
@@ -58,6 +58,7 @@
 #ifndef  _SO_SELECTONE_
 #define  _SO_SELECTONE_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/engines/SoSubEngine.h>
 #include <Inventor/fields/SoSFInt32.h>
 #include <Inventor/fields/SoSFName.h>
@@ -73,7 +74,7 @@
 // C-api: prefix=SoSelOne
 // C-api: public=index,input,output
 
-class SoSelectOne : public SoEngine {
+class INVENTOR_API SoSelectOne : public SoEngine {
 
     SO_ENGINE_HEADER(SoSelectOne);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoSubEngine.h inventor/lib/database/include/Inventor/engines/SoSubEngine.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoSubEngine.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoSubEngine.h	2005-08-01 17:36:15.000000000 +0200
@@ -115,7 +115,8 @@
 	return;								      \
     }
 
-#define SO__ENGINE_CHECK_CONSTRUCT(where)				      \
+#define SO__ENGINE_CHECK_CONSTRUCT(where) {				      \
+    int _value_false= 0;						      \
     do {								      \
 	if (inputData == NULL) {					      \
 	    SoDebugError::post(where,					      \
@@ -128,10 +129,12 @@
 	    outputData = new SoEngineOutputData(parentOutputData ?	      \
 						*parentOutputData : NULL);    \
 	}								      \
-    } while(0)
+    } while(_value_false);						      \
+    }
+
 #else
-#define SO__ENGINE_CHECK_INIT(className)	while(0)
-#define SO__ENGINE_CHECK_CONSTRUCT(where)	while(0)
+#define SO__ENGINE_CHECK_INIT(className)	{ int _value_false= 0; while(_value_false); }
+#define SO__ENGINE_CHECK_CONSTRUCT(where)	{ int _value_false= 0; while(_value_false); }
 #endif
 
 /////////////////////////////////////////////////////////////////////////////
@@ -241,7 +244,8 @@
 //  Internal initialization macros
 //
 
-#define SO__ENGINE_INIT_CLASS(className, classPrintName, parentClass)	      \
+#define SO__ENGINE_INIT_CLASS(className, classPrintName, parentClass) {	      \
+    int _value_false= 0;						      \
     do {								      \
 	classTypeId =							      \
 	    SoType::createType(parentClass::getClassTypeId(),		      \
@@ -249,15 +253,18 @@
 			       &className::createInstance);		      \
 	parentInputData = parentClass::getInputDataPtr();		      \
 	parentOutputData = parentClass::getOutputDataPtr();		      \
-    } while (0)
+    } while (_value_false);						      \
+    }
 
-#define SO__ENGINE_INIT_ABSTRACT_CLASS(className,classPrintName,parent)	      \
+#define SO__ENGINE_INIT_ABSTRACT_CLASS(className,classPrintName,parent) {     \
+    int _value_false= 0;						      \
     do {								      \
 	classTypeId = SoType::createType(parent::getClassTypeId(),	      \
 					 classPrintName);		      \
 	parentInputData = parent::getInputDataPtr();			      \
 	parentOutputData = parent::getOutputDataPtr();			      \
-    } while (0)
+    } while (_value_false);						      \
+    }
 
 ////////////////////////////////////////////
 //
@@ -266,7 +273,8 @@
 // argument should be the class that this subclass is derived from.
 //
 
-#define SO_ENGINE_INIT_CLASS(className,parentClass,parentPrintClass)	      \
+#define SO_ENGINE_INIT_CLASS(className,parentClass,parentPrintClass) {	      \
+    int _value_false= 0;						      \
     do {								      \
 	classTypeId =							      \
 	    SoType::createType(SoType::fromName(parentPrintClass),	      \
@@ -274,22 +282,26 @@
 			       &className::createInstance);		      \
 	parentInputData = parentClass::getInputDataPtr();		      \
 	parentOutputData = parentClass::getOutputDataPtr();		      \
-    } while (0)
+    } while (_value_false);						      \
+    }
 
-#define SO_ENGINE_INIT_ABSTRACT_CLASS(className,parent,parentPrintClass)      \
+#define SO_ENGINE_INIT_ABSTRACT_CLASS(className,parent,parentPrintClass) {    \
+    int _value_false= 0;						      \
     do {								      \
 	classTypeId = SoType::createType(SoType::fromName(parentPrintClass),  \
 					 SO__QUOTE(className));		      \
 	parentInputData = parent::getInputDataPtr();			      \
 	parentOutputData = parent::getOutputDataPtr();			      \
-    } while (0)
+    } while (_value_false);						      \
+    }
 
 /////////////////////////////////////////////////////////////////////////////
 //
 // Macro to be called within each constructor
 //
 
-#define SO_ENGINE_CONSTRUCTOR(className)				      \
+#define SO_ENGINE_CONSTRUCTOR(className) {				      \
+    int _value_false= 0;						      \
     do {								      \
         SO__ENGINE_CHECK_INIT(className);				      \
         if (inputData == NULL) {					      \
@@ -301,7 +313,8 @@
         else								      \
             firstInstance = FALSE;					      \
         isBuiltIn = FALSE;						      \
-    } while(0)
+    } while (_value_false);						      \
+    }
 
 ////////////////////////////////////////////////
 //
@@ -328,7 +341,8 @@
 // of a type derived from SoField.
 //
 
-#define SO_ENGINE_ADD_INPUT(inputName, defValue)			      \
+#define SO_ENGINE_ADD_INPUT(inputName, defValue) {			      \
+    int _value_false= 0;						      \
     do {								      \
 	SO__ENGINE_CHECK_CONSTRUCT(__FILE__);				      \
 	if (firstInstance)						      \
@@ -336,7 +350,8 @@
 				&this->inputName);			      \
 	this->inputName.setValue defValue;				      \
 	this->inputName.setContainer(this);				      \
-    } while(0)
+    } while (_value_false);						      \
+    }
 
 ////////////////////////////////////////////
 //
@@ -355,7 +370,8 @@
 // The outputs must be public member variables of type SoEngineOutput.
 //
 
-#define SO_ENGINE_ADD_OUTPUT(outputName, type)				      \
+#define SO_ENGINE_ADD_OUTPUT(outputName, type) {			      \
+    int _value_false= 0;						      \
     do {								      \
 	SO__ENGINE_CHECK_CONSTRUCT(__FILE__);				      \
 	if (firstInstance)						      \
@@ -363,7 +379,8 @@
 				  &this->outputName,			      \
 				  type::getClassTypeId());		      \
 	this->outputName.setContainer(this);				      \
-    } while(0)
+    } while (_value_false);						      \
+    }
 
 ////////////////////////////////////////////
 //
@@ -387,13 +404,15 @@
 //	SO_ENGINE_DEFINE_ENUM_VALUE(Chipmunk, THEODORE);
 //
 
-#define SO_ENGINE_DEFINE_ENUM_VALUE(enumType,enumValue)			      \
+#define SO_ENGINE_DEFINE_ENUM_VALUE(enumType,enumValue) {		      \
+    int _value_false= 0;						      \
     do {								      \
 	SO__ENGINE_CHECK_CONSTRUCT(__FILE__);				      \
 	if (firstInstance)						      \
 	    inputData->addEnumValue(SO__QUOTE(enumType),		      \
 				    SO__QUOTE(enumValue), enumValue);	      \
-    } while (0)
+    } while (_value_false);						      \
+    }
 
 ////////////////////////////////////////////
 //
@@ -401,7 +420,8 @@
 // This should be called in the evaluate() routine.
 //
 
-#define SO_ENGINE_OUTPUT(outputName,type,code)				      \
+#define SO_ENGINE_OUTPUT(outputName,type,code) {			      \
+    int _value_false= 0;						      \
     do {								      \
 	if (outputName.isEnabled()) {					      \
 	    for (int _eng_out_i = 0;					      \
@@ -413,7 +433,8 @@
 		}							      \
 	    }								      \
 	}								      \
-    } while(0)
+    } while (_value_false);						      \
+    }
 
 // C-api: begin
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoTimeCounter.h inventor/lib/database/include/Inventor/engines/SoTimeCounter.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoTimeCounter.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoTimeCounter.h	2006-07-17 15:46:47.000000000 +0200
@@ -59,6 +59,7 @@
 #ifndef  _SO_TIME_COUNTER_
 #define  _SO_TIME_COUNTER_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/engines/SoSubEngine.h>
 #include <Inventor/fields/SoSFShort.h>
 #include <Inventor/fields/SoSFFloat.h>
@@ -69,7 +70,7 @@
 
 // C-api: public=min,max,step,on,frequency,duty,timeIn,syncIn,reset
 // C-api: public=output,syncOut
-class SoTimeCounter : public SoEngine {
+class INVENTOR_API SoTimeCounter : public SoEngine {
 
     SO_ENGINE_HEADER(SoTimeCounter);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoTransformVec3f.h inventor/lib/database/include/Inventor/engines/SoTransformVec3f.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoTransformVec3f.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoTransformVec3f.h	2006-07-17 15:46:47.000000000 +0200
@@ -59,13 +59,14 @@
 #ifndef  _SO_TRANSFORM_VEC3F_
 #define  _SO_TRANSFORM_VEC3F_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/engines/SoSubEngine.h>
 #include <Inventor/fields/SoMFMatrix.h>
 #include <Inventor/fields/SoMFVec3f.h>
 
 // C-api: public=vector,matrix,point,direction,normalDirection
 // C-api: prefix=SoXfV3f
-class SoTransformVec3f : public SoEngine {
+class INVENTOR_API SoTransformVec3f : public SoEngine {
 
     SO_ENGINE_HEADER(SoTransformVec3f);
     
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/engines/SoTriggerAny.h inventor/lib/database/include/Inventor/engines/SoTriggerAny.h
--- /tmp/inventor/lib/database/include/Inventor/engines/SoTriggerAny.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/engines/SoTriggerAny.h	2006-07-17 15:46:47.000000000 +0200
@@ -59,12 +59,13 @@
 #ifndef  _SO_TRIGGER_ANY_
 #define  _SO_TRIGGER_ANY_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/engines/SoSubEngine.h>
 #include <Inventor/fields/SoSFTrigger.h>
 
 // C-api: public=input0,input1,input2,input3,input4,input5
 // C-api: public=input6,input7,input8,input9,output
-class SoTriggerAny : public SoEngine {
+class INVENTOR_API SoTriggerAny : public SoEngine {
 
     SO_ENGINE_HEADER(SoTriggerAny);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/errors/SoDebugError.h inventor/lib/database/include/Inventor/errors/SoDebugError.h
--- /tmp/inventor/lib/database/include/Inventor/errors/SoDebugError.h	2002-05-31 03:57:32.000000000 +0200
+++ inventor/lib/database/include/Inventor/errors/SoDebugError.h	2005-08-01 17:36:15.000000000 +0200
@@ -80,7 +80,11 @@
 #  pragma set woff 1375
 #endif
 
-class SoDebugError : public SoError {
+#ifdef WIN32
+#undef ERROR
+#endif
+
+class INVENTOR_API SoDebugError : public SoError {
 
   public:
     enum Severity {
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/errors/SoError.h inventor/lib/database/include/Inventor/errors/SoError.h
--- /tmp/inventor/lib/database/include/Inventor/errors/SoError.h	2002-05-31 03:57:32.000000000 +0200
+++ inventor/lib/database/include/Inventor/errors/SoError.h	2006-07-17 15:46:47.000000000 +0200
@@ -95,6 +95,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbString.h>
 #include <Inventor/SoType.h>
 
@@ -106,10 +107,10 @@
 class SoPath;
 
 // Error handling callbacks are of this type:
-typedef void	SoErrorCB(const SoError *error, void *data);
+typedef void INVENTOR_API SoErrorCB(const SoError *error, void *data);
 
 // C-api: prefix=SoErr
-class SoError {
+class INVENTOR_API SoError {
 
   public:
     // Sets/returns handler callback for SoError class
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/errors/SoMemoryError.h inventor/lib/database/include/Inventor/errors/SoMemoryError.h
--- /tmp/inventor/lib/database/include/Inventor/errors/SoMemoryError.h	2002-05-31 03:57:32.000000000 +0200
+++ inventor/lib/database/include/Inventor/errors/SoMemoryError.h	2005-08-01 17:36:15.000000000 +0200
@@ -77,7 +77,7 @@
 #  pragma set woff 1375
 #endif
 
-class SoMemoryError : public SoError {
+class INVENTOR_API SoMemoryError : public SoError {
 
   public:
     // Sets/returns handler callback for SoMemoryError class
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/errors/SoReadError.h inventor/lib/database/include/Inventor/errors/SoReadError.h
--- /tmp/inventor/lib/database/include/Inventor/errors/SoReadError.h	2002-05-31 03:57:32.000000000 +0200
+++ inventor/lib/database/include/Inventor/errors/SoReadError.h	2005-08-01 17:36:15.000000000 +0200
@@ -78,7 +78,7 @@
 #  pragma set woff 1375
 #endif
 
-class SoReadError : public SoError {
+class INVENTOR_API SoReadError : public SoError {
 
   public:
     // Sets/returns handler callback for SoReadError class
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/events/SoButtonEvent.h inventor/lib/database/include/Inventor/events/SoButtonEvent.h
--- /tmp/inventor/lib/database/include/Inventor/events/SoButtonEvent.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/events/SoButtonEvent.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,12 +56,13 @@
 #ifndef  _SO_BUTTON_EVENT_
 #define  _SO_BUTTON_EVENT_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbBasic.h>
 #include <Inventor/events/SoSubEvent.h>
 
 
 // C-api: prefix=SoBtnEv
-class SoButtonEvent : public SoEvent {
+class INVENTOR_API SoButtonEvent : public SoEvent {
 
     SO_EVENT_HEADER();
     
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/events/SoEvent.h inventor/lib/database/include/Inventor/events/SoEvent.h
--- /tmp/inventor/lib/database/include/Inventor/events/SoEvent.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/events/SoEvent.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_EVENT_
 #define  _SO_EVENT_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbBasic.h>
 #include <Inventor/SbViewportRegion.h>
 #include <Inventor/SbLinear.h>
@@ -63,7 +64,7 @@
 #include <Inventor/SoType.h>
 
 // C-api: prefix=SoEv
-class SoEvent {
+class INVENTOR_API SoEvent {
   public:
   
     // Constructor and destructor
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/events/SoKeyboardEvent.h inventor/lib/database/include/Inventor/events/SoKeyboardEvent.h
--- /tmp/inventor/lib/database/include/Inventor/events/SoKeyboardEvent.h	2000-10-29 16:04:17.000000000 +0100
+++ inventor/lib/database/include/Inventor/events/SoKeyboardEvent.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_KEYBOARD_EVENT_
 #define  _SO_KEYBOARD_EVENT_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbBasic.h>
 #include <Inventor/events/SoButtonEvent.h>
 
@@ -75,8 +76,14 @@
 // C-api: interpret #define SO_KEY_RELEASE_EV(EVENT,KEY)
 // C-api: interpret     (SoKeyEvIsKeyReleaseEv(EVENT,KEY))
 
+// several windows headers define DELETE
+#if defined(WIN32) && defined(DELETE)
+# define SOKEYBOARDEVENT_DELETE_DEF DELETE
+# undef DELETE
+#endif
+
 // C-api: prefix=SoKeyEv
-class SoKeyboardEvent : public SoButtonEvent {
+class INVENTOR_API SoKeyboardEvent : public SoButtonEvent {
 
     SO_EVENT_HEADER();
     
@@ -212,6 +219,9 @@
 	SCROLL_LOCK = 0xff14, 
 	ESCAPE = 0xff1b, 
 	DELETE = 0xffff, 
+#ifdef WIN32
+	KEY_DELETE = DELETE,	// Added for TGS Open Inventor compatibility
+#endif
 	PRINT = 0xff61, 
 	INSERT = 0xff63, 
 	NUM_LOCK = 0xff7f, 
@@ -265,5 +275,9 @@
     Key			key;	// which key
 };
 
+#ifdef SOKEYBOARDEVENT_DELETE_DEF
+# define DELETE SOKEYBOARDEVENT_DELETE_DEF
+# undef SOKEYBOARDEVENT_DELETE_DEF
+#endif
 
 #endif /* _SO_KEYBOARD_EVENT_ */
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/events/SoLocation2Event.h inventor/lib/database/include/Inventor/events/SoLocation2Event.h
--- /tmp/inventor/lib/database/include/Inventor/events/SoLocation2Event.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/events/SoLocation2Event.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,13 +56,14 @@
 #ifndef  _SO_LOCATION2_EVENT_
 #define  _SO_LOCATION2_EVENT_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbBasic.h>
 #include <Inventor/SbLinear.h>
 #include <Inventor/events/SoSubEvent.h>
 
 
 // C-api: prefix=SoLoc2Ev
-class SoLocation2Event : public SoEvent {
+class INVENTOR_API SoLocation2Event : public SoEvent {
 
     SO_EVENT_HEADER();
     
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/events/SoMotion3Event.h inventor/lib/database/include/Inventor/events/SoMotion3Event.h
--- /tmp/inventor/lib/database/include/Inventor/events/SoMotion3Event.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/events/SoMotion3Event.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,13 +56,14 @@
 #ifndef  _SO_MOTION3_EVENT_
 #define  _SO_MOTION3_EVENT_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbBasic.h>
 #include <Inventor/SbLinear.h>
 #include <Inventor/events/SoSubEvent.h>
 
 
 // C-api: prefix=SoMotion3Ev
-class SoMotion3Event : public SoEvent {
+class INVENTOR_API SoMotion3Event : public SoEvent {
 
     SO_EVENT_HEADER();
     
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/events/SoMouseButtonEvent.h inventor/lib/database/include/Inventor/events/SoMouseButtonEvent.h
--- /tmp/inventor/lib/database/include/Inventor/events/SoMouseButtonEvent.h	2000-10-29 16:04:17.000000000 +0100
+++ inventor/lib/database/include/Inventor/events/SoMouseButtonEvent.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_MOUSE_BUTTON_EVENT_
 #define  _SO_MOUSE_BUTTON_EVENT_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbBasic.h>
 #include <Inventor/events/SoButtonEvent.h>
 
@@ -77,7 +78,7 @@
 
 
 // C-api: prefix=SoMouseEv
-class SoMouseButtonEvent : public SoButtonEvent {
+class INVENTOR_API SoMouseButtonEvent : public SoButtonEvent {
 
     SO_EVENT_HEADER();
     
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/events/SoSpaceballButtonEvent.h inventor/lib/database/include/Inventor/events/SoSpaceballButtonEvent.h
--- /tmp/inventor/lib/database/include/Inventor/events/SoSpaceballButtonEvent.h	2000-10-29 16:04:17.000000000 +0100
+++ inventor/lib/database/include/Inventor/events/SoSpaceballButtonEvent.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_SPACEBALL_BUTTON_EVENT_
 #define  _SO_SPACEBALL_BUTTON_EVENT_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbBasic.h>
 #include <Inventor/events/SoButtonEvent.h>
 
@@ -77,7 +78,7 @@
 
 
 // C-api: prefix=SoSpballEv
-class SoSpaceballButtonEvent : public SoButtonEvent {
+class INVENTOR_API SoSpaceballButtonEvent : public SoButtonEvent {
 
     SO_EVENT_HEADER();
     
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoFieldContainer.h inventor/lib/database/include/Inventor/fields/SoFieldContainer.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoFieldContainer.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoFieldContainer.h	2006-07-17 15:46:47.000000000 +0200
@@ -60,6 +60,7 @@
 #ifndef  _SO_FIELD_CONTAINER_
 #define  _SO_FIELD_CONTAINER_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/misc/SoBase.h>
 
 //////////////////////////////////////////////////////////////////////////////
@@ -77,7 +78,7 @@
 class SoFieldList;
 
 // C-api: prefix=SoFieldCont
-class SoFieldContainer : public SoBase {
+class INVENTOR_API SoFieldContainer : public SoBase {
 
   public:
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoFieldData.h inventor/lib/database/include/Inventor/fields/SoFieldData.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoFieldData.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoFieldData.h	2005-08-01 17:36:15.000000000 +0200
@@ -85,7 +85,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoINTERNAL class SoFieldData {
+SoINTERNAL class INVENTOR_API SoFieldData {
   public:
     // Constructor
     SoFieldData() {}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoField.h inventor/lib/database/include/Inventor/fields/SoField.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoField.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoField.h	2005-08-01 17:36:15.000000000 +0200
@@ -79,7 +79,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: abstract
-class SoField {
+class INVENTOR_API SoField {
   public:
     // Destructor
     // C-api: expose
@@ -361,7 +361,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: abstract
-class SoSField : public SoField {
+class INVENTOR_API SoSField : public SoField {
   public:
     // Destructor
     virtual ~SoSField();
@@ -397,7 +397,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: abstract
-class SoMField : public SoField {
+class INVENTOR_API SoMField : public SoField {
 
   public:
     // Destructor
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFBitMask.h inventor/lib/database/include/Inventor/fields/SoMFBitMask.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFBitMask.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFBitMask.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMBitMask
-class SoMFBitMask : public SoMFEnum {
+class INVENTOR_API SoMFBitMask : public SoMFEnum {
     // Use standard field stuff for derived class;
     // the rest is inherited from SoMFEnum
     SO_MFIELD_DERIVED_HEADER(SoMFBitMask, int, int);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFBool.h inventor/lib/database/include/Inventor/fields/SoMFBool.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFBool.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFBool.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMBool
-class SoMFBool : public SoMField {
+class INVENTOR_API SoMFBool : public SoMField {
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFBool, SbBool, SbBool);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFColor.h inventor/lib/database/include/Inventor/fields/SoMFColor.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFColor.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFColor.h	2005-08-01 17:36:15.000000000 +0200
@@ -67,7 +67,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMCol
-class SoMFColor : public SoMField {
+class INVENTOR_API SoMFColor : public SoMField {
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFColor, SbColor, const SbColor &);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFEngine.h inventor/lib/database/include/Inventor/fields/SoMFEngine.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFEngine.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFEngine.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMEngine
-class SoMFEngine : public SoMField {
+class INVENTOR_API SoMFEngine : public SoMField {
 
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFEngine, SoEngine *, SoEngine *);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFEnum.h inventor/lib/database/include/Inventor/fields/SoMFEnum.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFEnum.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFEnum.h	2005-08-01 17:36:15.000000000 +0200
@@ -76,7 +76,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMEnum
-class SoMFEnum : public SoMField {
+class INVENTOR_API SoMFEnum : public SoMField {
 
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFEnum, int, int);
@@ -122,7 +122,8 @@
 //  The container must have a field 'firstInstance'.
 //
 #ifdef DEBUG
-#define SO__MF_ENUM_CHECK_DATA(vals, typeName, fieldName, containerMacroName) \
+#define SO__MF_ENUM_CHECK_DATA(vals, typeName, fieldName, containerMacroName) {  \
+    int _value_false= 0;						      \
     do {								      \
 	if (vals == NULL && firstInstance)				      \
 	    SoDebugError::post("SO_SET_MF_ENUM_TYPE",			      \
@@ -130,9 +131,10 @@
 			       " use SO_%s_DEFINE_ENUM_VALUE(%s, ...)?",      \
 			       fieldName, __FILE__, __LINE__,		      \
 			       containerMacroName, typeName);		      \
-    } while(0)
+    } while (_value_false);						      \
+    }
 #else
-#define SO__MF_ENUM_CHECK_DATA(vals, typeName, fieldName, containerMacroName)	while(0)
+#define SO__MF_ENUM_CHECK_DATA(vals, typeName, fieldName, containerMacroName)	{ int _value_false= 0; while(_value_false); }
 #endif
 	
 
@@ -142,7 +144,8 @@
 // SoMFEnum field.
 //
 
-#define	SO__MF_ENUM_SET_TYPE(fieldName, enumType, contMacroName, contData)    \
+#define	SO__MF_ENUM_SET_TYPE(fieldName, enumType, contMacroName, contData) {  \
+    int _value_false= 0;						      \
     do {								      \
 	int _so_mf_enum_num;						      \
 	int *_so_mf_enum_vals;						      \
@@ -158,7 +161,8 @@
 	fieldName.setEnums(_so_mf_enum_num,				      \
 			   _so_mf_enum_vals,				      \
 			   _so_mf_enum_names);				      \
-    } while (0)
+    } while (_value_false);						      \
+    }
 
 #define SO_NODE_SET_MF_ENUM_TYPE(fieldName, enumType)			      \
     SO__MF_ENUM_SET_TYPE(fieldName,enumType,"NODE",fieldData)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFFloat.h inventor/lib/database/include/Inventor/fields/SoMFFloat.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFFloat.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFFloat.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMFloat
-class SoMFFloat : public SoMField {
+class INVENTOR_API SoMFFloat : public SoMField {
 
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFFloat, float, float);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFInt32.h inventor/lib/database/include/Inventor/fields/SoMFInt32.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFInt32.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFInt32.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMInt32
-class SoMFInt32 : public SoMField {
+class INVENTOR_API SoMFInt32 : public SoMField {
 
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFInt32, int32_t, int32_t);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFMatrix.h inventor/lib/database/include/Inventor/fields/SoMFMatrix.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFMatrix.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFMatrix.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMMx
-class SoMFMatrix : public SoMField {
+class INVENTOR_API SoMFMatrix : public SoMField {
 
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFMatrix, SbMatrix, const SbMatrix &);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFName.h inventor/lib/database/include/Inventor/fields/SoMFName.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFName.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFName.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMName
-class SoMFName : public SoMField {
+class INVENTOR_API SoMFName : public SoMField {
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFName, SbName, const SbName &);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFNode.h inventor/lib/database/include/Inventor/fields/SoMFNode.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFNode.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFNode.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMNode
-class SoMFNode : public SoMField {
+class INVENTOR_API SoMFNode : public SoMField {
 
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFNode, SoNode *, SoNode *);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFPath.h inventor/lib/database/include/Inventor/fields/SoMFPath.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFPath.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFPath.h	2005-08-01 17:36:15.000000000 +0200
@@ -67,7 +67,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMPath
-class SoMFPath : public SoMField {
+class INVENTOR_API SoMFPath : public SoMField {
 
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFPath, SoPath *, SoPath *);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFPlane.h inventor/lib/database/include/Inventor/fields/SoMFPlane.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFPlane.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFPlane.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMPln
-class SoMFPlane : public SoMField {
+class INVENTOR_API SoMFPlane : public SoMField {
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFPlane, SbPlane, SbPlane);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFRotation.h inventor/lib/database/include/Inventor/fields/SoMFRotation.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFRotation.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFRotation.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMRot
-class SoMFRotation : public SoMField {
+class INVENTOR_API SoMFRotation : public SoMField {
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFRotation, SbRotation, const SbRotation &);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFShort.h inventor/lib/database/include/Inventor/fields/SoMFShort.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFShort.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFShort.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMShort
-class SoMFShort : public SoMField {
+class INVENTOR_API SoMFShort : public SoMField {
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFShort, short, short);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFString.h inventor/lib/database/include/Inventor/fields/SoMFString.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFString.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFString.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMStr
-class SoMFString : public SoMField {
+class INVENTOR_API SoMFString : public SoMField {
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFString, SbString, const SbString &);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFTime.h inventor/lib/database/include/Inventor/fields/SoMFTime.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFTime.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFTime.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMTime
-class SoMFTime : public SoMField {
+class INVENTOR_API SoMFTime : public SoMField {
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFTime, SbTime, const SbTime &);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFUInt32.h inventor/lib/database/include/Inventor/fields/SoMFUInt32.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFUInt32.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFUInt32.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMUInt32
-class SoMFUInt32 : public SoMField {
+class INVENTOR_API SoMFUInt32 : public SoMField {
 
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFUInt32, uint32_t, uint32_t);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFUShort.h inventor/lib/database/include/Inventor/fields/SoMFUShort.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFUShort.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFUShort.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMUShort
-class SoMFUShort : public SoMField {
+class INVENTOR_API SoMFUShort : public SoMField {
 
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFUShort, unsigned short, unsigned short);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFVec2f.h inventor/lib/database/include/Inventor/fields/SoMFVec2f.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFVec2f.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFVec2f.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMV2f
-class SoMFVec2f : public SoMField {
+class INVENTOR_API SoMFVec2f : public SoMField {
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFVec2f, SbVec2f, const SbVec2f &);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFVec3f.h inventor/lib/database/include/Inventor/fields/SoMFVec3f.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFVec3f.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFVec3f.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMV3f
-class SoMFVec3f : public SoMField {
+class INVENTOR_API SoMFVec3f : public SoMField {
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFVec3f, SbVec3f, const SbVec3f &);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoMFVec4f.h inventor/lib/database/include/Inventor/fields/SoMFVec4f.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoMFVec4f.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoMFVec4f.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoMV4f
-class SoMFVec4f : public SoMField {
+class INVENTOR_API SoMFVec4f : public SoMField {
     // Use standard field stuff
     SO_MFIELD_HEADER(SoMFVec4f, SbVec4f, const SbVec4f &);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFBitMask.h inventor/lib/database/include/Inventor/fields/SoSFBitMask.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFBitMask.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFBitMask.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSBitMask
-class SoSFBitMask : public SoSFEnum {
+class INVENTOR_API SoSFBitMask : public SoSFEnum {
 
     // Use standard field stuff for derived class;
     // the rest is inherited from SoSFEnum
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFBool.h inventor/lib/database/include/Inventor/fields/SoSFBool.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFBool.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFBool.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSBool
-class SoSFBool : public SoSField {
+class INVENTOR_API SoSFBool : public SoSField {
 
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFBool, SbBool, SbBool);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFColor.h inventor/lib/database/include/Inventor/fields/SoSFColor.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFColor.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFColor.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSCol
-class SoSFColor : public SoSField {
+class INVENTOR_API SoSFColor : public SoSField {
 
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFColor, SbColor, const SbColor &);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFEngine.h inventor/lib/database/include/Inventor/fields/SoSFEngine.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFEngine.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFEngine.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSEngine
-class SoSFEngine : public SoSField {
+class INVENTOR_API SoSFEngine : public SoSField {
 
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFEngine, SoEngine *, SoEngine *);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFEnum.h inventor/lib/database/include/Inventor/fields/SoSFEnum.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFEnum.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFEnum.h	2005-08-01 17:36:15.000000000 +0200
@@ -76,7 +76,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSEnum
-class SoSFEnum : public SoSField {
+class INVENTOR_API SoSFEnum : public SoSField {
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFEnum, int, int);
 
@@ -114,7 +114,8 @@
 //  The container must have a field 'firstInstance'.
 //
 #ifdef DEBUG
-#define SO__SF_ENUM_CHECK_DATA(vals, typeName, fieldName, containerMacroName) \
+#define SO__SF_ENUM_CHECK_DATA(vals, typeName, fieldName, containerMacroName) {  \
+    int _value_false= 0;						      \
     do {								      \
 	if (vals == NULL && firstInstance)				      \
 	    SoDebugError::post("SO_SET_SF_ENUM_TYPE",			      \
@@ -122,9 +123,10 @@
 			       " use SO_%s_DEFINE_ENUM_VALUE(%s, ...)?",      \
 			       fieldName, __FILE__, __LINE__,		      \
 			       containerMacroName, typeName);		      \
-    } while(0)
+    } while (_value_false);						      \
+    }
 #else
-#define SO__SF_ENUM_CHECK_DATA(vals, typeName, fieldName, containerMacroName)	while(0)
+#define SO__SF_ENUM_CHECK_DATA(vals, typeName, fieldName, containerMacroName)	{ int _value_false= 0; while(_value_false); }
 #endif
 	
 
@@ -134,7 +136,8 @@
 // SoSFEnum field.
 //
 
-#define	SO__SF_ENUM_SET_TYPE(fieldName, enumType, contMacroName, contData)    \
+#define	SO__SF_ENUM_SET_TYPE(fieldName, enumType, contMacroName, contData) {  \
+    int _value_false= 0;						      \
     do {								      \
 	int _so_sf_enum_num;						      \
 	int *_so_sf_enum_vals;						      \
@@ -150,7 +153,8 @@
 	fieldName.setEnums(_so_sf_enum_num,				      \
 			   _so_sf_enum_vals,				      \
 			   _so_sf_enum_names);				      \
-    } while (0)
+    } while (_value_false);						      \
+    }
 
 #define SO_NODE_SET_SF_ENUM_TYPE(fieldName, enumType)			      \
     SO__SF_ENUM_SET_TYPE(fieldName,enumType,"NODE",fieldData)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFFloat.h inventor/lib/database/include/Inventor/fields/SoSFFloat.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFFloat.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFFloat.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSFloat
-class SoSFFloat : public SoSField {
+class INVENTOR_API SoSFFloat : public SoSField {
 
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFFloat, float, float);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFImage.h inventor/lib/database/include/Inventor/fields/SoSFImage.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFImage.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFImage.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSImg
-class SoSFImage : public SoSField {
+class INVENTOR_API SoSFImage : public SoSField {
     // Uses only some of the standard field stuff (because there is no
     // SbImage type):
     SO_SFIELD_REQUIRED_HEADER(SoSFImage);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFInt32.h inventor/lib/database/include/Inventor/fields/SoSFInt32.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFInt32.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFInt32.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSInt32
-class SoSFInt32 : public SoSField {
+class INVENTOR_API SoSFInt32 : public SoSField {
 
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFInt32, int32_t, int32_t);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFMatrix.h inventor/lib/database/include/Inventor/fields/SoSFMatrix.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFMatrix.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFMatrix.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSMx
-class SoSFMatrix : public SoSField {
+class INVENTOR_API SoSFMatrix : public SoSField {
 
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFMatrix, SbMatrix, const SbMatrix &);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFName.h inventor/lib/database/include/Inventor/fields/SoSFName.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFName.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFName.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSName
-class SoSFName : public SoSField {
+class INVENTOR_API SoSFName : public SoSField {
 
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFName, SbName, const SbName &);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFNode.h inventor/lib/database/include/Inventor/fields/SoSFNode.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFNode.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFNode.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSNode
-class SoSFNode : public SoSField {
+class INVENTOR_API SoSFNode : public SoSField {
 
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFNode, SoNode *, SoNode *);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFPath.h inventor/lib/database/include/Inventor/fields/SoSFPath.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFPath.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFPath.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSPath
-class SoSFPath : public SoSField {
+class INVENTOR_API SoSFPath : public SoSField {
 
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFPath, SoPath *, SoPath *);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFPlane.h inventor/lib/database/include/Inventor/fields/SoSFPlane.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFPlane.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFPlane.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSPln
-class SoSFPlane : public SoSField {
+class INVENTOR_API SoSFPlane : public SoSField {
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFPlane, SbPlane, const SbPlane &);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFRotation.h inventor/lib/database/include/Inventor/fields/SoSFRotation.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFRotation.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFRotation.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSRot
-class SoSFRotation : public SoSField {
+class INVENTOR_API SoSFRotation : public SoSField {
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFRotation, SbRotation, const SbRotation &);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFShort.h inventor/lib/database/include/Inventor/fields/SoSFShort.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFShort.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFShort.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSShort
-class SoSFShort : public SoSField {
+class INVENTOR_API SoSFShort : public SoSField {
 
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFShort, short, short);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFString.h inventor/lib/database/include/Inventor/fields/SoSFString.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFString.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFString.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSStr
-class SoSFString : public SoSField {
+class INVENTOR_API SoSFString : public SoSField {
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFString, SbString, const SbString &);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFTime.h inventor/lib/database/include/Inventor/fields/SoSFTime.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFTime.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFTime.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSTime
-class SoSFTime : public SoSField {
+class INVENTOR_API SoSFTime : public SoSField {
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFTime, SbTime, const SbTime &);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFTrigger.h inventor/lib/database/include/Inventor/fields/SoSFTrigger.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFTrigger.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFTrigger.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSTrigger
-class SoSFTrigger : public SoSField {
+class INVENTOR_API SoSFTrigger : public SoSField {
 
     // Use standard field stuff
     SO_SFIELD_REQUIRED_HEADER(SoSFTrigger);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFUInt32.h inventor/lib/database/include/Inventor/fields/SoSFUInt32.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFUInt32.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFUInt32.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSUInt32
-class SoSFUInt32 : public SoSField {
+class INVENTOR_API SoSFUInt32 : public SoSField {
 
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFUInt32, uint32_t, uint32_t);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFUShort.h inventor/lib/database/include/Inventor/fields/SoSFUShort.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFUShort.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFUShort.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSUShort
-class SoSFUShort : public SoSField {
+class INVENTOR_API SoSFUShort : public SoSField {
 
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFUShort, unsigned short, unsigned short);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFVec2f.h inventor/lib/database/include/Inventor/fields/SoSFVec2f.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFVec2f.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFVec2f.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSV2f
-class SoSFVec2f : public SoSField {
+class INVENTOR_API SoSFVec2f : public SoSField {
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFVec2f, SbVec2f, const SbVec2f &);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFVec3f.h inventor/lib/database/include/Inventor/fields/SoSFVec3f.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFVec3f.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFVec3f.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSV3f
-class SoSFVec3f : public SoSField {
+class INVENTOR_API SoSFVec3f : public SoSField {
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFVec3f, SbVec3f, const SbVec3f &);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSFVec4f.h inventor/lib/database/include/Inventor/fields/SoSFVec4f.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSFVec4f.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSFVec4f.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSV4f
-class SoSFVec4f : public SoSField {
+class INVENTOR_API SoSFVec4f : public SoSField {
     // Use standard field stuff
     SO_SFIELD_HEADER(SoSFVec4f, SbVec4f, const SbVec4f &);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/fields/SoSubField.h inventor/lib/database/include/Inventor/fields/SoSubField.h
--- /tmp/inventor/lib/database/include/Inventor/fields/SoSubField.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/fields/SoSubField.h	2006-07-17 15:46:47.000000000 +0200
@@ -126,6 +126,7 @@
 #ifndef  _SO_SUB_FIELD_
 #define  _SO_SUB_FIELD_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/fields/SoField.h>
 #include <Inventor/SoInput.h>
 #include <Inventor/SoOutput.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/misc/SoAuditorList.h inventor/lib/database/include/Inventor/misc/SoAuditorList.h
--- /tmp/inventor/lib/database/include/Inventor/misc/SoAuditorList.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/misc/SoAuditorList.h	2005-08-01 17:36:15.000000000 +0200
@@ -89,7 +89,7 @@
 #  pragma set woff 1375
 #endif
 
-SoINTERNAL class SoAuditorList : private SbPList {
+SoINTERNAL class INVENTOR_API SoAuditorList : private SbPList {
   public:
 
     // Constructor and destructor.
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/misc/SoBase.h inventor/lib/database/include/Inventor/misc/SoBase.h
--- /tmp/inventor/lib/database/include/Inventor/misc/SoBase.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/misc/SoBase.h	2006-07-17 15:46:47.000000000 +0200
@@ -59,6 +59,7 @@
 #ifndef  _SO_BASE_
 #define  _SO_BASE_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/misc/SoBasic.h>
 #include <Inventor/misc/SoAuditorList.h>
 #include <Inventor/SbString.h>
@@ -85,7 +86,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-class SoBase {
+class INVENTOR_API SoBase {
   public:
 
     // Adds a reference to an instance
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/misc/SoBasic.h inventor/lib/database/include/Inventor/misc/SoBasic.h
--- /tmp/inventor/lib/database/include/Inventor/misc/SoBasic.h	2000-10-14 12:46:07.000000000 +0200
+++ inventor/lib/database/include/Inventor/misc/SoBasic.h	2005-08-01 17:36:15.000000000 +0200
@@ -64,14 +64,14 @@
 //
 
 // This uses the preprocessor to quote a string
-#if defined(__STDC__) || defined(__ANSI_CPP__)		/* ANSI C */
+#if defined(__STDC__) || defined(__ANSI_CPP__) || defined(_MSC_VER)		/* ANSI C */
 #  define SO__QUOTE(str)	#str
 #else							/* Non-ANSI C */
 #  define SO__QUOTE(str)	"str"
 #endif
 
 // This uses the preprocessor to concatenate two strings
-#if defined(__STDC__) || defined(__ANSI_CPP__)		/* ANSI C */
+#if defined(__STDC__) || defined(__ANSI_CPP__) || defined(_MSC_VER)		/* ANSI C */
 #   define SO__CONCAT(str1, str2)	str1##str2
 #else							/* Non-ANSI C */
 #   define SO__CONCAT(str1, str2)	str1/**/str2
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/misc/SoByteStream.h inventor/lib/database/include/Inventor/misc/SoByteStream.h
--- /tmp/inventor/lib/database/include/Inventor/misc/SoByteStream.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/misc/SoByteStream.h	2005-08-01 17:36:15.000000000 +0200
@@ -72,7 +72,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-class SoByteStream {
+class INVENTOR_API SoByteStream {
   public:
     SoByteStream();
    ~SoByteStream();
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/misc/SoCallbackList.h inventor/lib/database/include/Inventor/misc/SoCallbackList.h
--- /tmp/inventor/lib/database/include/Inventor/misc/SoCallbackList.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/misc/SoCallbackList.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,10 +69,10 @@
 
 // Callback functions that are registered with this class should
 // be cast to this type.
-typedef void SoCallbackListCB(void *userData, void *callbackData);
+typedef void INVENTOR_API SoCallbackListCB(void *userData, void *callbackData);
 
 // C-api: prefix=SoCBList
-class SoCallbackList {
+class INVENTOR_API SoCallbackList {
     
   public:
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/misc/SoChildList.h inventor/lib/database/include/Inventor/misc/SoChildList.h
--- /tmp/inventor/lib/database/include/Inventor/misc/SoChildList.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/misc/SoChildList.h	2005-08-01 17:36:15.000000000 +0200
@@ -81,7 +81,7 @@
 
 class SoAction;
 
-SoEXTENDER class SoChildList : public SoNodeList {
+SoEXTENDER class INVENTOR_API SoChildList : public SoNodeList {
 
   public:
     // Constructors and destructor.
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/misc/SoCompactPathList.h inventor/lib/database/include/Inventor/misc/SoCompactPathList.h
--- /tmp/inventor/lib/database/include/Inventor/misc/SoCompactPathList.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/misc/SoCompactPathList.h	2005-08-01 17:36:15.000000000 +0200
@@ -84,7 +84,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoINTERNAL class SoCompactPathList {
+SoINTERNAL class INVENTOR_API SoCompactPathList {
 
   public:
     // Constructor given path list
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/misc/SoNormalGenerator.h inventor/lib/database/include/Inventor/misc/SoNormalGenerator.h
--- /tmp/inventor/lib/database/include/Inventor/misc/SoNormalGenerator.h	2000-08-15 14:56:15.000000000 +0200
+++ inventor/lib/database/include/Inventor/misc/SoNormalGenerator.h	2005-08-01 17:36:15.000000000 +0200
@@ -97,7 +97,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoNormalGenerator {
+SoEXTENDER class INVENTOR_API SoNormalGenerator {
 
   public:
     // Constructors and destructor
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/misc/SoNotification.h inventor/lib/database/include/Inventor/misc/SoNotification.h
--- /tmp/inventor/lib/database/include/Inventor/misc/SoNotification.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/misc/SoNotification.h	2005-08-01 17:36:15.000000000 +0200
@@ -95,7 +95,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoINTERNAL class SoNotRec {
+SoINTERNAL class INVENTOR_API SoNotRec {
 
   public:
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/misc/SoState.h inventor/lib/database/include/Inventor/misc/SoState.h
--- /tmp/inventor/lib/database/include/Inventor/misc/SoState.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/misc/SoState.h	2005-08-01 17:36:15.000000000 +0200
@@ -80,7 +80,7 @@
 class SoAction;
 class SoElement;
 
-SoEXTENDER class SoState {
+SoEXTENDER class INVENTOR_API SoState {
 
   public:
     // Constructor. Takes pointer to action instance this state is
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/misc/SoTranscribe.h inventor/lib/database/include/Inventor/misc/SoTranscribe.h
--- /tmp/inventor/lib/database/include/Inventor/misc/SoTranscribe.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/misc/SoTranscribe.h	2005-08-01 17:36:15.000000000 +0200
@@ -106,7 +106,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-class SoTranSender {
+class INVENTOR_API SoTranSender {
   public:
 
     // Constructor: takes pointer to SoOutput instance
@@ -155,7 +155,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-class SoTranReceiver {
+class INVENTOR_API SoTranReceiver {
 
   public:
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/misc/upgraders/SoUpgrader.h inventor/lib/database/include/Inventor/misc/upgraders/SoUpgrader.h
--- /tmp/inventor/lib/database/include/Inventor/misc/upgraders/SoUpgrader.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/misc/upgraders/SoUpgrader.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 class SbDict;
 // C-api: abstract
 // C-api: prefix=SoUpgr
-class SoUpgrader : public SoGroup {
+class INVENTOR_API SoUpgrader : public SoGroup {
 
     SO_NODE_ABSTRACT_HEADER(SoUpgrader);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/misc/upgraders/SoV1CustomNode.h inventor/lib/database/include/Inventor/misc/upgraders/SoV1CustomNode.h
--- /tmp/inventor/lib/database/include/Inventor/misc/upgraders/SoV1CustomNode.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/misc/upgraders/SoV1CustomNode.h	2005-08-01 17:36:15.000000000 +0200
@@ -67,7 +67,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-class SoV1CustomNode : public SoUpgrader {
+class INVENTOR_API SoV1CustomNode : public SoUpgrader {
 
     SO_NODE_HEADER(SoV1CustomNode);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/glVertArray.h inventor/lib/database/include/Inventor/nodes/glVertArray.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/glVertArray.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/glVertArray.h	2006-07-12 18:01:38.000000000 +0200
@@ -38,7 +38,7 @@
  * Simple implementation of the vertex array extension to let us work
  * until we get versions of OpenGL that really support it.
  */
-#include <GL/gl.h>
+#include OPENGL_GL_H
 
 #ifndef GL_VERTEX_ARRAY_EXT
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoAnnotation.h inventor/lib/database/include/Inventor/nodes/SoAnnotation.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoAnnotation.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoAnnotation.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_ANNOTATION_
 #define  _SO_ANNOTATION_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/nodes/SoSeparator.h>
 
 //////////////////////////////////////////////////////////////////////////////
@@ -78,7 +79,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 // C-api: prefix=SoAnnot
-class SoAnnotation : public SoSeparator {
+class INVENTOR_API SoAnnotation : public SoSeparator {
 
     SO_NODE_HEADER(SoAnnotation);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoArray.h inventor/lib/database/include/Inventor/nodes/SoArray.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoArray.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoArray.h	2005-08-01 17:36:15.000000000 +0200
@@ -80,7 +80,7 @@
 
 // C-api: public=numElements1, numElements2, numElements3
 // C-api: public=separation1, separation2, separation3, origin
-class SoArray : public SoGroup {
+class INVENTOR_API SoArray : public SoGroup {
 
     SO_NODE_HEADER(SoArray);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoAsciiText.h inventor/lib/database/include/Inventor/nodes/SoAsciiText.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoAsciiText.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoAsciiText.h	2006-07-12 18:01:38.000000000 +0200
@@ -72,7 +72,7 @@
 #include <Inventor/fields/SoMFFloat.h>
 #include <Inventor/nodes/SoShape.h>
 
-#include <GL/gl.h>   // For GLenum declaration
+#include OPENGL_GL_H   // For GLenum declaration
 
 //  GLU Library version dependency.   Introduced with Iris 6.2.
 #ifndef gluTESSELATOR
@@ -98,7 +98,7 @@
 class SoTextureCoordinateElement;
 
 // C-api: public=string,spacing,justification,width
-class SoAsciiText : public SoShape {
+class INVENTOR_API SoAsciiText : public SoShape {
 
     SO_NODE_HEADER(SoAsciiText);
 
@@ -165,9 +165,9 @@
     void generateFront(const SbString &string, float width);
     
     // Static callbacks invoked by the glu tesselation code:
-    static void beginCB(GLenum primType);
-    static void endCB();
-    static void vtxCB(void *vertex);
+    static void CALLBACK beginCB(GLenum primType);
+    static void CALLBACK endCB();
+    static void CALLBACK vtxCB(void *vertex);
     
     // Private data:
     // MyOutlineFontCache is an internal, opaque class used to
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoBaseColor.h inventor/lib/database/include/Inventor/nodes/SoBaseColor.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoBaseColor.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoBaseColor.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 
 // C-api: prefix=SoBaseCol
 // C-api: public= rgb
-class SoBaseColor : public SoNode {
+class INVENTOR_API SoBaseColor : public SoNode {
 
     SO_NODE_HEADER(SoBaseColor);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoBlinker.h inventor/lib/database/include/Inventor/nodes/SoBlinker.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoBlinker.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoBlinker.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=whichChild,speed,on
-class SoBlinker : public SoSwitch {
+class INVENTOR_API SoBlinker : public SoSwitch {
 
     SO_NODE_HEADER(SoBlinker);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoCallback.h inventor/lib/database/include/Inventor/nodes/SoCallback.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoCallback.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoCallback.h	2005-08-01 17:36:15.000000000 +0200
@@ -75,10 +75,10 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // Callback functions registered with this node should be of this type.
-typedef void SoCallbackCB(void *userData, SoAction *action);
+typedef void INVENTOR_API SoCallbackCB(void *userData, SoAction *action);
 
 // C-api: prefix=SoCB
-class SoCallback : public SoNode {
+class INVENTOR_API SoCallback : public SoNode {
 
     SO_NODE_HEADER(SoCallback);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoCamera.h inventor/lib/database/include/Inventor/nodes/SoCamera.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoCamera.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoCamera.h	2005-08-01 17:36:15.000000000 +0200
@@ -78,7 +78,7 @@
 // C-api: prefix=SoCam
 // C-api: public= viewportMapping, position, orientation, aspectRatio
 // C-api: public= nearDistance, farDistance, focalDistance
-class SoCamera : public SoNode {
+class INVENTOR_API SoCamera : public SoNode {
 
     SO_NODE_ABSTRACT_HEADER(SoCamera);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoClipPlane.h inventor/lib/database/include/Inventor/nodes/SoClipPlane.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoClipPlane.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoClipPlane.h	2005-08-01 17:36:15.000000000 +0200
@@ -75,7 +75,7 @@
 
 // C-api: prefix=SoClipPln
 // C-api: public=plane,on
-class SoClipPlane : public SoNode {
+class INVENTOR_API SoClipPlane : public SoNode {
 
     SO_NODE_HEADER(SoClipPlane);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoColorIndex.h inventor/lib/database/include/Inventor/nodes/SoColorIndex.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoColorIndex.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoColorIndex.h	2005-08-01 17:36:15.000000000 +0200
@@ -72,7 +72,7 @@
 
 // C-api: prefix=SoColInd
 // C-api: public= index
-class SoColorIndex : public SoNode {
+class INVENTOR_API SoColorIndex : public SoNode {
 
     SO_NODE_HEADER(SoColorIndex);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoComplexity.h inventor/lib/database/include/Inventor/nodes/SoComplexity.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoComplexity.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoComplexity.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 
 // C-api: prefix=SoCmplx
 // C-api: public= value, type, textureQuality
-class SoComplexity : public SoNode {
+class INVENTOR_API SoComplexity : public SoNode {
 
     SO_NODE_HEADER(SoComplexity);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoCone.h inventor/lib/database/include/Inventor/nodes/SoCone.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoCone.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoCone.h	2005-08-01 17:36:15.000000000 +0200
@@ -73,7 +73,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=parts, bottomRadius, height
-class SoCone : public SoShape {
+class INVENTOR_API SoCone : public SoShape {
 
     SO_NODE_HEADER(SoCone);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoCoordinate3.h inventor/lib/database/include/Inventor/nodes/SoCoordinate3.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoCoordinate3.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoCoordinate3.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 
 // C-api: prefix=SoCoord3
 // C-api: public= point
-class SoCoordinate3 : public SoNode {
+class INVENTOR_API SoCoordinate3 : public SoNode {
 
     SO_NODE_HEADER(SoCoordinate3);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoCoordinate4.h inventor/lib/database/include/Inventor/nodes/SoCoordinate4.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoCoordinate4.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoCoordinate4.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 
 // C-api: prefix=SoCoord4
 // C-api: public= point
-class SoCoordinate4 : public SoNode {
+class INVENTOR_API SoCoordinate4 : public SoNode {
 
     SO_NODE_HEADER(SoCoordinate4);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoCube.h inventor/lib/database/include/Inventor/nodes/SoCube.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoCube.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoCube.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=width, height, depth
-class SoCube : public SoShape {
+class INVENTOR_API SoCube : public SoShape {
 
     SO_NODE_HEADER(SoCube);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoCylinder.h inventor/lib/database/include/Inventor/nodes/SoCylinder.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoCylinder.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoCylinder.h	2005-08-01 17:36:15.000000000 +0200
@@ -74,7 +74,7 @@
 
 // C-api: prefix=SoCyl
 // C-api: public=parts, radius, height
-class SoCylinder : public SoShape {
+class INVENTOR_API SoCylinder : public SoShape {
 
     SO_NODE_HEADER(SoCylinder);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoDirectionalLight.h inventor/lib/database/include/Inventor/nodes/SoDirectionalLight.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoDirectionalLight.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoDirectionalLight.h	2005-08-01 17:36:15.000000000 +0200
@@ -73,7 +73,7 @@
 
 // C-api: prefix=SoDirLt
 // C-api: public=on, intensity, color, direction
-class SoDirectionalLight : public SoLight {
+class INVENTOR_API SoDirectionalLight : public SoLight {
 
     SO_NODE_HEADER(SoDirectionalLight);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoDrawStyle.h inventor/lib/database/include/Inventor/nodes/SoDrawStyle.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoDrawStyle.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoDrawStyle.h	2005-08-01 17:36:15.000000000 +0200
@@ -76,7 +76,7 @@
 
 // C-api: prefix=SoDStyle
 // C-api: public= style, pointSize, lineWidth, linePattern
-class SoDrawStyle : public SoNode {
+class INVENTOR_API SoDrawStyle : public SoNode {
 
     SO_NODE_HEADER(SoDrawStyle);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoEnvironment.h inventor/lib/database/include/Inventor/nodes/SoEnvironment.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoEnvironment.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoEnvironment.h	2005-08-01 17:36:15.000000000 +0200
@@ -93,7 +93,7 @@
 // C-api: prefix=SoEnv
 // C-api: public= ambientIntensity, ambientColor, attenuation
 // C-api: public= fogType, fogColor, fogVisibility
-class SoEnvironment : public SoNode {
+class INVENTOR_API SoEnvironment : public SoNode {
 
     SO_NODE_HEADER(SoEnvironment);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoEventCallback.h inventor/lib/database/include/Inventor/nodes/SoEventCallback.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoEventCallback.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoEventCallback.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 class SoEventCallback;
 
 // callback function prototypes
-typedef void SoEventCallbackCB(void *userData, SoEventCallback *node);
+typedef void INVENTOR_API SoEventCallbackCB(void *userData, SoEventCallback *node);
 
 //////////////////////////////////////////////////////////////////////////////
 //
@@ -75,7 +75,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoEvCB
-class SoEventCallback : public SoNode {
+class INVENTOR_API SoEventCallback : public SoNode {
 
     SO_NODE_HEADER(SoEventCallback);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoFaceSet.h inventor/lib/database/include/Inventor/nodes/SoFaceSet.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoFaceSet.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoFaceSet.h	2005-08-01 17:36:15.000000000 +0200
@@ -82,7 +82,7 @@
 
 // C-api: prefix=SoFSet
 // C-api: public=startIndex, numVertices, vertexProperty
-class SoFaceSet : public SoNonIndexedShape {
+class INVENTOR_API SoFaceSet : public SoNonIndexedShape {
 
     SO_NODE_HEADER(SoFaceSet);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoFile.h inventor/lib/database/include/Inventor/nodes/SoFile.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoFile.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoFile.h	2005-08-01 17:36:15.000000000 +0200
@@ -87,7 +87,7 @@
 class SoGroup;
 
 // C-api: public=name
-class SoFile : public SoNode {
+class INVENTOR_API SoFile : public SoNode {
 
     SO_NODE_HEADER(SoFile);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoFont.h inventor/lib/database/include/Inventor/nodes/SoFont.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoFont.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoFont.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=name,size
-class SoFont : public SoNode {
+class INVENTOR_API SoFont : public SoNode {
 
     SO_NODE_HEADER(SoFont);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoFontStyle.h inventor/lib/database/include/Inventor/nodes/SoFontStyle.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoFontStyle.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoFontStyle.h	2005-08-01 17:36:15.000000000 +0200
@@ -67,7 +67,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=family,style
-class SoFontStyle : public SoFont {
+class INVENTOR_API SoFontStyle : public SoFont {
 
     SO_NODE_HEADER(SoFontStyle);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoGroup.h inventor/lib/database/include/Inventor/nodes/SoGroup.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoGroup.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoGroup.h	2005-08-01 17:36:15.000000000 +0200
@@ -67,7 +67,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-class SoGroup : public SoNode {
+class INVENTOR_API SoGroup : public SoNode {
 
     SO_NODE_HEADER(SoGroup);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoIndexedFaceSet.h inventor/lib/database/include/Inventor/nodes/SoIndexedFaceSet.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoIndexedFaceSet.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoIndexedFaceSet.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_INDEXED_FACE_SET_
 #define  _SO_INDEXED_FACE_SET_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/nodes/SoIndexedShape.h>
 
 //////////////////////////////////////////////////////////////////////////////
@@ -81,7 +82,7 @@
 
 // C-api: prefix=SoIndFSet
 // C-api: public=coordIndex, materialIndex, normalIndex, textureCoordIndex, vertexProperty
-class SoIndexedFaceSet : public SoIndexedShape {
+class INVENTOR_API SoIndexedFaceSet : public SoIndexedShape {
 
     SO_NODE_HEADER(SoIndexedFaceSet);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoIndexedLineSet.h inventor/lib/database/include/Inventor/nodes/SoIndexedLineSet.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoIndexedLineSet.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoIndexedLineSet.h	2005-08-01 17:36:15.000000000 +0200
@@ -81,7 +81,7 @@
 
 // C-api: prefix=SoIndLSet
 // C-api: public=coordIndex, materialIndex, normalIndex, textureCoordIndex, vertexProperty
-class SoIndexedLineSet : public SoIndexedShape {
+class INVENTOR_API SoIndexedLineSet : public SoIndexedShape {
 
     SO_NODE_HEADER(SoIndexedLineSet);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoIndexedNurbsCurve.h inventor/lib/database/include/Inventor/nodes/SoIndexedNurbsCurve.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoIndexedNurbsCurve.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoIndexedNurbsCurve.h	2005-08-01 17:36:15.000000000 +0200
@@ -76,7 +76,7 @@
 
 // C-api: prefix=SoIndCurve
 // C-api: public=numControlPoints, coordIndex, knotVector
-class SoIndexedNurbsCurve : public SoShape {
+class INVENTOR_API SoIndexedNurbsCurve : public SoShape {
 
     SO_NODE_HEADER(SoIndexedNurbsCurve);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoIndexedNurbsSurface.h inventor/lib/database/include/Inventor/nodes/SoIndexedNurbsSurface.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoIndexedNurbsSurface.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoIndexedNurbsSurface.h	2005-08-01 17:36:15.000000000 +0200
@@ -80,7 +80,7 @@
 // C-api: public=uKnotVector, vKnotVector,
 // C-api: public=numSControlPoints, numTControlPoints, textureCoordIndex
 // C-api: public=sKnotVector, tKnotVector
-class SoIndexedNurbsSurface : public SoShape {
+class INVENTOR_API SoIndexedNurbsSurface : public SoShape {
 
     SO_NODE_HEADER(SoIndexedNurbsSurface);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoIndexedShape.h inventor/lib/database/include/Inventor/nodes/SoIndexedShape.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoIndexedShape.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoIndexedShape.h	2005-08-01 17:36:15.000000000 +0200
@@ -83,7 +83,7 @@
 
 // C-api: abstract
 // C-api: prefix=SoInd
-class SoIndexedShape : public SoVertexShape {
+class INVENTOR_API SoIndexedShape : public SoVertexShape {
 
     SO_NODE_ABSTRACT_HEADER(SoIndexedShape);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoIndexedTriangleStripSet.h inventor/lib/database/include/Inventor/nodes/SoIndexedTriangleStripSet.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoIndexedTriangleStripSet.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoIndexedTriangleStripSet.h	2005-08-01 17:36:15.000000000 +0200
@@ -85,7 +85,7 @@
 
 // C-api: prefix=SoIndTriStripSet
 // C-api: public=coordIndex, materialIndex, normalIndex, textureCoordIndex, vertexProperty
-class SoIndexedTriangleStripSet : public SoIndexedShape {
+class INVENTOR_API SoIndexedTriangleStripSet : public SoIndexedShape {
 
     SO_NODE_HEADER(SoIndexedTriangleStripSet);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoInfo.h inventor/lib/database/include/Inventor/nodes/SoInfo.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoInfo.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoInfo.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=string
-class SoInfo : public SoNode {
+class INVENTOR_API SoInfo : public SoNode {
 
     SO_NODE_HEADER(SoInfo);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoLabel.h inventor/lib/database/include/Inventor/nodes/SoLabel.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoLabel.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoLabel.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=label
-class SoLabel : public SoNode {
+class INVENTOR_API SoLabel : public SoNode {
 
     SO_NODE_HEADER(SoLabel);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoLevelOfDetail.h inventor/lib/database/include/Inventor/nodes/SoLevelOfDetail.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoLevelOfDetail.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoLevelOfDetail.h	2005-08-01 17:36:15.000000000 +0200
@@ -96,7 +96,7 @@
 
 // C-api: prefix=SoLvlOfDtl
 // C-api: public=screenArea
-class SoLevelOfDetail : public SoGroup {
+class INVENTOR_API SoLevelOfDetail : public SoGroup {
 
     SO_NODE_HEADER(SoLevelOfDetail);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoLight.h inventor/lib/database/include/Inventor/nodes/SoLight.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoLight.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoLight.h	2005-08-01 17:36:15.000000000 +0200
@@ -72,7 +72,7 @@
 // C-api: abstract
 // C-api: prefix=SoLt
 // C-api: public=on, intensity, color
-class SoLight : public SoNode {
+class INVENTOR_API SoLight : public SoNode {
 
     SO_NODE_ABSTRACT_HEADER(SoLight);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoLightModel.h inventor/lib/database/include/Inventor/nodes/SoLightModel.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoLightModel.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoLightModel.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 
 // C-api: prefix=SoLModel
 // C-api: public=model, nearColor, farColor
-class SoLightModel : public SoNode {
+class INVENTOR_API SoLightModel : public SoNode {
 
     SO_NODE_HEADER(SoLightModel);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoLinearProfile.h inventor/lib/database/include/Inventor/nodes/SoLinearProfile.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoLinearProfile.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoLinearProfile.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_LINEAR_PROFILE_
 #define  _SO_LINEAR_PROFILE_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/nodes/SoProfile.h>
 
 //////////////////////////////////////////////////////////////////////////////
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoLineSet.h inventor/lib/database/include/Inventor/nodes/SoLineSet.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoLineSet.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoLineSet.h	2005-08-01 17:36:15.000000000 +0200
@@ -86,7 +86,7 @@
 
 // C-api: prefix=SoLSet
 // C-api: public=startIndex, numVertices, vertexProperty
-class SoLineSet : public SoNonIndexedShape {
+class INVENTOR_API SoLineSet : public SoNonIndexedShape {
 
     SO_NODE_HEADER(SoLineSet);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoLocateHighlight.h inventor/lib/database/include/Inventor/nodes/SoLocateHighlight.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoLocateHighlight.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoLocateHighlight.h	2006-07-17 15:46:47.000000000 +0200
@@ -63,7 +63,8 @@
 #ifndef  _SO_LOCATE_HIGHLIGHT_
 #define  _SO_LOCATE_HIGHLIGHT_
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/fields/SoSFColor.h>
 #include <Inventor/fields/SoSFEnum.h>
 #include <Inventor/nodes/SoSeparator.h>
@@ -83,7 +84,7 @@
 
 // C-api: prefix=SoLocHigh
 // C-api: public=color, style
-class SoLocateHighlight : public SoSeparator {
+class INVENTOR_API SoLocateHighlight : public SoSeparator {
 
     SO_NODE_HEADER(SoLocateHighlight);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoLOD.h inventor/lib/database/include/Inventor/nodes/SoLOD.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoLOD.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoLOD.h	2005-08-01 17:36:15.000000000 +0200
@@ -87,7 +87,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=center,ranges
-class SoLOD : public SoGroup {
+class INVENTOR_API SoLOD : public SoGroup {
 
     SO_NODE_HEADER(SoLOD);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoMaterialBinding.h inventor/lib/database/include/Inventor/nodes/SoMaterialBinding.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoMaterialBinding.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoMaterialBinding.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 
 // C-api: prefix=SoMtlBind
 // C-api: public=value
-class SoMaterialBinding : public SoNode {
+class INVENTOR_API SoMaterialBinding : public SoNode {
 
     SO_NODE_HEADER(SoMaterialBinding);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoMaterial.h inventor/lib/database/include/Inventor/nodes/SoMaterial.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoMaterial.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoMaterial.h	2005-08-01 17:36:15.000000000 +0200
@@ -72,7 +72,7 @@
 // C-api: prefix=SoMtl
 // C-api: public=ambientColor, diffuseColor, specularColor, emissiveColor
 // C-api: public=shininess, transparency
-class SoMaterial : public SoNode {
+class INVENTOR_API SoMaterial : public SoNode {
 
     SO_NODE_HEADER(SoMaterial);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoMatrixTransform.h inventor/lib/database/include/Inventor/nodes/SoMatrixTransform.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoMatrixTransform.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoMatrixTransform.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 
 // C-api: prefix=SoMx
 // C-api: public= matrix
-class SoMatrixTransform : public SoTransformation {
+class INVENTOR_API SoMatrixTransform : public SoTransformation {
 
     SO_NODE_HEADER(SoMatrixTransform);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoMultipleCopy.h inventor/lib/database/include/Inventor/nodes/SoMultipleCopy.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoMultipleCopy.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoMultipleCopy.h	2005-08-01 17:36:15.000000000 +0200
@@ -72,7 +72,7 @@
 
 // C-api: prefix=SoMultCopy
 // C-api: public=matrix
-class SoMultipleCopy : public SoGroup {
+class INVENTOR_API SoMultipleCopy : public SoGroup {
 
     SO_NODE_HEADER(SoMultipleCopy);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoNode.h inventor/lib/database/include/Inventor/nodes/SoNode.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoNode.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoNode.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_NODE_
 #define  _SO_NODE_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/fields/SoFieldContainer.h>
 #include <Inventor/SoLists.h>
 #include <Inventor/SbString.h>
@@ -86,7 +87,7 @@
 
 // C-api: abstract
 
-class SoNode : public SoFieldContainer {
+class INVENTOR_API SoNode : public SoFieldContainer {
 
   public:
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoNonIndexedShape.h inventor/lib/database/include/Inventor/nodes/SoNonIndexedShape.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoNonIndexedShape.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoNonIndexedShape.h	2005-08-01 17:36:15.000000000 +0200
@@ -74,7 +74,7 @@
 
 // C-api: abstract
 // C-api: prefix=SoNonInd
-class SoNonIndexedShape : public SoVertexShape {
+class INVENTOR_API SoNonIndexedShape : public SoVertexShape {
 
     SO_NODE_ABSTRACT_HEADER(SoNonIndexedShape);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoNormalBinding.h inventor/lib/database/include/Inventor/nodes/SoNormalBinding.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoNormalBinding.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoNormalBinding.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 
 // C-api: prefix=SoNormBind
 // C-api: public=value
-class SoNormalBinding : public SoNode {
+class INVENTOR_API SoNormalBinding : public SoNode {
 
     SO_NODE_HEADER(SoNormalBinding);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoNormal.h inventor/lib/database/include/Inventor/nodes/SoNormal.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoNormal.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoNormal.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 
 // C-api: prefix=SoNorm
 // C-api: public=vector
-class SoNormal : public SoNode {
+class INVENTOR_API SoNormal : public SoNode {
 
     SO_NODE_HEADER(SoNormal);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoNurbsCurve.h inventor/lib/database/include/Inventor/nodes/SoNurbsCurve.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoNurbsCurve.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoNurbsCurve.h	2005-08-01 17:36:15.000000000 +0200
@@ -78,7 +78,7 @@
 
 // C-api: prefix=SoCurve
 // C-api: public=numControlPoints, knotVector
-class SoNurbsCurve : public SoShape {
+class INVENTOR_API SoNurbsCurve : public SoShape {
 
     SO_NODE_HEADER(SoNurbsCurve);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoNurbsProfile.h inventor/lib/database/include/Inventor/nodes/SoNurbsProfile.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoNurbsProfile.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoNurbsProfile.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 
 // C-api: prefix=SoNProf
 // C-api: public=index, linkage, knotVector
-class SoNurbsProfile : public SoProfile{
+class INVENTOR_API SoNurbsProfile : public SoProfile{
 
     SO_NODE_HEADER(SoNurbsProfile);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoNurbsSurface.h inventor/lib/database/include/Inventor/nodes/SoNurbsSurface.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoNurbsSurface.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoNurbsSurface.h	2005-08-01 17:36:15.000000000 +0200
@@ -82,7 +82,7 @@
 // C-api: public=numSControlPoints, numTControlPoints
 // C-api: public=uKnotVector, vKnotVector
 // C-api: public=sKnotVector, tKnotVector
-class SoNurbsSurface : public SoShape {
+class INVENTOR_API SoNurbsSurface : public SoShape {
 
     SO_NODE_HEADER(SoNurbsSurface);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoOrthographicCamera.h inventor/lib/database/include/Inventor/nodes/SoOrthographicCamera.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoOrthographicCamera.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoOrthographicCamera.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 // C-api: public= viewportMapping, position, orientation, aspectRatio
 // C-api: public= nearDistance, farDistance, focalDistance
 // C-api: public= height
-class SoOrthographicCamera : public SoCamera {
+class INVENTOR_API SoOrthographicCamera : public SoCamera {
 
     SO_NODE_HEADER(SoOrthographicCamera);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoPackedColor.h inventor/lib/database/include/Inventor/nodes/SoPackedColor.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoPackedColor.h	2000-09-02 01:06:36.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoPackedColor.h	2005-08-01 17:36:15.000000000 +0200
@@ -72,7 +72,7 @@
 
 // C-api: prefix=SoPCol
 // C-api: public= orderedRGBA
-class SoPackedColor : public SoNode {
+class INVENTOR_API SoPackedColor : public SoNode {
 
     SO_NODE_HEADER(SoPackedColor);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoPathSwitch.h inventor/lib/database/include/Inventor/nodes/SoPathSwitch.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoPathSwitch.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoPathSwitch.h	2005-08-01 17:36:15.000000000 +0200
@@ -73,7 +73,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=path
-class SoPathSwitch : public SoGroup {
+class INVENTOR_API SoPathSwitch : public SoGroup {
 
     SO_NODE_HEADER(SoPathSwitch);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoPendulum.h inventor/lib/database/include/Inventor/nodes/SoPendulum.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoPendulum.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoPendulum.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=rotation,rotation0,rotation1,speed,on
-class SoPendulum : public SoRotation {
+class INVENTOR_API SoPendulum : public SoRotation {
 
     SO_NODE_HEADER(SoPendulum);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoPerspectiveCamera.h inventor/lib/database/include/Inventor/nodes/SoPerspectiveCamera.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoPerspectiveCamera.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoPerspectiveCamera.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 // C-api: public= viewportMapping, position, orientation, aspectRatio
 // C-api: public= nearDistance, farDistance, focalDistance
 // C-api: public= heightAngle
-class SoPerspectiveCamera : public SoCamera {
+class INVENTOR_API SoPerspectiveCamera : public SoCamera {
 
     SO_NODE_HEADER(SoPerspectiveCamera);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoPickStyle.h inventor/lib/database/include/Inventor/nodes/SoPickStyle.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoPickStyle.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoPickStyle.h	2005-08-01 17:36:15.000000000 +0200
@@ -76,7 +76,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public= style
-class SoPickStyle : public SoNode {
+class INVENTOR_API SoPickStyle : public SoNode {
 
     SO_NODE_HEADER(SoPickStyle);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoPointLight.h inventor/lib/database/include/Inventor/nodes/SoPointLight.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoPointLight.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoPointLight.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 
 // C-api: prefix=SoPtLt
 // C-api: public=on, intensity, color, location
-class SoPointLight : public SoLight {
+class INVENTOR_API SoPointLight : public SoLight {
 
     SO_NODE_HEADER(SoPointLight);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoPointSet.h inventor/lib/database/include/Inventor/nodes/SoPointSet.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoPointSet.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoPointSet.h	2005-08-01 17:36:15.000000000 +0200
@@ -75,7 +75,7 @@
 
 // C-api: prefix=SoPtSet
 // C-api: public=startIndex, numPoints, vertexProperty
-class SoPointSet : public SoNonIndexedShape {
+class INVENTOR_API SoPointSet : public SoNonIndexedShape {
 
     SO_NODE_HEADER(SoPointSet);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoProfileCoordinate2.h inventor/lib/database/include/Inventor/nodes/SoProfileCoordinate2.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoProfileCoordinate2.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoProfileCoordinate2.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 
 // C-api: prefix=SoProfCoord2
 // C-api: public= point
-class SoProfileCoordinate2 : public SoNode {
+class INVENTOR_API SoProfileCoordinate2 : public SoNode {
 
     SO_NODE_HEADER(SoProfileCoordinate2);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoProfileCoordinate3.h inventor/lib/database/include/Inventor/nodes/SoProfileCoordinate3.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoProfileCoordinate3.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoProfileCoordinate3.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 
 // C-api: prefix=SoProfCoord3
 // C-api: public= point
-class SoProfileCoordinate3 : public SoNode {
+class INVENTOR_API SoProfileCoordinate3 : public SoNode {
 
     SO_NODE_HEADER(SoProfileCoordinate3);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoProfile.h inventor/lib/database/include/Inventor/nodes/SoProfile.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoProfile.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoProfile.h	2005-08-01 17:36:15.000000000 +0200
@@ -75,7 +75,7 @@
 // C-api: abstract
 // C-api: prefix=SoProf
 // C-api: public=index, linkage
-class SoProfile : public SoNode{
+class INVENTOR_API SoProfile : public SoNode{
 
     SO_NODE_ABSTRACT_HEADER(SoProfile);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoQuadMesh.h inventor/lib/database/include/Inventor/nodes/SoQuadMesh.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoQuadMesh.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoQuadMesh.h	2005-08-01 17:36:15.000000000 +0200
@@ -78,7 +78,7 @@
 
 // C-api: prefix=SoQMesh
 // C-api: public=startIndex, verticesPerColumn, verticesPerRow, vertexProperty
-class SoQuadMesh : public SoNonIndexedShape {
+class INVENTOR_API SoQuadMesh : public SoNonIndexedShape {
 
     SO_NODE_HEADER(SoQuadMesh);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoResetTransform.h inventor/lib/database/include/Inventor/nodes/SoResetTransform.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoResetTransform.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoResetTransform.h	2005-08-01 17:36:15.000000000 +0200
@@ -75,7 +75,7 @@
 
 // C-api: prefix=SoResetXf
 // C-api: public=whatToReset
-class SoResetTransform : public SoTransformation {
+class INVENTOR_API SoResetTransform : public SoTransformation {
 
     SO_NODE_HEADER(SoResetTransform);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoRotation.h inventor/lib/database/include/Inventor/nodes/SoRotation.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoRotation.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoRotation.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 
 // C-api: prefix=SoRot
 // C-api: public=rotation
-class SoRotation : public SoTransformation {
+class INVENTOR_API SoRotation : public SoTransformation {
 
     SO_NODE_HEADER(SoRotation);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoRotationXYZ.h inventor/lib/database/include/Inventor/nodes/SoRotationXYZ.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoRotationXYZ.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoRotationXYZ.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 
 // C-api: prefix=SoRotXYZ
 // C-api: public=axis, angle
-class SoRotationXYZ : public SoTransformation {
+class INVENTOR_API SoRotationXYZ : public SoTransformation {
 
     SO_NODE_HEADER(SoRotationXYZ);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoRotor.h inventor/lib/database/include/Inventor/nodes/SoRotor.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoRotor.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoRotor.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=rotation,speed,on
-class SoRotor : public SoRotation {
+class INVENTOR_API SoRotor : public SoRotation {
 
     SO_NODE_HEADER(SoRotor);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoScale.h inventor/lib/database/include/Inventor/nodes/SoScale.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoScale.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoScale.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=scaleFactor
-class SoScale : public SoTransformation {
+class INVENTOR_API SoScale : public SoTransformation {
 
     SO_NODE_HEADER(SoScale);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoSeparator.h inventor/lib/database/include/Inventor/nodes/SoSeparator.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoSeparator.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoSeparator.h	2005-08-01 17:36:15.000000000 +0200
@@ -75,7 +75,7 @@
 
 // C-api: prefix=SoSep
 // C-api: public=renderCaching, boundingBoxCaching, renderCulling, pickCulling
-class SoSeparator : public SoGroup {
+class INVENTOR_API SoSeparator : public SoGroup {
 
     SO_NODE_HEADER(SoSeparator);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoShape.h inventor/lib/database/include/Inventor/nodes/SoShape.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoShape.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoShape.h	2006-07-12 18:01:38.000000000 +0200
@@ -59,7 +59,7 @@
 #include <Inventor/SbLinear.h>
 #include <Inventor/nodes/SoSubNode.h>
 
-#include <GL/glu.h>
+#include OPENGL_GLU_H
 
 class SoCube;
 class SoDetail;
@@ -94,7 +94,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: abstract
-class SoShape : public SoNode {
+class INVENTOR_API SoShape : public SoNode {
 
     SO_NODE_ABSTRACT_HEADER(SoShape);
 
@@ -319,10 +319,10 @@
     void		allocateVerts();
 
     // Static methods called by the GLU tesselation routines
-    static void beginCB(GLenum primType);
-    static void vtxCB(void *vertex);
-    static void endCB();
-    static void errorCB(GLenum err);
+    static void CALLBACK beginCB(GLenum primType);
+    static void CALLBACK vtxCB(void *vertex);
+    static void CALLBACK endCB();
+    static void CALLBACK errorCB(GLenum err);
 };
 
 #endif /* _SO_SHAPE_ */
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoShapeHints.h inventor/lib/database/include/Inventor/nodes/SoShapeHints.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoShapeHints.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoShapeHints.h	2005-08-01 17:36:15.000000000 +0200
@@ -77,7 +77,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=vertexOrdering,shapeType,faceType, creaseAngle
-class SoShapeHints : public SoNode {
+class INVENTOR_API SoShapeHints : public SoNode {
 
     SO_NODE_HEADER(SoShapeHints);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoShuttle.h inventor/lib/database/include/Inventor/nodes/SoShuttle.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoShuttle.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoShuttle.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=translation,translation0,translation1,speed,on
-class SoShuttle : public SoTranslation {
+class INVENTOR_API SoShuttle : public SoTranslation {
 
     SO_NODE_HEADER(SoShuttle);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoSphere.h inventor/lib/database/include/Inventor/nodes/SoSphere.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoSphere.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoSphere.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 
 // C-api: prefix=SoSph
 // C-api: public=radius
-class SoSphere : public SoShape {
+class INVENTOR_API SoSphere : public SoShape {
 
     SO_NODE_HEADER(SoSphere);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoSpotLight.h inventor/lib/database/include/Inventor/nodes/SoSpotLight.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoSpotLight.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoSpotLight.h	2005-08-01 17:36:15.000000000 +0200
@@ -74,7 +74,7 @@
 // C-api: prefix=SoSpotLt
 // C-api: public=on, intensity, color
 // C-api: public=location, direction, dropOffRate, cutOffAngle
-class SoSpotLight : public SoLight {
+class INVENTOR_API SoSpotLight : public SoLight {
 
     SO_NODE_HEADER(SoSpotLight);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoSubNode.h inventor/lib/database/include/Inventor/nodes/SoSubNode.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoSubNode.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoSubNode.h	2006-07-17 15:46:47.000000000 +0200
@@ -94,6 +94,7 @@
 #ifndef  _SO_SUB_NODE_
 #define  _SO_SUB_NODE_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/errors/SoDebugError.h>
 #include <Inventor/fields/SoFieldData.h>
 #include <Inventor/nodes/SoNode.h>
@@ -109,7 +110,8 @@
 //  Debugging macros (used by other macros in this file)
 //
 #ifdef DEBUG
-#define SO__NODE_CHECK_INIT(className)					      \
+#define SO__NODE_CHECK_INIT(className) {				      \
+int _value_false= 0;							      \
 do {									      \
     if (classTypeId == SoType::badType()) {				      \
 	SoDebugError::post("SO_NODE_CONSTRUCTOR",			      \
@@ -118,9 +120,11 @@
 			   " until initClass() has been called");	      \
 	return;								      \
     }									      \
-} while (0)
+} while (_value_false);							      \
+}
 
-#define SO__NODE_CHECK_CONSTRUCT(where)					      \
+#define SO__NODE_CHECK_CONSTRUCT(where) {				      \
+int _value_false= 0;							      \
 do {									      \
     if (fieldData == NULL) {						      \
 	SoDebugError::post(where,					      \
@@ -130,11 +134,12 @@
 	fieldData = new							      \
 	    SoFieldData(parentFieldData ? *parentFieldData : NULL);	      \
     }									      \
-} while(0)
+} while (_value_false);							      \
+}
 
 #else
-#define SO__NODE_CHECK_INIT(className)	while(0)
-#define SO__NODE_CHECK_CONSTRUCT(where)	while(0)
+#define SO__NODE_CHECK_INIT(className)	{ int _value_false= 0; while(_value_false); }
+#define SO__NODE_CHECK_CONSTRUCT(where)	{ int _value_false= 0; while(_value_false); }
 #endif
 
 /////////////////////////////////////////////////////////////////////////////
@@ -252,7 +257,8 @@
 //  Internal initialization macros
 //
 
-#define SO__NODE_INIT_CLASS(className,classPrintName,parentClass)	      \
+#define SO__NODE_INIT_CLASS(className,classPrintName,parentClass) {	      \
+int _value_false= 0;							      \
 do {									      \
     classTypeId =							      \
         SoType::createType(parentClass::getClassTypeId(),		      \
@@ -260,9 +266,11 @@
 		   &className::createInstance,				      \
 		   SoNode::nextActionMethodIndex++);			      \
     parentFieldData = parentClass::getFieldDataPtr();			      \
-} while (0)
+} while (_value_false);							      \
+}
 
-#define SO__NODE_INIT_ABSTRACT_CLASS(className,classPrintName,parentClass)    \
+#define SO__NODE_INIT_ABSTRACT_CLASS(className,classPrintName,parentClass) {  \
+int _value_false= 0;							      \
 do {									      \
     classTypeId =							      \
         SoType::createType(parentClass::getClassTypeId(),		      \
@@ -270,7 +278,8 @@
 		   NULL,						      \
 		   SoNode::nextActionMethodIndex++);			      \
     parentFieldData = parentClass::getFieldDataPtr();			      \
-} while (0)
+} while (_value_false);							      \
+}
 
 ////////////////////////////////////////////
 //
@@ -280,7 +289,8 @@
 // should be the class that this subclass is derived from.
 //
 
-#define SO_NODE_INIT_CLASS(className,parentClass,parentPrintClass)			      \
+#define SO_NODE_INIT_CLASS(className,parentClass,parentPrintClass) {	      \
+int _value_false= 0;							      \
 do {									      \
     classTypeId =							      \
         SoType::createType(SoType::fromName(parentPrintClass),		      \
@@ -288,9 +298,11 @@
 		   &className::createInstance,				      \
 		   SoNode::nextActionMethodIndex++);			      \
     parentFieldData = parentClass::getFieldDataPtr();			      \
-} while (0)
+} while (_value_false);							      \
+}
 
-#define SO_NODE_INIT_ABSTRACT_CLASS(className, parentClass, parentPrintClass) \
+#define SO_NODE_INIT_ABSTRACT_CLASS(className, parentClass, parentPrintClass) {  \
+int _value_false= 0;							      \
 do {									      \
     classTypeId =							      \
         SoType::createType(SoType::fromName(parentPrintClass),		      \
@@ -298,7 +310,8 @@
 		   NULL,						      \
 		   SoNode::nextActionMethodIndex++);			      \
     parentFieldData = parentClass::getFieldDataPtr();			      \
-} while (0)
+} while (_value_false);							      \
+}
 
 ///////////////////////////////////////////////
 //
@@ -306,7 +319,8 @@
 // a constructor, to do required initializations
 //
 
-#define SO_NODE_CONSTRUCTOR(className)					      \
+#define SO_NODE_CONSTRUCTOR(className) {				      \
+int _value_false= 0;							      \
 do {									      \
     SO__NODE_CHECK_INIT(className);					      \
     if (fieldData == NULL)						      \
@@ -315,7 +329,8 @@
     else								      \
 	firstInstance = FALSE;						      \
     isBuiltIn = FALSE;							      \
-} while(0)
+} while (_value_false);							      \
+}
 
 ////////////////////////////////////////////////
 //
@@ -343,7 +358,8 @@
 // given default values.
 //
 
-#define SO_NODE_ADD_FIELD(fieldName,defValue)				      \
+#define SO_NODE_ADD_FIELD(fieldName,defValue) {				      \
+    int _value_false= 0;						      \
     do {								      \
 	SO__NODE_CHECK_CONSTRUCT(__FILE__);				      \
 	if (firstInstance)						      \
@@ -351,7 +367,8 @@
 				&this->fieldName);			      \
 	this->fieldName.setValue defValue;				      \
 	this->fieldName.setContainer(this);				      \
-    } while (0)
+    } while (_value_false);						      \
+    }
 
 ////////////////////////////////////////////
 //
@@ -375,14 +392,16 @@
 //	SO_NODE_DEFINE_ENUM_VALUE(Chipmunk, THEODORE);
 //
 
-#define SO_NODE_DEFINE_ENUM_VALUE(enumType,enumValue)			      \
+#define SO_NODE_DEFINE_ENUM_VALUE(enumType,enumValue) {			      \
+    int _value_false= 0;						      \
     do {								      \
 	SO__NODE_CHECK_CONSTRUCT(__FILE__);				      \
 	if (firstInstance)						      \
 	    fieldData->addEnumValue(SO__QUOTE(enumType),		      \
 				SO__QUOTE(enumValue),			      \
 				enumValue);				      \
-    } while (0)
+    } while (_value_false);						      \
+    }
 
 // C-api: begin
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoSwitch.h inventor/lib/database/include/Inventor/nodes/SoSwitch.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoSwitch.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoSwitch.h	2005-08-01 17:36:15.000000000 +0200
@@ -77,7 +77,7 @@
 #define SO_SWITCH_ALL		(-3)	/* Traverse all children	*/
 
 // C-api: public=whichChild
-class SoSwitch : public SoGroup {
+class INVENTOR_API SoSwitch : public SoGroup {
 
     SO_NODE_HEADER(SoSwitch);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoText2.h inventor/lib/database/include/Inventor/nodes/SoText2.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoText2.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoText2.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_TEXT_2_
 #define  _SO_TEXT_2_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/fields/SoMFString.h>
 #include <Inventor/fields/SoSFEnum.h>
 #include <Inventor/fields/SoSFFloat.h>
@@ -78,7 +79,7 @@
 
 // C-api: prefix=SoTxt2
 // C-api: public=string, interval, justification
-class SoText2 : public SoShape {
+class INVENTOR_API SoText2 : public SoShape {
 
     SO_NODE_HEADER(SoText2);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoText3.h inventor/lib/database/include/Inventor/nodes/SoText3.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoText3.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoText3.h	2006-07-12 18:01:38.000000000 +0200
@@ -63,7 +63,7 @@
 #include <Inventor/fields/SoSFFloat.h>
 #include <Inventor/nodes/SoShape.h>
 
-#include <GL/gl.h>   // For GLenum declaration
+#include OPENGL_GL_H   // For GLenum declaration
 
 // C-api: end
 
@@ -93,7 +93,7 @@
 
 // C-api: prefix=SoTxt3
 // C-api: public=string, spacing, parts, justification
-class SoText3 : public SoShape {
+class INVENTOR_API SoText3 : public SoShape {
 
     SO_NODE_HEADER(SoText3);
 
@@ -200,9 +200,9 @@
 		const float *tTexCoords);
 
     // Static callbacks invoked by the glu tesselation code:
-    static void beginCB(GLenum primType);
-    static void endCB();
-    static void vtxCB(void *vertex);
+    static void CALLBACK beginCB(GLenum primType);
+    static void CALLBACK endCB();
+    static void CALLBACK vtxCB(void *vertex);
     
     // Private data:
     // SoOutlineFontCache is an internal, opaque class used to
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoTexture2.h inventor/lib/database/include/Inventor/nodes/SoTexture2.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoTexture2.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoTexture2.h	2006-07-12 18:01:38.000000000 +0200
@@ -62,7 +62,7 @@
 #include <Inventor/fields/SoSFString.h>
 #include <Inventor/nodes/SoSubNode.h>
 
-#include <GL/gl.h>
+#include OPENGL_GL_H
 
 class SoSensor;
 class SoFieldSensor;
@@ -78,7 +78,7 @@
 
 // C-api: prefix=SoTex2
 // C-api: public=filename, image, wrapS, wrapT, model, blendColor
-class SoTexture2 : public SoNode {
+class INVENTOR_API SoTexture2 : public SoNode {
 
     SO_NODE_HEADER(SoTexture2);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoTexture2Transform.h inventor/lib/database/include/Inventor/nodes/SoTexture2Transform.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoTexture2Transform.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoTexture2Transform.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 
 // C-api: prefix=SoTex2Xf
 // C-api: public= translation, rotation, scaleFactor, center
-class SoTexture2Transform : public SoNode {
+class INVENTOR_API SoTexture2Transform : public SoNode {
 
     SO_NODE_HEADER(SoTexture2Transform);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoTextureCoordinate2.h inventor/lib/database/include/Inventor/nodes/SoTextureCoordinate2.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoTextureCoordinate2.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoTextureCoordinate2.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 
 // C-api: prefix=SoTexCoord2
 // C-api: public=point
-class SoTextureCoordinate2 : public SoNode {
+class INVENTOR_API SoTextureCoordinate2 : public SoNode {
 
     SO_NODE_HEADER(SoTextureCoordinate2);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoTextureCoordinateBinding.h inventor/lib/database/include/Inventor/nodes/SoTextureCoordinateBinding.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoTextureCoordinateBinding.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoTextureCoordinateBinding.h	2005-08-01 17:36:15.000000000 +0200
@@ -77,7 +77,7 @@
 
 // C-api: prefix=SoTexCoordBind
 // C-api: public=value
-class SoTextureCoordinateBinding : public SoNode {
+class INVENTOR_API SoTextureCoordinateBinding : public SoNode {
 
     SO_NODE_HEADER(SoTextureCoordinateBinding);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoTextureCoordinateDefault.h inventor/lib/database/include/Inventor/nodes/SoTextureCoordinateDefault.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoTextureCoordinateDefault.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoTextureCoordinateDefault.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoTexDflt
-class SoTextureCoordinateDefault : public SoTextureCoordinateFunction {
+class INVENTOR_API SoTextureCoordinateDefault : public SoTextureCoordinateFunction {
 
     SO_NODE_HEADER(SoTextureCoordinateDefault);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoTextureCoordinateEnvironment.h inventor/lib/database/include/Inventor/nodes/SoTextureCoordinateEnvironment.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoTextureCoordinateEnvironment.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoTextureCoordinateEnvironment.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoTexEnv
-class SoTextureCoordinateEnvironment : public SoTextureCoordinateFunction {
+class INVENTOR_API SoTextureCoordinateEnvironment : public SoTextureCoordinateFunction {
 
     SO_NODE_HEADER(SoTextureCoordinateEnvironment);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoTextureCoordinateFunction.h inventor/lib/database/include/Inventor/nodes/SoTextureCoordinateFunction.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoTextureCoordinateFunction.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoTextureCoordinateFunction.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoTexFunc
-class SoTextureCoordinateFunction : public SoNode {
+class INVENTOR_API SoTextureCoordinateFunction : public SoNode {
 
     SO_NODE_HEADER(SoTextureCoordinateFunction);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoTextureCoordinatePlane.h inventor/lib/database/include/Inventor/nodes/SoTextureCoordinatePlane.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoTextureCoordinatePlane.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoTextureCoordinatePlane.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 
 // C-api: prefix=SoTexPln
 // C-api: public=directionS, directionT
-class SoTextureCoordinatePlane : public SoTextureCoordinateFunction {
+class INVENTOR_API SoTextureCoordinatePlane : public SoTextureCoordinateFunction {
 
     SO_NODE_HEADER(SoTextureCoordinatePlane);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoTransformation.h inventor/lib/database/include/Inventor/nodes/SoTransformation.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoTransformation.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoTransformation.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-class SoTransformation : public SoNode {
+class INVENTOR_API SoTransformation : public SoNode {
 
     SO_NODE_HEADER(SoTransformation);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoTransform.h inventor/lib/database/include/Inventor/nodes/SoTransform.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoTransform.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoTransform.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 
 // C-api: prefix=SoXf
 // C-api: public= translation, rotation, scaleFactor, scaleOrientation, center
-class SoTransform : public SoTransformation {
+class INVENTOR_API SoTransform : public SoTransformation {
 
     SO_NODE_HEADER(SoTransform);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoTransformSeparator.h inventor/lib/database/include/Inventor/nodes/SoTransformSeparator.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoTransformSeparator.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoTransformSeparator.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 
 // C-api: prefix=SoXfSep
 // C-api: public=whichChild
-class SoTransformSeparator : public SoGroup {
+class INVENTOR_API SoTransformSeparator : public SoGroup {
 
     SO_NODE_HEADER(SoTransformSeparator);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoTranslation.h inventor/lib/database/include/Inventor/nodes/SoTranslation.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoTranslation.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoTranslation.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 
 // C-api: prefix=SoXlate
 // C-api: public= translation
-class SoTranslation : public SoTransformation {
+class INVENTOR_API SoTranslation : public SoTransformation {
 
     SO_NODE_HEADER(SoTranslation);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoTriangleStripSet.h inventor/lib/database/include/Inventor/nodes/SoTriangleStripSet.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoTriangleStripSet.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoTriangleStripSet.h	2005-08-01 17:36:15.000000000 +0200
@@ -87,7 +87,7 @@
 
 // C-api: prefix=SoTriStripSet
 // C-api: public=startIndex, numVertices, vertexProperty
-class SoTriangleStripSet : public SoNonIndexedShape {
+class INVENTOR_API SoTriangleStripSet : public SoNonIndexedShape {
 
     SO_NODE_HEADER(SoTriangleStripSet);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoUnits.h inventor/lib/database/include/Inventor/nodes/SoUnits.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoUnits.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoUnits.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=units
-class SoUnits : public SoTransformation {
+class INVENTOR_API SoUnits : public SoTransformation {
 
     SO_NODE_HEADER(SoUnits);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoVertexProperty.h inventor/lib/database/include/Inventor/nodes/SoVertexProperty.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoVertexProperty.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoVertexProperty.h	2007-01-16 09:27:04.000000000 +0100
@@ -79,7 +79,7 @@
 class SoVertexPropertyCache;
 // C-api: prefix=SoVertProp
 // C-api: public=vertex, texCoord, normal, normalBinding, orderedRGBA, materialBinding
-class SoVertexProperty : public SoNode {
+class INVENTOR_API SoVertexProperty : public SoNode {
 
     SO_NODE_HEADER(SoVertexProperty);
 
@@ -138,9 +138,9 @@
 
 #include <Inventor/elements/SoShapeStyleElement.h>
 
-typedef void SoVPCacheFunc(const char *const);
+typedef WINGDIAPI void APIENTRY SoVPCacheFunc(const char *const);
 
-SoEXTENDER class SoVertexPropertyCache {
+SoEXTENDER class INVENTOR_API SoVertexPropertyCache {
   public:
 
     // API used by shapes:
@@ -148,6 +148,7 @@
     SbBool mightNeedSomethingFromState(const SoShapeStyleElement *sse) const
 	{ return needFromState & sse->getRenderCaseMask(); }
 
+    void	fillInColorAndTranspAvail(const SoVertexProperty *, SoState *state);
     void	fillInCache(const SoVertexProperty *,   SoState *);
 
     SbBool	shouldGenerateNormals(const SoShapeStyleElement *sse) const
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoVertexShape.h inventor/lib/database/include/Inventor/nodes/SoVertexShape.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoVertexShape.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoVertexShape.h	2005-08-01 17:36:15.000000000 +0200
@@ -78,7 +78,7 @@
 
 // C-api: abstract
 // C-api: prefix=SoVtx
-class SoVertexShape : public SoShape {
+class INVENTOR_API SoVertexShape : public SoShape {
 
     SO_NODE_ABSTRACT_HEADER(SoVertexShape);
     
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoWWWAnchor.h inventor/lib/database/include/Inventor/nodes/SoWWWAnchor.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoWWWAnchor.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoWWWAnchor.h	2005-08-01 17:36:15.000000000 +0200
@@ -64,7 +64,7 @@
 // and highlight (move over the anchor).
 // The URL for the anchor is passed, with additional information as described by the
 // map field tagged onto the URL.
-typedef void SoWWWAnchorCB(
+typedef void INVENTOR_API SoWWWAnchorCB(
     const SbString &url, void *userData, SoWWWAnchor *node);
 
 
@@ -75,7 +75,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=name,description,map
-class SoWWWAnchor : public SoLocateHighlight {
+class INVENTOR_API SoWWWAnchor : public SoLocateHighlight {
 
     SO_NODE_HEADER(SoWWWAnchor);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/nodes/SoWWWInline.h inventor/lib/database/include/Inventor/nodes/SoWWWInline.h
--- /tmp/inventor/lib/database/include/Inventor/nodes/SoWWWInline.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/nodes/SoWWWInline.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 
 // This is the format for callbacks that will get URL data for us.
 // Once they get the data, they should call the setChildData() method.
-typedef void SoWWWInlineFetchURLCB(
+typedef void INVENTOR_API SoWWWInlineFetchURLCB(
     const SbString &url, void *userData, SoWWWInline *node);
 		
 
@@ -80,7 +80,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=name,bboxCenter,bboxSize
-class SoWWWInline : public SoNode {
+class INVENTOR_API SoWWWInline : public SoNode {
 
     SO_NODE_HEADER(SoWWWInline);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/projectors/SbCylinderPlaneProjector.h inventor/lib/database/include/Inventor/projectors/SbCylinderPlaneProjector.h
--- /tmp/inventor/lib/database/include/Inventor/projectors/SbCylinderPlaneProjector.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/projectors/SbCylinderPlaneProjector.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 #include <Inventor/projectors/SbCylinderSectionProjector.h>
 
 // C-api: prefix=SbCylPlnProj
-class SbCylinderPlaneProjector : public SbCylinderSectionProjector
+class INVENTOR_API SbCylinderPlaneProjector : public SbCylinderSectionProjector
 {
   public:
   
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/projectors/SbCylinderProjector.h inventor/lib/database/include/Inventor/projectors/SbCylinderProjector.h
--- /tmp/inventor/lib/database/include/Inventor/projectors/SbCylinderProjector.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/projectors/SbCylinderProjector.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 
 // C-api: abstract
 // C-api: prefix=SbCylProj
-class SbCylinderProjector : public SbProjector
+class INVENTOR_API SbCylinderProjector : public SbProjector
 {
   public:
     // Destructor
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/projectors/SbCylinderSectionProjector.h inventor/lib/database/include/Inventor/projectors/SbCylinderSectionProjector.h
--- /tmp/inventor/lib/database/include/Inventor/projectors/SbCylinderSectionProjector.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/projectors/SbCylinderSectionProjector.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 #include <Inventor/projectors/SbCylinderProjector.h>
 
 // C-api: prefix=SbCylSectProj
-class SbCylinderSectionProjector : public SbCylinderProjector
+class INVENTOR_API SbCylinderSectionProjector : public SbCylinderProjector
 {
   public:
     // Default constructor.
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/projectors/SbCylinderSheetProjector.h inventor/lib/database/include/Inventor/projectors/SbCylinderSheetProjector.h
--- /tmp/inventor/lib/database/include/Inventor/projectors/SbCylinderSheetProjector.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/projectors/SbCylinderSheetProjector.h	2005-08-01 17:36:15.000000000 +0200
@@ -62,7 +62,7 @@
 #include <Inventor/projectors/SbCylinderProjector.h>
 
 // C-api: prefix=SbCylSheetProj
-class SbCylinderSheetProjector : public SbCylinderProjector
+class INVENTOR_API SbCylinderSheetProjector : public SbCylinderProjector
 {
   public:
     // Default constructor.
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/projectors/SbLineProjector.h inventor/lib/database/include/Inventor/projectors/SbLineProjector.h
--- /tmp/inventor/lib/database/include/Inventor/projectors/SbLineProjector.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/projectors/SbLineProjector.h	2005-08-01 17:36:15.000000000 +0200
@@ -60,7 +60,7 @@
 #include <Inventor/projectors/SbProjector.h>
 
 // C-api: prefix=SbLineProj
-class SbLineProjector : public SbProjector
+class INVENTOR_API SbLineProjector : public SbProjector
 {
   public:
     // Constructor
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/projectors/SbPlaneProjector.h inventor/lib/database/include/Inventor/projectors/SbPlaneProjector.h
--- /tmp/inventor/lib/database/include/Inventor/projectors/SbPlaneProjector.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/projectors/SbPlaneProjector.h	2005-08-01 17:36:15.000000000 +0200
@@ -61,7 +61,7 @@
 #include <Inventor/projectors/SbProjector.h>
 
 // C-api: prefix=SbPlnProj
-class SbPlaneProjector : public SbProjector
+class INVENTOR_API SbPlaneProjector : public SbProjector
 {
   public:
   
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/projectors/SbProjector.h inventor/lib/database/include/Inventor/projectors/SbProjector.h
--- /tmp/inventor/lib/database/include/Inventor/projectors/SbProjector.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/projectors/SbProjector.h	2006-07-17 15:46:47.000000000 +0200
@@ -61,10 +61,11 @@
 #ifndef _SB_PROJECTOR_
 #define _SB_PROJECTOR_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbLinear.h>
 
 // C-api: prefix=SbProj
-class SbProjector
+class INVENTOR_API SbProjector
 {
   public:
     // Apply the projector using the given point, returning the
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/projectors/SbSpherePlaneProjector.h inventor/lib/database/include/Inventor/projectors/SbSpherePlaneProjector.h
--- /tmp/inventor/lib/database/include/Inventor/projectors/SbSpherePlaneProjector.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/projectors/SbSpherePlaneProjector.h	2006-07-17 15:46:47.000000000 +0200
@@ -62,10 +62,11 @@
 #ifndef _SB_SPHERE_PLANE_PROJECTOR_
 #define _SB_SPHERE_PLANE_PROJECTOR_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/projectors/SbSphereSectionProjector.h>
 
 // C-api: prefix=SbSphPlnProj
-class SbSpherePlaneProjector : public SbSphereSectionProjector
+class INVENTOR_API SbSpherePlaneProjector : public SbSphereSectionProjector
 {
   public:
     // Default constructor.
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/projectors/SbSphereProjector.h inventor/lib/database/include/Inventor/projectors/SbSphereProjector.h
--- /tmp/inventor/lib/database/include/Inventor/projectors/SbSphereProjector.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/projectors/SbSphereProjector.h	2005-08-01 17:36:15.000000000 +0200
@@ -62,7 +62,7 @@
 
 // C-api: abstract
 // C-api: prefix=SbSphProj
-class SbSphereProjector : public SbProjector
+class INVENTOR_API SbSphereProjector : public SbProjector
 {
   public:
     // Apply the projector using the given point, returning the
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/projectors/SbSphereSectionProjector.h inventor/lib/database/include/Inventor/projectors/SbSphereSectionProjector.h
--- /tmp/inventor/lib/database/include/Inventor/projectors/SbSphereSectionProjector.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/projectors/SbSphereSectionProjector.h	2005-08-01 17:36:15.000000000 +0200
@@ -69,7 +69,7 @@
 #include <Inventor/projectors/SbSphereProjector.h>
 
 // C-api: prefix=SbSphSectProj
-class SbSphereSectionProjector : public SbSphereProjector
+class INVENTOR_API SbSphereSectionProjector : public SbSphereProjector
 {
   public:
     // Default constructor.
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/projectors/SbSphereSheetProjector.h inventor/lib/database/include/Inventor/projectors/SbSphereSheetProjector.h
--- /tmp/inventor/lib/database/include/Inventor/projectors/SbSphereSheetProjector.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/projectors/SbSphereSheetProjector.h	2005-08-01 17:36:15.000000000 +0200
@@ -72,7 +72,7 @@
 #include <Inventor/projectors/SbSphereProjector.h>
 
 // C-api: prefix=SbSphSheetProj
-class SbSphereSheetProjector : public SbSphereProjector
+class INVENTOR_API SbSphereSheetProjector : public SbSphereProjector
 {
   public:
     // Default constructor.
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SbBasic.h inventor/lib/database/include/Inventor/SbBasic.h
--- /tmp/inventor/lib/database/include/Inventor/SbBasic.h	2000-10-14 12:46:06.000000000 +0200
+++ inventor/lib/database/include/Inventor/SbBasic.h	2007-04-10 16:40:15.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SB_BASIC_
 #define  _SB_BASIC_
 
+#include <Inventor/system/SbSystem.h>
 //
 // These symbols can be used to determine what version of Inventor
 // your application is compiling against.  These symbols were first
@@ -63,7 +64,9 @@
 // they were undefined in previous revisions of Inventor.
 //
 #define SO_VERSION 		2
-#define SO_VERSION_REVISION	1
+#define SO_VERSION_REVISION	4
+#define SO_VERSION_PATCHLEVEL	0
+#define SGI_VERSION		20400
 
 #include <inttypes.h>
 #include <sys/types.h>
@@ -112,6 +115,23 @@
 #define SoEXTENDER
 #define SoINTERNAL
 
+#ifdef WIN32
+#define M_E		2.7182818284590452354
+#define M_LOG2E		1.4426950408889634074
+#define M_LOG10E	0.43429448190325182765
+#define M_LN2		0.69314718055994530942
+#define M_LN10		2.30258509299404568402
+#define M_PI		3.14159265358979323846
+#define M_PI_2		1.57079632679489661923
+#define M_PI_4		0.78539816339744830962
+#define M_1_PI		0.31830988618379067154
+#define M_2_PI		0.63661977236758134308
+#define M_2_SQRTPI	1.12837916709551257390
+#define M_SQRT2		1.41421356237309504880
+#define M_SQRT1_2	0.70710678118654752440
+#define MAXFLOAT	((float)3.40282346638528860e+38)
+#endif
+
 /////////////////////////////////////////////////////////////////////////////
 //
 // Map the single-precision math functions to the regular ones on
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SbBox.h inventor/lib/database/include/Inventor/SbBox.h
--- /tmp/inventor/lib/database/include/Inventor/SbBox.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/SbBox.h	2006-07-17 15:46:47.000000000 +0200
@@ -59,10 +59,11 @@
 #ifndef _SB_BOX_
 #define _SB_BOX_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbBasic.h>
 #include <Inventor/SbLinear.h>
 
-class SbBox3f {
+class INVENTOR_API SbBox3f {
   public:
     // Default constructor - leaves box totally empty
     SbBox3f()						{ makeEmpty(); }
@@ -182,8 +183,8 @@
     float	getVolume() const;
 
     // Equality comparisons
-    friend int          operator ==(const SbBox3f &b1, const SbBox3f &b2);
-    friend int          operator !=(const SbBox3f &b1, const SbBox3f &b2)
+    friend INVENTOR_API int          operator ==(const SbBox3f &b1, const SbBox3f &b2);
+    friend INVENTOR_API int          operator !=(const SbBox3f &b1, const SbBox3f &b2)
 	{ return !(b1 == b2); }
 
   private:
@@ -191,7 +192,7 @@
     SbVec3f	min, max;
 };
 
-class SbXfBox3f : private SbBox3f {
+class INVENTOR_API SbXfBox3f : public SbBox3f {
   public:
     // Default constructor - leaves box totally empty
     SbXfBox3f();
@@ -298,8 +299,8 @@
     SbBox3f		project() const;
 
     // Equality comparisons
-    friend int          operator ==(const SbXfBox3f &b1, const SbXfBox3f &b2);
-    friend int          operator !=(const SbXfBox3f &b1, const SbXfBox3f &b2)
+    friend INVENTOR_API int          operator ==(const SbXfBox3f &b1, const SbXfBox3f &b2);
+    friend INVENTOR_API int          operator !=(const SbXfBox3f &b1, const SbXfBox3f &b2)
 	{ return !(b1 == b2); }
 
   private:
@@ -312,7 +313,7 @@
     SbMatrix		xformInv;
 };
 
-class SbBox2f {
+class INVENTOR_API SbBox2f {
   public:
     // Default constructor - leaves box totally empty
     SbBox2f()					{ makeEmpty(); };
@@ -399,8 +400,8 @@
 	{ return (max[0] > min[0] && max[1] > min[1]); }
 
     // Equality comparisons
-    friend int          operator ==(const SbBox2f &b1, const SbBox2f &b2);
-    friend int          operator !=(const SbBox2f &b1, const SbBox2f &b2)
+    friend INVENTOR_API int          operator ==(const SbBox2f &b1, const SbBox2f &b2);
+    friend INVENTOR_API int          operator !=(const SbBox2f &b1, const SbBox2f &b2)
 	{ return !(b1 == b2); }
 
   private:
@@ -408,7 +409,7 @@
     SbVec2f	min, max;
 };
 
-class SbBox2s {
+class INVENTOR_API SbBox2s {
   public:
     // Default constructor - leaves box totally empty
     SbBox2s()					{ makeEmpty(); };
@@ -477,8 +478,8 @@
     void	makeEmpty();
 
     // Equality comparisons
-    friend int          operator ==(const SbBox2s &b1, const SbBox2s &b2);
-    friend int          operator !=(const SbBox2s &b1, const SbBox2s &b2)
+    friend INVENTOR_API int          operator ==(const SbBox2s &b1, const SbBox2s &b2);
+    friend INVENTOR_API int          operator !=(const SbBox2s &b1, const SbBox2s &b2)
 	{ return !(b1 == b2); }
 
   private:
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SbColor.h inventor/lib/database/include/Inventor/SbColor.h
--- /tmp/inventor/lib/database/include/Inventor/SbColor.h	2000-10-29 16:04:17.000000000 +0100
+++ inventor/lib/database/include/Inventor/SbColor.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SB_COLOR_H_
 #define  _SB_COLOR_H_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbLinear.h>
 
 
@@ -79,7 +80,7 @@
 
 // C-api: end
 
-class SbColor : public SbVec3f {
+class INVENTOR_API SbColor : public SbVec3f {
   public:
     // Default constructor
     SbColor();
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SbDict.h inventor/lib/database/include/Inventor/SbDict.h
--- /tmp/inventor/lib/database/include/Inventor/SbDict.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/SbDict.h	2006-07-17 15:46:47.000000000 +0200
@@ -62,6 +62,8 @@
 #ifndef _SB_DICT_
 #define _SB_DICT_
 
+#include <Inventor/system/SbSystem.h>
+
 #include <Inventor/SbBasic.h>
 #include <Inventor/SbString.h>
 #include <Inventor/SbPList.h>
@@ -98,7 +100,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SbDict {
+SoEXTENDER class INVENTOR_API SbDict {
   public:
 
     // Constructor
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SbLinear.h inventor/lib/database/include/Inventor/SbLinear.h
--- /tmp/inventor/lib/database/include/Inventor/SbLinear.h	2000-10-29 16:04:17.000000000 +0100
+++ inventor/lib/database/include/Inventor/SbLinear.h	2006-07-17 15:46:47.000000000 +0200
@@ -52,6 +52,7 @@
  |	SbVec3f
  |	SbVec2f
  |	SbVec2s
+ |	SbVec3s		// Extension to SGI OIV 2.1
  |	SbVec4f
  |	SbRotation
  |	SbMatrix
@@ -71,6 +72,7 @@
 #ifndef _SB_LINEAR_
 #define _SB_LINEAR_
 
+#include <Inventor/system/SbSystem.h>
 #include <math.h>
 #include <Inventor/SbBasic.h>
 
@@ -120,7 +122,7 @@
 
 // C-api: end
 
-class SbVec3f {
+class INVENTOR_API SbVec3f {
   public:
     // Default constructor
     SbVec3f()						{ }
@@ -215,20 +217,20 @@
     SbVec3f	operator -() const;
 
     // Component-wise binary scalar multiplication and division operators
-    friend SbVec3f	operator *(const SbVec3f &v, float d);
-    friend SbVec3f	operator *(float d, const SbVec3f &v)
+    friend INVENTOR_API SbVec3f	operator *(const SbVec3f &v, float d);
+    friend INVENTOR_API SbVec3f	operator *(float d, const SbVec3f &v)
 	{ return v * d; }
-    friend SbVec3f	operator /(const SbVec3f &v, float d)
-	{ return v * (1.0 / d); }
+    friend INVENTOR_API SbVec3f	operator /(const SbVec3f &v, float d)
+	{ return v * (1.0f / d); }
 
     // Component-wise binary vector addition and subtraction operators
-    friend SbVec3f	operator +(const SbVec3f &v1, const SbVec3f &v2);
+    friend INVENTOR_API SbVec3f	operator +(const SbVec3f &v1, const SbVec3f &v2);
 // C-api.h: #define SbV3fAdd(_dest, _src1, _src2)
 // C-api.h:     (((_dest).vec[0] = (_src1).vec[0] + (_src2).vec[0]),
 // C-api.h:      ((_dest).vec[1] = (_src1).vec[1] + (_src2).vec[1]),
 // C-api.h:      ((_dest).vec[2] = (_src1).vec[2] + (_src2).vec[2]))
 
-    friend SbVec3f	operator -(const SbVec3f &v1, const SbVec3f &v2);
+    friend INVENTOR_API SbVec3f	operator -(const SbVec3f &v1, const SbVec3f &v2);
 // C-api.h: #define SbV3fSub(_dest, _src1, _src2)
 // C-api.h:     (((_dest).vec[0] = (_src1).vec[0] - (_src2).vec[0]),
 // C-api.h:      ((_dest).vec[1] = (_src1).vec[1] - (_src2).vec[1]),
@@ -236,8 +238,8 @@
 
 // C-api: begin
     // Equality comparison operator
-    friend int		operator ==(const SbVec3f &v1, const SbVec3f &v2);
-    friend int		operator !=(const SbVec3f &v1, const SbVec3f &v2)
+    friend INVENTOR_API int		operator ==(const SbVec3f &v1, const SbVec3f &v2);
+    friend INVENTOR_API int		operator !=(const SbVec3f &v1, const SbVec3f &v2)
 	{ return !(v1 == v2); }
 
     // Equality comparison within given tolerance - the square of the
@@ -268,7 +270,7 @@
 
 // C-api: end
 
-class SbVec2f {
+class INVENTOR_API SbVec2f {
   public:
 
     // Default constructor
@@ -343,27 +345,27 @@
     SbVec2f	operator -() const;
 
     // Component-wise binary scalar multiplication and division operators
-    friend SbVec2f	operator *(const SbVec2f &v, float d);
-    friend SbVec2f	operator *(float d, const SbVec2f &v)
+    friend INVENTOR_API SbVec2f	operator *(const SbVec2f &v, float d);
+    friend INVENTOR_API SbVec2f	operator *(float d, const SbVec2f &v)
 	{ return v * d; }
-    friend SbVec2f	operator /(const SbVec2f &v, float d)
-	{ return v * (1.0 / d); }
+    friend INVENTOR_API SbVec2f	operator /(const SbVec2f &v, float d)
+	{ return v * (1.0f / d); }
 
     // Component-wise binary vector addition and subtraction operators
-    friend SbVec2f	operator +(const SbVec2f &v1, const SbVec2f &v2);
+    friend INVENTOR_API SbVec2f	operator +(const SbVec2f &v1, const SbVec2f &v2);
 // C-api.h: #define SbV2fAdd(_dest, _src1, _src2)
 // C-api.h:     (((_dest).vec[0] = (_src1).vec[0] + (_src2).vec[0]),
 // C-api.h:      ((_dest).vec[1] = (_src1).vec[1] + (_src2).vec[1]))
 
-    friend SbVec2f	operator -(const SbVec2f &v1, const SbVec2f &v2);
+    friend INVENTOR_API SbVec2f	operator -(const SbVec2f &v1, const SbVec2f &v2);
 // C-api.h: #define SbV2fSub(_dest, _src1, _src2)
 // C-api.h:     (((_dest).vec[0] = (_src1).vec[0] - (_src2).vec[0]),
 // C-api.h:      ((_dest).vec[1] = (_src1).vec[1] - (_src2).vec[1]))
 
 // C-api: begin
     // Equality comparison operator
-    friend int		operator ==(const SbVec2f &v1, const SbVec2f &v2);
-    friend int		operator !=(const SbVec2f &v1, const SbVec2f &v2)
+    friend INVENTOR_API int		operator ==(const SbVec2f &v1, const SbVec2f &v2);
+    friend INVENTOR_API int		operator !=(const SbVec2f &v1, const SbVec2f &v2)
 	{ return !(v1 == v2); }
 
     // Equality comparison within given tolerance - the square of the
@@ -390,7 +392,7 @@
 
 // C-api: end
 
-class SbVec2s {
+class INVENTOR_API SbVec2s {
   public:
 
     // Default constructor
@@ -456,31 +458,31 @@
     SbVec2s	operator -() const;
 
     // Component-wise binary scalar multiplication and division operators
-    friend SbVec2s	operator *(const SbVec2s &v, int d);
-    friend SbVec2s	operator *(const SbVec2s &v, double d);
-    friend SbVec2s	operator *(int d, const SbVec2s &v)
+    friend INVENTOR_API SbVec2s	operator *(const SbVec2s &v, int d);
+    friend INVENTOR_API SbVec2s	operator *(const SbVec2s &v, double d);
+    friend INVENTOR_API SbVec2s	operator *(int d, const SbVec2s &v)
 	{ return v * d; }
-    friend SbVec2s	operator *(double d, const SbVec2s &v)
+    friend INVENTOR_API SbVec2s	operator *(double d, const SbVec2s &v)
 	{ return v * d; }
-    friend SbVec2s	operator /(const SbVec2s &v, int d);
-    friend SbVec2s	operator /(const SbVec2s &v, double d)
+    friend INVENTOR_API SbVec2s	operator /(const SbVec2s &v, int d);
+    friend INVENTOR_API SbVec2s	operator /(const SbVec2s &v, double d)
 	{ return v * (1.0 / d); }
 
     // Component-wise binary vector addition and subtraction operators
-    friend SbVec2s	operator +(const SbVec2s &v1, const SbVec2s &v2);
+    friend INVENTOR_API SbVec2s	operator +(const SbVec2s &v1, const SbVec2s &v2);
 // C-api.h: #define SbV2sAdd(_dest, _src1, _src2)
 // C-api.h:     (((_dest).vec[0] = (_src1).vec[0] + (_src2).vec[0]),
 // C-api.h:      ((_dest).vec[1] = (_src1).vec[1] + (_src2).vec[1]))
 
-    friend SbVec2s	operator -(const SbVec2s &v1, const SbVec2s &v2);
+    friend INVENTOR_API SbVec2s	operator -(const SbVec2s &v1, const SbVec2s &v2);
 // C-api.h: #define SbV2sSub(_dest, _src1, _src2)
 // C-api.h:     (((_dest).vec[0] = (_src1).vec[0] - (_src2).vec[0]),
 // C-api.h:      ((_dest).vec[1] = (_src1).vec[1] - (_src2).vec[1]))
 
 // C-api: begin
     // Equality comparison operator
-    friend int		operator ==(const SbVec2s &v1, const SbVec2s &v2);
-    friend int		operator !=(const SbVec2s &v1, const SbVec2s &v2)
+    friend INVENTOR_API int		operator ==(const SbVec2s &v1, const SbVec2s &v2);
+    friend INVENTOR_API int		operator !=(const SbVec2s &v1, const SbVec2s &v2)
 	{ return !(v1 == v2); }
 
   protected:
@@ -489,6 +491,89 @@
 
 //////////////////////////////////////////////////////////////////////////////
 //
+//  Class: SbVec3s
+//
+//  3D vector used to represet points or directions. Each component of
+//  the vector is a (short) integer.
+//
+//////////////////////////////////////////////////////////////////////////////
+
+class INVENTOR_API SbVec3s {
+  public:
+
+    // Default constructor
+    SbVec3s()                                           { }
+
+    // Constructor given an array of 3 components
+    SbVec3s(const short v[3])                           { setValue(v); }
+
+    // Constructor given 3 individual components
+    SbVec3s(short x, short y, short z)                  { setValue(x, y, z); }
+
+    // Returns dot (inner) product of vector and another vector
+    int32_t     dot(const SbVec3s &v) const;
+
+    // Returns pointer to array of 3 components
+    const short *getValue() const                       { return vec; }
+
+    // Returns 3 individual components
+    void        getValue(short &x, short &y, short &z) const;
+
+    // Negates each component of vector in place
+    void        negate();
+
+    // Sets value of vector from array of 3 components
+    SbVec3s &   setValue(const short v[3]);
+
+    // Sets value of vector from 3 individual components
+    SbVec3s &   setValue(short x, short y, short z);
+
+    // Accesses indexed component of vector
+    short &       operator [](int i)            { return (vec[i]); }
+    const short & operator [](int i) const      { return (vec[i]); }
+
+    // Component-wise scalar multiplication and division operators
+    SbVec3s &   operator *=(int d);
+    SbVec3s &   operator *=(double d);
+
+    SbVec3s &   operator /=(int d);
+    SbVec3s &   operator /=(double d)
+        { return *this *= (1.0 / d); }
+
+    // Component-wise vector addition and subtraction operators
+    SbVec3s &   operator +=(const SbVec3s &u);
+    SbVec3s &   operator -=(const SbVec3s &u);
+
+    // Nondestructive unary negation - returns a new vector
+    SbVec3s     operator -() const;
+
+    // Component-wise binary scalar multiplication and division operators
+    friend INVENTOR_API SbVec3s operator *(const SbVec3s &v, int d);
+    friend INVENTOR_API SbVec3s operator *(const SbVec3s &v, double d);
+    friend INVENTOR_API SbVec3s operator *(int d, const SbVec3s &v)
+        { return v * d; }
+    friend INVENTOR_API SbVec3s operator *(double d, const SbVec3s &v)
+        { return v * d; }
+    friend INVENTOR_API SbVec3s operator /(const SbVec3s &v, int d);
+    friend INVENTOR_API SbVec3s operator /(const SbVec3s &v, double d)
+        { return v * (1.0 / d); }
+
+    // Component-wise binary vector addition and subtraction operators
+    friend INVENTOR_API SbVec3s operator +(const SbVec3s &v1, const SbVec3s &v2);
+
+    friend INVENTOR_API SbVec3s operator -(const SbVec3s &v1, const SbVec3s &v2);
+
+    // Equality comparison operator
+    friend INVENTOR_API int             operator ==(const SbVec3s &v1, const SbVec3s &v2);
+    friend INVENTOR_API int             operator !=(const SbVec3s &v1, const SbVec3s &v2)
+        { return !(v1 == v2); }
+
+  protected:
+    short       vec[3];         // Storage for vector components
+};
+
+//////////////////////////////////////////////////////////////////////////////
+//
 //  Class: SbVec4f
 //
 //  4D vector used to represet rational points or directions. Each component of
@@ -503,7 +588,7 @@
 
 // C-api: end
 
-class SbVec4f {
+class INVENTOR_API SbVec4f {
   public:
 
     // Default constructor
@@ -590,21 +675,21 @@
     SbVec4f	operator -() const;
 
     // Component-wise binary scalar multiplication and division operators
-    friend SbVec4f	operator *(const SbVec4f &v, float d);
-    friend SbVec4f	operator *(float d, const SbVec4f &v)
+    friend INVENTOR_API SbVec4f	operator *(const SbVec4f &v, float d);
+    friend INVENTOR_API SbVec4f	operator *(float d, const SbVec4f &v)
 	{ return v * d; }
-    friend SbVec4f	operator /(const SbVec4f &v, float d)
-	{ return v * (1.0 / d); }
+    friend INVENTOR_API SbVec4f	operator /(const SbVec4f &v, float d)
+	{ return v * (1.0f / d); }
 
     // Component-wise binary vector addition and subtraction operators
-    friend SbVec4f	operator +(const SbVec4f &v1, const SbVec4f &v2);
+    friend INVENTOR_API SbVec4f	operator +(const SbVec4f &v1, const SbVec4f &v2);
 // C-api.h: #define SbV4fAdd(_dest, _src1, _src2)
 // C-api.h:     (((_dest).vec[0] = (_src1).vec[0] + (_src2).vec[0]),
 // C-api.h:      ((_dest).vec[1] = (_src1).vec[1] + (_src2).vec[1]),
 // C-api.h:      ((_dest).vec[2] = (_src1).vec[2] + (_src2).vec[2]))
 // C-api.h:      ((_dest).vec[3] = (_src1).vec[3] + (_src2).vec[3]))
 
-    friend SbVec4f	operator -(const SbVec4f &v1, const SbVec4f &v2);
+    friend INVENTOR_API SbVec4f	operator -(const SbVec4f &v1, const SbVec4f &v2);
 // C-api.h: #define SbV4fSub(_dest, _src1, _src2)
 // C-api.h:     (((_dest).vec[0] = (_src1).vec[0] - (_src2).vec[0]),
 // C-api.h:      ((_dest).vec[1] = (_src1).vec[1] - (_src2).vec[1]),
@@ -613,8 +698,8 @@
 
 // C-api: begin
     // Equality comparison operator
-    friend int		operator ==(const SbVec4f &v1, const SbVec4f &v2);
-    friend int		operator !=(const SbVec4f &v1, const SbVec4f &v2)
+    friend INVENTOR_API int		operator ==(const SbVec4f &v1, const SbVec4f &v2);
+    friend INVENTOR_API int		operator !=(const SbVec4f &v1, const SbVec4f &v2)
 	{ return !(v1 == v2); }
 
     // Equality comparison within given tolerance - the square of the
@@ -641,7 +726,7 @@
 
 // C-api: end
 
-class SbRotation {
+class INVENTOR_API SbRotation {
   public:
 
     // Default constructor
@@ -733,8 +818,8 @@
 
 // C-api: begin
     // Equality comparison operator
-    friend int	operator ==(const SbRotation &q1, const SbRotation &q2);
-    friend int	operator !=(const SbRotation &q1, const SbRotation &q2)
+    friend INVENTOR_API int	operator ==(const SbRotation &q1, const SbRotation &q2);
+    friend INVENTOR_API int	operator !=(const SbRotation &q1, const SbRotation &q2)
 	{ return !(q1 == q2); }
 
     // Equality comparison within given tolerance - the square of the
@@ -742,7 +827,7 @@
     SbBool		equals(const SbRotation &r, float tolerance) const;
 
     // Multiplication of two rotations; results in product of rotations
-    friend SbRotation	operator *(const SbRotation &q1, const SbRotation &q2);
+    friend INVENTOR_API SbRotation	operator *(const SbRotation &q1, const SbRotation &q2);
 
     // Puts the given vector through this rotation
     // (Multiplies the given vector by the matrix of this rotation),.
@@ -787,7 +872,7 @@
 
 // C-api: end
 
-class SbMatrix {
+class INVENTOR_API SbMatrix {
   public:
 
     // Default constructor
@@ -979,11 +1064,11 @@
     SbMatrix &	operator *=(const SbMatrix &m)	{ return multRight(m); }
 
     // Binary multiplication of matrices
-    friend SbMatrix	operator *(const SbMatrix &m1, const SbMatrix &m2);
+    friend INVENTOR_API SbMatrix	operator *(const SbMatrix &m1, const SbMatrix &m2);
 
     // Equality comparison operator
-    friend int		operator ==(const SbMatrix &m1, const SbMatrix &m2);
-    friend int		operator !=(const SbMatrix &m1, const SbMatrix &m2)
+    friend INVENTOR_API int		operator ==(const SbMatrix &m1, const SbMatrix &m2);
+    friend INVENTOR_API int		operator !=(const SbMatrix &m1, const SbMatrix &m2)
 	{ return !(m1 == m2); }
 
     // Equality comparison within given tolerance, for each component
@@ -1010,7 +1095,7 @@
 
 // C-api: prefix=SbViewVol
 
-class SbViewVolume {
+class INVENTOR_API SbViewVolume {
   public:
 
     // Default constructor
@@ -1108,7 +1193,7 @@
     // The parameters are the same as for the GL ortho() routine.
     void		ortho(float left,   float right,
 			      float bottom, float top,
-			      float near,   float far);
+			      float nearVal,   float farVal);
 
     // Sets up a perspective view volume with the given field of view
     // and aspect ratio. The parameters are the same as for the GL
@@ -1116,7 +1201,7 @@
     // specified in radians.
     // C-api: name=persp
     void		perspective(float fovy, float aspect,
-				    float near, float far);
+				    float nearVal, float farVal);
 
     // Rotate the camera view direction.  Note that this accomplishes
     // the reverse of doing a GL rotate() command after defining a
@@ -1141,7 +1226,7 @@
     // returned view volume will never be larger than the current volume,
     // however.  Near and far are given in terms of zVector(): this
     // means that near > far must hold.
-    SbViewVolume	zNarrow(float near, float far) const;
+    SbViewVolume	zNarrow(float nearVal, float farVal) const;
 
     // Scales width and height of view volume by given factor
     void		scale(float factor);
@@ -1229,7 +1314,7 @@
 
 // C-api: public=pos, dir
 
-class SbLine {
+class INVENTOR_API SbLine {
   public:
 // C-api: end
     SbLine()	{}
@@ -1304,7 +1389,7 @@
 // C-api: prefix=SbPln
 // C-api: public=normalVec, distance
 
-class SbPlane {
+class INVENTOR_API SbPlane {
   public:
 // C-api: end
     SbPlane()	{}
@@ -1346,8 +1431,8 @@
 
 // C-api: begin
     // Equality/inequality comparison operators
-    friend int		operator ==(const SbPlane &p1, const SbPlane &p2);
-    friend int		operator !=(const SbPlane &p1, const SbPlane &p2)
+    friend INVENTOR_API int		operator ==(const SbPlane &p1, const SbPlane &p2);
+    friend INVENTOR_API int		operator !=(const SbPlane &p1, const SbPlane &p2)
 	{ return !(p1 == p2); }
 
   private:
@@ -1372,7 +1457,7 @@
 // C-api: prefix=SbCyl
 // C-api: public=axis, radius
 
-class SbCylinder {
+class INVENTOR_API SbCylinder {
   public:
 // C-api: end
     // Constructor
@@ -1419,7 +1504,7 @@
 // C-api: prefix=SbSph
 // C-api: public=center, radius
 
-class SbSphere {
+class INVENTOR_API SbSphere {
   public:
 
 // C-api: end
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SbPList.h inventor/lib/database/include/Inventor/SbPList.h
--- /tmp/inventor/lib/database/include/Inventor/SbPList.h	2001-09-25 02:45:33.000000000 +0200
+++ inventor/lib/database/include/Inventor/SbPList.h	2006-07-17 15:46:47.000000000 +0200
@@ -60,6 +60,7 @@
 #ifndef _SB_PLIST_
 #define _SB_PLIST_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbBasic.h>
 #include <Inventor/SbLinear.h>
 
@@ -76,7 +77,7 @@
 #  pragma set woff 1375
 #endif
 
-class SbPList {
+class INVENTOR_API SbPList {
   public:
 
     // Constructor
@@ -175,7 +176,7 @@
 
 // C-api: end
 
-SoINTERNAL class SbIntList : public SbPList {
+SoINTERNAL class INVENTOR_API SbIntList : public SbPList {
 
   public:
     // Constructors, similar to SbPList
@@ -216,7 +217,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoINTERNAL class SbVec3fList : public SbPList {
+SoINTERNAL class INVENTOR_API SbVec3fList : public SbPList {
 
   public:
      SbVec3fList() {}
@@ -245,7 +246,7 @@
 
 class SbString;
 
-SoEXTENDER class SbStringList : public SbPList {
+SoEXTENDER class INVENTOR_API SbStringList : public SbPList {
   public:
     void	append(SbString *string)
 	{ ((SbPList *) this)->append((void *) string); }
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SbString.h inventor/lib/database/include/Inventor/SbString.h
--- /tmp/inventor/lib/database/include/Inventor/SbString.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/SbString.h	2006-08-07 17:40:36.000000000 +0200
@@ -58,6 +58,7 @@
 #ifndef _SB_STRING_
 #define _SB_STRING_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbBasic.h>
 
 #include <string.h>
@@ -72,7 +73,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SbStr
-class SbString {
+class INVENTOR_API SbString {
   public:
 
     // Default constructor
@@ -147,30 +148,39 @@
 
     // Equality operator for SbString/char* and SbString/SbString comparison
     // C-api: name=IsEqStr
-    friend int		operator ==(const SbString &str, const char *s);
+    friend INVENTOR_API int		operator ==(const SbString &str, const char *s);
 // C-api: end
 
-    friend int		operator ==(const char *s, const SbString &str)
+    friend INVENTOR_API int		operator ==(const char *s, const SbString &str)
 	{ return (str == s); }
 
 // C-api: begin
 
-    friend int		operator ==(const SbString &str1, const SbString &str2)
+    friend INVENTOR_API int		operator ==(const SbString &str1, const SbString &str2)
 	{ return (str1 == str2.string); }
 
     // Inequality operator for SbString/char* and SbString/SbString comparison
     // C-api: name=IsNEqStr
-    friend int		operator !=(const SbString &str, const char *s);
+    friend INVENTOR_API int		operator !=(const SbString &str, const char *s);
 // C-api: end
 
-    friend int		operator !=(const char *s, const SbString &str)
+    friend INVENTOR_API int		operator !=(const char *s, const SbString &str)
 	{ return (str != s); }
 
 // C-api: begin
-    friend int		operator !=(const SbString &str1,
+    friend INVENTOR_API int		operator !=(const SbString &str1,
 				    const SbString &str2)
 	{ return (str1 != str2.string); }
 
+    // Lexically less than operator for SbString/char* and SbString/SbString comparison
+    friend INVENTOR_API int		operator <(const SbString &str, const char *s);
+
+    friend INVENTOR_API int		operator <(const char *s, const SbString &str)
+	{ return (str < s); }
+    
+    friend INVENTOR_API int		operator <(const SbString &str1, const SbString &str2)
+	{ return (str1 < str2.string); }
+
   SoINTERNAL public:
 
     static uint32_t	hash(const char *s);    // Hash function
@@ -196,7 +206,7 @@
 
 // C-api: end
 
-SoINTERNAL class SbNameEntry {
+SoINTERNAL class INVENTOR_API SbNameEntry {
 
   public:
     // Returns TRUE if entry's string is empty ("")
@@ -225,7 +235,7 @@
     // Inserts string in table
     static const SbNameEntry *	insert(const char *s);
 
-friend class SbName;
+friend INVENTOR_API class SbName;
 };
 
 //////////////////////////////////////////////////////////////////////////////
@@ -242,7 +252,7 @@
 
 // C-api: begin
 
-class SbName {
+class INVENTOR_API SbName {
   public:
     // Default constructor
     SbName();
@@ -293,31 +303,31 @@
     // Equality operator for SbName/char* and SbName/SbName comparison
     // C-api: name=IsEqStr
     // C-api: keepSbName
-    friend int		operator ==(const SbName &n, const char *s)
+    friend INVENTOR_API int		operator ==(const SbName &n, const char *s)
 	{ return n.entry->isEqual(s); }
 
 // C-api: end
-    friend int		operator ==(const char *s, const SbName &n)
+    friend INVENTOR_API int		operator ==(const char *s, const SbName &n)
 	{ return n.entry->isEqual(s); }
 // C-api: begin
 
     // C-api: keepSbName
-    friend int 		operator ==(const SbName &n1, const SbName &n2)
+    friend INVENTOR_API int 		operator ==(const SbName &n1, const SbName &n2)
 	{ return n1.entry == n2.entry; }
 
     // Inequality operator for SbName/char* and SbName/SbName comparison
     // C-api: name=IsNEqStr
     // C-api: keepSbName
-    friend int		operator !=(const SbName &n, const char *s)
+    friend INVENTOR_API int		operator !=(const SbName &n, const char *s)
 	{ return ! n.entry->isEqual(s); }
 
 // C-api: end
-    friend int		operator !=(const char *s, const SbName &n)
+    friend INVENTOR_API int		operator !=(const char *s, const SbName &n)
 	{ return ! n.entry->isEqual(s); }
 // C-api: begin
 
     // C-api: keepSbName
-    friend int 		operator !=(const SbName &n1, const SbName &n2)
+    friend INVENTOR_API int 		operator !=(const SbName &n1, const SbName &n2)
 	{ return n1.entry != n2.entry; }
 
   private:
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SbTime.h inventor/lib/database/include/Inventor/SbTime.h
--- /tmp/inventor/lib/database/include/Inventor/SbTime.h	2001-06-23 00:06:57.000000000 +0200
+++ inventor/lib/database/include/Inventor/SbTime.h	2006-07-17 15:46:47.000000000 +0200
@@ -1,6 +1,6 @@
 /*
  *
- *  Copyright (C) 2000 Silicon Graphics, Inc.  All Rights Reserved. 
+ *  Copyright (C) 2000 Silicon Graphics, Inc.  All Rights Reserved.
  *
  *  This library is free software; you can redistribute it and/or
  *  modify it under the terms of the GNU Lesser General Public
@@ -18,18 +18,18 @@
  *  otherwise, applies only to this software file.  Patent licenses, if
  *  any, provided herein do not apply to combinations of this program with
  *  other software, or any other product whatsoever.
- * 
+ *
  *  You should have received a copy of the GNU Lesser General Public
  *  License along with this library; if not, write to the Free Software
  *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  *
  *  Contact information: Silicon Graphics, Inc., 1600 Amphitheatre Pkwy,
  *  Mountain View, CA  94043, or:
- * 
- *  http://www.sgi.com 
- * 
- *  For further information regarding this notice, see: 
- * 
+ *
+ *  http://www.sgi.com
+ *
+ *  For further information regarding this notice, see:
+ *
  *  http://oss.sgi.com/projects/GenInfo/NoticeExplan/
  *
  */
@@ -59,7 +59,12 @@
 #ifndef _SB_TIME_
 #define _SB_TIME_
 
+#include <Inventor/system/SbSystem.h>
+#ifdef WIN32
+#include <sys/timeb.h>
+#else
 #include <sys/time.h>
+#endif
 #include <math.h>
 #include <limits.h>
 #include <Inventor/SbBasic.h>
@@ -82,7 +87,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-class SbTime {
+class INVENTOR_API SbTime {
   public:
 
     // Default constructor
@@ -107,7 +112,7 @@
     //		SbTime(secs, 1000 * (msec - 1000 * sec))
     // The constructor was removed because it led to unexpected results --
     // while SbTime(1.0) results in 1 second, SbTime(1) resulted in 1
-    // MILLIsecond).  Its declaration has been kept, as "private", so that 
+    // MILLIsecond).  Its declaration has been kept, as "private", so that
     // existing code using it will get compilation errors; if it was removed
     // completely, an existing use of SbTime(1) would silently cast to
     // SbTime(1.0) resulting in hard-to-find bugs.  This declaration
@@ -140,6 +145,9 @@
 #define INT32_MAX INT_MAX
 #endif // !INT32_MAX
 
+#ifdef WIN32
+#undef max
+#endif
     // Get a time far, far into the future
     static SbTime		max()
 	{ return SbTime(INT32_MAX, 999999); }
@@ -148,9 +156,9 @@
     // C-api: name=setSec
     void		setValue(double sec)
 #ifdef __sgi
-	{ t.tv_sec = time_t(trunc(sec)); 
+	{ t.tv_sec = time_t(trunc(sec));
 #else
-	{ t.tv_sec = time_t(int(sec)); 
+	{ t.tv_sec = time_t(int(sec));
 #endif // __sgi
 	  t.tv_usec = long((sec - t.tv_sec) * 1000000.0); }
 
@@ -167,7 +175,7 @@
     // Set time from milliseconds
     // C-api: name=setMSec
     void		setMsecValue(unsigned long msec)  	// System long
-	{ t.tv_sec = time_t(msec/1000); 
+	{ t.tv_sec = time_t(msec/1000);
 	  t.tv_usec = long(1000 * (msec % 1000)); }
 
     // Get time in seconds as a double
@@ -201,10 +209,10 @@
     SbString			formatDate(const char *fmt = "%A, %D %r") const;
 
     // Addition
-    friend SbTime		operator +(const SbTime &t0, const SbTime &t1);
+    friend INVENTOR_API SbTime		operator +(const SbTime &t0, const SbTime &t1);
 
     // Subtraction
-    friend SbTime		operator -(const SbTime &t0, const SbTime &t1);
+    friend INVENTOR_API SbTime		operator -(const SbTime &t0, const SbTime &t1);
 
     // Destructive addition
     SbTime &			operator +=(const SbTime &tm)
@@ -221,10 +229,10 @@
 	      : SbTime(- t.tv_sec - 1, 1000000 - t.tv_usec); }
 
     // multiplication by scalar
-    friend SbTime		operator *(const SbTime &tm, double s);
+    friend INVENTOR_API SbTime		operator *(const SbTime &tm, double s);
 // C-api: end
 
-    friend SbTime		operator *(double s, const SbTime &tm)
+    friend INVENTOR_API SbTime		operator *(double s, const SbTime &tm)
 	{ return tm * s; }
 
 // C-api: begin
@@ -233,7 +241,7 @@
 	{ *this = *this * s; return *this; }
 
     // division by scalar
-    friend SbTime		operator /(const SbTime &tm, double s);
+    friend INVENTOR_API SbTime		operator /(const SbTime &tm, double s);
 
     // destructive division by scalar
     SbTime &			operator /=(double s)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SbViewportRegion.h inventor/lib/database/include/Inventor/SbViewportRegion.h
--- /tmp/inventor/lib/database/include/Inventor/SbViewportRegion.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/SbViewportRegion.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,8 @@
 #ifndef  _SB_VIEWPORT_REGION_
 #define  _SB_VIEWPORT_REGION_
 
+#include <Inventor/system/SbSystem.h>
+
 //////////////////////////////////////////////////////////////////////////////
 //
 //  Class: SbViewportRegion
@@ -73,7 +75,7 @@
 #include <Inventor/SbLinear.h>
 
 // C-api: prefix=SbVPReg
-class SbViewportRegion {
+class INVENTOR_API SbViewportRegion {
   public:
     // Default constructor. Sets window size to default 100x100
     SbViewportRegion();
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/sensors/SoAlarmSensor.h inventor/lib/database/include/Inventor/sensors/SoAlarmSensor.h
--- /tmp/inventor/lib/database/include/Inventor/sensors/SoAlarmSensor.h	2000-08-15 14:56:16.000000000 +0200
+++ inventor/lib/database/include/Inventor/sensors/SoAlarmSensor.h	2006-07-17 15:46:47.000000000 +0200
@@ -59,10 +59,11 @@
 #ifndef  _SO_ALARM_SENSOR_
 #define  _SO_ALARM_SENSOR_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/sensors/SoTimerQueueSensor.h>
 
 // C-api: prefix=SoAlarmSens
-class SoAlarmSensor : public SoTimerQueueSensor {
+class INVENTOR_API SoAlarmSensor : public SoTimerQueueSensor {
 
   public:
     // Constructors. The second form takes standard callback function and data
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/sensors/SoDataSensor.h inventor/lib/database/include/Inventor/sensors/SoDataSensor.h
--- /tmp/inventor/lib/database/include/Inventor/sensors/SoDataSensor.h	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/include/Inventor/sensors/SoDataSensor.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 
 // C-api: abstract
 // C-api: prefix=SoDataSens
-class SoDataSensor : public SoDelayQueueSensor {
+class INVENTOR_API SoDataSensor : public SoDelayQueueSensor {
 
   public:
     // Constructors. The second form takes standard callback function and data
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/sensors/SoDelayQueueSensor.h inventor/lib/database/include/Inventor/sensors/SoDelayQueueSensor.h
--- /tmp/inventor/lib/database/include/Inventor/sensors/SoDelayQueueSensor.h	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/include/Inventor/sensors/SoDelayQueueSensor.h	2005-08-01 17:36:15.000000000 +0200
@@ -74,7 +74,7 @@
 #include <Inventor/sensors/SoSensor.h>
 
 // C-api: prefix=SoDelQSens
-class SoDelayQueueSensor : public SoSensor {
+class INVENTOR_API SoDelayQueueSensor : public SoSensor {
 
   public:
     // Constructors. The second form takes standard callback function and data
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/sensors/SoFieldSensor.h inventor/lib/database/include/Inventor/sensors/SoFieldSensor.h
--- /tmp/inventor/lib/database/include/Inventor/sensors/SoFieldSensor.h	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/include/Inventor/sensors/SoFieldSensor.h	2005-08-01 17:36:15.000000000 +0200
@@ -64,7 +64,7 @@
 class SoFieldContainer;
 
 // C-api: prefix=SoFieldSens
-class SoFieldSensor : public SoDataSensor {
+class INVENTOR_API SoFieldSensor : public SoDataSensor {
 
   public:
     // Constructors. The second form takes standard callback function and data
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/sensors/SoIdleSensor.h inventor/lib/database/include/Inventor/sensors/SoIdleSensor.h
--- /tmp/inventor/lib/database/include/Inventor/sensors/SoIdleSensor.h	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/include/Inventor/sensors/SoIdleSensor.h	2005-08-01 17:36:15.000000000 +0200
@@ -62,7 +62,7 @@
 #include <Inventor/sensors/SoDelayQueueSensor.h>
 
 // C-api: prefix=SoIdleSens
-class SoIdleSensor : public SoDelayQueueSensor {
+class INVENTOR_API SoIdleSensor : public SoDelayQueueSensor {
 
   public:
     // Constructors. The second form takes standard callback function and data
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/sensors/SoNodeSensor.h inventor/lib/database/include/Inventor/sensors/SoNodeSensor.h
--- /tmp/inventor/lib/database/include/Inventor/sensors/SoNodeSensor.h	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/include/Inventor/sensors/SoNodeSensor.h	2005-08-01 17:36:15.000000000 +0200
@@ -61,7 +61,7 @@
 #include <Inventor/sensors/SoDataSensor.h>
 
 // C-api: prefix=SoNodeSens
-class SoNodeSensor : public SoDataSensor {
+class INVENTOR_API SoNodeSensor : public SoDataSensor {
 
   public:
     // Constructors. The second form takes standard callback function and data
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/sensors/SoOneShotSensor.h inventor/lib/database/include/Inventor/sensors/SoOneShotSensor.h
--- /tmp/inventor/lib/database/include/Inventor/sensors/SoOneShotSensor.h	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/include/Inventor/sensors/SoOneShotSensor.h	2005-08-01 17:36:15.000000000 +0200
@@ -60,7 +60,7 @@
 #include <Inventor/sensors/SoDelayQueueSensor.h>
 
 // C-api: prefix=SoOneShotSens
-class SoOneShotSensor : public SoDelayQueueSensor {
+class INVENTOR_API SoOneShotSensor : public SoDelayQueueSensor {
 
   public:
     // Constructors. The second form takes standard callback function and data
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/sensors/SoPathSensor.h inventor/lib/database/include/Inventor/sensors/SoPathSensor.h
--- /tmp/inventor/lib/database/include/Inventor/sensors/SoPathSensor.h	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/include/Inventor/sensors/SoPathSensor.h	2005-08-01 17:36:15.000000000 +0200
@@ -62,7 +62,7 @@
 #include <Inventor/sensors/SoDataSensor.h>
 
 // C-api: prefix=SoPathSens
-class SoPathSensor : public SoDataSensor {
+class INVENTOR_API SoPathSensor : public SoDataSensor {
 
   public:
     // Constructors. The second form takes standard callback function and data
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/sensors/SoSensor.h inventor/lib/database/include/Inventor/sensors/SoSensor.h
--- /tmp/inventor/lib/database/include/Inventor/sensors/SoSensor.h	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/include/Inventor/sensors/SoSensor.h	2005-08-01 17:36:15.000000000 +0200
@@ -100,7 +100,7 @@
 //////////////////////////////////////////////////////////////////////////////
 // C-api: prefix=SoSens
 // C-api: abstract
-class SoSensor {
+class INVENTOR_API SoSensor {
 
   public:
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/sensors/SoSensorManager.h inventor/lib/database/include/Inventor/sensors/SoSensorManager.h
--- /tmp/inventor/lib/database/include/Inventor/sensors/SoSensorManager.h	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/include/Inventor/sensors/SoSensorManager.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 class SoTimerSensor;
 class SoAlarmSensor;
 
-SoINTERNAL class SoSensorManager {
+SoINTERNAL class INVENTOR_API SoSensorManager {
   public:
 
     // Constructor, destructor
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/sensors/SoTimerQueueSensor.h inventor/lib/database/include/Inventor/sensors/SoTimerQueueSensor.h
--- /tmp/inventor/lib/database/include/Inventor/sensors/SoTimerQueueSensor.h	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/include/Inventor/sensors/SoTimerQueueSensor.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 #include <Inventor/SbTime.h>
 
 // C-api: prefix=SoTimerQSens
-class SoTimerQueueSensor : public SoSensor {
+class INVENTOR_API SoTimerQueueSensor : public SoSensor {
 
   public:
     // Constructors. The second form takes standard callback function and data
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/sensors/SoTimerSensor.h inventor/lib/database/include/Inventor/sensors/SoTimerSensor.h
--- /tmp/inventor/lib/database/include/Inventor/sensors/SoTimerSensor.h	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/include/Inventor/sensors/SoTimerSensor.h	2005-08-01 17:36:15.000000000 +0200
@@ -70,7 +70,7 @@
 #include <Inventor/sensors/SoTimerQueueSensor.h>
 
 // C-api: prefix=SoTimerSens
-class SoTimerSensor : public SoTimerQueueSensor {
+class INVENTOR_API SoTimerSensor : public SoTimerQueueSensor {
 
   public:
     // Constructors. The second form takes standard callback function and data
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SoDB.h inventor/lib/database/include/Inventor/SoDB.h
--- /tmp/inventor/lib/database/include/Inventor/SoDB.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/SoDB.h	2006-07-17 15:46:47.000000000 +0200
@@ -56,6 +56,7 @@
 #ifndef  _SO_DB_
 #define  _SO_DB_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/sensors/SoSensorManager.h>
 #include <Inventor/SoType.h>
 #include <Inventor/SbPList.h>
@@ -82,7 +83,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-class SoDB {
+class INVENTOR_API SoDB {
 
   public:
     // Initialization routine. Creates global database
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/So.h inventor/lib/database/include/Inventor/So.h
--- /tmp/inventor/lib/database/include/Inventor/So.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/So.h	2007-02-02 16:13:30.000000000 +0100
@@ -65,7 +65,9 @@
 #include <Inventor/SoDB.h>
 #include <Inventor/SoInput.h>
 #include <Inventor/SoLists.h>
+#if !defined(WIN32) && (!defined(__APPLE__) || defined(APPLE_GLX))
 #include <Inventor/SoOffscreenRenderer.h>
+#endif
 #include <Inventor/SoOutput.h>
 #include <Inventor/SoPath.h>
 #include <Inventor/misc/SoBase.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SoInput.h inventor/lib/database/include/Inventor/SoInput.h
--- /tmp/inventor/lib/database/include/Inventor/SoInput.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/SoInput.h	2005-08-01 17:36:15.000000000 +0200
@@ -129,7 +129,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoIn
-class SoInput {
+class INVENTOR_API SoInput {
  public:
 
     // Constructor (default SoInput reads from stdin)
@@ -357,7 +357,7 @@
 
     // Reads string of decimal or hexadecimal digits into string.
     // Returns number of bytes read.
-    int			readDigits(char *string);
+    int			readDigits(char *string, uint32_t maxDigits = 0xffffffff);
     int			readHexDigits(char *string);
 
     // Reads given character from buffer into string. Returns 0 or 1
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SoLists.h inventor/lib/database/include/Inventor/SoLists.h
--- /tmp/inventor/lib/database/include/Inventor/SoLists.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/SoLists.h	2006-07-17 15:46:47.000000000 +0200
@@ -71,6 +71,7 @@
 #ifndef  _SO_LISTS_
 #define  _SO_LISTS_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SbPList.h>
 #include <Inventor/SoType.h>
 
@@ -100,7 +101,7 @@
 #  pragma set woff 1375
 #endif
 
-class SoBaseList : public SbPList {
+class INVENTOR_API SoBaseList : public SbPList {
   public:
     SoBaseList();
     // C-api: name=createSize
@@ -145,7 +146,7 @@
     SbBool		addRefs;
 };
 
-class SoNodeList : public SoBaseList {
+class INVENTOR_API SoNodeList : public SoBaseList {
   public:
     SoNodeList()			: SoBaseList()	{}
     // C-api: name=createSize
@@ -165,7 +166,7 @@
 	{ return ( (SoNode *) ( (*(const SoBaseList *) this) [i] ) ); }
 };
 
-class SoPathList : public SoBaseList {
+class INVENTOR_API SoPathList : public SoBaseList {
   public:
     SoPathList()			: SoBaseList()	{}
     // C-api: name=createSize
@@ -200,7 +201,7 @@
     static int		comparePaths(const void *p1Ptr, const void *p2Ptr);
 };
 
-class SoEngineList : public SoBaseList {
+class INVENTOR_API SoEngineList : public SoBaseList {
   public:
     SoEngineList()			: SoBaseList()	{}
     // C-api: name=createSize
@@ -220,7 +221,7 @@
 	{ return ( (SoEngine *) ( (*(const SoBaseList *) this) [i] ) ); }
 };
 
-class SoTypeList : public SbPList {
+class INVENTOR_API SoTypeList : public SbPList {
   public:
     SoTypeList()			: SbPList()	{}
     // C-api: name=createSize
@@ -247,7 +248,7 @@
 };
 
 // C-api: prefix=SoDtlList
-class SoDetailList : public SbPList {
+class INVENTOR_API SoDetailList : public SbPList {
   public:
     SoDetailList()			: SbPList()	{}
     // C-api: name=createSize
@@ -285,7 +286,7 @@
 };
 
 // C-api: prefix=SoPickPtList
-class SoPickedPointList : public SbPList {
+class INVENTOR_API SoPickedPointList : public SbPList {
   public:
     SoPickedPointList()			: SbPList()	{}
     // C-api: name=createSize
@@ -315,7 +316,7 @@
     void		set(int i, SoPickedPoint *pickedPoint);
 };
 
-class SoFieldList : public SbPList {
+class INVENTOR_API SoFieldList : public SbPList {
   public:
     SoFieldList()			: SbPList()	{}
     // C-api: name=createSize
@@ -347,7 +348,7 @@
 	{ return (SoField *)SbPList::get(i); }
 };
 
-class SoEngineOutputList : public SbPList {
+class INVENTOR_API SoEngineOutputList : public SbPList {
   public:
     SoEngineOutputList()			: SbPList()	{}
     // C-api: name=createSize
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SoOffscreenRenderer.h inventor/lib/database/include/Inventor/SoOffscreenRenderer.h
--- /tmp/inventor/lib/database/include/Inventor/SoOffscreenRenderer.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/SoOffscreenRenderer.h	2007-01-30 10:37:13.000000000 +0100
@@ -1,6 +1,6 @@
 /*
  *
- *  Copyright (C) 2000 Silicon Graphics, Inc.  All Rights Reserved. 
+ *  Copyright (C) 2000 Silicon Graphics, Inc.  All Rights Reserved.
  *
  *  This library is free software; you can redistribute it and/or
  *  modify it under the terms of the GNU Lesser General Public
@@ -18,18 +18,18 @@
  *  otherwise, applies only to this software file.  Patent licenses, if
  *  any, provided herein do not apply to combinations of this program with
  *  other software, or any other product whatsoever.
- * 
+ *
  *  You should have received a copy of the GNU Lesser General Public
  *  License along with this library; if not, write to the Free Software
  *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  *
  *  Contact information: Silicon Graphics, Inc., 1600 Amphitheatre Pkwy,
  *  Mountain View, CA  94043, or:
- * 
- *  http://www.sgi.com 
- * 
- *  For further information regarding this notice, see: 
- * 
+ *
+ *  http://www.sgi.com
+ *
+ *  For further information regarding this notice, see:
+ *
  *  http://oss.sgi.com/projects/GenInfo/NoticeExplan/
  *
  */
@@ -59,6 +59,33 @@
 #ifndef  _SO_OFFSCREEN_RENDERER_
 #define  _SO_OFFSCREEN_RENDERER_
 
+#if defined(WIN32) || (defined(__APPLE__) && !defined(APPLE_GLX))
+# pragma message("SoOffscreenRenderer not yet ported to the WIN32 and native Mac OS X platform, using stubs!")
+
+class SoOffscreenRenderer {
+   public:
+      enum Components {
+         LUMINANCE= 1,
+         LUMINANCE_TRANSPARENCY= 2,
+         RGB= 3,
+         RGB_TRANSPARENCY= 4
+      };
+
+   public:
+      SoOffscreenRenderer(const SbViewportRegion &viewportRegion) {}
+      ~SoOffscreenRenderer() {}
+
+      void setComponents(Components /*components*/) {}
+      void setViewportRegion(const SbViewportRegion & /*region*/) {}
+      SoGLRenderAction *getGLRenderAction() const { return NULL; }
+      SbBool render(SoNode *scene) { return FALSE; }
+      unsigned char *getBuffer() const { return NULL; }
+};
+
+# pragma deprecated(SoOffscreenRenderer)
+
+#else
+
 #include <stdio.h>
 #include <GL/glx.h>
 #include <Inventor/SbColor.h>
@@ -193,5 +220,7 @@
     static void		putHex( FILE *fp, char val, int &hexPos );
 };
 
+#endif
+
 #endif /* _SO_OFFSCREEN_RENDERER_ */
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SoOutput.h inventor/lib/database/include/Inventor/SoOutput.h
--- /tmp/inventor/lib/database/include/Inventor/SoOutput.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/SoOutput.h	2005-08-01 17:36:15.000000000 +0200
@@ -93,7 +93,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoOut
-class SoOutput {
+class INVENTOR_API SoOutput {
  public:
 
     // Constructor (default SoOutput writes to stdout)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SoPath.h inventor/lib/database/include/Inventor/SoPath.h
--- /tmp/inventor/lib/database/include/Inventor/SoPath.h	2001-09-25 02:45:33.000000000 +0200
+++ inventor/lib/database/include/Inventor/SoPath.h	2006-07-17 15:46:47.000000000 +0200
@@ -57,6 +57,7 @@
 #ifndef  _SO_PATH_
 #define  _SO_PATH_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/misc/SoBase.h>
 #include <Inventor/nodes/SoNode.h>
 #include <Inventor/SoLists.h>
@@ -79,8 +80,9 @@
 
 class SoPathList;
 class SoWriteAction;
+class SoTempPath;
 
-class SoPath : public SoBase {
+class INVENTOR_API SoPath : public SoBase {
 
   public:
 
@@ -167,7 +169,7 @@
 			     int numNodes = 0) const;
 
     // Comparison operator: returns TRUE if all nodes in paths are identical
-    friend int		operator ==(const SoPath &p1, const SoPath &p2);
+    friend INVENTOR_API int		operator ==(const SoPath &p1, const SoPath &p2);
 
     // Returns type identifier for path instance
     virtual SoType	getTypeId() const;
@@ -254,7 +256,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-SoEXTENDER class SoFullPath : public SoPath {
+SoEXTENDER class INVENTOR_API SoFullPath : public SoPath {
 
   public:
     //
@@ -297,7 +299,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 
-class SoLightPath  {
+class INVENTOR_API SoLightPath  {
 
   SoINTERNAL public:
 
@@ -340,7 +342,7 @@
     
     // fills in nodes for a TempPath that is represented by this 
     // SoLightPath.  Called by SoAction::getCurPath(); 
-    void 		makeTempPath(SoTempPath *) const;
+    void 		makeTempPath(SoTempPath *tmpPath) const;
 
   private:
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SoPickedPoint.h inventor/lib/database/include/Inventor/SoPickedPoint.h
--- /tmp/inventor/lib/database/include/Inventor/SoPickedPoint.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/SoPickedPoint.h	2005-08-01 17:36:15.000000000 +0200
@@ -77,7 +77,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoPickPt
-class SoPickedPoint {
+class INVENTOR_API SoPickedPoint {
 
   public:
     // Copy constructor
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SoPrimitiveVertex.h inventor/lib/database/include/Inventor/SoPrimitiveVertex.h
--- /tmp/inventor/lib/database/include/Inventor/SoPrimitiveVertex.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/SoPrimitiveVertex.h	2005-08-01 17:36:15.000000000 +0200
@@ -82,7 +82,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoPrimVtx
-class SoPrimitiveVertex {
+class INVENTOR_API SoPrimitiveVertex {
 
   public:
     // Constructors
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/Inventor/SoType.h inventor/lib/database/include/Inventor/SoType.h
--- /tmp/inventor/lib/database/include/Inventor/SoType.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/Inventor/SoType.h	2006-07-17 15:46:47.000000000 +0200
@@ -65,6 +65,7 @@
 #ifndef  _SO_TYPE_
 #define  _SO_TYPE_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/misc/SoBasic.h>
 #include <Inventor/SbString.h>
 #include <Inventor/SbDict.h>
@@ -75,7 +76,7 @@
 //
 // SoType has no virtual functions to keep it small...
 //
-class SoType {
+class INVENTOR_API SoType {
 #ifdef __DELTA
 #  pragma __nondynamic_class
 #endif
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/machine.h inventor/lib/database/include/machine.h
--- /tmp/inventor/lib/database/include/machine.h	2003-07-12 00:40:53.000000000 +0200
+++ inventor/lib/database/include/machine.h	2006-05-08 11:22:01.000000000 +0200
@@ -140,26 +140,48 @@
 
 
 /*
+ * Win32 machine dependent setup
+ */
+
+#if defined(WIN32)
+#if !defined(__i386__)
+#define __i386__ 1
+#endif /* not __i386__ */
+
+#define MACHINE_WORD_FORMAT	DGL_LITTLE_ENDIAN
+#define MACHINE_FLOAT_FORMAT	DGL_NON_IEEE
+
+#endif /* WIN32 */
+
+
+/*
  * Linux i386/ia64 machine dependent setup
  */
 
-#if __i386__ || __ia64__
+#if defined(__linux__) && (__i386__ || __ia64__)
 
 #define MACHINE_WORD_FORMAT	DGL_LITTLE_ENDIAN
 #define MACHINE_FLOAT_FORMAT	DGL_NON_IEEE
 
-#endif /* __i386__ || __ia64__ */
+#endif /* __linux__ && (__i386__ || __ia64__) */
 
 
 /*
  * Apple Darwin (Mac OS X) machine dependent setup
  */
 
-#ifdef __APPLE__
+#if defined(__APPLE__)
+#if defined(__i386__)
+
+#define MACHINE_WORD_FORMAT	DGL_LITTLE_ENDIAN
+#define MACHINE_FLOAT_FORMAT	DGL_NON_IEEE
+
+#else /* __APPLE__ and not __i386__ */
 
 #define MACHINE_WORD_FORMAT	DGL_BIG_ENDIAN
 #define MACHINE_FLOAT_FORMAT	DGL_BIG_IEEE
 
+#endif /* __i386__ */
 #endif /* __APPLE__ */
 
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/include/SoDebug.h inventor/lib/database/include/SoDebug.h
--- /tmp/inventor/lib/database/include/SoDebug.h	2000-08-15 14:56:14.000000000 +0200
+++ inventor/lib/database/include/SoDebug.h	2006-09-15 10:55:02.000000000 +0200
@@ -60,6 +60,8 @@
 #ifndef _SO_DEBUG_
 #define _SO_DEBUG_
 
+#include <Inventor/misc/SoBasic.h>
+
 class SoBase;
 class SoNode;
 class SoField;
@@ -76,7 +78,7 @@
 //   IV_DEBUG_CACHELIST : print out info on Separator render caches.
 //
 
-class SoDebug {
+class INVENTOR_API SoDebug {
   public:
     // Returns value of environment variable; faster than getenv()
     // because the environment variables are stored in a dictionary.
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/sb/SbBox.c++ inventor/lib/database/src/sb/SbBox.c++
--- /tmp/inventor/lib/database/src/sb/SbBox.c++	2000-10-29 16:04:17.000000000 +0100
+++ inventor/lib/database/src/sb/SbBox.c++	2005-08-01 17:36:15.000000000 +0200
@@ -66,9 +66,9 @@
 SbVec3f
 SbBox3f::getCenter() const
 {
-    return SbVec3f(0.5 * (min[0] + max[0]),
-		   0.5 * (min[1] + max[1]), 
-		   0.5 * (min[2] + max[2]));
+    return SbVec3f(0.5f * (min[0] + max[0]),
+		   0.5f * (min[1] + max[1]), 
+		   0.5f * (min[2] + max[2]));
 }
 
 //
@@ -405,8 +405,8 @@
 	return point;
     else if (point == getCenter()) {
 	// middle of z side
-	result[0] = (max[0] + min[0])/2.0;
-	result[1] = (max[1] + min[1])/2.0;
+	result[0] = (max[0] + min[0])/2.0f;
+	result[1] = (max[1] + min[1])/2.0f;
 	result[2] = max[2];
     }
     else {
@@ -418,9 +418,9 @@
 	SbVec3f vec = point - getCenter();
 	float sizeX, sizeY, sizeZ;
 	getSize(sizeX, sizeY, sizeZ);
-	float halfX = sizeX/2.0;
-	float halfY = sizeY/2.0;
-	float halfZ = sizeZ/2.0;
+	float halfX = sizeX/2.0f;
+	float halfY = sizeY/2.0f;
+	float halfZ = sizeZ/2.0f;
 	if (halfX > 0.0)
 	    vec[0] /= halfX;
 	if (halfY > 0.0)
@@ -430,10 +430,9 @@
 
 	// Side to snap side that has greatest magnitude in the vector.
 	SbVec3f mag;
-	mag[0] = fabs(vec[0]);
-	mag[1] = fabs(vec[1]);
-	mag[2] = fabs(vec[2]);
-
+	mag[0] = float(fabs(vec[0]));
+	mag[1] = float(fabs(vec[1]));
+	mag[2] = float(fabs(vec[2]));
 	result = mag;
 
 	// Check if beyond corners
@@ -848,8 +847,8 @@
 SbVec2f
 SbBox2f::getCenter() const
 {
-    return SbVec2f(0.5 * (min[0] + max[0]),
-		   0.5 * (min[1] + max[1]));
+    return SbVec2f(0.5f * (min[0] + max[0]),
+		   0.5f * (min[1] + max[1]));
 }
 
 //////////////////////////////////////////////////////////////////////////////
@@ -1043,7 +1042,7 @@
     else if (point == getCenter()) {
 	// middle of x side
 	result[0] = max[0];
-	result[1] = (max[1] + min[1])/2.0;
+	result[1] = (max[1] + min[1])/2.0f;
     }
     else if (min[0] == max[0]) {
 	result[0] = min[0];
@@ -1062,33 +1061,33 @@
 	SbVec2f vec = point - getCenter();
 	float sizeX, sizeY;
 	getSize(sizeX, sizeY);
-	float halfX = sizeX/2.0;
-	float halfY = sizeY/2.0;
+	float halfX = sizeX/2.0f;
+	float halfY = sizeY/2.0f;
 	if (halfX > 0.0)
 	    vec[0] /= halfX;
 	if (halfY > 0.0)
 	    vec[1] /= halfY;
 
 	// Side to snap to has greatest magnitude in the vector.
-	float magX = fabs(vec[0]);
-	float magY = fabs(vec[1]);
+	float magX = float(fabs(vec[0]));
+	float magY = float(fabs(vec[1]));
 
 	if (magX > magY) {
-	    result[0] = (vec[0] > 0) ? 1.0 : -1.0;
-	    if (magY > 1.0)
-		magY = 1.0;
+	    result[0] = (vec[0] > 0) ? 1.0f : -1.0f;
+	    if (magY > 1.0f)
+		magY = 1.0f;
 	    result[1] = (vec[1] > 0) ? magY : -magY;
 	}
 	else if (magY > magX) {
 	    if (magX > 1.0)
 		magX = 1.0;
 	    result[0] = (vec[0] > 0) ? magX : -magX;
-	    result[1] = (vec[1] > 0) ? 1.0 : -1.0;
+	    result[1] = (vec[1] > 0) ? 1.0f : -1.0f;
 	}
 	else {
 	    // must be one of the corners
-	    result[0] = (vec[0] > 0) ? 1.0 : -1.0;
-	    result[1] = (vec[1] > 0) ? 1.0 : -1.0;
+	    result[0] = (vec[0] > 0) ? 1.0f : -1.0f;
+	    result[1] = (vec[1] > 0) ? 1.0f : -1.0f;
 	}
 
 	// scale back the result and move it to the center of the box
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/sb/Sb.c++ inventor/lib/database/src/sb/Sb.c++
--- /tmp/inventor/lib/database/src/sb/Sb.c++	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/src/sb/Sb.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,7 +51,7 @@
  _______________________________________________________________________
  */
 
-
+#include <Inventor/system/SbSystem.h>
 #include "SbBox.c++"
 #include "SbColor.c++"
 #include "SbCylinder.c++"
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/sb/SbCylinder.c++ inventor/lib/database/src/sb/SbCylinder.c++
--- /tmp/inventor/lib/database/src/sb/SbCylinder.c++	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/src/sb/SbCylinder.c++	2005-08-01 17:36:15.000000000 +0200
@@ -149,7 +149,7 @@
     mtxToYAxis.setRotate(rotToYAxis);
 
     // scale to unit space
-    float	scaleFactor = 1.0/radius;
+    float	scaleFactor = 1.0f/radius;
     SbMatrix	toUnitCylSpace;
     toUnitCylSpace.setScale(SbVec3f(scaleFactor, scaleFactor, scaleFactor));
     toUnitCylSpace.multLeft(mtxToYAxis);
@@ -209,28 +209,28 @@
 
     A = dir[0] * dir[0] + dir[2] * dir[2];
 
-    B = 2.0 * (pos[0] * dir[0] + pos[2] * dir[2]);
+    B = 2.0f * (pos[0] * dir[0] + pos[2] * dir[2]);
 
     C = pos[0] * pos[0] + pos[2] * pos[2] - 1;
 
     // discriminant = B^2 - 4AC
-    discr = B*B - 4.0*A*C;
+    discr = B*B - 4.0f*A*C;
 
     // if discriminant is negative, no intersection
     if (discr < 0.0) {
 	doesIntersect = FALSE;
     }
     else {
-	sqroot = sqrtf(discr);
+	sqroot = float(sqrtf(discr));
 
 	// magic to stabilize the answer
 	if (B > 0.0) {
-	    t0 = -(2.0 * C) / (sqroot + B);
-	    t1 = -(sqroot + B) / (2.0 * A);
+	    t0 = -(2.0f * C) / (sqroot + B);
+	    t1 = -(sqroot + B) / (2.0f * A);
 	}
 	else {
-	    t0 = (2.0 * C) / (sqroot - B);
-	    t1 = (sqroot - B) / (2.0 * A);
+	    t0 = (2.0f * C) / (sqroot - B);
+	    t1 = (sqroot - B) / (2.0f * A);
 	}	    
 
 	enter = pos + (dir * t0);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/sb/SbLine.c++ inventor/lib/database/src/sb/SbLine.c++
--- /tmp/inventor/lib/database/src/sb/SbLine.c++	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/src/sb/SbLine.c++	2005-08-01 17:36:15.000000000 +0200
@@ -199,14 +199,14 @@
     // the diagonal distance, there is no intersection
     // diff is the vector from the closest point on the ray to the center
     // dist2 is the square of the distance from the ray to the center
-    // rad2 is the square of 1/2 the diagonal length of the bounding box
+    // radi2 is the square of 1/2 the diagonal length of the bounding box
     //
     float    t = (box.getCenter() - pos).dot(dir);
     SbVec3f  diff(pos + t * dir - box.getCenter());
     float    dist2 = diff.dot(diff);
-    float    rad2 = (max - min).dot(max - min) * .25;
+    float    radi2 = (max - min).dot(max - min) * 0.25f;
 
-    if (dist2 > rad2)
+    if (dist2 > radi2)
 	return FALSE;
 
     // set up the eight coords of the corners of the box
@@ -291,7 +291,7 @@
 	    double	thisFuzz = sqrt(diff.dot(diff)) * tanA;
 
 	    if (thisFuzz > fuzz)
-		fuzz = thisFuzz;
+		fuzz = float(thisFuzz);
 	}
     }
 
@@ -328,7 +328,7 @@
 
     t = diff.dot(getDirection());
     if(t > 0) {
-	d = sqrt(diff.dot(diff) - t*t);
+	d = float(sqrt(diff.dot(diff)) - t*t);
         if (pickAngle < 0.0)
   	    return (d < -pickAngle);
 	return ((d/t) < pickAngle);
@@ -489,7 +489,7 @@
     //     coordinates and figure out if the front was hit.
     //
     if (isInter) {
-	barycentric.setValue(1.0 - (alpha + beta), alpha, beta);
+	barycentric.setValue(1.0f - (alpha + beta), alpha, beta);
 	front = (getDirection().dot(norm) < 0.0);
 	intersection = getPosition() + t * getDirection();
     }
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/sb/SbMatrix.c++ inventor/lib/database/src/sb/SbMatrix.c++
--- /tmp/inventor/lib/database/src/sb/SbMatrix.c++	2000-10-14 12:46:07.000000000 +0200
+++ inventor/lib/database/src/sb/SbMatrix.c++	2005-08-01 17:36:15.000000000 +0200
@@ -654,7 +654,11 @@
 	SWAP(3,2);
 #undef SWAP	
 #endif /* DEBUGGING */
+#ifdef _MSC_VER
+        inverse.setValue((const SbMat &)invmat);
+#else
 	inverse.setValue(invmat);
+#endif
     }
 
     return inverse;
@@ -1312,7 +1316,13 @@
 
 #undef MULT_RIGHT
 
+#ifdef _MSC_VER
+    setValue((const SbMat &)tmp);
+
+    return (*this);
+#else
     return (*this = tmp);
+#endif
 }
 
 //
@@ -1354,8 +1364,13 @@
 
 #undef MULT_LEFT
 
-    return (*this = tmp);
+#ifdef _MSC_VER
+    setValue((const SbMat &)tmp);
 
+    return (*this);
+#else
+    return (*this = tmp);
+#endif
 }
 
 //
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/sb/SbRotation.c++ inventor/lib/database/src/sb/SbRotation.c++
--- /tmp/inventor/lib/database/src/sb/SbRotation.c++	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/src/sb/SbRotation.c++	2005-08-01 17:36:15.000000000 +0200
@@ -121,27 +121,25 @@
 {
     SbMat m;
 
-    m[0][0] = 1 - 2.0 * (quat[1] * quat[1] + quat[2] * quat[2]);
-    m[0][1] =     2.0 * (quat[0] * quat[1] + quat[2] * quat[3]);
-    m[0][2] =     2.0 * (quat[2] * quat[0] - quat[1] * quat[3]);
-    m[0][3] = 0.0;
-
-    m[1][0] =     2.0 * (quat[0] * quat[1] - quat[2] * quat[3]);
-    m[1][1] = 1 - 2.0 * (quat[2] * quat[2] + quat[0] * quat[0]);
-    m[1][2] =     2.0 * (quat[1] * quat[2] + quat[0] * quat[3]);
-    m[1][3] = 0.0;
-
-    m[2][0] =     2.0 * (quat[2] * quat[0] + quat[1] * quat[3]);
-    m[2][1] =     2.0 * (quat[1] * quat[2] - quat[0] * quat[3]);
-    m[2][2] = 1 - 2.0 * (quat[1] * quat[1] + quat[0] * quat[0]);
-    m[2][3] = 0.0;
-
-    m[3][0] = 0.0;
-    m[3][1] = 0.0;
-    m[3][2] = 0.0;
-    m[3][3] = 1.0;
-
-    matrix = m;
+    matrix[0][0] = 1 - 2.0 * (quat[1] * quat[1] + quat[2] * quat[2]);
+    matrix[0][1] =     2.0 * (quat[0] * quat[1] + quat[2] * quat[3]);
+    matrix[0][2] =     2.0 * (quat[2] * quat[0] - quat[1] * quat[3]);
+    matrix[0][3] = 0.0;
+
+    matrix[1][0] =     2.0 * (quat[0] * quat[1] - quat[2] * quat[3]);
+    matrix[1][1] = 1 - 2.0 * (quat[2] * quat[2] + quat[0] * quat[0]);
+    matrix[1][2] =     2.0 * (quat[1] * quat[2] + quat[0] * quat[3]);
+    matrix[1][3] = 0.0;
+
+    matrix[2][0] =     2.0 * (quat[2] * quat[0] + quat[1] * quat[3]);
+    matrix[2][1] =     2.0 * (quat[1] * quat[2] - quat[0] * quat[3]);
+    matrix[2][2] = 1 - 2.0 * (quat[1] * quat[1] + quat[0] * quat[0]);
+    matrix[2][3] = 0.0;
+
+    matrix[3][0] = 0.0;
+    matrix[3][1] = 0.0;
+    matrix[3][2] = 0.0;
+    matrix[3][3] = 1.0;
 }
 
 ////////////////////////////////////////////////////////////////////////
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/sb/SbString.c++ inventor/lib/database/src/sb/SbString.c++
--- /tmp/inventor/lib/database/src/sb/SbString.c++	2005-01-07 14:01:57.000000000 +0100
+++ inventor/lib/database/src/sb/SbString.c++	2005-08-08 15:45:25.000000000 +0200
@@ -309,3 +309,16 @@
 
     return (str.string[0] != s[0] || strcmp(str.string, s));
 }
+
+//
+// Less than operator for SbString/char* and SbString/SbString comparison
+//
+
+int
+operator <(const SbString &str, const char *s)
+{
+    if (s == NULL)
+	return 0;
+
+    return (str.string[0] < s[0] && strcmp(str.string, s) < 0);
+}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/sb/SbTime.c++ inventor/lib/database/src/sb/SbTime.c++
--- /tmp/inventor/lib/database/src/sb/SbTime.c++	2003-07-12 00:40:53.000000000 +0200
+++ inventor/lib/database/src/sb/SbTime.c++	2006-12-13 17:54:17.000000000 +0100
@@ -94,8 +94,15 @@
 {
     SbTime	tm;
 
+#ifdef WIN32
+    struct _timeb timeBuffer;
+    _ftime(&timeBuffer);
+    tm.t.tv_sec = timeBuffer.time;
+    tm.t.tv_usec = timeBuffer.millitm * 1000.0;
+#else
     if (-1 == gettimeofday(&tm.t, NULL))
 	perror("gettimeofday");
+#endif
 
     return tm;
 }
@@ -112,8 +119,12 @@
 //
 ////////////////////////////////////////////////////////////////////////
 {
+#ifdef WIN32
+    (*this) = SbTime::getTimeOfDay();
+#else
     if (-1 == gettimeofday(&t, NULL))
 	perror("gettimeofday");
+#endif
 }
 
 ////////////////////////////////////////////////////////////////////////
@@ -264,7 +275,7 @@
 {
     char buf[200];
 
-#if (_MIPS_SZLONG == 64 || __ia64 || __APPLE__)
+#if (_MIPS_SZLONG == 64 || __ia64 || __APPLE__ || (defined(_MSC_VER) && _MSC_VER >= 1400))
     int  seconds;
     seconds = (int) t.tv_sec;
     strftime(buf, sizeof(buf), fmt, localtime((const time_t *) &seconds));
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/sb/SbVec.c++ inventor/lib/database/src/sb/SbVec.c++
--- /tmp/inventor/lib/database/src/sb/SbVec.c++	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/src/sb/SbVec.c++	2005-09-27 11:00:38.000000000 +0200
@@ -45,6 +45,7 @@
  |   Classes:
  |	SbVec3f
  |	SbVec2s
+ |	SbVec3s		// Extension to SGI OIV 2.1
  |	SbVec2f
  |	SbVec4f
  |
@@ -579,6 +580,213 @@
 
 //////////////////////////////////////////////////////////////////////////////
 //
+// Vec3s class
+//
+//////////////////////////////////////////////////////////////////////////////
+
+//
+// Returns dot (inner) product of vector and another vector
+//
+
+int32_t
+SbVec3s::dot(const SbVec3s &v) const
+{
+    return vec[0] * v.vec[0] + vec[1] * v.vec[1] + vec[2] * v.vec[2];
+}
+
+//
+// Returns 3 individual components
+//
+
+void
+SbVec3s::getValue(short &x, short &y, short &z) const
+{
+    x = vec[0];
+    y = vec[1];
+    z = vec[2];
+}
+
+//
+// Negates each component of vector in place
+//
+
+void
+SbVec3s::negate()
+{
+    vec[0] = -vec[0];
+    vec[1] = -vec[1];
+    vec[2] = -vec[2];
+}
+
+//
+// Sets value of vector from array of 3 components
+//
+
+SbVec3s &
+SbVec3s::setValue(const short v[3])     
+{
+    vec[0] = v[0];
+    vec[1] = v[1];
+    vec[2] = v[2];
+
+    return (*this);
+}
+
+//
+// Sets value of vector from 3 individual components
+//
+
+SbVec3s &
+SbVec3s::setValue(short x, short y, short z)    
+{
+    vec[0] = x;
+    vec[1] = y;
+    vec[2] = z;
+
+    return (*this);
+}
+
+//
+// Component-wise scalar multiplication operator
+//
+// Note: didn't complain about assignment of int to short !
+SbVec3s &
+SbVec3s::operator *=(int d)
+{
+    vec[0] *= d;
+    vec[1] *= d;
+    vec[2] *= d;
+
+    return *this;
+}
+
+SbVec3s &
+SbVec3s::operator *=(double d)
+{
+    vec[0] = short(vec[0] * d);
+    vec[1] = short(vec[1] * d);
+    vec[2] = short(vec[2] * d);
+
+    return *this;
+}
+
+//
+// Component-wise scalar division operator
+//
+
+SbVec3s &
+SbVec3s::operator /=(int d)
+{
+    vec[0] /= d;
+    vec[1] /= d;
+    vec[2] /= d;
+
+    return *this;
+}
+
+//
+// Component-wise vector addition operator
+//
+
+SbVec3s &
+SbVec3s::operator +=(const SbVec3s &u)
+{
+    vec[0] += u.vec[0];
+    vec[1] += u.vec[1];
+    vec[2] += u.vec[2];
+
+    return *this;
+}
+
+//
+// Component-wise vector subtraction operator
+//
+
+SbVec3s &
+SbVec3s::operator -=(const SbVec3s &u)
+{
+    vec[0] -= u.vec[0];
+    vec[1] -= u.vec[1];
+    vec[2] -= u.vec[2];
+
+    return *this;
+}
+
+//
+// Nondestructive unary negation - returns a new vector
+//
+
+SbVec3s
+SbVec3s::operator -() const
+{
+    return SbVec3s(-vec[0], -vec[1], -vec[2]);
+}
+
+
+//
+// Component-wise binary scalar multiplication operator
+//
+
+SbVec3s
+operator *(const SbVec3s &v, int d)
+{
+    return SbVec3s(v.vec[0] * d, v.vec[1] * d, v.vec[2] * d);
+}
+
+SbVec3s
+operator *(const SbVec3s &v, double d)
+{
+    return SbVec3s(short(v.vec[0] * d), short(v.vec[1] * d), short(v.vec[2] * d));
+}
+
+//
+// Component-wise binary scalar division operator
+//
+
+SbVec3s
+operator /(const SbVec3s &v, int d)
+{
+    return SbVec3s(v.vec[0] / d, v.vec[1] / d, v.vec[2] / d);
+}
+
+//
+// Component-wise binary vector addition operator
+//
+
+SbVec3s
+operator +(const SbVec3s &v1, const SbVec3s &v2)
+{
+    return SbVec3s(v1.vec[0] + v2.vec[0],
+                   v1.vec[1] + v2.vec[1],
+                   v1.vec[2] + v2.vec[2]);
+}
+
+//
+// Component-wise binary vector subtraction operator
+//
+
+SbVec3s
+operator -(const SbVec3s &v1, const SbVec3s &v2)
+{
+    return SbVec3s(v1.vec[0] - v2.vec[0],
+                   v1.vec[1] - v2.vec[1],
+                   v1.vec[2] - v2.vec[2]);
+}
+
+//
+// Equality comparison operator
+//
+
+int
+operator ==(const SbVec3s &v1, const SbVec3s &v2)
+{
+    return (v1.vec[0] == v2.vec[0] &&
+            v1.vec[1] == v2.vec[1] &&
+            v1.vec[2] == v2.vec[2]);
+}
+
+//////////////////////////////////////////////////////////////////////////////
+//
 // Vec2f class
 //
 //////////////////////////////////////////////////////////////////////////////
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/sb/SbView.c++ inventor/lib/database/src/sb/SbView.c++
--- /tmp/inventor/lib/database/src/sb/SbView.c++	2000-08-23 03:05:44.000000000 +0200
+++ inventor/lib/database/src/sb/SbView.c++	2005-08-01 17:36:15.000000000 +0200
@@ -171,8 +171,8 @@
     float topPlusBottom = ulfEye[1] + llfEye[1];
 
     const float & farMinusNear = nearToFar;
-    float far = nearDist + nearToFar;
-    float farPlusNear = far + nearDist;
+    float far1 = nearDist + nearToFar;
+    float farPlusNear = far1 + nearDist;
 
     if (type == ORTHOGRAPHIC) {
 	proj[0][0] =   2.0 / rightMinusLeft;
@@ -194,7 +194,7 @@
 	proj[2][2] = - farPlusNear / farMinusNear;
 	proj[2][3] = - 1.0;
 
-	proj[3][2] = - 2.0 * nearDist * far / farMinusNear;
+	proj[3][2] = - 2.0 * nearDist * far1 / farMinusNear;
 	proj[3][3] = 0.0;
     }
 }
@@ -659,21 +659,21 @@
 void
 SbViewVolume::ortho(float left, float right,
 		    float bottom, float top,
-		    float near, float far)
+		    float nearVal, float farVal)
 //
 ////////////////////////////////////////////////////////////////////////
 {
     type = ORTHOGRAPHIC;
     projPoint	= SbVec3f(0.0, 0.0, 0.0);
     projDir	= SbVec3f(0.0, 0.0, -1.0);
-    llfO	= SbVec3f(left,  bottom, -near);
-    lrfO	= SbVec3f(right, bottom, -near);
-    ulfO	= SbVec3f(left,  top,    -near);
+    llfO	= SbVec3f(left,  bottom, -nearVal);
+    lrfO	= SbVec3f(right, bottom, -nearVal);
+    ulfO	= SbVec3f(left,  top,    -nearVal);
     llf		= llfO + projPoint;  // For compatibility
     lrf		= lrfO + projPoint;
     ulf		= ulfO + projPoint;
-    nearDist	= near;
-    nearToFar	= far - near;
+    nearDist	= nearVal;
+    nearToFar	= farVal - nearVal;
 }
 
 ////////////////////////////////////////////////////////////////////////
@@ -688,7 +688,7 @@
 
 void
 SbViewVolume::perspective(float fovy, float aspect,
-			  float near, float far)
+			  float nearVal, float farVal)
 //
 ////////////////////////////////////////////////////////////////////////
 {
@@ -698,9 +698,9 @@
 
     projPoint.setValue(0.0, 0.0, 0.0);
     projDir.setValue(0.0, 0.0, -1.0);
-    llfO[2] = lrfO[2] = ulfO[2] = - near;
+    llfO[2] = lrfO[2] = ulfO[2] = - nearVal;
 
-    ulfO[1] = near * tanfov;
+    ulfO[1] = nearVal * tanfov;
     llfO[1] = lrfO[1] = - ulfO[1];
     ulfO[0] = llfO[0] = aspect * llfO[1];
     lrfO[0] = - llfO[0];
@@ -709,8 +709,8 @@
     lrf		= lrfO + projPoint;
     ulf		= ulfO + projPoint;
 
-    nearDist  = near;
-    nearToFar = far - near;
+    nearDist  = nearVal;
+    nearToFar = farVal - nearVal;
 }
 
 ////////////////////////////////////////////////////////////////////////
@@ -801,7 +801,7 @@
 // Use: public
 
 SbViewVolume
-SbViewVolume::zNarrow(float near, float far) const
+SbViewVolume::zNarrow(float nearVal, float farVal) const
 //
 ////////////////////////////////////////////////////////////////////////
 {
@@ -810,10 +810,10 @@
     SbVec3f		zVec = zVector();
 
     // make sure we aren't expanding the volume
-    if (near > 1.0)
-	near = 1.0;
-    if (far < 0.0)
-	far = 0.0;
+    if (nearVal > 1.0)
+	nearVal = 1.0;
+    if (farVal < 0.0)
+	farVal = 0.0;
 
     narrowed.type	= type;
     narrowed.projPoint	= projPoint;
@@ -821,14 +821,14 @@
 
     // the near-to-far distance can be calculated from the new near
     // and far values
-    narrowed.nearDist	= near;
-    narrowed.nearToFar	= (near - far) * nearToFar;
+    narrowed.nearDist	= nearVal;
+    narrowed.nearToFar	= (nearVal - farVal) * nearToFar;
 
     // the new near plane
     // find the old near plane
     plane = SbPlane(zVec, llfO);
     // offset it
-    plane.offset((near - 1.0) * nearToFar);
+    plane.offset((nearVal - 1.0) * nearToFar);
 
     // intersect various lines with the new near plane to find the new
     // info for the view volume
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/actions/SoAction.c++ inventor/lib/database/src/so/actions/SoAction.c++
--- /tmp/inventor/lib/database/src/so/actions/SoAction.c++	2000-08-23 02:44:02.000000000 +0200
+++ inventor/lib/database/src/so/actions/SoAction.c++	2005-08-01 14:06:19.000000000 +0200
@@ -61,6 +61,7 @@
 #include <Inventor/misc/SoState.h>
 #include <Inventor/nodes/SoNode.h>
 #include <Inventor/actions/SoSubAction.h>
+#include <Inventor/SoCatch.h>
 #include <Inventor/SoPath.h>
 
 //////////////////////////////////////////////////////////////////////////////
@@ -780,6 +781,46 @@
 {
     return *enabledElements;
 }
+
+
+////////////////////////////////////////////////////////////////////////
+//
+// Description:
+//      Does traversal of a graph rooted by a node.
+//
+// Use: protected
+
+void
+SoAction::traverse(SoNode *node)
+//
+////////////////////////////////////////////////////////////////////////
+{
+   // Permit execution in a try/catch blcok or without as described
+   // in SoCatch settings. So exceptions and crashes within calls to 
+   // inventor nodes can be catched and reported by SoError.
+   SO_CATCH_START
+
+   (*traversalMethods)[
+	    SoNode::getActionMethodIndex(node->getTypeId())](this, node);
+
+   SO_CATCH_ELSE(;)
+
+   (*traversalMethods)[
+	    SoNode::getActionMethodIndex(node->getTypeId())](this, node);
+
+   // On crash and enabled exception handling the following will be 
+   // reported to SoError:
+   // "Crash in 
+   //  <node->getTypeId()>
+   //  while
+   //  <applying> 
+   //  <this->getTypeId()->getName()>
+   //  <to it.>"
+   SO_CATCH_END(node->getTypeId(), "applying", getTypeId(), "to it.")
+}
+
+
+
 
 ////////////////////////////////////////////////////////////////////////
 //
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/actions/SoGLRenderAction.c++ inventor/lib/database/src/so/actions/SoGLRenderAction.c++
--- /tmp/inventor/lib/database/src/so/actions/SoGLRenderAction.c++	2001-05-17 22:44:04.000000000 +0200
+++ inventor/lib/database/src/so/actions/SoGLRenderAction.c++	2006-07-12 18:01:38.000000000 +0200
@@ -52,7 +52,6 @@
  */
 
 #include <float.h>
-#include <GL/gl.h>
 #include <Inventor/SoDB.h>
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/actions/SoGetBoundingBoxAction.h>
@@ -63,6 +62,7 @@
 #include <Inventor/elements/SoTextureImageElement.h>
 #include <Inventor/elements/SoViewportRegionElement.h>
 #include <Inventor/elements/SoShapeStyleElement.h>
+#include OPENGL_GL_H
 
 SO_ACTION_SOURCE(SoGLRenderAction);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/bundles/SoMaterialBundle.c++ inventor/lib/database/src/so/bundles/SoMaterialBundle.c++
--- /tmp/inventor/lib/database/src/so/bundles/SoMaterialBundle.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/bundles/SoMaterialBundle.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,7 +51,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/bundles/SoMaterialBundle.h>
 #include <Inventor/elements/SoGLCacheContextElement.h>
 #include <Inventor/elements/SoGLLazyElement.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/bundles/SoTextureCoordinateBundle.c++ inventor/lib/database/src/so/bundles/SoTextureCoordinateBundle.c++
--- /tmp/inventor/lib/database/src/so/bundles/SoTextureCoordinateBundle.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/bundles/SoTextureCoordinateBundle.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,7 +51,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/SbBox.h>
 #include <Inventor/misc/SoState.h>
 #include <Inventor/bundles/SoTextureCoordinateBundle.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLCacheContextElement.c++ inventor/lib/database/src/so/elements/SoGLCacheContextElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLCacheContextElement.c++	2000-12-14 07:20:52.000000000 +0100
+++ inventor/lib/database/src/so/elements/SoGLCacheContextElement.c++	2005-08-01 17:36:15.000000000 +0200
@@ -274,7 +274,8 @@
     // Don't know, figure it out:
 
     SbBool result;
-    if (strncmp((const char *)glGetString(GL_VENDOR), "SGI", 3) == 0) {
+    const char *vendor = (const char *)glGetString(GL_VENDOR);
+    if (strncmp(vendor, "SGI", 3) == 0) {
 	
 	const char *renderer = (const char *)glGetString(GL_RENDERER);
 	// Indy and XL
@@ -297,8 +298,13 @@
 	else
 	    result = TRUE; // Re's are fast, assume all future SGI
 			   // machines will do fast texturing.
-    }
-    else result = FALSE;  // Assume non-SGI machines do texturing slowly
+    } else if (strncmp(vendor, "ATI", 3) == 0) {
+        result = TRUE;
+    } else if (strncmp(vendor, "NVIDIA", 6) == 0) {
+    	result = TRUE;
+    } else if (strncmp(vendor, "3Dlabs", 6) == 0) {
+    	result = TRUE;
+    } else result = FALSE;  // Assume other machines do texturing slowly
 
     mipmapSupportList->append(ctx);
     mipmapSupportList->append(result);
@@ -409,13 +415,8 @@
     // been created).
     context = SoGLCacheContextElement::get(state);
 
-#ifdef GL_EXT_texture_object
-    if (texture_object_extensionID == -1) {
-	texture_object_extensionID =
-	    SoGLCacheContextElement::getExtID("GL_EXT_texture_object");
-    }
-    int texObjSupported = SoGLCacheContextElement::extSupported(state,
-					texture_object_extensionID);
+#ifdef GL_VERSION_1_1
+    int texObjSupported = TRUE;
 
     if (never_use_texture_object == -1) {
 	if (getenv("IV_NO_TEXTURE_OBJECT"))
@@ -436,23 +437,12 @@
 	type = _type;
 
     if (type == TEXTURE_OBJECT) {
-#ifdef GL_EXT_texture_object
-#ifdef GL_VERSION_1_1
 	glGenTextures(1, &startIndex);
-#else
-	glGenTexturesEXT(1, &startIndex);
-#endif
 #ifdef DEBUG
 	if (num != 1)
 	    SoDebugError::post("SoGLDisplayList", "Sorry, can only "
 			       "construct 1 texture object at a time");
 #endif
-#else
-#ifdef DEBUG
-	SoDebugError::post("SoGLDisplayList", "Texture objects not "
-			   "supported, but type not reset!");
-#endif
-#endif
     } else {
 	startIndex = glGenLists(num);
     }
@@ -505,13 +495,7 @@
 ////////////////////////////////////////////////////////////////////////
 {
     if (type == TEXTURE_OBJECT) {
-#ifdef GL_EXT_texture_object
-#ifdef GL_VERSION_1_1
 	glBindTexture(GL_TEXTURE_2D, startIndex+index);
-#else
-	glBindTextureEXT(GL_TEXTURE_2D, startIndex+index);
-#endif
-#endif
     } else {
 	glNewList(startIndex+index, GL_COMPILE_AND_EXECUTE);
     }
@@ -547,13 +531,7 @@
 ////////////////////////////////////////////////////////////////////////
 {
     if (type == TEXTURE_OBJECT) {
-#ifdef GL_EXT_texture_object
-#ifdef GL_VERSION_1_1
 	glBindTexture(GL_TEXTURE_2D, startIndex+index);
-#else
-	glBindTextureEXT(GL_TEXTURE_2D, startIndex+index);
-#endif
-#endif
     } else {
 	glCallList(startIndex+index);
     }
@@ -591,13 +569,7 @@
 ////////////////////////////////////////////////////////////////////////
 {
     if (type == TEXTURE_OBJECT) {
-#ifdef GL_EXT_texture_object
-#ifdef GL_VERSION_1_1
 	glDeleteTextures(1, &startIndex);
-#else
-	glDeleteTexturesEXT(1, &startIndex);
-#endif
-#endif
     } else {
 	glDeleteLists(startIndex, num);
     }
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLClipPlaneElement.c++ inventor/lib/database/src/so/elements/SoGLClipPlaneElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLClipPlaneElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLClipPlaneElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,9 +51,9 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/elements/SoGLClipPlaneElement.h>
 #include <Inventor/misc/SoState.h>
+#include OPENGL_GL_H
 
 // This holds the maximum number of concurrent GL clip planes
 int	SoGLClipPlaneElement::maxGLPlanes = -1;
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLCoordinateElement.c++ inventor/lib/database/src/so/elements/SoGLCoordinateElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLCoordinateElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLCoordinateElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,9 +51,9 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/elements/SoGLCoordinateElement.h>
 #include <Inventor/errors/SoDebugError.h>
+#include OPENGL_GL_H
 
 SO_ELEMENT_SOURCE(SoGLCoordinateElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLDrawStyleElement.c++ inventor/lib/database/src/so/elements/SoGLDrawStyleElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLDrawStyleElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLDrawStyleElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,10 +51,10 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/elements/SoGLDrawStyleElement.h>
 #include <Inventor/misc/SoState.h>
+#include OPENGL_GL_H
 
 SO_ELEMENT_SOURCE(SoGLDrawStyleElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLLazyElement.c++ inventor/lib/database/src/so/elements/SoGLLazyElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLLazyElement.c++	2000-09-03 04:24:56.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLLazyElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,7 +51,6 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/elements/SoGLLazyElement.h>
 #include <Inventor/errors/SoDebugError.h>
@@ -65,6 +64,7 @@
 #include <Inventor/fields/SoMFFloat.h>
 #include <SoDebug.h>
 #include <machine.h>
+#include OPENGL_GL_H
 
 SO_ELEMENT_SOURCE(SoGLLazyElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLLightIdElement.c++ inventor/lib/database/src/so/elements/SoGLLightIdElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLLightIdElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLLightIdElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,8 +51,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/elements/SoGLLightIdElement.h>
+#include OPENGL_GL_H
 
 SO_ELEMENT_SOURCE(SoGLLightIdElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLLinePatternElement.c++ inventor/lib/database/src/so/elements/SoGLLinePatternElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLLinePatternElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLLinePatternElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,10 +51,10 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/elements/SoGLLinePatternElement.h>
 #include <Inventor/misc/SoState.h>
+#include OPENGL_GL_H
 
 SO_ELEMENT_SOURCE(SoGLLinePatternElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLLineWidthElement.c++ inventor/lib/database/src/so/elements/SoGLLineWidthElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLLineWidthElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLLineWidthElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,11 +51,11 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/elements/SoGLLineWidthElement.h>
 #include <Inventor/elements/SoViewportRegionElement.h>
 #include <Inventor/misc/SoState.h>
+#include OPENGL_GL_H
 
 SO_ELEMENT_SOURCE(SoGLLineWidthElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLModelMatrixElement.c++ inventor/lib/database/src/so/elements/SoGLModelMatrixElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLModelMatrixElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLModelMatrixElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,11 +51,11 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/elements/SoGLModelMatrixElement.h>
 #include <Inventor/elements/SoGLViewingMatrixElement.h>
 #include <Inventor/errors/SoDebugError.h>
-#include <math.h>
+#include OPENGL_GL_H
+#include <math.h>
 
 SO_ELEMENT_SOURCE(SoGLModelMatrixElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLNormalElement.c++ inventor/lib/database/src/so/elements/SoGLNormalElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLNormalElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLNormalElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,9 +51,9 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/elements/SoGLNormalElement.h>
 #include <Inventor/errors/SoDebugError.h>
+#include OPENGL_GL_H
 
 SO_ELEMENT_SOURCE(SoGLNormalElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLPointSizeElement.c++ inventor/lib/database/src/so/elements/SoGLPointSizeElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLPointSizeElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLPointSizeElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,11 +51,11 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/elements/SoGLPointSizeElement.h>
 #include <Inventor/elements/SoViewportRegionElement.h>
 #include <Inventor/misc/SoState.h>
+#include OPENGL_GL_H
 
 SO_ELEMENT_SOURCE(SoGLPointSizeElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLProjectionMatrixElement.c++ inventor/lib/database/src/so/elements/SoGLProjectionMatrixElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLProjectionMatrixElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLProjectionMatrixElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,8 +51,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/elements/SoGLProjectionMatrixElement.h>
+#include OPENGL_GL_H
 
 SO_ELEMENT_SOURCE(SoGLProjectionMatrixElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLShapeHintsElement.c++ inventor/lib/database/src/so/elements/SoGLShapeHintsElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLShapeHintsElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLShapeHintsElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,11 +51,11 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/elements/SoGLShapeHintsElement.h>
 #include <Inventor/misc/SoState.h>
 #include <SoDebug.h>
+#include OPENGL_GL_H
 
 SO_ELEMENT_SOURCE(SoGLShapeHintsElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLTextureCoordinateElement.c++ inventor/lib/database/src/so/elements/SoGLTextureCoordinateElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLTextureCoordinateElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLTextureCoordinateElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -52,9 +52,9 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/elements/SoGLTextureCoordinateElement.h>
 #include <Inventor/errors/SoDebugError.h>
+#include OPENGL_GL_H
 
 SO_ELEMENT_SOURCE(SoGLTextureCoordinateElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLTextureEnabledElement.c++ inventor/lib/database/src/so/elements/SoGLTextureEnabledElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLTextureEnabledElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLTextureEnabledElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,11 +51,11 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/elements/SoGLTextureEnabledElement.h>
 #include <Inventor/elements/SoShapeStyleElement.h>
 #include <Inventor/misc/SoState.h>
+#include OPENGL_GL_H
 
 SO_ELEMENT_SOURCE(SoGLTextureEnabledElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLTextureImageElement.c++ inventor/lib/database/src/so/elements/SoGLTextureImageElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLTextureImageElement.c++	2001-05-30 03:48:20.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLTextureImageElement.c++	2006-07-13 14:42:16.000000000 +0200
@@ -51,16 +51,18 @@
  _______________________________________________________________________
  */
 
-#include <GL/glu.h>
-#include <GL/gl.h>
 #include <Inventor/elements/SoCacheElement.h>
 #include <Inventor/elements/SoGLCacheContextElement.h>
 #include <Inventor/elements/SoGLTextureImageElement.h>
 #include <Inventor/elements/SoGLTextureEnabledElement.h>
 #include <Inventor/errors/SoDebugError.h>
 #include <Inventor/misc/SoState.h>
+#include OPENGL_GLU_H
+#include OPENGL_GL_H
 
-#ifdef __sgi
+#ifdef WIN32
+#include <malloc.h>
+#else
 #include <alloca.h>
 #endif
 #include <float.h>
@@ -73,14 +75,14 @@
     GL_RGBA
 };
 
-// And preferred formats for internal storage, if GL_EXT_texture is
+// And preferred formats for internal storage, if OpenGL 1.1 is
 // supported:
-#ifdef GL_EXT_texture
+#ifdef GL_VERSION_1_1
 static GLint internalFormatsLow[] = {
-    GL_LUMINANCE8_EXT,
-    GL_LUMINANCE8_ALPHA8_EXT,
-    GL_RGB4_EXT,
-    GL_RGBA4_EXT
+    GL_LUMINANCE8,
+    GL_LUMINANCE8_ALPHA8,
+    GL_RGB4,
+    GL_RGBA4
 };
 static GLint internalFormatsHigh[] = {
     GL_LUMINANCE,
@@ -381,21 +383,14 @@
     // Format in memory
     int format = formats[numComponents-1];
     
-    // Internal format is just numComponents unless GL_EXT_texture is
+    // Internal format is just numComponents unless OpenGL 1.1 is
     // supported:
     int internalFormat = numComponents;
-#ifdef GL_EXT_texture
-    static int textureExtInt = -1;  // for fast lookup of extension support
-    if (textureExtInt == -1) {
-	textureExtInt =
-	    SoGLCacheContextElement::getExtID("GL_EXT_texture");
-    }
-    if (SoGLCacheContextElement::extSupported(state, textureExtInt)) {
-	if (quality >= 0.8)
-	    internalFormat = internalFormatsHigh[numComponents-1];
-	else
-	    internalFormat = internalFormatsLow[numComponents-1];	
-    }
+#ifdef GL_VERSION_1_1
+    if (quality >= 0.8)
+	internalFormat = internalFormatsHigh[numComponents-1];
+    else
+	internalFormat = internalFormatsLow[numComponents-1];	
 #endif
 
     SbBool buildList = !SoCacheElement::anyOpen(state);
@@ -407,13 +402,9 @@
 
     // If we aren't creating a texture object, then we need to 
     // unbind the current texture object so we don't overwrite it's state.
-#ifdef GL_EXT_texture_object
-    if (!buildList)
 #ifdef GL_VERSION_1_1
+    if (!buildList)
 	glBindTexture(GL_TEXTURE_2D, 0);
-#else
-	glBindTextureEXT(GL_TEXTURE_2D, 0);
-#endif
 #endif
 
     // These need to go inside the display list or texture object
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLTextureMatrixElement.c++ inventor/lib/database/src/so/elements/SoGLTextureMatrixElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLTextureMatrixElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLTextureMatrixElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,8 +51,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/elements/SoGLTextureMatrixElement.h>
+#include OPENGL_GL_H
 
 SO_ELEMENT_SOURCE(SoGLTextureMatrixElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLUpdateAreaElement.c++ inventor/lib/database/src/so/elements/SoGLUpdateAreaElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLUpdateAreaElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLUpdateAreaElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,9 +51,9 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/elements/SoViewportRegionElement.h>
 #include <Inventor/elements/SoGLUpdateAreaElement.h>
+#include OPENGL_GL_H
 
 SO_ELEMENT_SOURCE(SoGLUpdateAreaElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLViewingMatrixElement.c++ inventor/lib/database/src/so/elements/SoGLViewingMatrixElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLViewingMatrixElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLViewingMatrixElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,9 +51,9 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/elements/SoGLViewingMatrixElement.h>
 #include <Inventor/elements/SoModelMatrixElement.h>
+#include OPENGL_GL_H
 
 SO_ELEMENT_SOURCE(SoGLViewingMatrixElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoGLViewportRegionElement.c++ inventor/lib/database/src/so/elements/SoGLViewportRegionElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoGLViewportRegionElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoGLViewportRegionElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -51,8 +51,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
 #include <Inventor/elements/SoGLViewportRegionElement.h>
+#include OPENGL_GL_H
 
 SO_ELEMENT_SOURCE(SoGLViewportRegionElement);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/elements/SoOverrideElement.c++ inventor/lib/database/src/so/elements/SoOverrideElement.c++
--- /tmp/inventor/lib/database/src/so/elements/SoOverrideElement.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/elements/SoOverrideElement.c++	2005-08-01 19:25:42.000000000 +0200
@@ -231,6 +231,7 @@
     pFlag(fp, "SHININESS", SHININESS);
     pFlag(fp, "SPECULAR_COLOR", SPECULAR_COLOR);
     pFlag(fp, "TRANSPARENCY", TRANSPARENCY);
+    pFlag(fp, "POLYGON_OFFSET", POLYGON_OFFSET);
     putc('\n', fp);
 }
 #else  /* DEBUG */
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/engines/SoCalcParse.y inventor/lib/database/src/so/engines/SoCalcParse.y
--- /tmp/inventor/lib/database/src/so/engines/SoCalcParse.y	2003-07-12 00:40:53.000000000 +0200
+++ inventor/lib/database/src/so/engines/SoCalcParse.y	2005-08-01 17:36:15.000000000 +0200
@@ -20,7 +20,10 @@
 #include <Inventor/errors/SoDebugError.h>
 #include "SoCalcExpr.h"
 #include <stdio.h>
-#ifdef __APPLE__
+#ifdef WIN32
+#include <float.h>
+#define drand48() (((double)rand())/double(RAND_MAX))
+#elif defined(__APPLE__)
 #include <float.h>
 #include <limits.h>
 #else
@@ -28,7 +31,9 @@
 #endif
 #include <math.h>
 #include <ctype.h>
+#ifndef WIN32
 #include <strings.h>
+#endif
 #include <stdlib.h>
 
 void yyerror(const char *);
@@ -43,7 +48,7 @@
     float	val;
 } Constants[] = {
     { "MAXFLOAT",	MAXFLOAT },
-#ifdef __APPLE__
+#if defined(__APPLE__) || defined(WIN32)
     { "MINFLOAT",	FLT_MIN },
 #else
     { "MINFLOAT",	MINFLOAT },
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/engines/SoCalcParse_yacc.cpp inventor/lib/database/src/so/engines/SoCalcParse_yacc.cpp
--- /tmp/inventor/lib/database/src/so/engines/SoCalcParse_yacc.cpp	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/database/src/so/engines/SoCalcParse_yacc.cpp	2006-09-14 11:58:09.000000000 +0200
@@ -0,0 +1,952 @@
+#ifndef lint
+static char yysccsid[] = "@(#)yaccpar   1.9 (Berkeley) 02/21/93";
+#endif
+#define YYBYACC 1
+#define YYMAJOR 1
+#define YYMINOR 9
+#define yyclearin (yychar=(-1))
+#define yyerrok (yyerrflag=0)
+#define YYRECOVERING (yyerrflag!=0)
+#define YYPREFIX "yy"
+#line 19 "lib\database\src\so\engines\SoCalcParse.y"
+#include <Inventor/misc/SoBasic.h>
+#include <Inventor/errors/SoDebugError.h>
+#include "SoCalcExpr.h"
+#include <stdio.h>
+#ifdef WIN32
+#include <float.h>
+#define drand48() (((double)rand())/double(RAND_MAX))
+#elif defined(__APPLE__)
+#include <float.h>
+#include <limits.h>
+#else
+#include <values.h>
+#endif
+#include <math.h>
+#include <ctype.h>
+#ifndef WIN32
+#include <strings.h>
+#endif
+#include <stdlib.h>
+
+void yyerror(const char *);
+extern "C" int  yylex();
+int yyparse();
+
+static const char *In;
+static ExprList *EList;
+
+static const struct {
+    const char *name;
+    float   val;
+} Constants[] = {
+    { "MAXFLOAT",   MAXFLOAT },
+#if defined(__APPLE__) || defined(WIN32)
+    { "MINFLOAT",   FLT_MIN },
+#else
+    { "MINFLOAT",   MINFLOAT },
+#endif
+    { "M_E",        M_E },
+    { "M_LOG2E",    M_LOG2E },
+    { "M_LOG10E",   M_LOG10E },
+    { "M_LN2",      M_LN2 },
+    { "M_LN10",     M_LN10 },
+    { "M_PI",       M_PI },
+    { "M_SQRT2",    M_SQRT2 },
+    { "M_SQRT1_2",  M_SQRT1_2 },
+};
+#define NCONSTANTS (sizeof(Constants)/sizeof(Constants[0]))
+
+static const struct {
+    const char *name;
+    Expr::Type  type;
+} Inputs[] = {
+    { "a", Expr::FLOAT}, { "b", Expr::FLOAT},
+    { "c", Expr::FLOAT}, { "d", Expr::FLOAT},
+    { "e", Expr::FLOAT}, { "f", Expr::FLOAT},
+    { "g", Expr::FLOAT}, { "h", Expr::FLOAT},
+    { "A", Expr::VEC3F}, { "B", Expr::VEC3F},
+    { "C", Expr::VEC3F}, { "D", Expr::VEC3F},
+    { "E", Expr::VEC3F}, { "F", Expr::VEC3F},
+    { "G", Expr::VEC3F}, { "H", Expr::VEC3F},
+}, Outputs[] = {
+    { "oa", Expr::FLOAT}, { "ob", Expr::FLOAT},
+    { "oc", Expr::FLOAT}, { "od", Expr::FLOAT},
+    { "oA", Expr::VEC3F}, { "oB", Expr::VEC3F},
+    { "oC", Expr::VEC3F}, { "oD", Expr::VEC3F},
+}, Vars[] = {
+    { "ta", Expr::FLOAT}, { "tb", Expr::FLOAT},
+    { "tc", Expr::FLOAT}, { "td", Expr::FLOAT},
+    { "te", Expr::FLOAT}, { "tf", Expr::FLOAT},
+    { "tg", Expr::FLOAT}, { "th", Expr::FLOAT},
+    { "tA", Expr::VEC3F}, { "tB", Expr::VEC3F},
+    { "tC", Expr::VEC3F}, { "tD", Expr::VEC3F},
+    { "tE", Expr::VEC3F}, { "tF", Expr::VEC3F},
+    { "tG", Expr::VEC3F}, { "tH", Expr::VEC3F},
+};
+#define NINPUTS (sizeof(Inputs)/sizeof(Inputs[0]))
+#define NOUTPUTS (sizeof(Outputs)/sizeof(Outputs[0]))
+#define NVARS (sizeof(Vars)/sizeof(Vars[0]))
+
+static double rand(double max) { return max * drand48(); }
+static SbVec3f cross(const SbVec3f &a, const SbVec3f &b) { return a.cross(b); }
+static double dot(const SbVec3f &a, const SbVec3f &b) { return a.dot(b); }
+static double length(const SbVec3f &a) { return a.length(); }
+static SbVec3f normalize(const SbVec3f &v) { SbVec3f t=v; t.normalize(); return t; }
+static SbVec3f vec3f(double a, double b, double c) { return SbVec3f(a,b,c); }
+
+/* Keep this up to date with the info in initFuncs()*/
+#define NFUNCS 25
+
+static struct {
+    const Func *func;
+} Funcs[NFUNCS];
+
+#line 118 "lib\database\src\so\engines\SoCalcParse.y"
+typedef union
+{
+    Expr    *expr;
+    ExprList    *list;
+} YYSTYPE;
+#line 112 "y.tab.c"
+#define LEXERR 257
+#define CONST 258
+#define FUNC 259
+#define INPUT 260
+#define OUTPUT 261
+#define VAR 262
+#define OROR 263
+#define ANDAND 264
+#define GEQ 265
+#define LEQ 266
+#define EQEQ 267
+#define NEQ 268
+#define YYERRCODE 256
+short yylhs[] = {                                        -1,
+    0,    0,    0,    1,    1,    1,    1,    2,    2,    2,
+    2,    2,    3,    3,    3,   12,   12,    4,    4,    4,
+    5,    5,    5,    5,    6,    6,    6,    7,    7,    7,
+    7,    7,    8,    8,    8,    9,    9,   10,   10,   11,
+   11,
+};
+short yylen[] = {                                         2,
+    1,    3,    2,    3,    6,    3,    6,    1,    1,    1,
+    1,    3,    1,    4,    4,    1,    3,    1,    2,    2,
+    1,    3,    3,    3,    1,    3,    3,    1,    3,    3,
+    3,    3,    1,    3,    3,    1,    3,    1,    3,    1,
+    5,
+};
+short yydefred[] = {                                      0,
+    0,    0,    0,    1,    0,    0,    0,    0,    0,    8,
+    0,    9,   10,   11,    0,    0,    0,   13,    0,   21,
+    0,    0,    0,    0,    0,    0,    4,    0,    6,    0,
+    2,    0,    0,   19,   20,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,   16,    0,   12,    0,   22,   23,   24,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,   15,    0,   14,    0,    5,    7,   17,   41,
+};
+short yydgoto[] = {                                       3,
+    4,   18,   19,   20,   21,   22,   23,   24,   25,   26,
+   27,   54,
+};
+short yysindex[] = {                                   -245,
+  -61,  -56,  -46,    0,  -21,  -21,  -21,  -21, -245,    0,
+  -22,    0,    0,    0,  -21,  -21,  -21,    0,  -68,    0,
+  -27,  -36,  -58, -246, -235,  -57,    0,  -59,    0,  -54,
+    0,  -21,    6,    0,    0,  -21,  -21,  -21,  -21,  -21,
+  -21,  -21,  -21,  -21,  -21,  -21,  -21,  -21,  -21,  -21,
+  -20,  -11,    0,  -30,    0,  -39,    0,    0,    0,  -27,
+  -27,  -36,  -36,  -36,  -36,  -58,  -58, -246, -235,   -3,
+  -21,  -21,    0,  -21,    0,  -21,    0,    0,    0,    0,
+};
+short yyrindex[] = {                                      0,
+    0,    0,    0,    0,    0,    0,    0,    0,    3,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    1,    0,
+    8,   65,  136,  184,  349,  343,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,   33,
+   40,   72,   97,  104,  110,  142,  152,  192,  380,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+};
+short yygindex[] = {                                      0,
+   47,    0,    0,  215,   -9,  -17,  -10,    9,   20,    0,
+  212,    0,
+};
+#define YYTABLESIZE 643
+short yytable[] = {                                       5,
+   18,   44,    3,   45,    7,   50,   41,   25,   40,   39,
+   73,   17,    9,   74,   37,    1,    2,   32,   15,   38,
+   46,   47,   36,   16,   62,   63,   64,   65,   48,    6,
+   60,   61,   27,   51,    8,   66,   67,   18,   52,   26,
+   71,   18,   18,   18,   18,   18,   55,   18,   25,   72,
+   25,   25,   25,   75,   76,   31,   68,    0,   18,   18,
+   18,    3,   18,   18,   28,   25,   25,   25,   69,   25,
+   25,   32,    0,   27,    0,   27,   27,   27,    0,    0,
+   26,    0,   26,   26,   26,    0,    0,    0,    0,    0,
+   27,   27,   27,   18,   27,   27,   31,   26,   26,   26,
+   25,   26,   26,   29,    0,   28,    0,    0,   28,   30,
+    0,    0,   32,    0,    0,   32,    0,    0,    0,    0,
+    0,    0,   28,   28,   28,   27,   28,   28,    0,   32,
+   32,   32,   26,   32,   32,   33,    0,   31,    0,    0,
+   31,   34,    0,    0,   29,    0,    0,   29,    0,    0,
+   30,   35,    0,   30,   31,   31,   31,   28,   31,   31,
+    0,   29,   29,   29,   32,   29,   29,   30,   30,   30,
+    0,   30,   30,    0,    0,    0,   33,    0,    0,   33,
+    0,    0,   34,   36,    0,   34,    0,    0,    0,   31,
+    0,   37,   35,   33,   33,   35,   29,    0,   33,   34,
+   34,    0,   30,    0,   34,   49,   42,   43,    0,   35,
+   35,    0,    0,    0,   35,    0,    0,   28,   29,   30,
+    0,    0,    0,    0,   36,    0,   33,   36,   33,    0,
+   34,   35,   37,    0,   34,   37,   10,   11,   12,   13,
+   14,   36,   36,   53,   35,    0,   36,   56,    0,   37,
+   37,   57,   58,   59,   37,    0,    0,    0,    0,    0,
+    0,   70,    0,   18,   18,   18,   18,   18,   18,    0,
+   25,   25,   25,   25,   25,   25,   36,    0,    0,    0,
+    0,    0,   77,   78,   37,   79,    0,   80,    0,    0,
+    0,    0,    0,    0,    0,   27,   27,   27,   27,   27,
+   27,    0,   26,   26,   26,   26,   26,   26,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,   28,   28,   28,
+   28,   28,   28,    0,   32,   32,   32,   32,   32,   32,
+    0,    0,   40,    0,    0,    0,    0,    0,   38,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,   31,
+   31,   31,   31,   31,   31,    0,   29,   29,   29,   29,
+   29,   29,   30,   30,   30,   30,   30,   30,    0,   39,
+    0,    0,    0,   40,    0,    0,   40,    0,    0,   38,
+    0,    0,   38,    0,    0,    0,    0,    0,   33,   33,
+   40,   40,   33,   33,   34,   34,   38,   38,   34,   34,
+    0,   38,    0,    0,   35,   35,    0,    0,   35,   35,
+   39,    0,    0,   39,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,   40,    0,   39,   39,    0,
+    0,   38,   39,    0,    0,    0,   36,   36,    0,    0,
+    0,    0,    0,    0,   37,   37,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,   39,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,   38,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,
+    0,    0,   39,
+};
+short yycheck[] = {                                      61,
+    0,   60,    0,   62,   61,   63,   43,    0,   45,   37,
+   41,   33,   59,   44,   42,  261,  262,   40,   40,   47,
+  267,  268,   91,   45,   42,   43,   44,   45,  264,   91,
+   40,   41,    0,   93,   91,   46,   47,   37,   93,    0,
+   61,   41,   42,   43,   44,   45,   41,   47,   41,   61,
+   43,   44,   45,   93,   58,    9,   48,   -1,   58,   59,
+   60,   59,   62,   63,    0,   58,   59,   60,   49,   62,
+   63,    0,   -1,   41,   -1,   43,   44,   45,   -1,   -1,
+   41,   -1,   43,   44,   45,   -1,   -1,   -1,   -1,   -1,
+   58,   59,   60,   93,   62,   63,    0,   58,   59,   60,
+   93,   62,   63,    0,   -1,   41,   -1,   -1,   44,    0,
+   -1,   -1,   41,   -1,   -1,   44,   -1,   -1,   -1,   -1,
+   -1,   -1,   58,   59,   60,   93,   62,   63,   -1,   58,
+   59,   60,   93,   62,   63,    0,   -1,   41,   -1,   -1,
+   44,    0,   -1,   -1,   41,   -1,   -1,   44,   -1,   -1,
+   41,    0,   -1,   44,   58,   59,   60,   93,   62,   63,
+   -1,   58,   59,   60,   93,   62,   63,   58,   59,   60,
+   -1,   62,   63,   -1,   -1,   -1,   41,   -1,   -1,   44,
+   -1,   -1,   41,    0,   -1,   44,   -1,   -1,   -1,   93,
+   -1,    0,   41,   58,   59,   44,   93,   -1,   63,   58,
+   59,   -1,   93,   -1,   63,  263,  265,  266,   -1,   58,
+   59,   -1,   -1,   -1,   63,   -1,   -1,    6,    7,    8,
+   -1,   -1,   -1,   -1,   41,   -1,   15,   44,   93,   -1,
+   16,   17,   41,   -1,   93,   44,  258,  259,  260,  261,
+  262,   58,   59,   32,   93,   -1,   63,   36,   -1,   58,
+   59,   37,   38,   39,   63,   -1,   -1,   -1,   -1,   -1,
+   -1,   50,   -1,  263,  264,  265,  266,  267,  268,   -1,
+  263,  264,  265,  266,  267,  268,   93,   -1,   -1,   -1,
+   -1,   -1,   71,   72,   93,   74,   -1,   76,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,  263,  264,  265,  266,  267,
+  268,   -1,  263,  264,  265,  266,  267,  268,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,  263,  264,  265,
+  266,  267,  268,   -1,  263,  264,  265,  266,  267,  268,
+   -1,   -1,    0,   -1,   -1,   -1,   -1,   -1,    0,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,  263,
+  264,  265,  266,  267,  268,   -1,  263,  264,  265,  266,
+  267,  268,  263,  264,  265,  266,  267,  268,   -1,    0,
+   -1,   -1,   -1,   41,   -1,   -1,   44,   -1,   -1,   41,
+   -1,   -1,   44,   -1,   -1,   -1,   -1,   -1,  263,  264,
+   58,   59,  267,  268,  263,  264,   58,   59,  267,  268,
+   -1,   63,   -1,   -1,  263,  264,   -1,   -1,  267,  268,
+   41,   -1,   -1,   44,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   93,   -1,   58,   59,   -1,
+   -1,   93,   63,   -1,   -1,   -1,  263,  264,   -1,   -1,
+   -1,   -1,   -1,   -1,  263,  264,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   93,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,  263,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,   -1,
+   -1,   -1,  263,
+};
+#define YYFINAL 3
+#ifndef YYDEBUG
+#define YYDEBUG 0
+#endif
+#define YYMAXTOKEN 268
+#if YYDEBUG
+char *yyname[] = {
+"end-of-file",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
+"'!'",0,0,0,"'%'",0,0,"'('","')'","'*'","'+'","','","'-'",0,"'/'",0,0,0,0,0,0,0,
+0,0,0,"':'","';'","'<'","'='","'>'","'?'",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
+0,0,0,0,0,0,0,0,"'['",0,"']'",0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
+0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
+0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
+0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
+0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"LEXERR","CONST","FUNC","INPUT","OUTPUT",
+"VAR","OROR","ANDAND","GEQ","LEQ","EQEQ","NEQ",
+};
+char *yyrule[] = {
+"$accept : asgnlist",
+"asgnlist : asgn",
+"asgnlist : asgnlist ';' asgn",
+"asgnlist : asgnlist ';'",
+"asgn : OUTPUT '=' conditional_expression",
+"asgn : OUTPUT '[' conditional_expression ']' '=' conditional_expression",
+"asgn : VAR '=' conditional_expression",
+"asgn : VAR '[' conditional_expression ']' '=' conditional_expression",
+"primary_expression : CONST",
+"primary_expression : INPUT",
+"primary_expression : OUTPUT",
+"primary_expression : VAR",
+"primary_expression : '(' conditional_expression ')'",
+"postfix_expression : primary_expression",
+"postfix_expression : postfix_expression '[' conditional_expression ']'",
+"postfix_expression : FUNC '(' args ')'",
+"args : conditional_expression",
+"args : args ',' conditional_expression",
+"unary_expression : postfix_expression",
+"unary_expression : '-' unary_expression",
+"unary_expression : '!' unary_expression",
+"multiplicative_expression : unary_expression",
+"multiplicative_expression : multiplicative_expression '*' unary_expression",
+"multiplicative_expression : multiplicative_expression '/' unary_expression",
+"multiplicative_expression : multiplicative_expression '%' unary_expression",
+"additive_expression : multiplicative_expression",
+"additive_expression : additive_expression '+' multiplicative_expression",
+"additive_expression : additive_expression '-' multiplicative_expression",
+"relational_expression : additive_expression",
+"relational_expression : relational_expression '<' additive_expression",
+"relational_expression : relational_expression '>' additive_expression",
+"relational_expression : relational_expression LEQ additive_expression",
+"relational_expression : relational_expression GEQ additive_expression",
+"equality_expression : relational_expression",
+"equality_expression : equality_expression EQEQ relational_expression",
+"equality_expression : equality_expression NEQ relational_expression",
+"logical_AND_expression : equality_expression",
+"logical_AND_expression : logical_AND_expression ANDAND equality_expression",
+"logical_OR_expression : logical_AND_expression",
+"logical_OR_expression : logical_OR_expression OROR logical_AND_expression",
+"conditional_expression : logical_OR_expression",
+"conditional_expression : logical_OR_expression '?' conditional_expression ':' conditional_expression",
+};
+#endif
+#ifdef YYSTACKSIZE
+#undef YYMAXDEPTH
+#define YYMAXDEPTH YYSTACKSIZE
+#else
+#ifdef YYMAXDEPTH
+#define YYSTACKSIZE YYMAXDEPTH
+#else
+#define YYSTACKSIZE 500
+#define YYMAXDEPTH 500
+#endif
+#endif
+int yydebug;
+int yynerrs;
+int yyerrflag;
+int yychar;
+short *yyssp;
+YYSTYPE *yyvsp;
+YYSTYPE yyval;
+YYSTYPE yylval;
+short yyss[YYSTACKSIZE];
+YYSTYPE yyvs[YYSTACKSIZE];
+#define yystacksize YYSTACKSIZE
+#line 235 "lib\database\src\so\engines\SoCalcParse.y"
+
+//
+// The static Funcs array contains instances of objects that have
+// constructors. Since this wouldn't get set up correctly in a DSO, we
+// have to initialize the array at run-time.
+//
+
+static void
+initFuncs()
+{
+    int i = 0;
+
+#define MAKEFUNC(CLASS, NAME)                             \
+    Funcs[i++].func = new CLASS(SO__QUOTE(NAME),NAME)
+
+    MAKEFUNC(Func_d, acos);
+    MAKEFUNC(Func_d, asin);
+    MAKEFUNC(Func_d, atan);
+    MAKEFUNC(Func_dd, atan2);
+    MAKEFUNC(Func_d, ceil);
+    MAKEFUNC(Func_d, cos);
+    MAKEFUNC(Func_d, cosh);
+    MAKEFUNC(Funcv_vv, cross);
+    MAKEFUNC(Func_vv, dot);
+    MAKEFUNC(Func_d, exp);
+    MAKEFUNC(Func_d, fabs);
+    MAKEFUNC(Func_d, floor);
+    MAKEFUNC(Func_dd, fmod);
+    MAKEFUNC(Func_v, length);
+    MAKEFUNC(Func_d, log);
+    MAKEFUNC(Func_d, log10);
+    MAKEFUNC(Funcv_v, normalize);
+    MAKEFUNC(Func_dd, pow);
+    MAKEFUNC(Func_d, rand);
+    MAKEFUNC(Func_d, sin);
+    MAKEFUNC(Func_d, sinh);
+    MAKEFUNC(Func_d, sqrt);
+    MAKEFUNC(Func_d, tan);
+    MAKEFUNC(Func_d, tanh);
+    MAKEFUNC(Funcv_ddd, vec3f);
+
+#ifdef DEBUG
+    // Sanity check
+    if (i != NFUNCS)
+    SoDebugError::post("SoCalcParse initFuncs (internal)",
+               "Wrong number of functions declared");
+#endif /* DEBUG */
+}
+
+static Const *
+isConst(const char *nm)
+{
+    for (int i=0; i<NCONSTANTS; i++)
+    if (strcmp(nm, Constants[i].name)==0)
+        return new Const(Constants[i].val);
+    return NULL;
+}
+
+static Func *
+isFunc(const char *nm)
+{
+    for (int i=0; i<NFUNCS; i++) {
+    const Func *f = Funcs[i].func;
+    if (strcmp(nm, f->name)==0)
+        return f->dup();
+    }
+    return NULL;
+}
+
+static Var *
+isInput(const char *nm)
+{
+    for (int i=0; i<NINPUTS; i++) if (strcmp(nm, Inputs[i].name)==0)
+    return new Var(nm, Inputs[i].type);
+    return NULL;
+}
+
+static Var *
+isOutput(const char *nm)
+{
+    for (int i=0; i<NOUTPUTS; i++) if (strcmp(nm, Outputs[i].name)==0)
+    return new Var(nm, Outputs[i].type);
+    return NULL;
+}
+
+static Var *
+isVar(const char *nm)
+{
+    for (int i=0; i<NVARS; i++) if (strcmp(nm, Vars[i].name)==0)
+    return new Var(nm, Vars[i].type);
+    return NULL;
+}
+
+int yylex()
+{
+#define BSZ 100
+    char c, buf[BSZ+1], *cp = buf;
+
+    // skip over blanks
+    while (isspace(*In))
+    In++;
+
+    if (!In[0])
+    return EOF;
+
+    if (isdigit(In[0]) || In[0] == '.') {
+
+    // skip past a valid floating-point number
+    // (don't need to compute the number, will
+    // use atof() to do that).
+    SbBool dot = FALSE;
+    SbBool exp = FALSE;
+    for (;;) {
+        c = *In++;
+        if (cp - buf < BSZ)
+        *cp++ = c;
+        *cp = c;
+        if (isdigit(c))
+        continue;
+        if (c== '.') {
+        if (dot || exp)
+            return LEXERR;
+        dot = TRUE;
+        continue;
+        }
+        if (c == 'e' || c == 'E') {
+        if (exp)
+            return LEXERR;
+        exp = TRUE;
+        continue;
+        }
+        // Check for negative exponent
+        if (c == '-' && exp && (In[-2] == 'e' || In[-2] == 'E')) {
+        continue;
+        }
+        break;  // end of number
+    }
+    if (In[-1] == 'e')
+        return LEXERR;
+
+    *cp = 0;
+    In--;   // push back last character "read"
+
+    yylval.expr = new Const(atof(buf));
+    return CONST;
+    }
+
+    if (isalpha(In[0])) {
+    while (isalnum(In[0]) || In[0] == '_') {
+        if (cp - buf < BSZ)
+        *cp++ = *In++;
+    }
+    *cp = 0;
+
+    if (yylval.expr = isConst(buf))
+        return CONST;
+
+    if (yylval.expr = isFunc(buf))
+        return FUNC;
+
+    if (yylval.expr = isInput(buf))
+        return INPUT;
+
+    if (yylval.expr = isOutput(buf))
+        return OUTPUT;
+
+    if (yylval.expr = isVar(buf))
+        return VAR;
+
+    }
+
+#define EQ2(x,y)    (x[0]==y[0] && x[1]==y[1])
+    if (EQ2(In, "==")) { In += 2; return EQEQ; }
+    if (EQ2(In, "!=")) { In += 2; return NEQ; }
+    if (EQ2(In, ">=")) { In += 2; return GEQ; }
+    if (EQ2(In, "<=")) { In += 2; return LEQ; }
+    if (EQ2(In, "&&")) { In += 2; return ANDAND; }
+    if (EQ2(In, "||")) { In += 2; return OROR; }
+
+    return *In++;
+}
+
+void
+yyerror(const char *)
+{
+    // printf("parse error: %s\n", s);
+}
+
+SbBool
+SoCalcParse(ExprList *elist, const char *buf)
+{
+    static SbBool initted = FALSE;
+
+    if (! initted) {
+    initFuncs();
+    initted = TRUE;
+    }
+
+    In = buf;
+    EList = elist;
+    return(yyparse());
+}
+
+#ifdef TESTMAIN
+
+void
+main()
+{
+    char buf[1000];
+#if YYDEBUG
+    extern int yydebug;
+    yydebug = 1;
+#endif
+    EList = new ExprList;
+
+    while (gets(buf)) {
+    In = buf;
+    EList->truncate(0);
+    if (yyparse())
+        printf("Parse error.\n");
+    else {
+        EList->eval();
+        for (int i=0; i<EList->length(); i++) {
+        (*EList)[i]->pr();
+        }
+    }
+    }
+}
+
+#endif
+#line 628 "y.tab.c"
+#define YYABORT goto yyabort
+#define YYREJECT goto yyabort
+#define YYACCEPT goto yyaccept
+#define YYERROR goto yyerrlab
+int
+yyparse()
+{
+    register int yym, yyn, yystate;
+#if YYDEBUG
+    register char *yys;
+    extern char *getenv();
+
+    if (yys = getenv("YYDEBUG"))
+    {
+        yyn = *yys;
+        if (yyn >= '0' && yyn <= '9')
+            yydebug = yyn - '0';
+    }
+#endif
+
+    yynerrs = 0;
+    yyerrflag = 0;
+    yychar = (-1);
+
+    yyssp = yyss;
+    yyvsp = yyvs;
+    *yyssp = yystate = 0;
+
+yyloop:
+    if (yyn = yydefred[yystate]) goto yyreduce;
+    if (yychar < 0)
+    {
+        if ((yychar = yylex()) < 0) yychar = 0;
+#if YYDEBUG
+        if (yydebug)
+        {
+            yys = 0;
+            if (yychar <= YYMAXTOKEN) yys = yyname[yychar];
+            if (!yys) yys = "illegal-symbol";
+            printf("%sdebug: state %d, reading %d (%s)\n",
+                    YYPREFIX, yystate, yychar, yys);
+        }
+#endif
+    }
+    if ((yyn = yysindex[yystate]) && (yyn += yychar) >= 0 &&
+            yyn <= YYTABLESIZE && yycheck[yyn] == yychar)
+    {
+#if YYDEBUG
+        if (yydebug)
+            printf("%sdebug: state %d, shifting to state %d\n",
+                    YYPREFIX, yystate, yytable[yyn]);
+#endif
+        if (yyssp >= yyss + yystacksize - 1)
+        {
+            goto yyoverflow;
+        }
+        *++yyssp = yystate = yytable[yyn];
+        *++yyvsp = yylval;
+        yychar = (-1);
+        if (yyerrflag > 0)  --yyerrflag;
+        goto yyloop;
+    }
+    if ((yyn = yyrindex[yystate]) && (yyn += yychar) >= 0 &&
+            yyn <= YYTABLESIZE && yycheck[yyn] == yychar)
+    {
+        yyn = yytable[yyn];
+        goto yyreduce;
+    }
+    if (yyerrflag) goto yyinrecovery;
+#ifdef lint
+    goto yynewerror;
+#endif
+yynewerror:
+    yyerror("syntax error");
+#ifdef lint
+    goto yyerrlab;
+#endif
+yyerrlab:
+    ++yynerrs;
+yyinrecovery:
+    if (yyerrflag < 3)
+    {
+        yyerrflag = 3;
+        for (;;)
+        {
+            if ((yyn = yysindex[*yyssp]) && (yyn += YYERRCODE) >= 0 &&
+                    yyn <= YYTABLESIZE && yycheck[yyn] == YYERRCODE)
+            {
+#if YYDEBUG
+                if (yydebug)
+                    printf("%sdebug: state %d, error recovery shifting\
+ to state %d\n", YYPREFIX, *yyssp, yytable[yyn]);
+#endif
+                if (yyssp >= yyss + yystacksize - 1)
+                {
+                    goto yyoverflow;
+                }
+                *++yyssp = yystate = yytable[yyn];
+                *++yyvsp = yylval;
+                goto yyloop;
+            }
+            else
+            {
+#if YYDEBUG
+                if (yydebug)
+                    printf("%sdebug: error recovery discarding state %d\n",
+                            YYPREFIX, *yyssp);
+#endif
+                if (yyssp <= yyss) goto yyabort;
+                --yyssp;
+                --yyvsp;
+            }
+        }
+    }
+    else
+    {
+        if (yychar == 0) goto yyabort;
+#if YYDEBUG
+        if (yydebug)
+        {
+            yys = 0;
+            if (yychar <= YYMAXTOKEN) yys = yyname[yychar];
+            if (!yys) yys = "illegal-symbol";
+            printf("%sdebug: state %d, error recovery discards token %d (%s)\n",
+                    YYPREFIX, yystate, yychar, yys);
+        }
+#endif
+        yychar = (-1);
+        goto yyloop;
+    }
+yyreduce:
+#if YYDEBUG
+    if (yydebug)
+        printf("%sdebug: state %d, reducing by rule %d (%s)\n",
+                YYPREFIX, yystate, yyn, yyrule[yyn]);
+#endif
+    yym = yylen[yyn];
+    yyval = yyvsp[1-yym];
+    switch (yyn)
+    {
+case 1:
+#line 135 "lib\database\src\so\engines\SoCalcParse.y"
+{ EList->append(yyvsp[0].expr); }
+break;
+case 2:
+#line 136 "lib\database\src\so\engines\SoCalcParse.y"
+{ EList->append(yyvsp[0].expr); }
+break;
+case 4:
+#line 142 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new Assign(yyvsp[-2].expr, yyvsp[0].expr); }
+break;
+case 5:
+#line 144 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new AssignIndex(yyvsp[-5].expr, yyvsp[-3].expr, yyvsp[0].expr); }
+break;
+case 6:
+#line 146 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new Assign(yyvsp[-2].expr, yyvsp[0].expr); }
+break;
+case 7:
+#line 148 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new AssignIndex(yyvsp[-5].expr, yyvsp[-3].expr, yyvsp[0].expr); }
+break;
+case 8:
+#line 152 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = yyvsp[0].expr; }
+break;
+case 9:
+#line 153 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = yyvsp[0].expr; }
+break;
+case 10:
+#line 154 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = yyvsp[0].expr; }
+break;
+case 11:
+#line 155 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = yyvsp[0].expr; }
+break;
+case 12:
+#line 156 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = yyvsp[-1].expr; }
+break;
+case 13:
+#line 160 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = yyvsp[0].expr; }
+break;
+case 14:
+#line 162 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new Index(yyvsp[-3].expr, yyvsp[-1].expr); }
+break;
+case 15:
+#line 163 "lib\database\src\so\engines\SoCalcParse.y"
+{ ((Func *)yyvsp[-3].expr)->setArgs(yyvsp[-1].list); yyval.expr = yyvsp[-3].expr; }
+break;
+case 16:
+#line 167 "lib\database\src\so\engines\SoCalcParse.y"
+{ (yyval.list = new ExprList)->append(yyvsp[0].expr); }
+break;
+case 17:
+#line 168 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyvsp[-2].list->append(yyvsp[0].expr); yyval.list = yyvsp[-2].list; }
+break;
+case 19:
+#line 173 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new Negate(yyvsp[0].expr); }
+break;
+case 20:
+#line 174 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new Not(yyvsp[0].expr); }
+break;
+case 22:
+#line 180 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new Mult(yyvsp[-2].expr, yyvsp[0].expr); }
+break;
+case 23:
+#line 182 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new Divide(yyvsp[-2].expr, yyvsp[0].expr); }
+break;
+case 24:
+#line 184 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new Mod(yyvsp[-2].expr, yyvsp[0].expr); }
+break;
+case 26:
+#line 190 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new Plus(yyvsp[-2].expr, yyvsp[0].expr); }
+break;
+case 27:
+#line 192 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new Minus(yyvsp[-2].expr, yyvsp[0].expr); }
+break;
+case 29:
+#line 198 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new LessThan(yyvsp[-2].expr, yyvsp[0].expr); }
+break;
+case 30:
+#line 200 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new GreaterThan(yyvsp[-2].expr, yyvsp[0].expr); }
+break;
+case 31:
+#line 202 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new LessEQ(yyvsp[-2].expr, yyvsp[0].expr); }
+break;
+case 32:
+#line 204 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new GreaterEQ(yyvsp[-2].expr, yyvsp[0].expr); }
+break;
+case 34:
+#line 210 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new Equals(yyvsp[-2].expr, yyvsp[0].expr); }
+break;
+case 35:
+#line 212 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new NotEquals(yyvsp[-2].expr, yyvsp[0].expr); }
+break;
+case 37:
+#line 218 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new And(yyvsp[-2].expr, yyvsp[0].expr); }
+break;
+case 39:
+#line 224 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new Or(yyvsp[-2].expr, yyvsp[0].expr); }
+break;
+case 41:
+#line 231 "lib\database\src\so\engines\SoCalcParse.y"
+{ yyval.expr = new Ternary(yyvsp[-4].expr, yyvsp[-2].expr, yyvsp[0].expr); }
+break;
+#line 897 "y.tab.c"
+    }
+    yyssp -= yym;
+    yystate = *yyssp;
+    yyvsp -= yym;
+    yym = yylhs[yyn];
+    if (yystate == 0 && yym == 0)
+    {
+#if YYDEBUG
+        if (yydebug)
+            printf("%sdebug: after reduction, shifting from state 0 to\
+ state %d\n", YYPREFIX, YYFINAL);
+#endif
+        yystate = YYFINAL;
+        *++yyssp = YYFINAL;
+        *++yyvsp = yyval;
+        if (yychar < 0)
+        {
+            if ((yychar = yylex()) < 0) yychar = 0;
+#if YYDEBUG
+            if (yydebug)
+            {
+                yys = 0;
+                if (yychar <= YYMAXTOKEN) yys = yyname[yychar];
+                if (!yys) yys = "illegal-symbol";
+                printf("%sdebug: state %d, reading %d (%s)\n",
+                        YYPREFIX, YYFINAL, yychar, yys);
+            }
+#endif
+        }
+        if (yychar == 0) goto yyaccept;
+        goto yyloop;
+    }
+    if ((yyn = yygindex[yym]) && (yyn += yystate) >= 0 &&
+            yyn <= YYTABLESIZE && yycheck[yyn] == yystate)
+        yystate = yytable[yyn];
+    else
+        yystate = yydgoto[yym];
+#if YYDEBUG
+    if (yydebug)
+        printf("%sdebug: after reduction, shifting from state %d \
+to state %d\n", YYPREFIX, *yyssp, yystate);
+#endif
+    if (yyssp >= yyss + yystacksize - 1)
+    {
+        goto yyoverflow;
+    }
+    *++yyssp = yystate;
+    *++yyvsp = yyval;
+    goto yyloop;
+yyoverflow:
+    yyerror("yacc stack overflow");
+yyabort:
+    return (1);
+yyaccept:
+    return (0);
+}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/engines/SoCalcParse_yacc.h inventor/lib/database/src/so/engines/SoCalcParse_yacc.h
--- /tmp/inventor/lib/database/src/so/engines/SoCalcParse_yacc.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/database/src/so/engines/SoCalcParse_yacc.h	2006-09-14 11:58:09.000000000 +0200
@@ -0,0 +1,18 @@
+#define LEXERR 257
+#define CONST 258
+#define FUNC 259
+#define INPUT 260
+#define OUTPUT 261
+#define VAR 262
+#define OROR 263
+#define ANDAND 264
+#define GEQ 265
+#define LEQ 266
+#define EQEQ 267
+#define NEQ 268
+typedef union
+{
+    Expr    *expr;
+    ExprList    *list;
+} YYSTYPE;
+extern YYSTYPE yylval;
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/engines/SoCounter.c++ inventor/lib/database/src/so/engines/SoCounter.c++
--- /tmp/inventor/lib/database/src/so/engines/SoCounter.c++	2000-08-15 14:56:18.000000000 +0200
+++ inventor/lib/database/src/so/engines/SoCounter.c++	2006-05-09 12:09:36.000000000 +0200
@@ -53,6 +53,7 @@
 
 #include <Inventor/SoDB.h>
 #include <Inventor/engines/SoCounter.h>
+#include <stdlib.h>
 
 SO_ENGINE_SOURCE(SoCounter);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/engines/SoTimeCounter.c++ inventor/lib/database/src/so/engines/SoTimeCounter.c++
--- /tmp/inventor/lib/database/src/so/engines/SoTimeCounter.c++	2000-08-15 14:56:19.000000000 +0200
+++ inventor/lib/database/src/so/engines/SoTimeCounter.c++	2006-05-09 12:09:36.000000000 +0200
@@ -53,6 +53,7 @@
 
 #include <Inventor/SoDB.h>
 #include <Inventor/engines/SoTimeCounter.h>
+#include <stdlib.h>
 
 SO_ENGINE_SOURCE(SoTimeCounter);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/GNUmakefile inventor/lib/database/src/so/nodes/GNUmakefile
--- /tmp/inventor/lib/database/src/so/nodes/GNUmakefile	2001-03-24 03:47:41.000000000 +0100
+++ inventor/lib/database/src/so/nodes/GNUmakefile	2005-08-01 17:36:15.000000000 +0200
@@ -2,7 +2,12 @@
 include $(IVDEPTH)/make/ivcommondefs
 
 LCXXINCS += -I$(FLDIR) -Inurbs/head
+
+ifeq ($(usingWin32), 1)
+LCXXDEFS += -DLIBRARYBUILD
+else
 LCXXDEFS += -DIRIX_6 -DLIBRARYBUILD
+endif
 
 CFILES = readGIF.c 
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/clients/softcurvemaps.c++ inventor/lib/database/src/so/nodes/nurbs/clients/softcurvemaps.c++
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/clients/softcurvemaps.c++	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/clients/softcurvemaps.c++	2006-07-17 15:46:47.000000000 +0200
@@ -34,7 +34,8 @@
  *
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include "softcurvemaps.h"
 
 _SoNurbsColor4CurveMap::_SoNurbsColor4CurveMap() : _SoNurbsCurveMap( N_C4D, 0, 4 ) {}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/clients/softcurveval.c++ inventor/lib/database/src/so/nodes/nurbs/clients/softcurveval.c++
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/clients/softcurveval.c++	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/clients/softcurveval.c++	2006-07-17 15:46:47.000000000 +0200
@@ -40,8 +40,9 @@
  * $Revision$
  */
 
+#include <Inventor/system/SbSystem.h>
 #include "../SoAddPrefix.h"
-#include <GL/gl.h>
+#include OPENGL_GL_H
 #include "myassert.h"
 #include "softcurveval.h"
 #include "softcurvmap.h"
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/clients/softrenderer.c++ inventor/lib/database/src/so/nodes/nurbs/clients/softrenderer.c++
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/clients/softrenderer.c++	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/clients/softrenderer.c++	2006-07-17 15:46:47.000000000 +0200
@@ -34,6 +34,7 @@
  *
  */
 
+#include <Inventor/system/SbSystem.h>
 #include "../SoAddPrefix.h"
 #include "mymath.h"
 #include "mystdlib.h"
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/clients/softsurfacemaps.h inventor/lib/database/src/so/nodes/nurbs/clients/softsurfacemaps.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/clients/softsurfacemaps.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/clients/softsurfacemaps.h	2006-07-12 18:01:38.000000000 +0200
@@ -39,7 +39,7 @@
 
 #include <inttypes.h>   /* defines long and brethren */
 
-#include <GL/gl.h>
+#include OPENGL_GL_H
 #include "softsurfmap.h"
 #include "gl4types.h"
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/clients/softsurfeval.c++ inventor/lib/database/src/so/nodes/nurbs/clients/softsurfeval.c++
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/clients/softsurfeval.c++	2005-01-07 14:15:42.000000000 +0100
+++ inventor/lib/database/src/so/nodes/nurbs/clients/softsurfeval.c++	2006-09-18 11:35:19.000000000 +0200
@@ -43,21 +43,23 @@
 #include "../SoAddPrefix.h"
 #include "myassert.h"
 #include <stdio.h>
-#include <GL/gl.h>
+#include OPENGL_GL_H
 #include "mystdio.h"
 #include "mymath.h"
 #include "softsurfmap.h"
 #include "softsurfeval.h"
 #include "nurbsconsts.h"
 
+#if !defined(_WINDOWS) || (_MSC_VER < 1300)
 inline REAL abs( REAL x ) { return (x < 0.0) ? -x : x; }
+#endif
 inline int equal( REAL x, REAL y ) { return (abs(x-y) < 1.0E-6) ? 1 : 0; }
 
 _SoNurbsSurfaceEvaluator::~_SoNurbsSurfaceEvaluator() 
 { 
     for( _SoNurbsSurfaceMap *next; maps; maps = next ) {
-	next = maps->next;
-	delete maps;
+  next = maps->next;
+  delete maps;
     }
 }
 
@@ -210,7 +212,7 @@
 _SoNurbsSurfaceEvaluator::bgnmap2f( long )
 {
     for( _SoNurbsSurfaceMap *map = firstMap(); isMap( map ); map = nextMap(map) )
-	map->disable();
+  map->disable();
     lru = 0;
     vvals[0] = vvals[1] = vvals[2] =*(REAL *)(& NaN);
     validreset();
@@ -224,7 +226,7 @@
 _SoNurbsSurfaceEvaluator::endmap2f( void )
 {
     for( _SoNurbsSurfaceMap *map = firstMap(); isMap( map ); map = nextMap(map) )
-	map->disable();
+  map->disable();
 }
 
 void
@@ -241,19 +243,19 @@
 void
 _SoNurbsSurfaceEvaluator::map2f(
     long _type,
-    REAL _ulower,	/* u lower domain coord		*/
-    REAL _uupper,	/* u upper domain coord 	*/
-    long _ustride,	/* interpoint distance		*/
-    long _uorder,	/* parametric order		*/
-    REAL _vlower,	/* v lower domain coord		*/
-    REAL _vupper, 	/* v upper domain coord		*/
-    long _vstride,	/* interpoint distance		*/
-    long _vorder,	/* parametric order		*/
-    REAL *_ctlpts) 	/* control points		*/
+    REAL _ulower, /* u lower domain coord   */
+    REAL _uupper, /* u upper domain coord   */
+    long _ustride,  /* interpoint distance    */
+    long _uorder, /* parametric order   */
+    REAL _vlower, /* v lower domain coord   */
+    REAL _vupper,   /* v upper domain coord   */
+    long _vstride,  /* interpoint distance    */
+    long _vorder, /* parametric order   */
+    REAL *_ctlpts)  /* control points   */
 {
     _SoNurbsSurfaceMap *map = typeToMap(_type);
     map->map2f( _ulower, _uupper, _ustride, _uorder,
-	        _vlower, _vupper, _vstride, _vorder, _ctlpts );
+          _vlower, _vupper, _vstride, _vorder, _ctlpts );
 
     vvals[0] = vvals[1] = vvals[2] =*(REAL *)(& NaN);
     validreset();
@@ -303,62 +305,62 @@
     int lastv = (int) (vmax + 1);
     for( int gridv1 = (int) (vmin)+1; gridv1 != lastv; gridv1++ ) {
 
-	v0 = v1;
-	/* strength reduction == roundoff error */
-	v1 = vs + dvs * gridv1;  
-
-	if( equal(v0, vvals[1]) ) {
-	    if( ! equal( v1, vvals[0]) ) {
-		setv( v1, 0 );
-	    }
-	    vstart = 1;
-	} else if( equal(v0, vvals[0]) ) {
-	    if( ! equal(v1, vvals[1]) ) {
-	        setv( v1, 1 );
-	    }
-	    vstart = 0;
-	} else if( equal(v1, vvals[1]) ) {
-	    setv( v0, 0 );
-	    vstart = 0;
-	} else {
-	    setv( v0, 1 );
-	    setv( v1, 0 );
-	    vstart = 1;
-	}
-
-	assert( equal(vvals[vstart],v0) );
-	assert( equal(vvals[1-vstart],v1) );
-
-	bgnqstrip();
- 	if( vstart == 1 ) {
-	    int lastu = (int) (umax + 1);
-	    int gridi = (int) umin;
-	    for( int gridu = gridi++; gridu != lastu; gridu = gridi++ ) {
-
-		/* strength reduction == roundoff error */
-		domain[0] = us + dus * gridu;
-
-		domain[1] = vvals[1];
-		compute( domain, 1, gridi );
-
-		domain[1] = vvals[0];
-		compute( domain, 0, gridi );
-	    }
-	} else {
-	    int lastu = (int) (umax + 1);
-	    int gridi = (int) umin;
-	    for( int gridu = gridi++; gridu != lastu; gridu = gridi++ ) {
-		/* strength reduction == roundoff error */
-		domain[0] = us + dus * gridu;
-
-		domain[1] = vvals[0];
-		compute( domain, 0, gridi );
-
-		domain[1] = vvals[1];
-		compute( domain, 1, gridi );
-	    }
-	}
-	endqstrip();
+  v0 = v1;
+  /* strength reduction == roundoff error */
+  v1 = vs + dvs * gridv1;  
+
+  if( equal(v0, vvals[1]) ) {
+      if( ! equal( v1, vvals[0]) ) {
+    setv( v1, 0 );
+      }
+      vstart = 1;
+  } else if( equal(v0, vvals[0]) ) {
+      if( ! equal(v1, vvals[1]) ) {
+          setv( v1, 1 );
+      }
+      vstart = 0;
+  } else if( equal(v1, vvals[1]) ) {
+      setv( v0, 0 );
+      vstart = 0;
+  } else {
+      setv( v0, 1 );
+      setv( v1, 0 );
+      vstart = 1;
+  }
+
+  assert( equal(vvals[vstart],v0) );
+  assert( equal(vvals[1-vstart],v1) );
+
+  bgnqstrip();
+  if( vstart == 1 ) {
+      int lastu = (int) (umax + 1);
+      int gridi = (int) umin;
+      for( int gridu = gridi++; gridu != lastu; gridu = gridi++ ) {
+
+    /* strength reduction == roundoff error */
+    domain[0] = us + dus * gridu;
+
+    domain[1] = vvals[1];
+    compute( domain, 1, gridi );
+
+    domain[1] = vvals[0];
+    compute( domain, 0, gridi );
+      }
+  } else {
+      int lastu = (int) (umax + 1);
+      int gridi = (int) umin;
+      for( int gridu = gridi++; gridu != lastu; gridu = gridi++ ) {
+    /* strength reduction == roundoff error */
+    domain[0] = us + dus * gridu;
+
+    domain[1] = vvals[0];
+    compute( domain, 0, gridi );
+
+    domain[1] = vvals[1];
+    compute( domain, 1, gridi );
+      }
+  }
+  endqstrip();
     }
 }
 /*-------------------------------------------------------------------------
@@ -372,16 +374,16 @@
     domain[0] = u;
     domain[1] = v;
     if( equal(v,vvals[0]) ) {
-	mapeval( domain, 0, 0 );
+  mapeval( domain, 0, 0 );
     } else if( equal(v,vvals[1]) ) {
-	mapeval( domain, 1, 0 );
+  mapeval( domain, 1, 0 );
     } else if( equal(v,vvals[2]) ) {
-	mapeval( domain, 2, 0 );
+  mapeval( domain, 2, 0 );
     } else {
-	// approximately 20-30% of the time this branch is taken
-	int index = nextlru();
-	setv( v, index );
-	mapeval( domain, index, 0 );
+  // approximately 20-30% of the time this branch is taken
+  int index = nextlru();
+  setv( v, index );
+  mapeval( domain, index, 0 );
     }
 }
 
@@ -398,16 +400,16 @@
     domain[1] = v * dvs + vs;
 
     if( equal(domain[1], vvals[1]) ) {
-	compute( domain, 1, gridi );
+  compute( domain, 1, gridi );
     } else if( equal(domain[1], vvals[0]) ) {
-	compute( domain, 0, gridi );
+  compute( domain, 0, gridi );
     } else if( equal(domain[1], vvals[2]) ) {
-	mapeval( domain, 2, 0 );
+  mapeval( domain, 2, 0 );
     } else {
-	// this branch is executed less than 20% of the time
-	int index = nextlru();
-	setv( domain[1], index );
-	mapeval( domain, index, 0 );
+  // this branch is executed less than 20% of the time
+  int index = nextlru();
+  setv( domain[1], index );
+  mapeval( domain, index, 0 );
     }
 }
 
@@ -420,21 +422,21 @@
 {
     assert( equal(vvals[index], domain[1]) );
     if( ((place >= valid[index][0]) && (place < valid[index][1])) ) {
-	assert( place != 0 );
-	for( _SoNurbsSurfaceMap *map = firstMap(); isMap( map ); map = nextMap(map) )
-	    map->output( domain, index, place );
+  assert( place != 0 );
+  for( _SoNurbsSurfaceMap *map = firstMap(); isMap( map ); map = nextMap(map) )
+      map->output( domain, index, place );
     } else {
-	if( place >= MAXCACHED ) {
-	    place = 0;
-	} else if( place == valid[index][1] ) {
-	    valid[index][1]++;
-	} else if( valid[index][0] == valid[index][1] ) {
-	    valid[index][0] = place;
-	    valid[index][1] = place+1;
-	} else if( place == valid[index][0]-1 ) {
-	    valid[index][0]--;
-	}
-	mapeval( domain, index, place );
+  if( place >= MAXCACHED ) {
+      place = 0;
+  } else if( place == valid[index][1] ) {
+      valid[index][1]++;
+  } else if( valid[index][0] == valid[index][1] ) {
+      valid[index][0] = place;
+      valid[index][1] = place+1;
+  } else if( place == valid[index][0]-1 ) {
+      valid[index][0]--;
+  }
+  mapeval( domain, index, place );
     }
 }
 
@@ -450,7 +452,7 @@
     vvals[index] = v;
 
     for( _SoNurbsSurfaceMap *map = firstMap(); isMap( map ); map = nextMap(map) ) 
-	map->setv( v, index );
+  map->setv( v, index );
 }
 
 /*---------------------------------------------------------------------------
@@ -462,5 +464,5 @@
 _SoNurbsSurfaceEvaluator::mapeval( REAL *domain, int index, int place )
 {
     for( _SoNurbsSurfaceMap *map = firstMap(); isMap( map ); map = nextMap(map) )
-	map->mapeval( domain, index, place );
+  map->mapeval( domain, index, place );
 }
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/_gendefs inventor/lib/database/src/so/nodes/nurbs/_gendefs
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/_gendefs	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/_gendefs	2005-08-01 14:06:19.000000000 +0200
@@ -5,8 +5,8 @@
 set tmp = $TMPDIR/$$
 cp /dev/null $tmp
 egrep "^((class)|(struct))" head/*.h libnurbs/*.c++ | \
-    sed -e 's/.*class \([^ ;\*]*\).*$/\1/' \
-	-e 's/.*struct \([^ ;\*]*\).*$/\1/' | \
+    sed -e 's/.*class \(INVENTOR_API \)\?\([^ ;\*]*\).*$/\2/' \
+	-e 's/.*struct \(INVENTOR_API \)\?\([^ ;\*]*\).*$/\2/' | \
     sort | uniq | \
 	fgrep -v "(" | \
 	fgrep -v "{" | \
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/head/arc.h inventor/lib/database/src/so/nodes/nurbs/head/arc.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/head/arc.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/head/arc.h	2005-08-01 17:36:15.000000000 +0200
@@ -56,9 +56,12 @@
 
 enum arc_side { arc_none = 0, arc_right, arc_top, arc_left, arc_bottom };
 
-
+#ifdef _MSC_VER
+class Arc : public PooledObj { /* an arc, in two list, the trim list and bin */
+    public:
+#else
 struct Arc : public PooledObj { /* an arc, in two list, the trim list and bin */
-
+#endif
     static const int bezier_tag;
     static const int arc_tag;
     static const int tail_tag;
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/head/bezierarc.h inventor/lib/database/src/so/nodes/nurbs/head/bezierarc.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/head/bezierarc.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/head/bezierarc.h	2005-08-01 17:36:15.000000000 +0200
@@ -47,7 +47,12 @@
 
 class Mapdesc;
 
+#ifdef _MSC_VER
+class BezierArc : public PooledObj { /* a bezier arc */
+    public:
+#else
 struct BezierArc : public PooledObj { /* a bezier arc */
+#endif
     REAL *		cpts;		/* control points of arc */
     int			order;		/* order of arc */
     int			stride;		/* REAL distance between points */
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/head/bin.h inventor/lib/database/src/so/nodes/nurbs/head/bin.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/head/bin.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/head/bin.h	2005-08-01 17:36:15.000000000 +0200
@@ -47,7 +47,11 @@
 #include "arc.h"
 #include "defines.h"
 
+#ifdef _MSC_VER
+class Bin { /* a linked list of jordan arcs */
+#else
 struct Bin { /* a linked list of jordan arcs */
+#endif
 private:
     Arc *		head;		/* first arc on list */
     Arc *		current;	/* current arc on list */
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/head/coveandtiler.h inventor/lib/database/src/so/nodes/nurbs/head/coveandtiler.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/head/coveandtiler.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/head/coveandtiler.h	2005-08-01 17:36:15.000000000 +0200
@@ -46,8 +46,13 @@
 #include "trimregion.h"
 
 class Backend;
+#ifdef _MSC_VER
+struct TrimVertex;
+struct GridVertex;
+#else
 class TrimVertex;
 class GridVertex;
+#endif
 class GridTrimVertex;
 
 class CoveAndTiler : virtual public TrimRegion {
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/head/glimports.h inventor/lib/database/src/so/nodes/nurbs/head/glimports.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/head/glimports.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/head/glimports.h	2006-05-09 15:02:04.000000000 +0200
@@ -43,6 +43,7 @@
  */
 
 #include <stdio.h>
+#include <stdlib.h>
 
 #include "mystdlib.h"
 #include "mystdio.h"
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/head/hull.h inventor/lib/database/src/so/nodes/nurbs/head/hull.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/head/hull.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/head/hull.h	2005-08-01 17:36:15.000000000 +0200
@@ -46,7 +46,11 @@
 #include "trimregion.h"
 
 class GridTrimVertex;
+#ifdef _MSC_VER
+struct Gridline;
+#else
 class Gridline;
+#endif
 class Uarray;
 
 class Hull : virtual public TrimRegion {
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/head/knotvector.h inventor/lib/database/src/so/nodes/nurbs/head/knotvector.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/head/knotvector.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/head/knotvector.h	2005-08-01 17:36:15.000000000 +0200
@@ -44,7 +44,12 @@
 
 #include "types.h"
 
+#ifdef _MSC_VER
+class Knotvector { /* a knot vector */
+    public:
+#else
 struct Knotvector { /* a knot vector */
+#endif
 			Knotvector( void );
 			~Knotvector( void );
     void		init( long, long, long, INREAL * );
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/head/pwlarc.h inventor/lib/database/src/so/nodes/nurbs/head/pwlarc.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/head/pwlarc.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/head/pwlarc.h	2005-08-01 17:36:15.000000000 +0200
@@ -45,7 +45,11 @@
 #include "myassert.h"
 #include "nurbsconsts.h"
 
+#ifdef _MSC_VER
+struct TrimVertex;
+#else
 class TrimVertex;
+#endif
 
 struct PwlArc : public PooledObj { /* a piecewise-linear arc */
     TrimVertex *	pts;		/* sample points */
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/head/quilt.h inventor/lib/database/src/so/nodes/nurbs/head/quilt.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/head/quilt.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/head/quilt.h	2005-08-01 17:36:15.000000000 +0200
@@ -67,7 +67,12 @@
 
 typedef Quiltspec *Quiltspec_ptr;
     
+#ifdef _MSC_VER 
+class Quilt : public PooledObj { /* an array of bezier patches */
+    public:
+#else
 struct Quilt : PooledObj { /* an array of bezier patches */
+#endif
     			Quilt( Mapdesc * );
     Mapdesc *		mapdesc;	/* map descriptor */
     REAL *		cpts;		/* control points */
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/head/reader.h inventor/lib/database/src/so/nodes/nurbs/head/reader.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/head/reader.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/head/reader.h	2005-08-01 17:36:15.000000000 +0200
@@ -51,12 +51,19 @@
 struct O_surface;
 struct O_nurbssurface;
 struct O_trim;
+#ifdef _MSC_VER
+class O_pwlcurve;
+#else
 struct O_pwlcurve;
+#endif
 struct O_nurbscurve;
 struct O_curve;
 class  Quilt;
+#ifdef _MSC_VER
+struct TrimVertex;
+#else
 class TrimVertex;
-
+#endif
 
 struct O_curve : public PooledObj {
     union {
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/head/simplemath.h inventor/lib/database/src/so/nodes/nurbs/head/simplemath.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/head/simplemath.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/head/simplemath.h	2006-09-22 09:50:47.000000000 +0200
@@ -1,6 +1,6 @@
 /*
  *
- *  Copyright (C) 2000 Silicon Graphics, Inc.  All Rights Reserved. 
+ *  Copyright (C) 2000 Silicon Graphics, Inc.  All Rights Reserved.
  *
  *  This library is free software; you can redistribute it and/or
  *  modify it under the terms of the GNU Lesser General Public
@@ -18,18 +18,18 @@
  *  otherwise, applies only to this software file.  Patent licenses, if
  *  any, provided herein do not apply to combinations of this program with
  *  other software, or any other product whatsoever.
- * 
+ *
  *  You should have received a copy of the GNU Lesser General Public
  *  License along with this library; if not, write to the Free Software
  *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
  *
  *  Contact information: Silicon Graphics, Inc., 1600 Amphitheatre Pkwy,
  *  Mountain View, CA  94043, or:
- * 
- *  http://www.sgi.com 
- * 
- *  For further information regarding this notice, see: 
- * 
+ *
+ *  http://www.sgi.com
+ *
+ *  For further information regarding this notice, see:
+ *
  *  http://oss.sgi.com/projects/GenInfo/NoticeExplan/
  *
  */
@@ -43,17 +43,24 @@
  */
 
 /* simple inline routines */
+#ifdef WIN32
+# undef min
+# undef max
+#endif
 
-inline int 
+inline int
 max( int x, int y ) { return ( x < y ) ? y : x; }
 
-inline REAL 
+inline REAL
 min( REAL x, REAL y ) { return ( x > y ) ? y : x; }
 
-inline int 
+inline int
 absi( int x ) { return ( x < 0 ) ? -x : x; }
 
-inline REAL 
+#if !defined(WIN32) || (_MSC_VER < 1300)
+inline REAL
 abs( REAL x ) { return ( x < 0.0 ) ? -x : x; }
 
+#endif
+
 #endif /* __glusimplemath_h_ */
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/head/slicer.h inventor/lib/database/src/so/nodes/nurbs/head/slicer.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/head/slicer.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/head/slicer.h	2005-08-01 17:36:15.000000000 +0200
@@ -48,7 +48,11 @@
 
 class Backend;
 class Arc;
+#ifdef _MSC_VER
+struct TrimVertex;
+#else
 class TrimVertex;
+#endif
 
 class Slicer : public CoveAndTiler, public Mesher {
 public:
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/head/subdivider.h inventor/lib/database/src/so/nodes/nurbs/head/subdivider.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/head/subdivider.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/head/subdivider.h	2005-08-01 17:36:15.000000000 +0200
@@ -57,7 +57,11 @@
 class Quilt;
 class Patchlist;
 class Curvelist;
+#ifdef _MSC_VER
+struct JumpBuffer;
+#else
 class JumpBuffer;
+#endif
 
 class Subdivider {
 public:
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/head/trimvertpool.h inventor/lib/database/src/so/nodes/nurbs/head/trimvertpool.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/head/trimvertpool.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/head/trimvertpool.h	2005-08-01 17:36:15.000000000 +0200
@@ -44,11 +44,15 @@
 
 #include "bufpool.h"
 
+#ifdef _MSC_VER
+struct TrimVertex;
+#else
 class TrimVertex;
+#endif
 
 #define INIT_VERTLISTSIZE  200
 
-class TrimVertexPool {
+class INVENTOR_API TrimVertexPool {
 public:
     			TrimVertexPool( void );
     			~TrimVertexPool( void );
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/SoAddPrefix.h inventor/lib/database/src/so/nodes/nurbs/SoAddPrefix.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/SoAddPrefix.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/SoAddPrefix.h	2006-07-17 15:46:47.000000000 +0200
@@ -37,7 +37,8 @@
 #ifndef so__scope_h
 #define so__scope_h
 
-#if defined(__STDC__) || defined(__ANSI_CPP__)
+#include <Inventor/system/SbSystem.h>
+#if defined(__STDC__) || defined(__ANSI_CPP__) || defined(_MSC_VER)
 #define _lib_nurbs(name) _SoNurbs##name
 #else
 #define _lib_nurbs(name) _SoNurbs/**/name
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/SoCurveRender.c++ inventor/lib/database/src/so/nodes/nurbs/SoCurveRender.c++
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/SoCurveRender.c++	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/SoCurveRender.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,7 +51,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <math.h>
 #include <stdlib.h>
 #include "SoAddPrefix.h"
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/nurbs/SoPrimRender.h inventor/lib/database/src/so/nodes/nurbs/SoPrimRender.h
--- /tmp/inventor/lib/database/src/so/nodes/nurbs/SoPrimRender.h	2000-08-15 14:56:22.000000000 +0200
+++ inventor/lib/database/src/so/nodes/nurbs/SoPrimRender.h	2006-07-12 18:01:38.000000000 +0200
@@ -56,7 +56,7 @@
 #ifndef  _SO_NURBS_PRIM_RENDER_
 #define  _SO_NURBS_PRIM_RENDER_
 
-//#include <GL/gl.h>
+//#include OPENGL_GL_H
 #include <math.h>
 #include <stdlib.h>
 #include <Inventor/SbLinear.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/readGIF.h inventor/lib/database/src/so/nodes/readGIF.h
--- /tmp/inventor/lib/database/src/so/nodes/readGIF.h	2003-07-25 21:26:19.000000000 +0200
+++ inventor/lib/database/src/so/nodes/readGIF.h	2005-08-01 17:36:15.000000000 +0200
@@ -25,7 +25,22 @@
 
 
 #include <stdio.h>
+#ifndef WIN32
 #include <X11/Xlib.h>
+#else
+/*
+ * Data structure used by color operations
+ */
+typedef struct {
+        unsigned long pixel;
+        unsigned short red, green, blue;
+        char flags;  /* do_red, do_green, do_blue */
+        char pad;
+} XColor;
+#define DoRed                   (1<<0)
+#define DoGreen                 (1<<1)
+#define DoBlue                  (1<<2)
+#endif
 
 
 /* Public GIF information */
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoAnnotation.c++ inventor/lib/database/src/so/nodes/SoAnnotation.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoAnnotation.c++	2000-08-15 14:56:19.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoAnnotation.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,7 +51,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/elements/SoCacheElement.h>
 #include <Inventor/nodes/SoAnnotation.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoAsciiText.c++ inventor/lib/database/src/so/nodes/SoAsciiText.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoAsciiText.c++	2001-06-23 00:06:57.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoAsciiText.c++	2007-04-05 10:23:49.000000000 +0200
@@ -52,8 +52,9 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
-#include <GL/glu.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
+#include OPENGL_GLU_H
 #include <Inventor/SbBox.h>
 #include <Inventor/SoPrimitiveVertex.h>
 #include <Inventor/actions/SoCallbackAction.h>
@@ -357,11 +358,11 @@
 
     if (tobj == NULL) {
 	tobj = (gluTESSELATOR *)gluNewTess();
-	gluTessCallback(tobj, (GLenum)GLU_BEGIN, (void (*)())glBegin);
-	gluTessCallback(tobj, (GLenum)GLU_END, (void (*)())glEnd);
-	gluTessCallback(tobj, (GLenum)GLU_VERTEX, (void (*)())glVertex2fv);
+	gluTessCallback(tobj, (GLenum)GLU_BEGIN, (OPENGL_CALLBACKFUNC)glBegin);
+	gluTessCallback(tobj, (GLenum)GLU_END, (OPENGL_CALLBACKFUNC)glEnd);
+	gluTessCallback(tobj, (GLenum)GLU_VERTEX, (OPENGL_CALLBACKFUNC)glVertex2fv);
 	gluTessCallback(tobj, (GLenum)GLU_ERROR,
-			(void (*)())MyOutlineFontCache::errorCB);
+			(OPENGL_CALLBACKFUNC)MyOutlineFontCache::errorCB);
     }
 
     // See if texturing is enabled
@@ -468,10 +469,10 @@
     const SbVec2f &boxMin = outlineBox.getMin();
     const SbVec2f &boxMax = outlineBox.getMax();
 		     
-    SbVec3f min(boxMin[0], boxMin[1], 0);
-    SbVec3f max(boxMax[0], boxMax[1], 0);
-    box.extendBy(min);
-    box.extendBy(max);
+    SbVec3f theMin(boxMin[0], boxMin[1], 0);
+    SbVec3f theMax(boxMax[0], boxMax[1], 0);
+    box.extendBy(theMin);
+    box.extendBy(theMax);
 }
 
 ////////////////////////////////////////////////////////////////////////
@@ -766,11 +767,11 @@
 
     if (tobj == NULL) {
 	tobj = (gluTESSELATOR *)gluNewTess();
-	gluTessCallback(tobj, (GLenum)GLU_BEGIN, (void (*)())SoAsciiText::beginCB);
-	gluTessCallback(tobj, (GLenum)GLU_END, (void (*)())SoAsciiText::endCB);
-	gluTessCallback(tobj, (GLenum)GLU_VERTEX, (void (*)())SoAsciiText::vtxCB);
+	gluTessCallback(tobj, (GLenum)GLU_BEGIN, (OPENGL_CALLBACKFUNC)SoAsciiText::beginCB);
+	gluTessCallback(tobj, (GLenum)GLU_END, (OPENGL_CALLBACKFUNC)SoAsciiText::endCB);
+	gluTessCallback(tobj, (GLenum)GLU_VERTEX, (OPENGL_CALLBACKFUNC)SoAsciiText::vtxCB);
 	gluTessCallback(tobj, (GLenum)GLU_ERROR,
-			(void (*)())MyOutlineFontCache::errorCB);
+			(OPENGL_CALLBACKFUNC)MyOutlineFontCache::errorCB);
     }
 
     genWhichVertex = 0;
@@ -1044,7 +1045,7 @@
     addElement(state->getConstElement(
 	SoFontNameElement::getClassStackIndex()));
     if (font == SoFontNameElement::getDefault()) {
-	font = SbName("Utopia-Regular");
+	font = SbName(IV_DEFAULT_FONTNAME);
     }
     
     float uems;
@@ -1115,19 +1116,19 @@
 
     // If error creating font:
     if (fontId == 0) {
-	// Try Utopia-Regular, unless we just did!
-	if (font != SbName("Utopia-Regular")) {
+	// Try IV_DEFAULT_FONTNAME, unless we just did!
+	if (font != SbName(IV_DEFAULT_FONTNAME)) {
 #ifdef DEBUG
 	    SoDebugError::post("SoAsciiText::getFont",
-		      "Couldn't find font %s, replacing with Utopia-Regular",
-		       font.getString());
+		      "Couldn't find font %s, replacing with %s",
+		       font.getString(), IV_DEFAULT_FONTNAME);
 #endif
-	    fontId = flCreateFont((GLubyte *)"Utopia-Regular", m, 0, NULL);
+	    fontId = flCreateFont((GLubyte *)IV_DEFAULT_FONTNAME, m, 0, NULL);
 	}
 	if (fontId == 0) {
 #ifdef DEBUG
 	    SoDebugError::post("SoAsciiText::getFont",
-			       "Couldn't find font Utopia-Regular!");
+			       "Couldn't find font %s!", IV_DEFAULT_FONTNAME);
 #endif
 	    return;
 	}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoCamera.c++ inventor/lib/database/src/so/nodes/SoCamera.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoCamera.c++	2000-08-15 14:56:19.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoCamera.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,7 +51,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/actions/SoCallbackAction.h>
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/actions/SoGetBoundingBoxAction.h>
@@ -71,6 +72,10 @@
 #include <Inventor/nodes/SoCamera.h>
 #include <stdlib.h>
 
+#ifdef WIN32
+#define drand48() (((double)rand())/double(RAND_MAX))
+#endif
+
 SO_NODE_ABSTRACT_SOURCE(SoCamera);
 
 ////////////////////////////////////////////////////////////////////////
@@ -723,6 +728,9 @@
 
     SoViewVolumeElement::set(state, this, viewVol);
     SoViewingMatrixElement::set(state, this, viewMat);
+    
+    // 2004-05-25 Felix: Set focal distance element
+    SoFocalDistanceElement::set(state, this, focalDistance.getValue());
 }
 
 ////////////////////////////////////////////////////////////////////////
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoCone.pp inventor/lib/database/src/so/nodes/SoCone.pp
--- /tmp/inventor/lib/database/src/so/nodes/SoCone.pp	2000-08-15 14:56:19.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoCone.pp	2006-07-17 15:46:47.000000000 +0200
@@ -61,7 +61,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/SbBox.h>
 #include <Inventor/SoPickedPoint.h>
 #include <Inventor/SoPrimitiveVertex.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoCube.pp inventor/lib/database/src/so/nodes/SoCube.pp
--- /tmp/inventor/lib/database/src/so/nodes/SoCube.pp	2000-08-15 14:56:19.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoCube.pp	2006-07-17 15:46:47.000000000 +0200
@@ -54,7 +54,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/SbBox.h>
 #include <Inventor/SoPickedPoint.h>
 #include <Inventor/SoPrimitiveVertex.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoCylinder.pp inventor/lib/database/src/so/nodes/SoCylinder.pp
--- /tmp/inventor/lib/database/src/so/nodes/SoCylinder.pp	2000-08-15 14:56:19.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoCylinder.pp	2006-07-17 15:46:47.000000000 +0200
@@ -54,7 +54,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/SbBox.h>
 #include <Inventor/SoPickedPoint.h>
 #include <Inventor/SoPrimitiveVertex.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoDirectionalLight.c++ inventor/lib/database/src/so/nodes/SoDirectionalLight.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoDirectionalLight.c++	2000-08-15 14:56:19.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoDirectionalLight.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,7 +51,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/elements/SoGLLightIdElement.h>
 #include <Inventor/nodes/SoDirectionalLight.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoEnvironment.c++ inventor/lib/database/src/so/nodes/SoEnvironment.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoEnvironment.c++	2000-08-15 14:56:19.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoEnvironment.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,7 +51,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/actions/SoCallbackAction.h>
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/elements/SoLightAttenuationElement.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoFaceSet.pp inventor/lib/database/src/so/nodes/SoFaceSet.pp
--- /tmp/inventor/lib/database/src/so/nodes/SoFaceSet.pp	2000-08-15 14:56:20.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoFaceSet.pp	2007-01-16 09:27:04.000000000 +0100
@@ -56,7 +56,8 @@
 
 
 ///////////////////////////////////////////////////////////////////////////
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/SoPickedPoint.h>
 #include <Inventor/SoPrimitiveVertex.h>
 #include <Inventor/actions/SoGLRenderAction.h>
@@ -134,15 +135,19 @@
     // Get ShapeStyleElement
     const SoShapeStyleElement *shapeStyle = SoShapeStyleElement::get(state);
 
+    SoVertexProperty *vp = (SoVertexProperty *)vertexProperty.getValue();
+ 
     // First see if the object is visible and should be rendered now:
     if (shapeStyle->mightNotRender()) {
-        if (! shouldGLRender(action))
+        if (vpCache.mightNeedSomethingFromState(shapeStyle)) {
+	    vpCache.fillInColorAndTranspAvail(vp, state);
+	}
+	if (! shouldGLRender(action))
             return;
     }
 
     if (vpCache.mightNeedSomethingFromState(shapeStyle)) {
 
-	SoVertexProperty *vp = (SoVertexProperty *)vertexProperty.getValue();
         vpCache.fillInCache(vp,  state);
 
 	// Set up numTris/Quads/Faces and count vertices if necessary
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoFontStyle.c++ inventor/lib/database/src/so/nodes/SoFontStyle.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoFontStyle.c++	2000-08-15 14:56:20.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoFontStyle.c++	2007-04-05 10:23:49.000000000 +0200
@@ -62,6 +62,29 @@
 
 SO_NODE_SOURCE(SoFontStyle);
 
+#if defined(WIN32)
+// Use font file names
+char *SoFontStyle::fontList[][4] = 
+                    {
+                        { "Times", "Timesbd", 
+                          "Timesi", "Timesbi" }, 
+                        { "Arial", "Arialbd", 
+                          "Ariali", "Arialbi" }, 
+                        { "Cour", "Courbd", 
+                          "Couri", "Courbi" }, 
+                    };
+#elif defined(__APPLE__)
+// Use font postscript names
+char *SoFontStyle::fontList[][4] = 
+                    {
+                        { "Times-Roman", "Times-Bold", 
+                          "Times-Italic", "Times-BoldItalic" }, 
+                        { "Helvetica", "Helvetica-Bold", 
+                          "Helvetica", "Helvetica-Bold" }, 
+                        { "Courier", "Courier-Bold", 
+                          "Courier", "Courier-Bold" }, 
+                    };
+#else
 char *SoFontStyle::fontList[][4] = 
 		    {
 			{ "Utopia-Regular", "Utopia-Bold", 
@@ -71,6 +94,7 @@
 			{ "Courier", "Courier-Bold", 
 			  "Courier-Oblique", "Courier-BoldOblique" }, 
 		    };
+#endif
 
 ////////////////////////////////////////////////////////////////////////
 //
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoIndexedFaceSet.pp inventor/lib/database/src/so/nodes/SoIndexedFaceSet.pp
--- /tmp/inventor/lib/database/src/so/nodes/SoIndexedFaceSet.pp	2000-08-15 14:56:20.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoIndexedFaceSet.pp	2007-01-16 09:27:04.000000000 +0100
@@ -54,7 +54,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/SoPickedPoint.h>
 #include <Inventor/SoPrimitiveVertex.h>
 #include <Inventor/actions/SoGLRenderAction.h>
@@ -133,9 +134,14 @@
     // Get ShapeStyleElement
     const SoShapeStyleElement *shapeStyle = SoShapeStyleElement::get(state);
 
+    SoVertexProperty *vp = (SoVertexProperty *)vertexProperty.getValue();
+ 
     // First see if the object is visible and should be rendered now:
     if (shapeStyle->mightNotRender()) {
-        if (! shouldGLRender(action))
+        if (vpCache.mightNeedSomethingFromState(shapeStyle)) {
+	    vpCache.fillInColorAndTranspAvail(vp, state);
+	}
+	if (! shouldGLRender(action))
             return;
     }
 
@@ -160,8 +166,7 @@
 	int numPolys = numTris+numQuads+numFaces;
 	if (numPolys == 0 ) return;
 
-	SoVertexProperty *vp = (SoVertexProperty *)vertexProperty.getValue();
-        vpCache.fillInCache(vp, state);
+	vpCache.fillInCache(vp, state);
 	
         if (vpCache.shouldGenerateNormals(shapeStyle)) {
 	    // See if there is a valid normal cache. If so, use it:
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoIndexedLineSet.pp inventor/lib/database/src/so/nodes/SoIndexedLineSet.pp
--- /tmp/inventor/lib/database/src/so/nodes/SoIndexedLineSet.pp	2000-08-23 07:10:08.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoIndexedLineSet.pp	2007-01-16 09:27:04.000000000 +0100
@@ -54,7 +54,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/SoPrimitiveVertex.h>
 #include <Inventor/SoPickedPoint.h>
 #include <Inventor/actions/SoGLRenderAction.h>
@@ -554,9 +555,14 @@
     SoShapeStyleElement *shapeStyle = 
 	(SoShapeStyleElement*)SoShapeStyleElement::get(state);
 
+    SoVertexProperty *vp = (SoVertexProperty *)vertexProperty.getValue();
+ 
     // First see if the object is visible and should be rendered now:
     if (shapeStyle->mightNotRender()) {
-        if (! shouldGLRender(action))
+        if (vpCache.mightNeedSomethingFromState(shapeStyle)) {
+	    vpCache.fillInColorAndTranspAvail(vp, state);
+	}
+	if (! shouldGLRender(action))
             return;
     }
 
@@ -566,8 +572,7 @@
 	// normals are needed.
 	state->push();
 
-	SoVertexProperty *vp = (SoVertexProperty *)vertexProperty.getValue();
-        vpCache.fillInCache(vp, state);
+	vpCache.fillInCache(vp, state);
 
 	if (vpCache.shouldGenerateNormals(shapeStyle)) {
 	    // turn off lighting
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoIndexedNurbsCurve.c++ inventor/lib/database/src/so/nodes/SoIndexedNurbsCurve.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoIndexedNurbsCurve.c++	2000-08-23 00:12:40.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoIndexedNurbsCurve.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,7 +51,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/SbBox.h>
 #include <Inventor/SoDB.h>
 #include <Inventor/actions/SoGLRenderAction.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoIndexedNurbsSurface.c++ inventor/lib/database/src/so/nodes/SoIndexedNurbsSurface.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoIndexedNurbsSurface.c++	2000-08-15 14:56:20.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoIndexedNurbsSurface.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,8 +51,9 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
-#include <GL/glu.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
+#include OPENGL_GLU_H
 #include <Inventor/SbBox.h>
 #include <Inventor/SoDB.h>
 #include <Inventor/actions/SoGLRenderAction.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoIndexedShape.c++ inventor/lib/database/src/so/nodes/SoIndexedShape.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoIndexedShape.c++	2001-09-25 02:45:41.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoIndexedShape.c++	2005-08-01 17:36:15.000000000 +0200
@@ -335,6 +335,9 @@
 	    break;
 
 	  case SoMaterialBindingElement::PER_VERTEX:
+#ifdef _MSC_VER
+	    {
+#endif
 	    // The annoying case:
 	    colorI = allocateSequentialWithHoles();
 #ifdef DEBUG
@@ -343,6 +346,9 @@
 	    }
 	    bindingString = "PER_VERTEX";
 #endif
+#ifdef _MSC_VER
+	    }
+#endif
 	    break;
 
 	  case SoMaterialBindingElement::PER_PART_INDEXED:
@@ -465,6 +471,9 @@
 	    break;
 
 	  case SoNormalBindingElement::PER_VERTEX:
+#ifdef _MSC_VER
+            {
+#endif
 	    // The annoying case:
 	    normalI = allocateSequentialWithHoles();
 #ifdef DEBUG
@@ -473,6 +482,9 @@
 	    }
 	    bindingString = "PER_VERTEX";
 #endif
+#ifdef _MSC_VER
+            }
+#endif
 	    break;
 
 	  case SoNormalBindingElement::PER_PART_INDEXED:
@@ -575,6 +587,9 @@
 #endif
 	switch (vpCache.getTexCoordBinding()) {
 	  case SoTextureCoordinateBindingElement::PER_VERTEX:
+#ifdef _MSC_VER
+            {
+#endif
 	    // The annoying case:
 	    texCoordI = allocateSequentialWithHoles();
 #ifdef DEBUG
@@ -583,6 +598,9 @@
 	    }
 	    bindingString = "PER_VERTEX";
 #endif
+#ifdef _MSC_VER
+            }
+#endif
 	    break;
 
 	  case SoTextureCoordinateBindingElement::PER_VERTEX_INDEXED:
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoIndexedTriangleStripSet.pp inventor/lib/database/src/so/nodes/SoIndexedTriangleStripSet.pp
--- /tmp/inventor/lib/database/src/so/nodes/SoIndexedTriangleStripSet.pp	2000-08-15 14:56:20.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoIndexedTriangleStripSet.pp	2007-01-16 09:27:04.000000000 +0100
@@ -54,7 +54,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/SoPickedPoint.h>
 #include <Inventor/SoPrimitiveVertex.h>
 #include <Inventor/actions/SoGLRenderAction.h>
@@ -682,15 +683,19 @@
     // Get ShapeStyleElement
     const SoShapeStyleElement *shapeStyle = SoShapeStyleElement::get(state);
 
+    SoVertexProperty *vp = (SoVertexProperty *)vertexProperty.getValue();
+ 
     // First see if the object is visible and should be rendered now:
     if (shapeStyle->mightNotRender()) {
-        if (! shouldGLRender(action))
+        if (vpCache.mightNeedSomethingFromState(shapeStyle)) {
+	    vpCache.fillInColorAndTranspAvail(vp, state);
+	}
+	if (! shouldGLRender(action))
             return;
     }
 
     if (vpCache.mightNeedSomethingFromState(shapeStyle)) {
-	SoVertexProperty *vp = (SoVertexProperty *)vertexProperty.getValue();
-        vpCache.fillInCache(vp, state);
+	vpCache.fillInCache(vp, state);
 	
 	// Setup numVertices, numStrips and numTriangles:
 	if (numStrips < 0)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoLineSet.pp inventor/lib/database/src/so/nodes/SoLineSet.pp
--- /tmp/inventor/lib/database/src/so/nodes/SoLineSet.pp	2000-08-15 14:56:20.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoLineSet.pp	2007-01-16 09:27:04.000000000 +0100
@@ -54,7 +54,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/SoPickedPoint.h>
 #include <Inventor/SoPrimitiveVertex.h>
 #include <Inventor/actions/SoGLRenderAction.h>
@@ -516,17 +517,21 @@
     // Get ShapeStyleElement
     const SoShapeStyleElement *shapeStyle = SoShapeStyleElement::get(state);
 
+    SoVertexProperty *vp = (SoVertexProperty *)vertexProperty.getValue();
+ 
     // First see if the object is visible and should be rendered now:
     if (shapeStyle->mightNotRender()) {
-        if (! shouldGLRender(action))
+        if (vpCache.mightNeedSomethingFromState(shapeStyle)) {
+	    vpCache.fillInColorAndTranspAvail(vp, state);
+	}
+	if (! shouldGLRender(action))
             return;
     }
 
     if (vpCache.mightNeedSomethingFromState(shapeStyle)) {
 	// push state, in case we need to turn off lighting:
 	state->push();
-	SoVertexProperty *vp = (SoVertexProperty *)vertexProperty.getValue();
-        vpCache.fillInCache(vp, state);
+	vpCache.fillInCache(vp, state);
 
        if (vpCache.shouldGenerateNormals(shapeStyle)) {
 	    // turn off lighting
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoLocateHighlight.c++ inventor/lib/database/src/so/nodes/SoLocateHighlight.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoLocateHighlight.c++	2000-08-15 14:56:20.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoLocateHighlight.c++	2007-01-30 10:37:13.000000000 +0100
@@ -52,7 +52,11 @@
  */
 
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
+#if defined(__APPLE__) && !defined(APPLE_GLX)
+#include <AGL/agl.h>
+#endif
 
 #include <Inventor/SoPath.h>
 #include <Inventor/SoPickedPoint.h>
@@ -406,7 +410,14 @@
 	return;
     
     // set the current window
+#ifdef WIN32
+    wglMakeCurrent((HDC)display, (HGLRC)context);
+#elif defined(__APPLE__) && !defined(APPLE_GLX)
+    // (AGLDrawable)window
+    aglSetCurrentContext((AGLContext)context);
+#else
     glXMakeCurrent(display, window, context);
+#endif
     
     // render into the front buffer (save the current buffering type)
     GLint whichBuffer;
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoNurbsCurve.c++ inventor/lib/database/src/so/nodes/SoNurbsCurve.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoNurbsCurve.c++	2000-08-15 14:56:20.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoNurbsCurve.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,7 +51,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/SbBox.h>
 #include <Inventor/SoDB.h>
 #include <Inventor/actions/SoGLRenderAction.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoNurbsSurface.c++ inventor/lib/database/src/so/nodes/SoNurbsSurface.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoNurbsSurface.c++	2000-08-15 14:56:20.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoNurbsSurface.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,8 +51,9 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
-#include <GL/glu.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
+#include OPENGL_GLU_H
 #include <math.h>
 #include <Inventor/SbBox.h>
 #include <Inventor/SoDB.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoPointLight.c++ inventor/lib/database/src/so/nodes/SoPointLight.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoPointLight.c++	2000-08-15 14:56:20.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoPointLight.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,7 +51,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/elements/SoGLLightIdElement.h>
 #include <Inventor/elements/SoLightAttenuationElement.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoPointSet.pp inventor/lib/database/src/so/nodes/SoPointSet.pp
--- /tmp/inventor/lib/database/src/so/nodes/SoPointSet.pp	2000-08-15 14:56:20.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoPointSet.pp	2006-07-17 15:46:47.000000000 +0200
@@ -54,7 +54,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/SoPickedPoint.h>
 #include <Inventor/SoPrimitiveVertex.h>
 #include <Inventor/actions/SoGLRenderAction.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoQuadMesh.pp inventor/lib/database/src/so/nodes/SoQuadMesh.pp
--- /tmp/inventor/lib/database/src/so/nodes/SoQuadMesh.pp	2000-08-15 14:56:20.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoQuadMesh.pp	2007-01-16 09:27:04.000000000 +0100
@@ -54,7 +54,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/SoPickedPoint.h>
 #include <Inventor/SoPrimitiveVertex.h>
 #include <Inventor/actions/SoGLRenderAction.h>
@@ -516,15 +517,19 @@
     // Get ShapeStyleElement
     const SoShapeStyleElement *shapeStyle = SoShapeStyleElement::get(state);
 
+    SoVertexProperty *vp = (SoVertexProperty *)vertexProperty.getValue();
+ 
     // First see if the object is visible and should be rendered now:
     if (shapeStyle->mightNotRender()) {
-        if (! shouldGLRender(action))
+        if (vpCache.mightNeedSomethingFromState(shapeStyle)) {
+	    vpCache.fillInColorAndTranspAvail(vp, state);
+	}
+	if (! shouldGLRender(action))
             return;
     }
 
     if (vpCache.mightNeedSomethingFromState(shapeStyle)) {
-	SoVertexProperty *vp = (SoVertexProperty *)vertexProperty.getValue();
-        vpCache.fillInCache(vp, state);
+	vpCache.fillInCache(vp, state);
 
 	totalNumVertices = verticesPerColumn.getValue()*
 		verticesPerRow.getValue();
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoQuadSet.c++ inventor/lib/database/src/so/nodes/SoQuadSet.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoQuadSet.c++	2000-08-15 14:56:20.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoQuadSet.c++	2006-07-17 15:46:47.000000000 +0200
@@ -53,7 +53,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/SoPickedPoint.h>
 #include <Inventor/SoPrimitiveVertex.h>
 #include <Inventor/actions/SoGLRenderAction.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoShape.c++ inventor/lib/database/src/so/nodes/SoShape.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoShape.c++	2000-12-14 07:20:53.000000000 +0100
+++ inventor/lib/database/src/so/nodes/SoShape.c++	2006-07-17 15:46:47.000000000 +0200
@@ -52,8 +52,9 @@
  */
 
 
-#include <GL/gl.h>
-#include <GL/glu.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
+#include OPENGL_GLU_H
 #include <Inventor/SbLinear.h>
 #include <Inventor/SoDB.h>
 #include <Inventor/SoPickedPoint.h>
@@ -167,6 +168,10 @@
 
     computeBBox(action, bbox, center);
 
+    // 2004-09-01 Felix: Ignore bounding box and center if volume is empty
+    if(bbox.isEmpty())
+        return;
+
     action->extendBy(bbox);
 
     // Make sure the center is first transformed by the current local
@@ -878,13 +883,13 @@
 	if (tobj == NULL) {
 	    tobj = gluNewTess();
 	    gluTessCallback(tobj, (GLenum)GLU_BEGIN,
-			    (void (*)())SoShape::beginCB);
+			    (OPENGL_CALLBACKFUNC)SoShape::beginCB);
 	    gluTessCallback(tobj, (GLenum)GLU_END, 
-			    (void (*)())SoShape::endCB);
+			    (OPENGL_CALLBACKFUNC)SoShape::endCB);
 	    gluTessCallback(tobj, (GLenum)GLU_VERTEX, 
-			    (void (*)())SoShape::vtxCB);
+			    (OPENGL_CALLBACKFUNC)SoShape::vtxCB);
 	    gluTessCallback(tobj, (GLenum)GLU_ERROR,
-			    (void (*)())SoShape::errorCB);
+			    (OPENGL_CALLBACKFUNC)SoShape::errorCB);
 	}
 #ifdef GLU_VERSION_1_2
 	gluTessBeginPolygon(tobj, NULL);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoSphere.pp inventor/lib/database/src/so/nodes/SoSphere.pp
--- /tmp/inventor/lib/database/src/so/nodes/SoSphere.pp	2000-08-15 14:56:20.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoSphere.pp	2006-07-17 15:46:47.000000000 +0200
@@ -54,7 +54,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/SbBox.h>
 #include <Inventor/SoPickedPoint.h>
 #include <Inventor/SoPrimitiveVertex.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoSpotLight.c++ inventor/lib/database/src/so/nodes/SoSpotLight.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoSpotLight.c++	2000-08-15 14:56:20.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoSpotLight.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,7 +51,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/elements/SoGLLightIdElement.h>
 #include <Inventor/elements/SoLightAttenuationElement.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoText2.c++ inventor/lib/database/src/so/nodes/SoText2.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoText2.c++	2001-09-25 02:45:41.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoText2.c++	2007-04-05 10:23:49.000000000 +0200
@@ -50,10 +50,10 @@
  ______________  S I L I C O N   G R A P H I C S   I N C .  ____________
  _______________________________________________________________________
  */
-// Irix 6 implements i18n, so a different version of the source is used here:
-#ifdef IRIX_6
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+
+#include OPENGL_GL_H
 #include <Inventor/SbBox.h>
 #include <Inventor/SoPickedPoint.h>
 #include <Inventor/actions/SoCallbackAction.h>
@@ -76,8 +76,6 @@
 #include <Inventor/errors/SoDebugError.h>
 #include <Inventor/misc/SoState.h>
 #include <Inventor/nodes/SoText2.h>
-
-// 6.2 requires flclient.h, iconv.h for UTF->UCS conversion
 #include <flclient.h>
 #include <math.h>
 #include <iconv.h>
@@ -778,7 +776,11 @@
 	size_t outbytes = 2*inbytes+2;
 	char* output = (char*)UCSStrings[i];
     
+#if defined(WIN32) || defined(__APPLE__)
+	if ((iconv(conversionCode, const_cast<const char**>(&input), &inbytes, &output, &outbytes) == (size_t)-1)){
+#else
 	if ((iconv(conversionCode, &input, &inbytes, &output, &outbytes) == (size_t)-1)){
+#endif
 #ifdef DEBUG
 	    SoDebugError::post("SoBitmapFontCache::convertToUCS", 
 		"Error converting text to UCS-2");
@@ -967,7 +969,7 @@
     addElement(state->getConstElement(
 	SoFontNameElement::getClassStackIndex()));
     if (fontName == SoFontNameElement::getDefault()) {
-	fontName = SbName("Utopia-Regular");
+	fontName = SbName(IV_DEFAULT_FONTNAME);
     }
     const SbViewportRegion &vpr = SoViewportRegionElement::get(state);
     addElement(state->getConstElement(
@@ -981,20 +983,20 @@
  
 
     if (fontNumList == NULL) {
-	// Try Utopia-Regular, unless we just did!
-	if (fontName != SbName("Utopia-Regular")) {
+	// Try IV_DEFAULT_FONTNAME, unless we just did!
+	if (fontName != SbName(IV_DEFAULT_FONTNAME)) {
 #ifdef DEBUG
 	    SoDebugError::post("SoText2::getFont",
-		      "Couldn't find font %s, replacing with Utopia-Regular",
-		       fontName.getString());
+		      "Couldn't find font %s, replacing with %s",
+		       fontName.getString(), IV_DEFAULT_FONTNAME);
 #endif
-	    fontNumList = createUniFontList("Utopia-Regular", fontSize);
+	    fontNumList = createUniFontList(IV_DEFAULT_FONTNAME, fontSize);
 	
 	}
 	if (fontNumList == NULL) {
 #ifdef DEBUG
 	    SoDebugError::post("SoText3::getFont",
-			       "Couldn't find font Utopia-Regular!");
+			       "Couldn't find font %s!", IV_DEFAULT_FONTNAME);
 #endif
 	    numChars = 0;
 	}
@@ -1383,1096 +1385,3 @@
 {
     flFreeBitmap((FLbitmap*)value);    
 } 
-
-/////////////////////////////////////////////////////////////////////////
-#else /*IRIX_6*/
-#include <GL/gl.h>
-#include <Inventor/SbBox.h>
-#include <Inventor/SoPickedPoint.h>
-#include <Inventor/actions/SoCallbackAction.h>
-#include <Inventor/actions/SoGLRenderAction.h>
-#include <Inventor/actions/SoRayPickAction.h>
-#include <Inventor/bundles/SoMaterialBundle.h>
-#include <Inventor/caches/SoCache.h>
-#include <Inventor/details/SoTextDetail.h>
-#include <Inventor/elements/SoCacheElement.h>
-#include <Inventor/elements/SoFontNameElement.h>
-#include <Inventor/elements/SoFontSizeElement.h>
-#include <Inventor/elements/SoGLCacheContextElement.h>
-#include <Inventor/elements/SoGLTextureEnabledElement.h>
-#include <Inventor/elements/SoLightModelElement.h>
-#include <Inventor/elements/SoMaterialBindingElement.h>
-#include <Inventor/elements/SoModelMatrixElement.h>
-#include <Inventor/elements/SoProjectionMatrixElement.h>
-#include <Inventor/elements/SoViewingMatrixElement.h>
-#include <Inventor/elements/SoViewportRegionElement.h>
-#include <Inventor/errors/SoDebugError.h>
-#include <Inventor/misc/SoState.h>
-#include <Inventor/nodes/SoText2.h>
-
-#include <flclient.h>
-#include <math.h>
-
-// An internal class that makes life easier:
-
-// This very specialized cache class is used to cache bitmaps and GL
-// display lists containing bitmaps.  It is strange because it doesn't
-// use the normal list of elements used to determine validity, etc,
-// and knows exactly which elements it depends on.
-
-class SoBitmapFontCache : public SoCache
-{
-  public:
-    // Return a font (either a new one or an old one) that is valid
-    // for the given state.
-    static SoBitmapFontCache *	getFont(SoState *state, SbBool forRender);
-
-    // Checks to see if this font is valid
-    SbBool		isValid(SoState *state) const;
-
-    // Use this when rendering to decide if this cache is valid (it
-    // checks the GL cache context in addition to other elements)
-    SbBool		isRenderValid(SoState *state) const;
-    
-    // Set up for GL rendering:
-    void	setupToRender(SoState *state);
-
-    // Returns the amount the current raster position will be advanced
-    // after drawing the given character.
-    SbVec3f		getCharOffset(char c);
-
-    // Get the pixel-space bounding box of a given character.
-    void		getCharBbox(char c, SbBox3f &box);
-
-    // Gets the width (in pixels) of the given string
-    float		getWidth(const SbString &str);
-
-    // Gets the height of the font, in pixels
-    float		getHeight();
-
-    // Draws the given string
-    void		drawString(const SbString &string);
-
-    // Draws the given character (using GL)
-    void		drawCharacter(char c);
-
-  protected:
-    // Free up display lists before being deleted
-    virtual void	destroy(SoState *state);
-
-  private:
-    // Constructor.
-    SoBitmapFontCache(SoState *state);
-
-    // Destructor
-    virtual ~SoBitmapFontCache();
-
-    // Returns TRUE if this font cache has a display list for the
-    // given character.  It will try to build a display list, if it
-    // can.
-    SbBool	hasDisplayList(const char c);
-
-    // Renders an entire string by using the GL callList() function.
-    void	callLists(const SbString &string);
-
-    const FLbitmap *getBitmap(unsigned char c);
-
-    // Static list of all fonts.  OPTIMIZATION:  If there turn out to
-    // be applications that use lots of fonts, we could change this
-    // list into a dictionary keyed off the font name.
-    static SbPList	*fonts;
-
-    int		numChars;  // Number of characters in this font
-
-    SoGLDisplayList *list;
-    SbBool	*listFlags;// Flag for each character-- have we built
-			   // GL display list yet?
-    FLbitmap	**bitmaps; // Cached bitmaps for each character.  NULL
-			   // if bitmap hasn't been fetched yet.
-    
-    // This flag will be true if there is another cache open (if
-    // building GL display lists for render caching, that means we
-    // can't also build display lists).
-    SbBool	otherOpen;
-
-    // And some font library stuff:
-    static FLcontext	flContext;
-    FLfontNumber	fontId;
-};
-    
-SO_NODE_SOURCE(SoText2);
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Constructor
-//
-// Use: public
-
-SoText2::SoText2()
-//
-////////////////////////////////////////////////////////////////////////
-{
-    SO_NODE_CONSTRUCTOR(SoText2);
-
-    SO_NODE_ADD_FIELD(string,	(""));
-    SO_NODE_ADD_FIELD(spacing,	(1.));
-    SO_NODE_ADD_FIELD(justification,	(LEFT));
-
-    // Set up static info for enumerated type field
-    SO_NODE_DEFINE_ENUM_VALUE(Justification, LEFT);
-    SO_NODE_DEFINE_ENUM_VALUE(Justification, RIGHT);
-    SO_NODE_DEFINE_ENUM_VALUE(Justification, CENTER);
-
-    // Set up info in enumerated type field
-    SO_NODE_SET_SF_ENUM_TYPE(justification, Justification);
-
-    isBuiltIn = TRUE;
-    myFont = NULL;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Destructor
-//
-// Use: private
-
-SoText2::~SoText2()
-//
-////////////////////////////////////////////////////////////////////////
-{
-    if (myFont != NULL) myFont->unref();
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Static helper routine; given a vector in object space, a
-//    transformation matrix to screen (normalized-device coordinate)
-//    space, and a viewportRegion, returns the 2D pixel coordinates of
-//    the vector (relative to the origin of the viewport).  This
-//    actually returns a 3D vector; the z value is just the NDC z value.
-//
-// Use: internal, static
-
-static SbVec3f
-fromObjectSpace(const SbVec3f &vector, const SbMatrix &matrix,
-		const SbViewportRegion &vpr)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    // First, transform to NDC (-1 to 1 in viewport)
-    SbVec3f ndc;
-    matrix.multVecMatrix(vector, ndc);
-
-    // And do the viewport transformation:
-    SbVec2s vpSize = vpr.getViewportSizePixels();
-    SbVec3f result;
-    result[0] = (ndc[0]+1.0)*vpSize[0]/2.0;
-    result[1] = (ndc[1]+1.0)*vpSize[1]/2.0;
-    // Leave the z coordinate alone
-    result[2] = ndc[2];
-
-    return result;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Static helper routine; given 2D pixel coordinates, a
-//    transformation matrix to object space, and a viewportRegion,
-//    return the object-space point (assuming the 2D pixel is at z
-//    coordinate 0).
-//
-// Use: internal, static
-
-static SbVec3f
-toObjectSpace(const SbVec3f &pixel, const SbMatrix &matrix,
-	      const SbViewportRegion &vpr)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    // Viewport transformation, to normalized device coordinates:
-    SbVec2s vpSize = vpr.getViewportSizePixels();
-    SbVec3f ndc;
-    ndc[0] = pixel[0]*2.0/vpSize[0] - 1.0;
-    ndc[1] = pixel[1]*2.0/vpSize[1] - 1.0;
-    ndc[2] = pixel[2];
-
-    SbVec3f result;
-    matrix.multVecMatrix(ndc, result);
-
-    return result;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    render the text with the current font
-//
-// Use: protected
-
-void
-SoText2::GLRender(SoGLRenderAction *action)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    if (!shouldGLRender(action)) return;
-
-    SoState *state = action->getState();
-
-    state->push();
-
-    // Get a font cache we can pull stuff out of
-    if (myFont != NULL) {
-	if (!myFont->isRenderValid(state)) {
-	    myFont->unref(state);
-	    myFont = NULL;
-	}
-    }
-    if (myFont == NULL) {
-	myFont = SoBitmapFontCache::getFont(state, TRUE);
-	if (myFont == NULL) {
-	    state->pop();
-	    return;
-	}
-    }
-
-    // Turn off lighting
-    SoLightModelElement::set(state,
-			     SoLightModelElement::BASE_COLOR);
-    // Turn off texturing
-    SoGLTextureEnabledElement::set(state, FALSE);
-    
-    myFont->setupToRender(state);
-
-    // Send first color
-    SoMaterialBundle mb(action);
-    mb.sendFirst();
-    
-    // Special-case left-justified, single-line text, which we know
-    // starts at (0,0,0) in object space, so we can help caching by
-    // avoiding getting the projection/view/model matrices:
-    if (string.getNum() == 1 && justification.getValue() == LEFT) {
-	glRasterPos3f(0,0,0);
-	myFont->drawString(string[0]);
-    }
-    // General case:
-    else {
-	SbMatrix objToScreen;
-	objToScreen = SoProjectionMatrixElement::get(state);
-	objToScreen =
-	    objToScreen.multLeft(SoViewingMatrixElement::get(state));
-	objToScreen =
-	    objToScreen.multLeft(SoModelMatrixElement::get(state));
-
-	SbMatrix screenToObj = objToScreen.inverse();
-	
-	SbViewportRegion vpr = SoViewportRegionElement::get(state);
-
-	// The origin of the text on the screen is the object-space point
-	// 0,0,0:
-	SbVec3f screenOrigin =
-	    fromObjectSpace(SbVec3f(0,0,0), objToScreen, vpr);
-    
-	for (int line = 0; line < string.getNum(); line++) {
-	    // Starting position of string, based on justification:
-	    SbVec3f charPosition = getPixelStringOffset(line) +
-		screenOrigin;
-
-	    const SbString &str = string[line];
-
-	    // Transform the screen-space starting position into object
-	    // space, and feed that back to the glRasterPos command (which
-	    // will turn around and transform it back into screen-space,
-	    // but oh well).
-	    SbVec3f lineOrigin = toObjectSpace(charPosition, screenToObj,
-					       vpr);
-	    glRasterPos3fv(&lineOrigin[0]);
-	    
-	    myFont->drawString(str);
-	}
-	// Don't auto-cache above, since dependent on camera:
-	SoGLCacheContextElement::shouldAutoCache(state,
-		SoGLCacheContextElement::DONT_AUTO_CACHE);
-    }
-    state->pop();
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Implements ray picking
-//
-// Use: protected
-
-void
-SoText2::rayPick(SoRayPickAction *action)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    // First see if the object is pickable
-    if (! shouldRayPick(action))
-	return;
-
-    SoState *state = action->getState();
-
-    state->push();
-
-    // Get a font cache we can pull stuff out of
-    if (myFont != NULL) {
-	if (!myFont->isValid(state)) {
-	    myFont->unref();
-	    myFont = NULL;
-	}
-    }
-    if (myFont == NULL) {
-	myFont = SoBitmapFontCache::getFont(state, FALSE);
-	if (myFont == NULL) {
-	    state->pop();
-	    return;
-	}
-    }
-
-    // Tell the action about our current object space
-    action->setObjectSpace();
-
-    SbMatrix objToScreen;
-    objToScreen = SoProjectionMatrixElement::get(state);
-    objToScreen =
-	objToScreen.multLeft(SoViewingMatrixElement::get(state));
-    objToScreen =
-	objToScreen.multLeft(SoModelMatrixElement::get(state));
-
-    SbMatrix screenToObj = objToScreen.inverse();
-
-    SbViewportRegion vpr = SoViewportRegionElement::get(state);
-    // font size in pixels
-    float fontSize   = SoFontSizeElement::get(state) *
-	vpr.getPixelsPerPoint();
-
-    // The origin of the text on the screen is the object-space point
-    // 0,0,0:
-    SbVec3f screenOrigin =
-	fromObjectSpace(SbVec3f(0,0,0), objToScreen, vpr);
-
-    for (int line = 0; line < string.getNum(); line++) {
-
-	// Intersect against each line of text's bounding box:
-	SbBox3f lineBbox, charBbox;
-
-	// Starting position of string, based on justification:
-	SbVec3f charPosition = getPixelStringOffset(line) +
-	    screenOrigin;
-
-	const SbString &str = string[line];
-	const char *chars = str.getString();
-
-	SbVec3f p0, p1, p2, p3;
-	int chr;
-	for (chr = 0; chr < str.getLength(); chr++) {
-	    myFont->getCharBbox(chars[chr], charBbox);
-
-	    if (!charBbox.isEmpty()) {
-
-		SbVec3f charMin = charBbox.getMin() + charPosition;
-		SbVec3f charMax = charBbox.getMax() + charPosition;
-
-		// Extend the line's bounding box by this character's
-		// bounding box (both boxes are in screen-space):
-		lineBbox.extendBy(charMin);
-		lineBbox.extendBy(charMax);
-
-		// Advance to next character...
-		charPosition += myFont->getCharOffset(chars[chr]);
-	    }
-	}
-	// And transform line's box into object space:
-	SbVec3f min = lineBbox.getMin();
-	SbVec3f max = lineBbox.getMax();
-
-	SbVec3f t;
-	t.setValue(min[0], min[1], screenOrigin[2]);
-	p0 = toObjectSpace(t, screenToObj, vpr);
-	t.setValue(max[0], min[1], screenOrigin[2]);
-	p1 = toObjectSpace(t, screenToObj, vpr);
-	t.setValue(min[0], max[1], screenOrigin[2]);
-	p2 = toObjectSpace(t, screenToObj, vpr);
-	t.setValue(max[0], max[1], screenOrigin[2]);
-	p3 = toObjectSpace(t, screenToObj, vpr);
-
-	// intersect the two triangles:
-	SbVec3f point;
-	// Info we get back from the pick that we don't need:
-	SbVec3f junk1; SbBool junk2;
-	if (action->intersect(p0, p1, p2, point, junk1, junk2) ||
-	    action->intersect(p2, p1, p3, point, junk1, junk2)) {
-
-	    SoPickedPoint *pp = action->addIntersection(point);
-	    if (pp) {
-		SoTextDetail *detail = new SoTextDetail();
-		detail->setStringIndex(line);
-
-		// Figure out which character was hit:
-		// Transform picked point into screen space:
-		SbVec3f screenPoint =
-		    fromObjectSpace(pp->getObjectPoint(), objToScreen,
-				    vpr);
-		// Figure out which character that corresponds to, by
-		// adding on the x-offset of each character until we
-		// go past the picked point:
-		charPosition = getPixelStringOffset(line) +
-		    screenOrigin;
-		for (chr = 0; chr < str.getLength(); chr++) {
-		    charPosition += myFont->getCharOffset(chars[chr]);
-		    // Assuming left-to-right drawing of characters:
-		    if (charPosition[0] >= screenPoint[0]) break;
-		}
-		    
-		detail->setCharacterIndex(chr);
-
-		pp->setDetail(detail, this);
-		pp->setMaterialIndex(0);
-
-		// We'll define normal to be object-space 0,0,1:
-		pp->setObjectNormal(SbVec3f(0,0,1));
-		// And texture coordinates to be zero:
-		pp->setObjectTextureCoords(SbVec4f(0,0,0,0));
-	    }
-	}
-    }
-    state->pop();
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Generates primitives - no-op.
-//
-// Use: protected
-
-void
-SoText2::generatePrimitives(SoAction *)
-//
-////////////////////////////////////////////////////////////////////////
-{
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Computes bounding box of text. Since 2D text is screen-aligned,
-//    we need to look at the current view volume and viewport region.
-//
-// Use: protected
-
-void
-SoText2::computeBBox(SoAction *action, SbBox3f &box, SbVec3f &center)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    SoState *state = action->getState();
-
-    state->push();
-
-    // Get a font cache we can pull stuff out of
-    if (myFont != NULL) {
-	if (!myFont->isValid(state)) {
-	    myFont->unref();
-	    myFont = NULL;
-	}
-    }
-    if (myFont == NULL) {
-	myFont = SoBitmapFontCache::getFont(state, FALSE);
-	if (myFont == NULL) {
-	    state->pop();
-	    return;
-	}
-    }
-
-    SbMatrix objToScreen;
-    objToScreen = SoProjectionMatrixElement::get(state);
-    objToScreen =
-	objToScreen.multLeft(SoViewingMatrixElement::get(state));
-    objToScreen =
-	objToScreen.multLeft(SoModelMatrixElement::get(state));
-
-    SbMatrix screenToObj = objToScreen.inverse();
-
-    SbViewportRegion vpr = SoViewportRegionElement::get(state);
-
-    // font size in pixels
-    float fontSize   = SoFontSizeElement::get(state) *
-	vpr.getPixelsPerPoint();
-
-    // The origin of the text on the screen is the object-space point
-    // 0,0,0:
-    SbVec3f screenOrigin =
-	fromObjectSpace(SbVec3f(0,0,0), objToScreen, vpr);
-
-    // Figure out the screen-space bounding box of the characters:
-    SbBox3f screenBbox, charBbox;
-
-    for (int line = 0; line < string.getNum(); line++) {
-	// Starting position of string, based on justification:
-	SbVec3f charPosition = getPixelStringOffset(line) +
-	    screenOrigin;
-
-	const SbString &str = string[line];
-	const char *chars = str.getString();
-
-	for (int chr = 0; chr < str.getLength(); chr++) {
-	    myFont->getCharBbox(chars[chr], charBbox);
-	    if (!charBbox.isEmpty()) {
-		SbVec3f min = charBbox.getMin() + charPosition;
-		SbVec3f max = charBbox.getMax() + charPosition;
-		screenBbox.extendBy(min);
-		screenBbox.extendBy(max);
-	    }
-
-	    // And advance...
-	    charPosition += myFont->getCharOffset(chars[chr]);
-	}
-    }
-    // Ok, screenBbox now contains the pixel-space extent of the
-    // characters.  We'll transform the bounds of that box back into
-    // object space and extend the object-space bounding box:
-    
-    if (!screenBbox.isEmpty()) {
-	// Do each of the 4 corners of the screen-space box:
-	const SbVec3f &min = screenBbox.getMin();
-	const SbVec3f &max = screenBbox.getMax();
-	SbVec3f objectPoint, temp;
-
-	temp.setValue(min[0], min[1], screenOrigin[2]);
-	objectPoint = toObjectSpace(temp, screenToObj, vpr);
-	box.extendBy(objectPoint);
-
-	temp.setValue(max[0], max[1], screenOrigin[2]);
-	objectPoint = toObjectSpace(temp, screenToObj, vpr);
-	box.extendBy(objectPoint);
-
-	temp.setValue(min[0], max[1], screenOrigin[2]);
-	objectPoint = toObjectSpace(temp, screenToObj, vpr);
-	box.extendBy(objectPoint);
-
-	temp.setValue(max[0], min[1], screenOrigin[2]);
-	objectPoint = toObjectSpace(temp, screenToObj, vpr);
-	box.extendBy(objectPoint);
-
-	// Set the center to be the origin, which is the natural "center"
-	// of the text, regardless of justification
-	center.setValue(0.0, 0.0, 0.0);
-    }
-
-    state->pop();
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Returns the number of pixels the given line is offset from the
-//    text origin.
-//
-// Use: private
-
-SbVec3f
-SoText2::getPixelStringOffset(int line)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    SbVec3f result(0,0,0);
-    
-    if (justification.getValue() == RIGHT) {
-	float width = myFont->getWidth(string[line]);
-	result[0] = -width;
-    }
-    if (justification.getValue() == CENTER) {
-	float width = myFont->getWidth(string[line]);
-	result[0] = -width/2.0;
-    }
-    result[1] = -line*myFont->getHeight()*spacing.getValue()*2;
-
-    return result;
-}
-
-// Static variables for SoBitmapFontCache
-SbPList *SoBitmapFontCache::fonts = NULL;
-FLcontext SoBitmapFontCache::flContext;
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Get a font cache suitable for using with the given state.
-//
-// Use: static, internal, public
-
-SoBitmapFontCache *
-SoBitmapFontCache::getFont(SoState *state, SbBool forRender)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    if (fonts == NULL) {
-	// One-time font library initialization
-	fonts = new SbPList;
-	flContext = flCreateContext(NULL, FL_FONTNAME, NULL,
-				  1.0, 1.0);
-	if (flContext == NULL) {
-#ifdef DEBUG
-	    SoDebugError::post("SoText2::getFont",
-			       "flCreateContext returned NULL");
-#endif
-	    return NULL;
-	}
-	if (flGetCurrentContext() != flContext)
-	    flMakeCurrentContext(flContext);
-	flSetHint(FL_HINT_MINOUTLINESIZE, 24.0);
-    }
-    else if (flContext == NULL) return NULL;
-    else {
-	if (flGetCurrentContext() != flContext)
-	    flMakeCurrentContext(flContext);
-    }
-    
-    SoBitmapFontCache *result = NULL;
-    for (int i = 0; i < fonts->getLength() && result == NULL; i++) {
-	SoBitmapFontCache *fc = (SoBitmapFontCache *)(*fonts)[i];
-	if (!fc->fontNumList) continue;
-	if (forRender ? fc->isRenderValid(state) : fc->isValid(state)) {
-	    result = fc;
-	    result->ref();
-	    if (flGetCurrentFont() != result->fontId) {
-		flMakeCurrentFont(result->fontId);
-	    }
-	}	    
-    }
-    if (result == NULL) {
-	result = new SoBitmapFontCache(state);
-
-	// If error:
-	if (result->fontId == 0) {
-	    delete result;
-	    return NULL;
-	}
-    }    
-    return result;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Sees if this font is valid.  If it is valid, it also makes it
-//    current.
-//
-// Use: public
-
-SbBool
-SoBitmapFontCache::isValid(SoState *state) const
-//
-////////////////////////////////////////////////////////////////////////
-{
-    SbBool result = SoCache::isValid(state);
-    
-    if (result) {
-	if (flGetCurrentContext() != flContext) {
-	    flMakeCurrentContext(flContext);
-	    flMakeCurrentFont(fontId);
-	}
-	else if (flGetCurrentFont() != fontId)
-	    flMakeCurrentFont(fontId);
-    }
-    return result;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Construct a bitmap font cache, given the state and a dummy
-//    (empty) list of overridden elements (needed only to pass to the
-//    SoCache constructor).
-//
-// Use: internal, private
-
-SoBitmapFontCache::SoBitmapFontCache(SoState *state) : SoCache(state)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    ref();
-
-    list = NULL;
-
-    // Grab all the stuff we'll need to determine our validity from
-    // the state.
-    SbName fontName = SoFontNameElement::get(state);
-    addElement(state->getConstElement(
-	SoFontNameElement::getClassStackIndex()));
-    if (fontName == SoFontNameElement::getDefault()) {
-	fontName = SbName("Utopia-Regular");
-    }
-    const SbViewportRegion &vpr = SoViewportRegionElement::get(state);
-    addElement(state->getConstElement(
-	SoViewportRegionElement::getClassStackIndex()));
-    float fontSize = SoFontSizeElement::get(state) * vpr.getPixelsPerPoint();
-    addElement(state->getConstElement(
-	SoFontSizeElement::getClassStackIndex()));
-
-    // Initialize everything
-    GLfloat m[2][2];
-    m[0][0] = m[1][1] = fontSize;
-    m[0][1] = m[1][0] = 0.0;
-    fontId = flCreateFont((const GLubyte *)fontName.getString(), m, 0, NULL);
-
-    if (fontId == 0) {
-	// Try Utopia-Regular, unless we just did!
-	if (fontName != SbName("Utopia-Regular")) {
-#ifdef DEBUG
-	    SoDebugError::post("SoText2::getFont",
-		      "Couldn't find font %s, replacing with Utopia-Regular",
-		       fontName.getString());
-#endif
-	    fontId = flCreateFont((const GLubyte *)"Utopia-Regular",
-				  m, 0, NULL);
-	}
-	if (fontId == 0) {
-#ifdef DEBUG
-	    SoDebugError::post("SoText3::getFont",
-			       "Couldn't find font Utopia-Regular!");
-#endif
-	    numChars = 0;
-	}
-    }	
-    flMakeCurrentFont(fontId);
-    
-    numChars = 256;  // ??? JUST DO ASCII FOR NOW!
-    listFlags = new SbBool[numChars];
-    bitmaps = new FLbitmap*[numChars];
-    for (int i = 0; i < numChars; i++) {
-	listFlags[i] = FALSE;
-	bitmaps[i] = NULL;
-    }
-
-    fonts->append(this);
-}
-    
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Destructor.  Clean up-- GL stuff, font library stuff, and
-//    internally generated stuff.
-//
-// Use: internal, private
-
-SoBitmapFontCache::~SoBitmapFontCache()
-//
-////////////////////////////////////////////////////////////////////////
-{
-    if (fontId) {
-	if (flGetCurrentContext() != flContext) {
-	    flMakeCurrentContext(flContext);
-	    flMakeCurrentFont(fontId);
-	}
-	else if (flGetCurrentFont() != fontId)
-	    flMakeCurrentFont(fontId);
-
-	int i;
-	for (i = 0; i < numChars; i++) {
-	    if (bitmaps[i] != NULL) flFreeBitmap(bitmaps[i]);
-	}
-
-	// Only destroy the font library font if no other font caches
-	// are using the same font identifier:
-	SbBool otherUsing = FALSE;
-	for (i = 0; i < fonts->getLength(); i++) {
-	    SoBitmapFontCache *t = (SoBitmapFontCache *)(*fonts)[i];
-	    if (t != this && t->fontId == fontId) otherUsing = TRUE;
-	}
-	if (!otherUsing) {
-	    flDestroyFont(fontId);
-	}
-    
-	delete [] listFlags;
-	delete [] bitmaps;
-
-	fonts->remove(fonts->find(this));
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Destroy this cache.  Called by unref(); frees up OpenGL display
-//    lists.
-//
-// Use: protected, virtual
-
-void
-SoBitmapFontCache::destroy(SoState *)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    // Pass in NULL to unref because this cache may be destroyed
-    // from an action _other_ than GLRender:
-    if (list) {
-	list->unref(NULL);
-	list = NULL;
-    }
-    SoCache::destroy(NULL);
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Returns TRUE if this cache is valid
-//
-// Use: internal, public
-
-SbBool
-SoBitmapFontCache::isRenderValid(SoState *state) const
-//
-////////////////////////////////////////////////////////////////////////
-{
-    if (!list) return isValid(state);
-    else
-	return (list->getContext() == SoGLCacheContextElement::get(state)
-		 && isValid(state));
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Sets up for GL rendering.
-//
-// Use: internal
-
-void
-SoBitmapFontCache::setupToRender(SoState *state)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    otherOpen = SoCacheElement::anyOpen(state);
-
-    if (!otherOpen && !list) {
-	list = new SoGLDisplayList(state,
-				   SoGLDisplayList::DISPLAY_LIST,
-				   numChars);
-	list->ref();
-    }
-    if (list) {
-	// Set correct list base
-	glListBase(list->getFirstIndex());
-	list->addDependency(state);
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Returns TRUE if a display lists exists for given character.
-//    Tries to build a display list, if it can.
-//
-// Use: internal
-
-SbBool
-SoBitmapFontCache::hasDisplayList(const char c)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    // If we have one, return TRUE
-    if (listFlags[c] == TRUE) return TRUE;
-    
-    // If we don't and we can't build one, return FALSE.
-    if (otherOpen) return FALSE;
-    
-    // Build one:
-    glNewList(list->getFirstIndex()+c, GL_COMPILE);
-    drawCharacter(c);
-    glEndList();
-    listFlags[c] = TRUE;
-
-    return TRUE;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Assuming that there are display lists built for all the
-//    characters in given string, render them using the GL's CallLists
-//    routine.
-//
-// Use: internal
-
-void
-SoBitmapFontCache::callLists(const SbString &string)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    const char *str = string.getString();
-
-    glCallLists(string.getLength(), GL_UNSIGNED_BYTE, str);
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Returns the pixel-space bounding box of given character.
-//
-// Use: internal, public
-
-void
-SoBitmapFontCache::getCharBbox(char c, SbBox3f &box)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    box.makeEmpty();
-
-    const FLbitmap *bmap = getBitmap(c);
-    if (bmap == NULL) return;
-    
-    box.extendBy(SbVec3f(-bmap->xorig, -bmap->yorig, 0));
-    box.extendBy(SbVec3f(bmap->width - bmap->xorig,
-			 bmap->height - bmap->yorig, 0));
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Returns the amount the current raster position will be advanced
-//    after drawing the given character.
-//
-// Use: internal, public
-
-SbVec3f
-SoBitmapFontCache::getCharOffset(char c)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    const FLbitmap *bmap = getBitmap(c);
-    if (bmap != NULL)
-	return SbVec3f(bmap->xmove, bmap->ymove, 0);
-    else return SbVec3f(0,0,0);
-}
-    
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Returns the width of given string.
-//
-// Use: internal, public
-
-float
-SoBitmapFontCache::getWidth(const SbString &str)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    float result = 0.0;
-
-    const char *chars = str.getString();
-    for (int i = 0; i < str.getLength(); i++) {
-	const FLbitmap *bmap = getBitmap(chars[i]);
-	if (bmap != NULL)
-	    result += bmap->xmove;
-    }
-    return result;
-}
-    
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Returns the height of given string.
-//
-// Use: internal, public
-
-float
-SoBitmapFontCache::getHeight()
-//
-////////////////////////////////////////////////////////////////////////
-{
-    const FLbitmap *bmap = getBitmap('M');
-    if (bmap != NULL)
-	return bmap->height - bmap->yorig;
-    else return 0;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Draws a bitmap
-//
-// Use: internal public
-
-void
-SoBitmapFontCache::drawCharacter(char c)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    const FLbitmap *bmap = getBitmap(c);
-    
-    if (bmap != NULL)
-	glBitmap(bmap->width, bmap->height, bmap->xorig, bmap->yorig,
-	     bmap->xmove, bmap->ymove, bmap->bitmap);
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Draws a whole string.  Tries to build display lists, if it can.
-//
-// Use: internal public
-
-void
-SoBitmapFontCache::drawString(const SbString &string)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    SbBool useCallLists = TRUE;
-
-    const char *chars = string.getString();
-
-    // If there aren't any other caches open, build display lists for
-    // the characters we can:
-    for (int i = 0; i < string.getLength(); i++) {
-	// See if the font cache already has (or can build) a display
-	// list for this character:
-	if (!hasDisplayList(chars[i])) {
-	    useCallLists = FALSE;
-	    break;
-	}
-    }
-	
-    // if we have display lists for all of the characters, use
-    // glCallLists:
-    if (useCallLists) {
-	callLists(string);
-    } else {
-	// if we don't, draw the string character-by-character, using the
-	// display lists we do have:
-	for (int i = 0; i < string.getLength(); i++) {
-	    if (!hasDisplayList(chars[i])) {
-		drawCharacter(chars[i]);
-	    }
-	    else glCallList(list->getFirstIndex()+chars[i]);
-	}
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Returns a bitmap.
-//
-// Use: private
-
-const FLbitmap *
-SoBitmapFontCache::getBitmap(unsigned char c)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    if (!fontNumList) return NULL;
-
-    if (bitmaps[c] == NULL) {
-	bitmaps[c] = flGetBitmap(fontId, c);
-    }
-    return bitmaps[c];
-}
-#endif /*IRIX_6*/
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoText3.c++ inventor/lib/database/src/so/nodes/SoText3.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoText3.c++	2002-03-11 23:30:05.000000000 +0100
+++ inventor/lib/database/src/so/nodes/SoText3.c++	2007-04-05 10:23:49.000000000 +0200
@@ -51,10 +51,11 @@
  ______________  S I L I C O N   G R A P H I C S   I N C .  ____________
  _______________________________________________________________________
  */
-//Internationalization changes (i18n) only work with Irix 6
-#ifdef IRIX_6
-#include <GL/gl.h>
-#include <GL/glu.h>
+
+#include <Inventor/system/SbSystem.h>
+
+#include OPENGL_GL_H
+#include OPENGL_GLU_H
 #include <Inventor/SbBox.h>
 #include <Inventor/SoPrimitiveVertex.h>
 #include <Inventor/actions/SoCallbackAction.h>
@@ -83,13 +84,14 @@
 #include <Inventor/misc/SoState.h>
 #include <Inventor/nodes/SoProfile.h>
 #include <Inventor/nodes/SoText3.h>
-
-// Font library:
-// Additional for Banyan(6.2):
 #include <flclient.h>
 #include <iconv.h>
 #include <machine.h>
 
+#ifdef min
+#undef min
+#endif
+
 // First, a more convenient structure for outlines:
 class SoFontOutline {
 
@@ -176,7 +178,7 @@
     // registered.
     void	generateFrontChar(const char* c, gluTESSELATOR *tobj);
     // Ditto, for sides of characters:
-    void	generateSideChar(const char* c, SideCB callbackFunc);
+    void	generateSideChar(const char* c, SideCB *callbackFunc);
 
     // Set up for GL rendering:
     void	setupToRenderFront(SoState *state);
@@ -186,7 +188,7 @@
     // given UCS character.  It will try to build a display list, if it
     // can.
     SbBool	hasFrontDisplayList(const char* c, gluTESSELATOR *tobj);
-    SbBool	hasSideDisplayList(const char* c, SideCB callbackFunc);
+    SbBool	hasSideDisplayList(const char* c, SideCB *callbackFunc);
 
     // Renders an entire line by using the GL callList() function.
     void	callFrontLists(int line);
@@ -194,7 +196,7 @@
 
     // Renders a  UCS string in cases where display lists can't be buit.
     void	renderFront(int line,   gluTESSELATOR *tobj);
-    void	renderSide(int line,  SideCB callbackFunc);
+    void	renderSide(int line,  SideCB *callbackFunc);
 
     // Callback registered with GLU used to detect tesselation errors.
     static void errorCB(GLenum whichErr);
@@ -494,11 +496,11 @@
 
     if (tobj == NULL) {
 	tobj = gluNewTess();
-	gluTessCallback(tobj, (GLenum)GLU_BEGIN, (void (*)())glBegin);
-	gluTessCallback(tobj, (GLenum)GLU_END, (void (*)())glEnd);
-	gluTessCallback(tobj, (GLenum)GLU_VERTEX, (void (*)())glVertex2fv);
+	gluTessCallback(tobj, (GLenum)GLU_BEGIN, (OPENGL_CALLBACKFUNC)glBegin);
+	gluTessCallback(tobj, (GLenum)GLU_END, (OPENGL_CALLBACKFUNC)glEnd);
+	gluTessCallback(tobj, (GLenum)GLU_VERTEX, (OPENGL_CALLBACKFUNC)glVertex2fv);
 	gluTessCallback(tobj, (GLenum)GLU_ERROR,
-			(void (*)())SoOutlineFontCache::errorCB);
+			(OPENGL_CALLBACKFUNC)SoOutlineFontCache::errorCB);
     }
 
     // See if texturing is enabled
@@ -1130,11 +1132,11 @@
 
     if (tobj == NULL) {
 	tobj = gluNewTess();
-	gluTessCallback(tobj, (GLenum)GLU_BEGIN, (void (*)())SoText3::beginCB);
-	gluTessCallback(tobj, (GLenum)GLU_END, (void (*)())SoText3::endCB);
-	gluTessCallback(tobj, (GLenum)GLU_VERTEX, (void (*)())SoText3::vtxCB);
+	gluTessCallback(tobj, (GLenum)GLU_BEGIN, (OPENGL_CALLBACKFUNC)SoText3::beginCB);
+	gluTessCallback(tobj, (GLenum)GLU_END, (OPENGL_CALLBACKFUNC)SoText3::endCB);
+	gluTessCallback(tobj, (GLenum)GLU_VERTEX, (OPENGL_CALLBACKFUNC)SoText3::vtxCB);
 	gluTessCallback(tobj, (GLenum)GLU_ERROR,
-			(void (*)())SoOutlineFontCache::errorCB);
+			(OPENGL_CALLBACKFUNC)SoOutlineFontCache::errorCB);
     }
 
     genWhichVertex = 0;
@@ -1582,7 +1584,7 @@
     addElement(state->getConstElement(
 	SoFontNameElement::getClassStackIndex()));
     if (font == SoFontNameElement::getDefault()) {
-	font = SbName("Utopia-Regular");
+	font = SbName(IV_DEFAULT_FONTNAME);
     }
     
     float uems;
@@ -1651,19 +1653,19 @@
 
     // If error creating font:
     if (fontNumList == NULL) {
-	// Try Utopia-Regular, unless we just did!
-	if (font != SbName("Utopia-Regular")) {
+	// Try IV_DEFAULT_FONTNAME, unless we just did!
+	if (font != SbName(IV_DEFAULT_FONTNAME)) {
 #ifdef DEBUG
 	    SoDebugError::post("SoText3::getFont",
-		      "Couldn't find font %s, replacing with Utopia-Regular",
-		       font.getString());
+		      "Couldn't find font %s, replacing with %s",
+		       font.getString(), IV_DEFAULT_FONTNAME);
 #endif
-	    fontNumList = createUniFontList("Utopia-Regular");
+	    fontNumList = createUniFontList(IV_DEFAULT_FONTNAME);
 	}
 	if (fontNumList == NULL) {
 #ifdef DEBUG
 	    SoDebugError::post("SoText3::getFont",
-			       "Couldn't find font Utopia-Regular!");
+			       "Couldn't find font %s!", IV_DEFAULT_FONTNAME);
 #endif
 	}
     }
@@ -2115,7 +2117,7 @@
 
 SbBool
 SoOutlineFontCache::hasSideDisplayList(const char* c,
-				       SideCB callbackFunc)
+				       SideCB *callbackFunc)
 //
 ////////////////////////////////////////////////////////////////////////
 {
@@ -2222,7 +2224,7 @@
 
 void
 SoOutlineFontCache::renderSide(int line,
-			       SideCB callbackFunc)
+			       SideCB *callbackFunc)
 //
 ////////////////////////////////////////////////////////////////////////
 {
@@ -2291,7 +2293,11 @@
 	size_t outbytes = 2*inbytes+2;
 	char* output = (char*)UCSStrings[i];
     
+#if defined(WIN32) || defined(__APPLE__)
+	if ((iconv(conversionCode, const_cast<const char**>(&input), &inbytes, &output, &outbytes) == (size_t)-1)){
+#else
 	if ((iconv(conversionCode, &input, &inbytes, &output, &outbytes) == (size_t)-1)){
+#endif
 #ifdef DEBUG
 	    SoDebugError::post("SoOutlineFontCache::convertToUCS", 
 		"Error converting text to UCS-2");
@@ -2455,7 +2461,7 @@
 // Use: private
 
 void
-SoOutlineFontCache::generateSideChar(const char* c, SideCB callbackFunc)
+SoOutlineFontCache::generateSideChar(const char* c, SideCB *callbackFunc)
 //
 ////////////////////////////////////////////////////////////////////////
 {
@@ -2747,2481 +2753,5 @@
 {
     delete (FLoutline*)value;    
 }
-#else /*IRIX_6*/
-//Following version is for Irix 5:
-
-#include <GL/gl.h>
-#include <GL/glu.h>
-#include <Inventor/SbBox.h>
-#include <Inventor/SoPrimitiveVertex.h>
-#include <Inventor/actions/SoCallbackAction.h>
-#include <Inventor/actions/SoGLRenderAction.h>
-#include <Inventor/actions/SoRayPickAction.h>
-#include <Inventor/bundles/SoMaterialBundle.h>
-#include <Inventor/caches/SoCache.h>
-#include <Inventor/details/SoTextDetail.h>
-#include <Inventor/elements/SoCacheElement.h>
-#include <Inventor/elements/SoComplexityElement.h>
-#include <Inventor/elements/SoComplexityTypeElement.h>
-#include <Inventor/elements/SoCreaseAngleElement.h>
-#include <Inventor/elements/SoFontNameElement.h>
-#include <Inventor/elements/SoFontSizeElement.h>
-#include <Inventor/elements/SoGLCacheContextElement.h>
-#include <Inventor/elements/SoGLTextureCoordinateElement.h>
-#include <Inventor/elements/SoGLTextureEnabledElement.h>
-#include <Inventor/elements/SoMaterialBindingElement.h>
-#include <Inventor/elements/SoModelMatrixElement.h>
-#include <Inventor/elements/SoProfileElement.h>
-#include <Inventor/elements/SoProfileCoordinateElement.h>
-#include <Inventor/elements/SoProjectionMatrixElement.h>
-#include <Inventor/elements/SoViewportRegionElement.h>
-#include <Inventor/elements/SoViewingMatrixElement.h>
-#include <Inventor/errors/SoDebugError.h>
-#include <Inventor/misc/SoState.h>
-#include <Inventor/nodes/SoProfile.h>
-#include <Inventor/nodes/SoText3.h>
-
-// Font library:
-#include <flclient.h>
-
-// First, a more convenient structure for outlines:
-class SoFontOutline {
-
-  public:
-    // Constructor, takes a pointer to the font-library outline
-    // structure and the font's size:
-    SoFontOutline(FLoutline *outline, float fontSize);
-    // Destructor
-    ~SoFontOutline();
-
-    // Query routines:
-    int		getNumOutlines() { return numOutlines; }
-    int		getNumVerts(int i) { return numVerts[i]; }
-    SbVec2f	&getVertex(int i, int j) { return verts[i][j]; }
-    SbVec2f	getCharAdvance() { return charAdvance; }
-    
-    static SoFontOutline *getNullOutline();
-
-  private:
-    // Internal constructor used by getNullOutline:
-    SoFontOutline();
-    
-    // This basically mimics the FLoutline structure, with the
-    // exception that the font size is part of the outline:
-    int numOutlines;
-    int *numVerts;
-    SbVec2f **verts;
-    SbVec2f charAdvance;
-};
-
-//
-// Internal class: SoOutlineFontCache
-//
-
-// Callback function for sides of characters-- passed the number of
-// points going back, and points and normals on either edge of the
-// strip.  tTexCoords[0] and [1] are for the two edges, and the
-// sTexCoords are the same for both edges.
-typedef void SideCB(int nPoints,
-		    const SbVec3f *points1, const SbVec3f *norms1,
-		    const SbVec3f *points2, const SbVec3f *norms2,
-		    const float *sTexCoords, const float *tTexCoords);
-
-// This is pretty heavyweight-- it is responsible for doing all of the
-// grunt work of figuring out the polygons making up the characters in
-// the font.
-class SoOutlineFontCache : public SoCache
-{
-  public:
-    // Given a state, find an appropriate outline font.
-    static SoOutlineFontCache	*getFont(SoState *, SbBool forRender);
-    
-    // Checks to see if this font is valid
-    SbBool	isValid(SoState *state) const;
-
-    // Figures out if this cache is valid for rendering (the base
-    // class isValid can be used for all other actions)
-    SbBool	isRenderValid(SoState *state) const;
-
-    // Returns the width of given string
-    float	getWidth(const SbString &string);
-    
-    // Returns height of font
-    float	getHeight() { return fontSize; }
-
-    // Returns the 2D bounding box of a character
-    void	getCharBBox(const char c, SbBox2f &result);
-    // ... and the bounding box of the font's bevel
-    void	getProfileBBox(SbBox2f &result);
-    
-    // Return the first/last point in the profile:
-    void	getProfileBounds(float &firstZ, float &lastZ);
-
-    // Returns TRUE if there _is_ any profile
-    // (if not, act as if SIDES of text are off)
-    SbBool	hasProfile() const { return  (nProfileVerts > 1); }
-
-    // Returns how far to advance after drawing given character:
-    SbVec2f	getCharOffset(const char c);
-    
-    // Uses the given glu tesselator to generate triangles for the
-    // given character.  This is used for both rendering and
-    // generating primitives, with just different callback routines
-    // registered.
-    void	generateFrontChar(const char c, gluTESSELATOR *tobj);
-    // Ditto, for sides of characters:
-    void	generateSideChar(const char c, SideCB callbackFunc);
-
-    // Set up for GL rendering:
-    void	setupToRenderFront(SoState *state);
-    void	setupToRenderSide(SoState *state, SbBool willTexture);
-
-    // Returns TRUE if this font cache has a display list for the
-    // given character.  It will try to build a display list, if it
-    // can.
-    SbBool	hasFrontDisplayList(const char c, gluTESSELATOR *tobj);
-    SbBool	hasSideDisplayList(const char c, SideCB callbackFunc);
-
-    // Renders an entire string by using the GL callList() function.
-    void	callFrontLists(const SbString &string);
-    void	callSideLists(const SbString &string);
-
-    // Renders a string in cases where display lists can't be buit.
-    void	renderFront(const SbString &string,
-			    gluTESSELATOR *tobj);
-    void	renderSide(const SbString &string,
-			   SideCB callbackFunc);
-
-    // Callback registered with GLU used to detect tesselation errors.
-    static void errorCB(GLenum whichErr);
-
-  protected:
-
-    // Free up display lists before being deleted
-    virtual void	destroy(SoState *state);
-
-  private:
-    // Constructor
-    SoOutlineFontCache(SoState *);
-    // Destructor
-    ~SoOutlineFontCache();
-
-    // Return a convnient little class representing a character's
-    // outline.
-    SoFontOutline	*getOutline(const char c);
-    
-    // Some helper routines for generateSide:
-    void figureSegmentNorms(SbVec2f *result, int nPoints,
-	 const SbVec2f *points, float cosCreaseAngle, SbBool isClosed);
-    void figureSegmentTexCoords(float *texCoords, int nPoints,
-	 const SbVec2f *points, SbBool isClosed);
-    void fillBevel(SbVec3f *result, int nPoints, 
-		   const SbVec2f *points, const SbVec2f &translation,
-		   const SbVec2f &n1, const SbVec2f &n2);
-    void fillBevelN(SbVec3f *result, int nPoints, 
-		    const SbVec2f *norms, const SbVec2f &n);
-
-    // Texture coordinates in side display lists
-    int		sidesHaveTexCoords;
-
-    // Number of characters in this font. Until we internationalize,
-    // this will be 128 or less.
-    int		numChars;
-
-    // Display lists for fronts, sides:
-    SoGLDisplayList *frontList;
-    SoGLDisplayList *sideList;
-
-    // Profile information:
-    float	cosCreaseAngle;
-    int32_t	nProfileVerts;	// Number of points in profile
-    SbVec2f	*profileVerts;	// Profile vertices
-    float	*sTexCoords;	// Texture coordinates along profile
-    				// (nProfileVerts of them)
-    SbVec2f	*profileNorms;	// Profile normals
-				// ((nProfileVerts-1)*2 of them)
-
-    // This flag will be true if there is another cache open (if
-    // building GL display lists for render caching, that means we
-    // can't also build display lists).
-    SbBool	otherOpen;
-
-    // And tables telling us if a display list has been created for
-    // each character in the font (we do that lazily since it is
-    // expensive):
-    SbBool	*frontFlags;
-    SbBool	*sideFlags;
-
-    // List of outlines; these are also cached and created when
-    // needed.
-    SoFontOutline	**outlines;
-
-    // Font size
-    float	fontSize;
-
-    // Flag used to detect tesselation errors:
-    static SbBool tesselationError;
-
-    // Font library identifier for this font
-    FLfontNumber	fontId;
-
-    // Font library context for all outline fonts
-    static FLcontext	context;
-
-    // Global list of available fonts; a 'font' in this case is a
-    // unique set of font name, font size, complexity value/type, and
-    // set of profiles-- if any of these changes, the set of polygons
-    // representing the font will change, and a different font will be
-    // used.
-    static SbPList	*fonts;
-};
-
-SbBool SoOutlineFontCache::tesselationError = FALSE;
-SbPList *SoOutlineFontCache::fonts = NULL;
-FLcontext SoOutlineFontCache::context = NULL;
-
-// Static stuff is used while generating primitives:
-SoText3 *SoText3::currentGeneratingNode = NULL;
-SoPrimitiveVertex *SoText3::genPrimVerts[3];
-SbVec3f SoText3::genTranslate;
-int SoText3::genWhichVertex = -1;
-uint32_t SoText3::genPrimType;
-SoAction *SoText3::genAction = NULL;
-SbBool SoText3::genBack = FALSE;
-SbBool SoText3::genTexCoord = TRUE;
-const SoTextureCoordinateElement *SoText3::tce = NULL;
-
-SO_NODE_SOURCE(SoText3);
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Constructor
-//
-// Use: public
-
-SoText3::SoText3()
-//
-////////////////////////////////////////////////////////////////////////
-{
-    SO_NODE_CONSTRUCTOR(SoText3);
-
-    SO_NODE_ADD_FIELD(string,	(""));
-    SO_NODE_ADD_FIELD(spacing,	(1.0));
-    SO_NODE_ADD_FIELD(justification,	(LEFT));
-    SO_NODE_ADD_FIELD(parts,		(FRONT));
-
-    // Set up static info for enumerated type field
-    SO_NODE_DEFINE_ENUM_VALUE(Justification,	LEFT);
-    SO_NODE_DEFINE_ENUM_VALUE(Justification,	RIGHT);
-    SO_NODE_DEFINE_ENUM_VALUE(Justification,	CENTER);
-
-    // Set up static info for enumerated type field
-    SO_NODE_DEFINE_ENUM_VALUE(Part, SIDES);
-    SO_NODE_DEFINE_ENUM_VALUE(Part, FRONT);
-    SO_NODE_DEFINE_ENUM_VALUE(Part, BACK);
-    SO_NODE_DEFINE_ENUM_VALUE(Part, ALL);
-
-    // Set up info in enumerated type field
-    SO_NODE_SET_SF_ENUM_TYPE(justification, Justification);
-    SO_NODE_SET_SF_ENUM_TYPE(parts, Part);
-
-    isBuiltIn = TRUE;
-    myFont = NULL;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Destructor
-//
-// Use: private
-
-SoText3::~SoText3()
-//
-////////////////////////////////////////////////////////////////////////
-{
-    if (myFont != NULL) myFont->unref();
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Figure out the bounds of a character.
-//
-// Use: extender
-
-SbBox3f
-SoText3::getCharacterBounds(SoState *state, int stringIndex, int
-			    charIndex)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    SbBox3f result;
-
-    if (!setupFontCache(state))
-	return result;  // Empty bbox
-    
-#ifdef DEBUG
-    if (stringIndex >= string.getNum()) {
-	SoDebugError::post("SoText3::getCharacterBounds",
-			   "stringIndex (%d) out of range (max %d)",
-			   stringIndex, string.getNum());
-    }
-    if (charIndex >= string[stringIndex].getLength()) {
-	SoDebugError::post("SoText3::getCharacterBounds",
-			   "charIndex (%d) out of range (max %d)",
-			   charIndex,
-			   string[stringIndex].getLength());
-    }
-#endif
-
-    float frontZ, backZ;
-    myFont->getProfileBounds(frontZ, backZ);
-    
-    float height = myFont->getHeight();
-
-    const char *chars = string[stringIndex].getString();
-    float width = (myFont->getCharOffset(chars[charIndex]))[0];
-    
-    // Figure out where origin of character is:
-    SbVec2f charPosition = getStringOffset(stringIndex);
-    for (int i = 0; i < charIndex; i++) {
-	charPosition += myFont->getCharOffset(chars[i]);
-    }
-    
-    // Ok, have width, height, depth and starting position of text,
-    // can create the bounds box:
-    if (parts.getValue() & (FRONT|SIDES)) {
-	result.extendBy(SbVec3f(charPosition[0],
-				charPosition[1],
-				frontZ));
-	result.extendBy(SbVec3f(charPosition[0]+width,
-				charPosition[1],
-				frontZ));
-	result.extendBy(SbVec3f(charPosition[0],
-				charPosition[1]+height,
-				frontZ));
-	result.extendBy(SbVec3f(charPosition[0]+width,
-				charPosition[1]+height,
-				frontZ));
-    }
-    if (parts.getValue() & (BACK|SIDES)) {
-	result.extendBy(SbVec3f(charPosition[0],
-				charPosition[1],
-				backZ));
-	result.extendBy(SbVec3f(charPosition[0]+width,
-				charPosition[1],
-				backZ));
-	result.extendBy(SbVec3f(charPosition[0],
-				charPosition[1]+height,
-				backZ));
-	result.extendBy(SbVec3f(charPosition[0]+width,
-				charPosition[1]+height,
-				backZ));
-    }
-    return result;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Performs GL rendering of a Text3.
-//
-// Use: extender
-
-void
-SoText3::GLRender(SoGLRenderAction *action)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    static gluTESSELATOR *tobj = NULL;
-
-    // First see if the object is visible and should be rendered now
-    if (! shouldGLRender(action))
-	return;
-
-    SoState *state = action->getState();
-
-    if (!setupFontCache(state, TRUE))
-	return;
-
-    SoMaterialBindingElement::Binding mbe =
-	SoMaterialBindingElement::get(state);
-    SbBool materialPerPart =
-	(mbe == SoMaterialBindingElement::PER_PART_INDEXED ||
-	 mbe == SoMaterialBindingElement::PER_PART);
-
-    SoMaterialBundle	mb(action);
-    if (!materialPerPart) {
-	// Make sure the fist current material is sent to GL
-	mb.sendFirst();
-    }
-
-    float firstZ, lastZ;
-    myFont->getProfileBounds(firstZ, lastZ);
-
-    if (tobj == NULL) {
-	tobj = gluNewTess();
-	gluTessCallback(tobj, (GLenum)GLU_BEGIN, (void (*)())glBegin);
-	gluTessCallback(tobj, (GLenum)GLU_END, (void (*)())glEnd);
-	gluTessCallback(tobj, (GLenum)GLU_VERTEX, (void (*)())glVertex2fv);
-	gluTessCallback(tobj, (GLenum)GLU_ERROR,
-			(void (*)())SoOutlineFontCache::errorCB);
-    }
-
-    // See if texturing is enabled
-    genTexCoord = SoGLTextureEnabledElement::get(action->getState());
-
-    if ((parts.getValue() & SIDES) && (myFont->hasProfile())) {
-	if (materialPerPart) mb.send(1, FALSE);
-
-	myFont->setupToRenderSide(state, genTexCoord);
-	for (int line = 0; line < string.getNum(); line++) {
-	    glPushMatrix();
-	    SbVec2f p = getStringOffset(line);
-	    if (p[0] != 0.0 || p[1] != 0.0)
-		glTranslatef(p[0], p[1], 0.0);
-	    renderSide(action, line);
-	    glPopMatrix();
-	}
-    }
-    if (parts.getValue() & BACK) {
-	if (materialPerPart) mb.send(2, FALSE);
-
-	if (lastZ != 0.0) {
-	    glTranslatef(0, 0, lastZ);
-	}
-	glNormal3f(0, 0, -1);
-	glFrontFace(GL_CW);
-
-	myFont->setupToRenderFront(state);
-	
-	if (genTexCoord) {
-	    glPushAttrib(GL_TEXTURE_BIT);
-	    glTexGeni(GL_S, GL_TEXTURE_GEN_MODE, GL_OBJECT_LINEAR);
-	    glTexGeni(GL_T, GL_TEXTURE_GEN_MODE, GL_OBJECT_LINEAR);
-	    GLfloat params[4];
-	    params[0] = -1.0/myFont->getHeight();
-	    params[1] = params[2] = params[3] = 0.0;
-	    glTexGenfv(GL_S, GL_OBJECT_PLANE, params);
-	    params[1] = -params[0];
-	    params[0] = 0.0;
-	    glTexGenfv(GL_T, GL_OBJECT_PLANE, params);
-	    
-	    glEnable(GL_TEXTURE_GEN_S);
-	    glEnable(GL_TEXTURE_GEN_T);
-	}
-	
-	for (int line = 0; line < string.getNum(); line++) {
-	    if (string[line].getLength() <= 0) continue;
-	    
-	    glPushMatrix();
-	    SbVec2f p = getStringOffset(line);
-	    if (p[0] != 0.0 || p[1] != 0.0)
-		glTranslatef(p[0], p[1], 0.0);
-	    renderFront(action, line, tobj);
-	    glPopMatrix();
-	}
-	
-	if (genTexCoord) {
-	    glPopAttrib();
-	}
-
-	glFrontFace(GL_CCW);
-
-	if (lastZ != 0)
-	    glTranslatef(0, 0, -lastZ);
-    }	
-    if (parts.getValue() & FRONT) {
-	if (materialPerPart) mb.sendFirst();
-
-	if (firstZ != 0.0) {
-	    glTranslatef(0, 0, firstZ);
-	}
-
-	glNormal3f(0, 0, 1);
-	
-	myFont->setupToRenderFront(state);
-
-	if (genTexCoord) {
-	    glPushAttrib(GL_TEXTURE_BIT);
-	    glTexGeni(GL_S, GL_TEXTURE_GEN_MODE, GL_OBJECT_LINEAR);
-	    glTexGeni(GL_T, GL_TEXTURE_GEN_MODE, GL_OBJECT_LINEAR);
-	    GLfloat params[4];
-	    params[0] = 1.0/myFont->getHeight();
-	    params[1] = params[2] = params[3] = 0.0;
-	    glTexGenfv(GL_S, GL_OBJECT_PLANE, params);
-	    params[1] = params[0];
-	    params[0] = 0.0;
-	    glTexGenfv(GL_T, GL_OBJECT_PLANE, params);
-	    
-	    glEnable(GL_TEXTURE_GEN_S);
-	    glEnable(GL_TEXTURE_GEN_T);
-	}
-	
-	for (int line = 0; line < string.getNum(); line++) {
-	    glPushMatrix();
-	    SbVec2f p = getStringOffset(line);
-	    if (p[0] != 0.0 || p[1] != 0.0)
-		glTranslatef(p[0], p[1], 0.0);
-	    renderFront(action, line, tobj);
-	    glPopMatrix();
-	}
-	
-	if (genTexCoord) {
-	    glPopAttrib();
-	}
-
-	if (firstZ != 0.0) {
-	    glTranslatef(0, 0, -firstZ);
-	}
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Implements ray picking
-//
-// Use: extender
-
-void
-SoText3::rayPick(SoRayPickAction *action)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    // First see if the object is pickable
-    if (! shouldRayPick(action))
-	return;
-
-    //
-    // NOTE: This could be made more efficient by testing the ray
-    // against the bounding box of each character, as follows:
-    //
-    // 	-- For each string {
-    // 	    -- For each character in the string: {
-    // 		If the ray intersects the character's bounding box,
-    // 		  generate primitives for that character
-    // 	    }
-    // 	}
-    //
-    // This is a project for the future... ???
-
-    // For now, just use generatePrimitives() to do the work.
-    SoShape::rayPick(action);
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Computes bounding box of text.
-//
-// Use: protected
-
-void
-SoText3::computeBBox(SoAction *action, SbBox3f &box, SbVec3f &center)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    // Set the center to be the origin, which is the natural "center"
-    // of the text, regardless of justification
-    center.setValue(0.0, 0.0, 0.0);
-
-    int prts = parts.getValue();
-    if (prts == 0)
-	return;
-
-    SoState *state = action->getState();
-
-    if (!setupFontCache(state))
-	return;
-
-    // Get the bounding box of all the characters:
-    SbBox2f outlineBox;
-    getFrontBBox(outlineBox);
-
-    // If no lines and no characters, return empty bbox:
-    if (outlineBox.isEmpty()) return;
-    
-    // .. and extend it based on what parts are turned on:
-    float firstZ, lastZ;
-    myFont->getProfileBounds(firstZ, lastZ);
-
-    const SbVec2f &boxMin = outlineBox.getMin();
-    const SbVec2f &boxMax = outlineBox.getMax();
-		     
-
-    // Front and back are straightforward:
-    if (prts & FRONT) {
-	SbVec3f min(boxMin[0], boxMin[1], firstZ);
-	SbVec3f max(boxMax[0], boxMax[1], firstZ);
-	box.extendBy(min);
-	box.extendBy(max);
-    }
-    if (prts & BACK) {
-	SbVec3f min(boxMin[0], boxMin[1], lastZ);
-	SbVec3f max(boxMax[0], boxMax[1], lastZ);
-	box.extendBy(min);
-	box.extendBy(max);
-    }
-    //
-    // Sides are trickier.  We figure out the maximum offset
-    // of the profile we're using.  If the offset is
-    // negative, we use its absolute value; normally, negative
-    // (indented) characters won't expand the bounding box, but if the
-    // offset is negative enough the character will inter-penetrate
-    // itself-- think of a Helvetica 'I', with a bevel of a big
-    // negative spike.  The bounding box is either the bounding box of
-    // the front/back, or, if the spike is big enough, the size of the
-    // spike minus the width of the I.  I'm being conservative here
-    // and just expanding the front/back bounding boxes by the maximum
-    // offset (correct for positive offsets, conservative for negative
-    // offsets).
-    //
-    if ((prts & SIDES) && myFont->hasProfile()) {
-	SbBox2f profileBox;
-	myFont->getProfileBBox(profileBox);
-
-	const SbVec2f &pBoxMin = profileBox.getMin();
-	const SbVec2f &pBoxMax = profileBox.getMax();
-	
-	// If no profile, return the front/back bbox:
-	if (profileBox.isEmpty()) return;
-
-	//
-	// Expand the bounding box forward/backward in case the
-	// profile extends forwards/backwards:
-	//
-	SbVec3f min, max;
-	min.setValue(boxMin[0], boxMin[1], pBoxMin[0]);
-	max.setValue(boxMax[0], boxMax[1], pBoxMax[0]);
-	box.extendBy(min);
-	box.extendBy(max);
-
-	//
-	// And figure out the maximum profile offset, and expand
-	// out the outline's bbox:
-	//
-# define max(a,b)               (a<b ? b : a)
-# define abs(x)                 (x>=0 ? x : -(x))
-	float maxOffset = max(abs(pBoxMin[1]), abs(pBoxMax[1]));
-#undef max
-#undef abs
-	min.setValue(boxMin[0]-maxOffset, boxMin[1]-maxOffset, firstZ);
-	max.setValue(boxMax[0]+maxOffset, boxMax[1]+maxOffset, lastZ);
-	box.extendBy(min);
-	box.extendBy(max);
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Generates triangles representing a Text3.
-//
-// Use: protected
-
-void
-SoText3::generatePrimitives(SoAction *action)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    SoState *state = action->getState();
-
-    if (!setupFontCache(state))
-	return;
-
-    currentGeneratingNode = this;
-
-    // Set up default texture coordinate mapping, if necessary:
-    SoTextureCoordinateElement::CoordType tcType =
-	SoTextureCoordinateElement::getType(state);
-    if (tcType == SoTextureCoordinateElement::EXPLICIT) {
-	genTexCoord = TRUE;
-	tce = NULL;
-    } else {
-	genTexCoord = FALSE;
-	tce = SoTextureCoordinateElement::getInstance(state);
-    }
-
-    // Set up 3 vertices we can use
-    SoPrimitiveVertex	v1, v2, v3;
-    SoTextDetail detail;
-    v1.setDetail(&detail);
-    v2.setDetail(&detail);
-    v3.setDetail(&detail);
-
-    genPrimVerts[0] = &v1;
-    genPrimVerts[1] = &v2;
-    genPrimVerts[2] = &v3;
-
-    genAction = action;
-    genBack = FALSE;
-
-    SoMaterialBindingElement::Binding mbe =
-	SoMaterialBindingElement::get(state);
-    SbBool materialPerPart =
-	(mbe == SoMaterialBindingElement::PER_PART_INDEXED ||
-	 mbe == SoMaterialBindingElement::PER_PART);
-    if (!materialPerPart) {
-	v1.setMaterialIndex(0);
-	v2.setMaterialIndex(0);
-	v3.setMaterialIndex(0);
-    }
-
-    float firstZ, lastZ;
-    myFont->getProfileBounds(firstZ, lastZ);
-
-    uint32_t prts = parts.getValue();
-    if ((prts & SIDES) && myFont->hasProfile()) {
-	if (materialPerPart) {
-	    v1.setMaterialIndex(1);
-	    v2.setMaterialIndex(1);
-	    v3.setMaterialIndex(1);
-	}
-	detail.setPart(SIDES);
-
-	for (int line = 0; line < string.getNum(); line++) {
-	    detail.setStringIndex(line);
-
-	    SbVec2f p = getStringOffset(line);
-	    genTranslate.setValue(p[0], p[1], lastZ);
-	    generateSide(line);
-	}
-    }
-    if (prts & BACK) {
-	genBack = TRUE;
-	if (materialPerPart) {
-	    v1.setMaterialIndex(2);
-	    v2.setMaterialIndex(2);
-	    v3.setMaterialIndex(2);
-	}
-	detail.setPart(BACK);
-
-	v1.setNormal(SbVec3f(0, 0, -1));
-	v2.setNormal(SbVec3f(0, 0, -1));
-	v3.setNormal(SbVec3f(0, 0, -1));
-	
-	for (int line = 0; line < string.getNum(); line++) {
-	    detail.setStringIndex(line);
-
-	    SbVec2f p = getStringOffset(line);
-	    genTranslate.setValue(p[0], p[1], lastZ);
-	    generateFront(line);
-	}
-	genBack = FALSE;
-    }	
-    if (prts & FRONT) {
-	if (materialPerPart) {
-	    v1.setMaterialIndex(0);
-	    v2.setMaterialIndex(0);
-	    v3.setMaterialIndex(0);
-	}
-	detail.setPart(FRONT);
-
-	v1.setNormal(SbVec3f(0, 0, 1));
-	v2.setNormal(SbVec3f(0, 0, 1));
-	v3.setNormal(SbVec3f(0, 0, 1));
-	
-	for (int line = 0; line < string.getNum(); line++) {
-	    detail.setStringIndex(line);
-
-	    SbVec2f p = getStringOffset(line);
-	    genTranslate.setValue(p[0], p[1], firstZ);
-	    generateFront(line);
-	}
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Setup internal font cache.  Called by all action methods before
-//    doing their thing.  GLRender passes TRUE to do special rendering
-//    setup.  Returns FALSE if there are problems and the action
-//    should bail.
-//
-// Use: private
-
-SbBool
-SoText3::setupFontCache(SoState *state, SbBool forRender)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    // The state must be pushed here because myFont->isRenderValid
-    // depends on the state being the correct depth (it must be the
-    // same depth as when the font cache was built).
-    state->push();
-
-    if (myFont != NULL) {
-	SbBool isValid;
-	if (forRender)
-	    isValid = myFont->isRenderValid(state);
-	else
-	    isValid = myFont->isValid(state);
-
-	if (!isValid) {
-	    myFont->unref(state);
-	    myFont = NULL;
-	}
-    }
-    if (myFont == NULL) {
-	myFont = SoOutlineFontCache::getFont(state, forRender);
-    }
-    state->pop();
-    return  myFont != NULL;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Gets the 2D bounding box of the outlines of the letters in our
-//    string.  How?  Get all the outlines and extend the bbox by every
-//    point in every outline... (assuming the lines or characters
-//    don't overlap, this could be optimized by just considering the
-//    characters on the borders of the string-- although there are
-//    some gotchas, like spaces at the beginning of a line...).
-//
-// Use: private
-
-void
-SoText3::getFrontBBox(SbBox2f &result)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    SbBox2f charBBox;
-
-    int line, character;
-    for (line = 0; line < string.getNum(); line++) {
-	// Starting position of string, based on justification:
-	SbVec2f charPosition = getStringOffset(line);
-
-	const SbString &str = string[line];
-	const char *chars = str.getString();
-	
-	for (character = 0; character < str.getLength(); character++) {
-	    myFont->getCharBBox(chars[character], charBBox);
-	    if (!charBBox.isEmpty()) {
-		SbVec2f min = charBBox.getMin() + charPosition;
-		SbVec2f max = charBBox.getMax() + charPosition;
-		result.extendBy(min);
-		result.extendBy(max);
-	    }
-
-	    // And advance...
-	    charPosition += myFont->getCharOffset(chars[character]);
-	}
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Figure out how much to offset the given line of text.  The X
-//    offset depends on the justification and the width of the string
-//    in the current font.  The Y offset depends on the line spacing
-//    and font height.
-//
-// Use: private
-
-SbVec2f
-SoText3::getStringOffset(int line)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    SbVec2f result(0,0);
-    
-    if (justification.getValue() == RIGHT) {
-	float width = myFont->getWidth(string[line]);
-	result[0] = -width;
-    }
-    if (justification.getValue() == CENTER) {
-	float width = myFont->getWidth(string[line]);
-	result[0] = -width/2.0;
-    }
-    result[1] = -line*myFont->getHeight()*spacing.getValue();
-
-    return result;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Figure out where a given character starts.
-//
-// Use: private
-
-SbVec2f
-SoText3::getCharacterOffset(int line, int whichChar)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    SbVec2f result = getStringOffset(line);
-    
-    const char *chars = string[line].getString();
-
-    // Now add on all of the character advances up to char:
-    for (int i = 0; i < whichChar; i++) {
-	result += myFont->getCharOffset(chars[i]);
-    }
-    return result;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Render the fronts of the given string.  The GL transformation
-//    matrix is munged by this routine-- surround it by
-//    PushMatrix/PopMatrix.
-//
-// Use: public, internal
-
-void
-SoText3::renderFront(SoGLRenderAction *, int line,
-		     gluTESSELATOR *tobj)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    const char *chars = string[line].getString();
-
-    // First, try to figure out if we can use glCallLists:
-    SbBool useCallLists = TRUE;
-
-    for (int i = 0; i < string[line].getLength(); i++) {
-	// See if the font cache already has (or can build) a display
-	// list for this character:
-	if (!myFont->hasFrontDisplayList(chars[i], tobj)) {
-	    useCallLists = FALSE;
-	    break;
-	}
-    }
-    // if we have display lists for all of the characters, use
-    // glCallLists:
-    if (useCallLists) {
-	myFont->callFrontLists(string[line]);
-    }
-    // if we don't, draw the string character-by-character, using the
-    // display lists we do have:
-    else {
-	myFont->renderFront(string[line], tobj);
-    }
-}    
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Render the sides of the given string.  The GL transformation
-//    matrix is munged by this routine-- surround it by
-//    PushMatrix/PopMatrix.
-//
-// Use: private
-
-void
-SoText3::renderSide(SoGLRenderAction *, int line)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    const char *chars = string[line].getString();
-
-    // First, try to figure out if we can use glCallLists:
-    SbBool useCallLists = TRUE;
-
-    for (int i = 0; i < string[line].getLength(); i++) {
-	// See if the font cache already has (or can build) a display
-	// list for this character:
-	if (!myFont->hasSideDisplayList(chars[i], renderSideTris)) {
-	    useCallLists = FALSE;
-	    break;
-	}
-    }
-    // if we have display lists for all of the characters, use
-    // glCallLists:
-    if (useCallLists) {
-	myFont->callSideLists(string[line]);
-    }
-    // if we don't, draw the string character-by-character, using the
-    // display lists we do have:
-    else {
-	myFont->renderSide(string[line], renderSideTris);
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Create text detail and fill in extra info.
-//
-// Use: protected, virtual
-
-SoDetail *
-SoText3::createTriangleDetail(SoRayPickAction *,
-			      const SoPrimitiveVertex *v1,
-			      const SoPrimitiveVertex *,
-			      const SoPrimitiveVertex *,
-			      SoPickedPoint *)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    SoTextDetail *result = new SoTextDetail;
-    const SoTextDetail *old = (const SoTextDetail *)v1->getDetail();
-    
-    result->setPart(old->getPart());
-    result->setStringIndex(old->getStringIndex());
-    result->setCharacterIndex(old->getCharacterIndex());
-
-    return result;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Generates primitives for the fronts of characters.  Assumes that
-//    genTranslate has been set to the starting position of the
-//    string, and that the genPrimVerts array points to three
-//    appropriate vertices.
-//
-// Use: internal
-
-void
-SoText3::generateFront(int line)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    static gluTESSELATOR *tobj = NULL;
-
-    const char *chars = string[line].getString();
-
-    if (tobj == NULL) {
-	tobj = gluNewTess();
-	gluTessCallback(tobj, (GLenum)GLU_BEGIN, (void (*)())SoText3::beginCB);
-	gluTessCallback(tobj, (GLenum)GLU_END, (void (*)())SoText3::endCB);
-	gluTessCallback(tobj, (GLenum)GLU_VERTEX, (void (*)())SoText3::vtxCB);
-	gluTessCallback(tobj, (GLenum)GLU_ERROR,
-			(void (*)())SoOutlineFontCache::errorCB);
-    }
-
-    genWhichVertex = 0;
-
-    SoTextDetail *d = (SoTextDetail *)genPrimVerts[0]->getDetail();
-
-    for (int i = 0; i < string[line].getLength(); i++) {
-	d->setCharacterIndex(i);
-
-	myFont->generateFrontChar(chars[i], tobj);
-
-	SbVec2f p = myFont->getCharOffset(chars[i]);
-	genTranslate[0] += p[0];
-	genTranslate[1] += p[1];
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Generates sides of the characters.
-//
-// Use: internal
-
-void
-SoText3::generateSide(int line)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    const char *chars = string[line].getString();
-
-    SoTextDetail *d = (SoTextDetail *)genPrimVerts[0]->getDetail();
-
-    for (int i = 0; i < string[line].getLength(); i++) {
-	d->setCharacterIndex(i);
-
-	myFont->generateSideChar(chars[i], generateSideTris);
-
-	SbVec2f p = myFont->getCharOffset(chars[i]);
-	genTranslate[0] += p[0];
-	genTranslate[1] += p[1];
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Given two correctly rotated and positioned bevels, this routine
-//    fills in the triangles in between them.
-//
-// Use: private, static
-
-void
-SoText3::generateSideTris(int nPoints, const SbVec3f *p1, const SbVec3f *n1,
-		const SbVec3f *p2, const SbVec3f *n2,
-		const float *sTexCoords, const float *tTexCoords)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    float vertex[3];
-    SbVec4f texCoord(0,0,0,1);
-    
-    const SbVec3f *p[2]; p[0] = p1; p[1] = p2;
-    const SbVec3f *n[2]; n[0] = n1; n[1] = n2;
-
-// Handy little macro to set a primitiveVertice's point, normal, and
-// texture coordinate:
-#define SET(pv,i,row,col) \
-    {vertex[0] = p[col][i+row][0] + genTranslate[0]; \
-     vertex[1] = p[col][i+row][1] + genTranslate[1]; \
-     vertex[2] = p[col][i+row][2]; \
-     genPrimVerts[pv]->setPoint(vertex);\
-     genPrimVerts[pv]->setNormal(n[col][i*2+row]); \
-     texCoord[0] = sTexCoords[i+row]; \
-     texCoord[1] = tTexCoords[col]; \
-     genPrimVerts[pv]->setTextureCoords(texCoord); \
-    }
-
-    SoText3 *t3 = currentGeneratingNode;
-
-    for (int i = 0; i < nPoints-1; i++) {
-	// First triangle: 
-	SET(0, i, 0, 0)
-	SET(1, i, 1, 0)
-	SET(2, i, 0, 1)
-	t3->invokeTriangleCallbacks(genAction, genPrimVerts[0],
-				    genPrimVerts[1], genPrimVerts[2]);
-
-	// Second triangle:
-	SET(0, i, 1, 1)
-	SET(1, i, 0, 1)
-	SET(2, i, 1, 0)
-	t3->invokeTriangleCallbacks(genAction, genPrimVerts[0],
-				    genPrimVerts[1], genPrimVerts[2]);
-#undef SET
-    }
-}
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Given two correctly rotated and positioned bevels, this routine
-//    renders triangles in between them.
-//
-// Use: private, static
-
-void
-SoText3::renderSideTris(int nPoints, const SbVec3f *p1, const SbVec3f *n1,
-			const SbVec3f *p2, const SbVec3f *n2,
-			const float *sTex, const float *tTex)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    // Note:  the glBegin(GL_QUADS) is optimized up into the
-    // routine that calls generateSideChar, so there is one glBegin
-    // per character.
-    for (int i = 0; i < nPoints-1; i++) {
-	if (genTexCoord) glTexCoord2f(sTex[i+1], tTex[0]);
-	glNormal3fv(n1[i*2+1].getValue());
-	glVertex3fv(p1[i+1].getValue());
-
-	if (genTexCoord) glTexCoord2f(sTex[i+1], tTex[1]);
-	glNormal3fv(n2[i*2+1].getValue());
-	glVertex3fv(p2[i+1].getValue());
-
-	if (genTexCoord) glTexCoord2f(sTex[i], tTex[1]);
-	glNormal3fv(n2[i*2].getValue());
-	glVertex3fv(p2[i].getValue());
-
-	if (genTexCoord) glTexCoord2f(sTex[i], tTex[0]);
-	glNormal3fv(n1[i*2].getValue());
-	glVertex3fv(p1[i].getValue());
-    }
-}
-	    
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Called by the GLU tesselator when we are beginning a triangle
-//    strip, fan, or set of independent triangles.
-//
-// Use: static, private
-
-void
-SoText3::beginCB(GLenum primType)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    genPrimType = primType;
-    genWhichVertex = 0;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Called by the GLU tesselator when we are done with the
-//    strip/fan/etc.
-//
-// Use: static, private
-
-void
-SoText3::endCB()
-//
-////////////////////////////////////////////////////////////////////////
-{
-    genWhichVertex = 0;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Called by the GLU tesselator when we are generating primitives.
-//
-// Use: static, private
-
-void
-SoText3::vtxCB(void *v)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    SbVec2f &vv = *((SbVec2f *)v);
-    float vertex[3];
-    vertex[0] = vv[0] + genTranslate[0];
-    vertex[1] = vv[1] + genTranslate[1];
-    vertex[2] = genTranslate[2];
-
-    SoText3 *t3 = currentGeneratingNode;
-    
-    // Fill in one of the primitive vertices:
-    genPrimVerts[genWhichVertex]->setPoint(vertex);
-
-    SbVec4f texCoord;
-    
-    // And texture coordinates:
-    if (genTexCoord) {
-	float textHeight = t3->myFont->getHeight();
-	texCoord.setValue(vertex[0]/textHeight, vertex[1]/textHeight,
-			  0.0, 1.0);
-	// S coordinates go other way on back...
-	if (genBack) texCoord[0] = -texCoord[0];
-    } else {
-	texCoord = tce->get(vertex, genPrimVerts[0]->getNormal());
-    }
-    genPrimVerts[genWhichVertex]->setTextureCoords(texCoord);
-	
-    genWhichVertex = (genWhichVertex+1)%3;
-
-    // If we just filled in the third vertex, we can spit out a
-    // triangle:
-    if (genWhichVertex == 0) {
-	// If we are doing the BACK part, reverse the triangle:
-	if (genBack) {
-	    t3->invokeTriangleCallbacks(genAction,
-					genPrimVerts[2],
-					genPrimVerts[1],
-					genPrimVerts[0]);
-	} else {
-	    t3->invokeTriangleCallbacks(genAction,
-					genPrimVerts[0],
-					genPrimVerts[1],
-					genPrimVerts[2]);
-	}
-	// Now, need to set-up for the next vertex.
-	// Three cases to deal with-- independent triangles, triangle
-	// strips, and triangle fans.
-	switch (genPrimType) {
-	  case GL_TRIANGLES:
-	    // Don't need to do anything-- every three vertices
-	    // defines a triangle.
-	    break;
-
-// Useful macro:
-#define SWAP(a, b) { SoPrimitiveVertex *t = a; a = b; b = t; }
-
-	  case GL_TRIANGLE_FAN:
-	    // For triangle fans, vertex zero stays the same, but
-	    // vertex 2 becomes vertex 1, and the next vertex to come
-	    // in will replace vertex 2 (the old vertex 1).
-	    SWAP(genPrimVerts[1], genPrimVerts[2]);
-	    genWhichVertex = 2;
-	    break;
-
-	  case GL_TRIANGLE_STRIP:
-	    // For triangle strips, vertex 1 becomes vertex 0, vertex
-	    // 2 becomes vertex 1, and the new triangle will replace
-	    // vertex 2 (the old vertex 0).
-	    SWAP(genPrimVerts[1], genPrimVerts[0]);
-	    SWAP(genPrimVerts[2], genPrimVerts[1]);
-	    genWhichVertex = 2;
-	    break;
-#undef SWAP
-	}
-    }
-}
-
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Find an appropriate font, given a state.  A bunch of elements
-//    (fontName, fontSize, creaseAngle, complexity and profile) must
-//    be enabled in the state...
-//
-// Use: static, internal
-
-SoOutlineFontCache *
-SoOutlineFontCache::getFont(SoState *state, SbBool forRender)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    if (fonts == NULL) {
-	// One-time font library initialization
-	fonts = new SbPList;
-	context = flCreateContext(NULL, FL_FONTNAME, NULL,
-				  1.0, 1.0);
-	if (context == NULL) {
-#ifdef DEBUG
-	    SoDebugError::post("SoText3::getFont",
-			       "flCreateContext returned NULL");
-#endif
-	    return NULL;
-	}
-	flMakeCurrentContext(context);
-	flSetHint(FL_HINT_FONTTYPE, FL_FONTTYPE_OUTLINE);
-    }
-    else if (context == NULL) return NULL;
-    else {
-	if (flGetCurrentContext() != context)
-	    flMakeCurrentContext(context);
-    }
-
-    SoOutlineFontCache *result = NULL;
-    for (int i = 0; i < fonts->getLength() && result == NULL; i++) {
-	SoOutlineFontCache *c = (SoOutlineFontCache *) (*fonts)[i];
-	if (forRender ? c->isRenderValid(state) : c->isValid(state)) {
-	    result = c; // Loop will terminate...
-	    result->ref(); // Increment ref count
-	    if (flGetCurrentFont() != result->fontId) {
-		flMakeCurrentFont(result->fontId);
-	    }
-	}
-    }
-    // If none match:
-    if (result == NULL) {
-	result = new SoOutlineFontCache(state);
-
-	// If error:
-	if (result->fontId == 0) {
-	    delete result;
-	    return NULL;
-	}
-    }
-    return result;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Sees if this font is valid.  If it is valid, it also makes it
-//    current.
-//
-// Use: public
-
-SbBool
-SoOutlineFontCache::isValid(SoState *state) const
-//
-////////////////////////////////////////////////////////////////////////
-{
-    SbBool result = SoCache::isValid(state);
-    
-    if (result) {
-	if (flGetCurrentContext() != context) {
-	    flMakeCurrentContext(context);
-	    flMakeCurrentFont(fontId);
-	}
-	else if (flGetCurrentFont() != fontId)
-	    flMakeCurrentFont(fontId);
-    }
-    return result;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Figures out if this cache is valid for rendering.
-//
-// Use: internal
-
-SbBool
-SoOutlineFontCache::isRenderValid(SoState *state) const
-//
-////////////////////////////////////////////////////////////////////////
-{
-    // Special cache case here:  if we generated side display lists
-    // without texture coordinates AND we need texture coordinates,
-    // we'll have to regenerate and this cache is invalid:
-    if (sideList) {
-	if (!sidesHaveTexCoords &&
-	    SoGLTextureEnabledElement::get(state)) {
-	    return FALSE;
-	}
-    }
-
-    if (!isValid(state)) return FALSE;
-
-    if (frontList && 
-	frontList->getContext() != SoGLCacheContextElement::get(state))
-	return FALSE;
-    if (sideList && 
-	sideList->getContext() != SoGLCacheContextElement::get(state))
-	return FALSE;
-
-    return TRUE;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Constructor.  Called by getFont().
-//
-// Use: private
-
-SoOutlineFontCache::SoOutlineFontCache(SoState *state) : 
-	SoCache(state)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    ref();
-
-    frontList = sideList = NULL;
-
-    // Add element dependencies explicitly here; making 'this' the
-    // CacheElement doesn't work if we are being constructed in an
-    // action that doesn't have caches.
-    SbName font = SoFontNameElement::get(state);
-    addElement(state->getConstElement(
-	SoFontNameElement::getClassStackIndex()));
-    if (font == SoFontNameElement::getDefault()) {
-	font = SbName("Utopia-Regular");
-    }
-    
-    float uems;
-    
-    // Remember size
-    fontSize = SoFontSizeElement::get(state);
-    addElement(state->getConstElement(
-	SoFontSizeElement::getClassStackIndex()));
-    
-    // Figure out complexity...
-    float complexity = SoComplexityElement::get(state);
-    addElement(state->getConstElement(
-	SoComplexityElement::getClassStackIndex()));
-    addElement(state->getConstElement(
-	SoComplexityTypeElement::getClassStackIndex()));
-
-    switch (SoComplexityTypeElement::get(state)) {
-      case SoComplexityTypeElement::OBJECT_SPACE:
-	{
-	    // Two ramps-- complexity of zero  == 250/1000 of an em
-	    //             complexity of .5    == 20/1000 of an em
-	    //             complexity of 1     == 1/1000 of an em
-	    const float ZERO = 250;
-	    const float HALF = 20;
-	    const float ONE = 1;
-	    if (complexity > 0.5) uems = (2.0-complexity*2.0)*(HALF-ONE)+ONE;
-	    else uems = (1.0-complexity*2.0)*(ZERO-HALF)+HALF;
-	}
-	break;
-
-      case SoComplexityTypeElement::SCREEN_SPACE:
-	{
-	    SbVec3f p(fontSize, fontSize, fontSize);
-	    SbVec2s rectSize;
-	    
-	    SoShape::getScreenSize(state, SbBox3f(-p, p), rectSize);
-	    float maxSize =
-		(rectSize[0] > rectSize[1] ? rectSize[0] : rectSize[1]);
-	    uems = 250.0 / (1.0 + 0.25 * maxSize * complexity *
-			    complexity);
-	    
-	    // We have to manually add the dependency on the
-	    // projection, view and model matrix elements (these are
-	    // gotten in the SoShape::getScreenSize routine), and the
-	    // ViewportRegionElement:
-	    addElement(state->getConstElement(
-		SoProjectionMatrixElement::getClassStackIndex()));
-	    addElement(state->getConstElement(
-		SoViewingMatrixElement::getClassStackIndex()));
-	    addElement(state->getConstElement(
-		SoModelMatrixElement::getClassStackIndex()));
-	    addElement(state->getConstElement(
-		SoViewportRegionElement::getClassStackIndex()));
-	}
-	break;
-
-      case SoComplexityTypeElement::BOUNDING_BOX:
-	{
-	    uems = 20;
-	}
-	break;
-    }
-    flSetHint(FL_HINT_TOLERANCE, uems);
-
-    static GLfloat m[2][2] = { 1.0, 0.0, 0.0, 1.0 };
-
-    fontId = flCreateFont((const GLubyte *)font.getString(), m, 0, NULL);
-
-    // If error creating font:
-    if (fontId == 0) {
-	// Try Utopia-Regular, unless we just did!
-	if (font != SbName("Utopia-Regular")) {
-#ifdef DEBUG
-	    SoDebugError::post("SoText3::getFont",
-		      "Couldn't find font %s, replacing with Utopia-Regular",
-		       font.getString());
-#endif
-	    fontId = flCreateFont((GLubyte *)"Utopia-Regular", m, 0, NULL);
-	}
-	if (fontId == 0) {
-#ifdef DEBUG
-	    SoDebugError::post("SoText3::getFont",
-			       "Couldn't find font Utopia-Regular!");
-#endif
-	}
-    }
-
-    flMakeCurrentFont(fontId);
-
-    numChars = 256;  // ??? NEED TO REALLY KNOW HOW MANY CHARACTERS IN
-		     // FONT!
-    sidesHaveTexCoords = FALSE;
-
-    frontFlags = new SbBool[numChars];
-    sideFlags = new SbBool[numChars];
-    outlines = new SoFontOutline*[numChars];
-    int i;
-    for (i = 0; i < numChars; i++) {
-	frontFlags[i] = sideFlags[i] = FALSE;
-	outlines[i] = NULL;
-    }
-
-    // Get profile info:
-    const SoNodeList &profiles = SoProfileElement::get(state);
-    addElement(state->getConstElement(
-	SoProfileElement::getClassStackIndex()));
-    addElement(state->getConstElement(
-	SoProfileCoordinateElement::getClassStackIndex()));
-    nProfileVerts = 0;
-    if (profiles.getLength() > 0) {
-	SoProfile *profileNode = (SoProfile *)profiles[0];
-	profileNode->getVertices(state, nProfileVerts, profileVerts);
-    } else {
-	nProfileVerts = 2;
-	profileVerts = new SbVec2f[2];
-	profileVerts[0].setValue(0, 0);
-	profileVerts[1].setValue(1, 0);
-    }	
-
-    if (nProfileVerts > 1) {
-	cosCreaseAngle = cos(SoCreaseAngleElement::get(state));
-	addElement(state->getConstElement(
-	    SoCreaseAngleElement::getClassStackIndex()));
-	int nSegments = (int) nProfileVerts - 1;
-
-	// Figure out normals for profiles; there are twice as many
-	// normals as segments.  The two normals for each segment endpoint
-	// may be averaged with the normal for the next segment, depending
-	// on whether or not the angle between the segments is greater
-	// than the creaseAngle.
-	profileNorms = new SbVec2f[nSegments*2];
-	figureSegmentNorms(profileNorms, (int) nProfileVerts, profileVerts,
-			   cosCreaseAngle, FALSE);
-	// Need to flip all the normals because of the way the profiles
-	// are defined:
-	for (i = 0; i < nSegments*2; i++) {
-	    profileNorms[i] *= -1.0;
-	}
-    
-	// Figure out S texture coordinates, which run along the profile:
-	sTexCoords = new float[nProfileVerts];
-	figureSegmentTexCoords(sTexCoords, (int) nProfileVerts,
-			       profileVerts, FALSE);
-	// And reverse them, so 0 is at the back of the profile:
-	float max = sTexCoords[nProfileVerts-1];
-	for (i = 0; i < nProfileVerts; i++) {
-	    sTexCoords[i] = max - sTexCoords[i];
-	}
-    } else {
-	profileNorms = NULL;
-	sTexCoords = NULL;
-    }
-
-    fonts->append(this);
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Destructor
-//
-// Use: private
-
-SoOutlineFontCache::~SoOutlineFontCache()
-//
-////////////////////////////////////////////////////////////////////////
-{
-    if (fontId) {
-
-	if (flGetCurrentContext() != context) {
-	    flMakeCurrentContext(context);
-	    flMakeCurrentFont(fontId);
-	}
-	else if (flGetCurrentFont() != fontId)
-	    flMakeCurrentFont(fontId);
-
-	delete[] frontFlags;
-	delete[] sideFlags;
-
-	// Free up cached outlines
-	int i;
-	for (i = 0; i < numChars; i++) {
-	    if (outlines[i]) delete outlines[i];
-	}
-	delete[] outlines;
-    
-	if (hasProfile()) {
-	    delete[] profileVerts;
-	    delete[] sTexCoords;
-	    delete[] profileNorms;
-	}
-
-	// Only destroy the font library font if no other font caches
-	// are using the same font identifier:
-	SbBool otherUsing = FALSE;
-	for (i = 0; i < fonts->getLength(); i++) {
-	    SoOutlineFontCache *t = (SoOutlineFontCache *)(*fonts)[i];
-	    if (t != this && t->fontId == fontId) otherUsing = TRUE;
-	}
-	if (!otherUsing) {
-	    flDestroyFont(fontId);
-	}
-	fonts->remove(fonts->find(this));
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Destroy this cache.  Called by unref(); frees up OpenGL display
-//    lists.
-//
-// Use: protected, virtual
-
-void
-SoOutlineFontCache::destroy(SoState *)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    // Pass in NULL to unref because this cache may be destroyed
-    // from an action _other_ than GLRender:
-    if (frontList) {
-	frontList->unref(NULL);
-	frontList = NULL;
-    }
-    if (sideList) {
-	sideList->unref(NULL);
-	sideList = NULL;
-    }
-    SoCache::destroy(NULL);
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Returns the width of the given string
-//
-// Use: private
-
-float
-SoOutlineFontCache::getWidth(const SbString &string)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    float total = 0.0;
-    const char *chars = string.getString();
-    
-    for (int i = 0; i < string.getLength(); i++) {
-	SoFontOutline *outline = getOutline(chars[i]);
-	total += outline->getCharAdvance()[0];
-    }
-
-    return total;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Returns the 2D bounding box of the given character.
-//
-// Use: private
-
-void
-SoOutlineFontCache::getCharBBox(const char c, SbBox2f &result)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    result.makeEmpty();
-
-    if (!fontId) return;
-
-    SoFontOutline *outline = getOutline(c);
-    
-    for (int i = 0; i < outline->getNumOutlines(); i++) {
-	for (int j = 0; j < outline->getNumVerts(i); j++) {
-	    result.extendBy(outline->getVertex(i,j));
-	}
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Given a character, return an outline for the character.  If, for
-//    some reason, we can't get the outline, an 'identity' or 'null'
-//    outline is returned.
-//
-// Use: private
-
-SoFontOutline *
-SoOutlineFontCache::getOutline(const char c)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    if (!fontId) {
-	return SoFontOutline::getNullOutline();
-    }
-    if (outlines[c] == NULL) {
-	FLoutline *flo = flGetOutline(fontId, c);
-	if (flo == NULL) {
-	    outlines[c] = SoFontOutline::getNullOutline();
-	} else {
-	    outlines[c] = new SoFontOutline(flo, fontSize);
-	    flFreeOutline(flo);
-	}
-    }
-    return outlines[c];
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Given a character, return the correct amount to advance after
-//    drawing that character.  Note:  if we ever wanted to deal with
-//    kerning, we'd have to fix this...
-//
-// Use: private
-
-SbVec2f
-SoOutlineFontCache::getCharOffset(const char c)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    if (!fontId) return SbVec2f(0,0);
-
-    return getOutline(c)->getCharAdvance();
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Render the fronts of the given string.  The GL transformation
-//    matrix is munged by this routine-- surround it by
-//    PushMatrix/PopMatrix.
-//
-// Use: public, internal
-
-void
-SoOutlineFontCache::generateFrontChar(const char c,
-				      gluTESSELATOR *tobj)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    if (!fontId) return;
-
-    GLdouble v[3];
-
-    tesselationError = FALSE;
-    gluBeginPolygon(tobj);
-    
-    // Get outline for character
-    SoFontOutline *outline = getOutline(c);
-    int i;
-    for (i = 0; i < outline->getNumOutlines(); i++) {
-
-	// It would be nice if the font manager told us the type of
-	// each outline...
-	gluNextContour(tobj, (GLenum)GLU_UNKNOWN);
-
-	for (int j = 0; j < outline->getNumVerts(i); j++) {
-	    SbVec2f &t = outline->getVertex(i,j);
-	    v[0] = t[0];
-	    v[1] = t[1];
-	    v[2] = 0.0;
-
-	    // Note: The third argument MUST NOT BE a local variable,
-	    // since glu just stores the pointer and only calls us
-	    // back at the gluEndPolygon call.
-	    gluTessVertex(tobj, v, &t);
-	}
-    }
-    gluEndPolygon(tobj);
-
-    // If there was an error tesselating the character, just generate
-    // a bounding box for the character:
-    if (tesselationError) {
-	SbBox2f charBBox;
-	getCharBBox(c, charBBox);
-	if (!charBBox.isEmpty()) {
-	    SbVec2f boxVerts[4];
-	    charBBox.getBounds(boxVerts[0], boxVerts[2]);
-	    boxVerts[1].setValue(boxVerts[2][0], boxVerts[0][1]);
-	    boxVerts[3].setValue(boxVerts[0][0], boxVerts[2][1]);
-
-	    gluBeginPolygon(tobj);
-	    for (i = 0; i < 4; i++) {
-		v[0] = boxVerts[i][0];
-		v[1] = boxVerts[i][1];
-		v[2] = 0.0;
-		gluTessVertex(tobj, v, &boxVerts[i]);
-	    }
-	    gluEndPolygon(tobj);
-	}
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Sets up for GL rendering.
-//
-// Use: internal
-
-void
-SoOutlineFontCache::setupToRenderFront(SoState *state)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    otherOpen = SoCacheElement::anyOpen(state);
-    if (!otherOpen && !frontList) {
-	frontList = new SoGLDisplayList(state,
-					SoGLDisplayList::DISPLAY_LIST,
-					numChars);
-	frontList->ref();
-    }
-    if (frontList) {
-	// Set correct list base
-	glListBase(frontList->getFirstIndex());
-	frontList->addDependency(state);
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Sets up for GL rendering.
-//
-// Use: internal
-
-void
-SoOutlineFontCache::setupToRenderSide(SoState *state, SbBool willTexture)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    otherOpen = SoCacheElement::anyOpen(state);
-    if (!otherOpen && !sideList) {
-	sideList = new SoGLDisplayList(state,
-					SoGLDisplayList::DISPLAY_LIST,
-					numChars);
-	sideList->ref();
-	sidesHaveTexCoords = willTexture;
-    }
-    if (sideList) {
-	// Set correct list base
-	glListBase(sideList->getFirstIndex());
-	sideList->addDependency(state);
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Returns TRUE if a display lists exists for given character.
-//    Tries to build a display list, if it can.
-//
-// Use: internal
-
-SbBool
-SoOutlineFontCache::hasFrontDisplayList(const char c,
-					gluTESSELATOR *tobj)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    // If we have one, return TRUE
-    if (frontFlags[c] == TRUE) return TRUE;
-    
-    // If we don't and we can't build one, return FALSE.
-    if (otherOpen) return FALSE;
-    
-    // Build one:
-    glNewList(frontList->getFirstIndex()+c, GL_COMPILE);
-    generateFrontChar(c, tobj);
-    SbVec2f t = getOutline(c)->getCharAdvance();
-    glTranslatef(t[0], t[1], 0.0);
-    glEndList();
-    frontFlags[c] = TRUE;
-
-    return TRUE;
-}
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Returns TRUE if a display lists exists for given character.
-//    Tries to build a display list, if it can.
-//
-// Use: internal
-
-SbBool
-SoOutlineFontCache::hasSideDisplayList(const char c,
-				       SideCB callbackFunc)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    // If we have one, return TRUE
-    if (sideFlags[c] == TRUE) return TRUE;
-    
-    // If we don't and we can't build one, return FALSE.
-    if (otherOpen) return FALSE;
-    
-    // Build one:
-    glNewList(sideList->getFirstIndex()+c, GL_COMPILE);
-
-    glBegin(GL_QUADS);    // Render as independent quads:
-    generateSideChar(c, callbackFunc);
-    glEnd();
-
-    SbVec2f t = getOutline(c)->getCharAdvance();
-    glTranslatef(t[0], t[1], 0.0);
-    glEndList();
-    sideFlags[c] = TRUE;
-
-    return TRUE;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Assuming that there are display lists built for all the
-//    characters in given string, render them using the GL's CallLists
-//    routine.
-//
-// Use: internal
-
-void
-SoOutlineFontCache::callFrontLists(const SbString &string)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    const char *str = string.getString();
-
-    glCallLists(string.getLength(), GL_UNSIGNED_BYTE, str);
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Assuming that there are display lists built for all the
-//    characters in given string, render them using the GL's CallLists
-//    routine.
-//
-// Use: internal
-
-void
-SoOutlineFontCache::callSideLists(const SbString &string)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    const char *str = string.getString();
-
-    glCallLists(string.getLength(), GL_UNSIGNED_BYTE, str);
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Assuming that there are not display lists built for all the
-//    characters in given string, render the string.
-//
-// Use: internal
-
-void
-SoOutlineFontCache::renderFront(const SbString &string,
-				gluTESSELATOR *tobj)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    const char *str = string.getString();
-
-    for (int i = 0; i < string.getLength(); i++) {
-	if (frontFlags[str[i]]) {
-	    glCallList(frontList->getFirstIndex()+str[i]);
-	}
-	else {
-	    generateFrontChar(str[i], tobj);
-	    SbVec2f t = getOutline(str[i])->getCharAdvance();
-	    glTranslatef(t[0], t[1], 0.0);
-	}
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Assuming that there are not display lists built for all the
-//    characters in given string, render the string.
-//
-// Use: internal
-
-void
-SoOutlineFontCache::renderSide(const SbString &string,
-			       SideCB callbackFunc)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    const char *str = string.getString();
-
-    for (int i = 0; i < string.getLength(); i++) {
-	if (sideFlags[str[i]]) {
-	    glCallList(sideList->getFirstIndex()+str[i]);
-	}
-	else {
-	    glBegin(GL_QUADS);
-	    generateSideChar(str[i], callbackFunc);
-	    glEnd();
-
-	    SbVec2f t = getOutline(str[i])->getCharAdvance();
-	    glTranslatef(t[0], t[1], 0.0);
-	}
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//   Copy info from the font library into a more convenient form.
-//
-// Use: internal
-
-SoFontOutline::SoFontOutline(FLoutline *outline, float fontSize)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    charAdvance = SbVec2f(outline->xadvance,
-			  outline->yadvance)*fontSize;
-    numOutlines = outline->outlinecount;
-    if (numOutlines != 0) {
-	numVerts = new int[numOutlines];
-	verts = new SbVec2f*[numOutlines];
-	for (int i = 0; i < numOutlines; i++) {
-	    numVerts[i] = outline->vertexcount[i];
-	    if (numVerts[i] != 0) {
-		verts[i] = new SbVec2f[numVerts[i]];
-		for (int j = 0; j < numVerts[i]; j++) {
-		    verts[i][j] = SbVec2f(outline->vertex[i][j].x,
-					  outline->vertex[i][j].y)*fontSize;
-		}
-	    } else {
-		verts[i] = NULL;
-	    }
-	}
-    } else {
-	numVerts = NULL;
-	verts = NULL;
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//   Destructor; free up outline storage
-//
-// Use: internal
-
-SoFontOutline::~SoFontOutline()
-//
-////////////////////////////////////////////////////////////////////////
-{
-    for (int i = 0; i < numOutlines; i++) {
-	if (numVerts[i] != 0)
-	    delete[] verts[i];
-    }
-    if (numOutlines != 0) {
-	delete[] verts;
-	delete[] numVerts;
-    }
-}
-	    
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//   Get a do-nothing outline:
-//
-// Use: internal, static
-
-SoFontOutline *
-SoFontOutline::getNullOutline()
-//
-////////////////////////////////////////////////////////////////////////
-{
-    return new SoFontOutline;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//   Internal constructor used by getNullOutline
-//
-// Use: internal, static
-
-SoFontOutline::SoFontOutline()
-//
-////////////////////////////////////////////////////////////////////////
-{
-    charAdvance = SbVec2f(0,0);
-    numOutlines = 0;
-    numVerts = NULL;
-    verts = NULL;
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//   Find the first and last points in the bevel-- that is where the
-//   front and back of the character will be.
-// Use:
-//   internal
-
-void
-SoOutlineFontCache::getProfileBounds(float &firstZ, float &lastZ)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    if (hasProfile()) {
-	firstZ = -profileVerts[0][0];
-	lastZ = -profileVerts[nProfileVerts-1][0];
-    } else {
-	firstZ = lastZ = 0;
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//   Get the 2D bounding box of the bevel.
-//
-//  Use:
-//    internal
-
-void
-SoOutlineFontCache::getProfileBBox(SbBox2f &profileBox)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    for (int i = 0; i < nProfileVerts; i++) {
-	profileBox.extendBy(profileVerts[i]);
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Called by generateSide.  This generates the bevel triangles for
-//    one character.
-//
-// Use: private
-
-void
-SoOutlineFontCache::generateSideChar(const char c, SideCB callbackFunc)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    if (!hasProfile()) return;
-
-    // Get the outline of the character:
-    SoFontOutline *outline = getOutline(c);
-    
-    for (int i = 0; i < outline->getNumOutlines(); i++) {
-	// For each outline:
-
-	int nOutline = outline->getNumVerts(i);
-
-	SbVec2f *oVerts = new SbVec2f[nOutline];
-	// Copy in verts so figureSegmentNorms can handle them..
-        int j;
-	for (j = 0; j < nOutline; j++) {
-	    oVerts[j] = outline->getVertex(i, j);
-	}
-
-	// First, figure out a set of normals for the outline:
-	SbVec2f *oNorms = new SbVec2f[nOutline*2];
-	figureSegmentNorms(oNorms, nOutline, oVerts, cosCreaseAngle, TRUE);
-
-	// And appropriate texture coordinates:
-	// Figure out T texture coordinates, which run along the
-	// outline:
-	float *tTexCoords = new float[nOutline+1];
-	figureSegmentTexCoords(tTexCoords, nOutline, oVerts, TRUE);
-
-	// Now, generate a set of triangles for each segment in the
-	// outline.  A bevel of profiles is built at each point in the
-	// outline; each profile must be flipped perpendicular to the
-	// outline (x coordinate becomes -z), rotated to be the
-	// average of the normals of the two adjoining segments at
-	// that point, and translated to that point.  Triangles are
-	// formed between consecutive bevels.
-	// Normals are just taken from the 'pNorms' array, after being
-	// rotated the appropriate amount.
-
-	SbVec3f *bevel1 = new SbVec3f[nProfileVerts];
-	SbVec3f *bevelN1 = new SbVec3f[(nProfileVerts-1)*2];
-	SbVec3f *bevel2 = new SbVec3f[nProfileVerts];
-	SbVec3f *bevelN2 = new SbVec3f[(nProfileVerts-1)*2];
-	    
-	// fill out first bevel:
-	fillBevel(bevel1, (int) nProfileVerts, profileVerts,
-		  outline->getVertex(i,0),
-		  oNorms[(nOutline-1)*2+1], oNorms[0*2]);
-	
-	SbVec3f *s1 = bevel1;
-	SbVec3f *s2 = bevel2;
-	
-	for (j = 0; j < nOutline; j++) {
-	    // New normals are calculated for both ends of this
-	    // segment, since the normals may or may not be shared
-	    // with the previous segment.
-	    fillBevelN(bevelN1, (int)(nProfileVerts-1)*2, profileNorms,
-		       oNorms[j*2]);
-
-	    int j2 = (j+1)%nOutline;
-	    // fill out second bevel:
-	    fillBevel(s2, (int) nProfileVerts, profileVerts,
-		      outline->getVertex(i,j2),
-		      oNorms[j*2+1], oNorms[j2*2]);
-	    fillBevelN(bevelN2, (int)(nProfileVerts-1)*2, profileNorms,
-		       oNorms[j*2+1]);
-
-	    // And generate triangles between the two bevels:
-	    (*callbackFunc)((int) nProfileVerts, s1, bevelN1, s2, bevelN2,
-			     sTexCoords, &tTexCoords[j]);
-
-	    // Swap bevel1/2 (avoids some recomputation)
-	    SbVec3f *t;
-	    t = s1; s1 = s2; s2 = t;
-	}
-	delete [] bevelN2;
-	delete [] bevel2;
-	delete [] bevelN1;
-	delete [] bevel1;
-	delete [] tTexCoords;
-	delete [] oNorms;
-	delete [] oVerts;
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Given a set of line segments, this figures out the normal at
-//    each point in each segment.  It uses the creaseAngle passed in
-//    to decide whether or not adjacent segments share normals.  The
-//    isClosed flag is used to determine whether or not the first and
-//    last points should be considered another segment.
-//
-//
-// Use: private
-
-void
-SoOutlineFontCache::figureSegmentNorms(SbVec2f *norms, int nPoints,
-			    const SbVec2f *points,  float cosCreaseAngle,
-			    SbBool isClosed)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    int nSegments;
-    
-    if (isClosed) nSegments = nPoints;
-    else nSegments = nPoints-1;
-    
-    // First, we'll just make all the normals perpendicular to their
-    // segments:
-    int i;
-    for (i = 0; i < nSegments; i++) {
-	SbVec2f n;
-	// This is 2D perpendicular, assuming profile is increasing in
-	// X (which becomes 'decreasing in Z' when we actually use
-	// it...) (note: if a profile isn't increasing in X, the
-	// character will be inside-out, with the front face drawn
-	// behind the back face, etc).
-	SbVec2f v = points[(i+1)%nPoints] - points[i];
-	n[0] = v[1];
-	n[1] = -v[0];
-	n.normalize();
-	
-	norms[i*2] = n;
-	norms[i*2+1] = n;
-    }
-    // Now, figure out if the angle between any two segments is small
-    // enough to average two of their normals.
-    for (i = 0; i < (isClosed ? nSegments : nSegments-1); i++) {
-	SbVec2f seg1 = points[(i+1)%nPoints] - points[i];
-	seg1.normalize();
-	SbVec2f seg2 = points[(i+2)%nPoints] - points[(i+1)%nPoints];
-	seg2.normalize();
-	
-	float dp = seg2.dot(seg1);
-	if (dp > cosCreaseAngle) {
-	    // Average the second normal for this segment, and the
-	    // first normal for the next segment:
-	    SbVec2f average = norms[i*2+1] + norms[((i+1)%nPoints)*2];
-	    average.normalize();
-	    norms[i*2+1] = average;
-	    norms[((i+1)%nPoints)*2] = average;
-	}
-    }
-}    
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Given a set of line segments, this figures out the texture
-//    coordinates for each vertex.  If the isClosed flag is TRUE,
-//    an extra texture coordinate is calculated, AND the points are
-//    traversed in reverse order.
-//
-// Use: private
-
-void
-SoOutlineFontCache::figureSegmentTexCoords(float *texCoords, int nPoints,
-			    const SbVec2f *points, SbBool isClosed)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    float total = 0.0;
-    
-    int i;
-
-    if (isClosed) {
-	for (i = nPoints; i >= 0; i--) {
-	    texCoords[i] = total / getHeight();
-	    if (i > 0) {
-		total += (points[i%nPoints] - points[i-1]).length();
-	    }
-	}
-    } else {
-	for (int i = 0; i < nPoints; i++) {
-	    texCoords[i] = total / getHeight();
-	    if (i+1 < nPoints) {
-		total += (points[i+1] - points[i]).length();
-	    }
-	}
-    }
-}
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Given a set of segments that make up a profile or bevel along
-//    which we'll extrude the front face of the text, this routine
-//    transforms the bevel from its default orientation (in the x-y
-//    plane) to its correct position for a particular point on the
-//    text outline, rotated and translated into position.  The
-//    translation is the point on the outline, and the two normals
-//    passed in are the normals for the segments adjoining that point.
-//
-// Use: private
-
-void
-SoOutlineFontCache::fillBevel(SbVec3f *result, int nPoints,
-	  const SbVec2f *points,
-	  const SbVec2f &translation,
-	  const SbVec2f &n1, const SbVec2f &n2)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    // First, figure out a rotation for this bevel:
-    SbVec2f n = n1+n2;
-    n.normalize();
-    
-    // Now, for each point:
-    for (int i = 0; i < nPoints; i++) {
-	// This is really the 2D rotation formula,
-	// x = x' cos(angle) - y' sin(angle)
-	// y = x' sin(angle) + y' cos(angle)
-	// Because of the geometry, cos(angle) is n[1] and sin(angle)
-	// is -n[0], and x' is zero (the bevel always goes straight
-	// back).
-	result[i][0] = points[i][1] * n[0] + translation[0];
-	result[i][1] = points[i][1] * n[1] + translation[1];
-	result[i][2] = -points[i][0];
-    }
-} 
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Given a set of normals for a profile, this rotates the normals
-//    from their default position (int the x-y plane) to the correct
-//    orientation for a particular point on the texts outline.  The
-//    normal passed in is the normal for one end of one of the
-//    outline's segments.
-
-void
-SoOutlineFontCache::fillBevelN(SbVec3f *result, int nNorms,
-	  const SbVec2f *norms,
-	  const SbVec2f &n)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    // Now, for each point:
-    for (int i = 0; i < nNorms; i++) {
-	// This is really the 2D rotation formula,
-	// x = x' cos(angle) - y' sin(angle)
-	// y = x' sin(angle) + y' cos(angle)
-	// Because of the geometry, cos(angle) is n[1] and sin(angle)
-	// is -n[0], and x' is zero (the bevel always goes straight
-	// back).
-	result[i][0] = norms[i][1] * n[0];
-	result[i][1] = norms[i][1] * n[1];
-	result[i][2] = -norms[i][0];
-    }
-} 
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    Called by the GLU tesselator when there is an error
-//
-// Use: static, private
-//
-////////////////////////////////////////////////////////////////////////
-
-#ifdef DEBUG
-void
-SoOutlineFontCache::errorCB(GLenum whichErr)
-{
-    SoDebugError::post("SoText3::errorCB", "%s", gluErrorString(whichErr));
-    tesselationError = TRUE;
-}
-#else  /* DEBUG */
-void
-SoOutlineFontCache::errorCB(GLenum)
-{
-    tesselationError = TRUE;
-}
-#endif /* DEBUG */
-#endif /*IRIX_6*/
 
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoTexture2.c++ inventor/lib/database/src/so/nodes/SoTexture2.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoTexture2.c++	2000-10-14 12:46:07.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoTexture2.c++	2005-08-01 17:36:15.000000000 +0200
@@ -397,6 +397,9 @@
 #include <setjmp.h>
 
 #include "readGIF.h"
+#ifdef WIN32
+# define XMD_H
+#endif
 #include <jpeglib.h>
 
 typedef struct {
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoTextureCoordinateEnvironment.c++ inventor/lib/database/src/so/nodes/SoTextureCoordinateEnvironment.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoTextureCoordinateEnvironment.c++	2000-08-15 14:56:21.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoTextureCoordinateEnvironment.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,6 +51,7 @@
  _______________________________________________________________________
  */
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/actions/SoCallbackAction.h>
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/actions/SoPickAction.h>
@@ -60,7 +61,7 @@
 #include <Inventor/elements/SoViewingMatrixElement.h>
 #include <Inventor/nodes/SoTextureCoordinateEnvironment.h>
 
-#include <GL/gl.h>
+#include OPENGL_GL_H
 
 SO_NODE_SOURCE(SoTextureCoordinateEnvironment);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoTextureCoordinatePlane.c++ inventor/lib/database/src/so/nodes/SoTextureCoordinatePlane.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoTextureCoordinatePlane.c++	2000-08-15 14:56:21.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoTextureCoordinatePlane.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,6 +51,7 @@
  _______________________________________________________________________
  */
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/actions/SoCallbackAction.h>
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/actions/SoPickAction.h>
@@ -58,7 +59,7 @@
 #include <Inventor/elements/SoTextureQualityElement.h>
 #include <Inventor/nodes/SoTextureCoordinatePlane.h>
 
-#include <GL/gl.h>
+#include OPENGL_GL_H
 
 SO_NODE_SOURCE(SoTextureCoordinatePlane);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoTriangleStripSet.pp inventor/lib/database/src/so/nodes/SoTriangleStripSet.pp
--- /tmp/inventor/lib/database/src/so/nodes/SoTriangleStripSet.pp	2000-08-15 14:56:21.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoTriangleStripSet.pp	2007-01-16 09:27:04.000000000 +0100
@@ -54,7 +54,8 @@
  _______________________________________________________________________
  */
 
-#include <GL/gl.h>
+#include <Inventor/system/SbSystem.h>
+#include OPENGL_GL_H
 #include <Inventor/SoPickedPoint.h>
 #include <Inventor/SoPrimitiveVertex.h>
 #include <Inventor/actions/SoGLRenderAction.h>
@@ -140,14 +141,18 @@
     // Get ShapeStyleElement
     const SoShapeStyleElement *shapeStyle = SoShapeStyleElement::get(state);
 
+    SoVertexProperty *vp = (SoVertexProperty *)vertexProperty.getValue();
+ 
     // First see if the object is visible and should be rendered now:
     if (shapeStyle->mightNotRender()) {
-        if (! shouldGLRender(action))
+        if (vpCache.mightNeedSomethingFromState(shapeStyle)) {
+	    vpCache.fillInColorAndTranspAvail(vp, state);
+	}
+	if (! shouldGLRender(action))
             return;
     }
 
     if (vpCache.mightNeedSomethingFromState(shapeStyle)) {
-	SoVertexProperty *vp = (SoVertexProperty *)vertexProperty.getValue();
         vpCache.fillInCache(vp, state);
 
 	// If using USE_REST_OF_VERTICES (-1), need to figure out how
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/nodes/SoVertexProperty.c++ inventor/lib/database/src/so/nodes/SoVertexProperty.c++
--- /tmp/inventor/lib/database/src/so/nodes/SoVertexProperty.c++	2000-09-03 04:24:56.000000000 +0200
+++ inventor/lib/database/src/so/nodes/SoVertexProperty.c++	2007-01-16 09:27:04.000000000 +0100
@@ -287,7 +287,11 @@
     SoVertexProperty::doAction(action);
 }
 
+#ifdef WIN32
+void APIENTRY vp_glColor4ubv(const GLubyte *v)
+#else
 void vp_glColor4ubv(const GLubyte *v)
+#endif
 {
     GLubyte _v[4];
     DGL_HTON_INT32(*((int32_t*)_v), *((int32_t*)v));
@@ -296,6 +300,31 @@
 }
 
 void
+SoVertexPropertyCache::fillInColorAndTranspAvail(const SoVertexProperty *vp,
+		                                 SoState *state)
+{
+    // Diffuse colors:
+    transpIsInVP = FALSE;
+    if (!SoGLLazyElement::isColorIndex(state)) {
+	SbBool colorOverride = ((SoOverrideElement::getDiffuseColorOverride(state))||
+		                (SoOverrideElement::getTransparencyOverride(state)));
+	if ((!colorOverride) &&		
+	    (vp && (numColors = vp->orderedRGBA.getNum()) != 0)) {
+	    colorIsInVP = TRUE;
+	    //Check to see if there really is a non-opaque transparency:
+	    for(int i = 0; i< vp->orderedRGBA.getNum(); i++){
+		if ((vp->orderedRGBA[i] & 0xff) != 0xff){
+		    transpIsInVP = TRUE;
+		    break;
+		}
+	    }
+	} else {  //Get color from state
+	    colorIsInVP = FALSE;
+	} 
+    }
+}
+
+void
 SoVertexPropertyCache::fillInCache(const SoVertexProperty *vp,
 		 SoState *state)
 {
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/sensors/SoSensorMgr.c++ inventor/lib/database/src/so/sensors/SoSensorMgr.c++
--- /tmp/inventor/lib/database/src/so/sensors/SoSensorMgr.c++	2003-07-12 00:40:53.000000000 +0200
+++ inventor/lib/database/src/so/sensors/SoSensorMgr.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,6 +51,7 @@
  _______________________________________________________________________
  */
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/sensors/SoSensorManager.h>
 #include <Inventor/sensors/SoSensors.h>
 #include <Inventor/errors/SoDebugError.h>
@@ -64,7 +65,9 @@
 #ifdef DEBUG
 #include <SoDebug.h>
 static SbTime startTime;
-#endif
+#endif
+
+#include <Inventor/SoCatch.h>
 
 ////////////////////////////////////////////////////////////////////////
 //
@@ -407,9 +410,26 @@
 	    
 	}
 #endif
-	// Trigger the sensor. NOTE: this can add new entries to the
-	// queue or remove entries.
-	((SoSensor *) first)->trigger();
+
+        // Implement catch and error posting in case of enabled
+        // exception handling. Otherwise execute stuff normally 
+        // and let it crash. See file SoCatch.h for more information.
+        SO_CATCH_START
+
+	  // Trigger the sensor. NOTE: this can add new entries to the
+	  // queue or remove entries.
+	  ((SoSensor *) first)->trigger();
+
+        SO_CATCH_ELSE(;)
+
+	  // Trigger the sensor. NOTE: this can add new entries to the
+	  // queue or remove entries.
+	  ((SoSensor *) first)->trigger();
+
+        SO_CATCH_END(SoType::badType(), 
+                     "calling delay queue sensor callback", 
+                     SoType::badType(), 
+                     ".")
     }
     --processingQueue;
 
@@ -466,7 +486,22 @@
 	
 	}
 #endif
-	((SoSensor *) first)->trigger();
+
+        // Implement catch and error posting in case of enabled
+        // exception handling. Otherwise execute stuff normally 
+        // and let it crash. See file SoCatch.h for more information.
+        SO_CATCH_START
+
+          ((SoSensor *) first)->trigger();
+
+        SO_CATCH_ELSE(;)
+
+          ((SoSensor *) first)->trigger();
+
+        SO_CATCH_END(SoType::badType(), 
+                     "calling immediate queue sensor callback", 
+                     SoType::badType(), 
+                     ".")
     }
 
     processingImmediate = FALSE;
@@ -517,9 +552,25 @@
 		      (((SoTimerQueueSensor *)first)->
 			      getTriggerTime()-startTime).getValue());
 	}
-#endif
-	// Trigger the sensor.
-	first->trigger();
+#endif
+
+        // Implement catch and error posting in case of enabled
+        // exception handling. Otherwise execute stuff normally 
+        // and let it crash. See file SoCatch.h for more information.
+        SO_CATCH_START
+
+	  // Trigger the sensor.
+	  first->trigger();
+
+        SO_CATCH_ELSE(;)
+
+	  // Trigger the sensor.
+	  first->trigger();
+
+        SO_CATCH_END(SoType::badType(), 
+                     "calling timer queue sensor callback", 
+                     SoType::badType(), 
+                     ".")
     }
 
     //
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/SoBase.c++ inventor/lib/database/src/so/SoBase.c++
--- /tmp/inventor/lib/database/src/so/SoBase.c++	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/src/so/SoBase.c++	2005-08-04 10:58:07.000000000 +0200
@@ -51,13 +51,17 @@
  _______________________________________________________________________
  */
 
+#ifndef WIN32
 #include <dlfcn.h>
+#endif
 #include <ctype.h>
 
+#include <Inventor/SoCatch.h>
 #include <Inventor/SoDB.h>
 #include <Inventor/SoInput.h>
 #include <Inventor/SoOutput.h>
 #include <Inventor/SoPath.h>
+#include <Inventor/SoTrace.h>
 #include <Inventor/sensors/SoDataSensor.h>
 #include <Inventor/errors/SoDebugError.h>
 #include <Inventor/errors/SoReadError.h>
@@ -403,7 +407,34 @@
 	}
     }
 
+#if 1
+
+    delete this;
+
+#else
+
+   // Enable/disable execution in a try/catch block as described
+   // in SoCatch settings. Exceptions and crashes within calls to
+   // inventor nodes can be catched and reported by SoError.
+   SO_CATCH_START
+
     delete this;
+
+   SO_CATCH_ELSE( SoType myType=getTypeId(); )
+
+    delete this;
+
+   // On crash and enabled exception handling the following will be 
+   // reported to SoError:
+   // "Crash in 
+   //  <thisType->getName()>
+   //  while
+   //  <deleting>
+   //  <>
+   //  <it.>"
+   SO_CATCH_END(myType, "deleting", SoType::badType(), "it.")
+
+#endif
 }
 
 ////////////////////////////////////////////////////////////////////////
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/So.c++ inventor/lib/database/src/so/So.c++
--- /tmp/inventor/lib/database/src/so/So.c++	2000-08-15 14:56:17.000000000 +0200
+++ inventor/lib/database/src/so/So.c++	2005-08-02 12:52:12.000000000 +0200
@@ -71,6 +71,8 @@
 #include "SoPickedPoint.c++"
 #include "SoPrimitiveVertex.c++"
 #include "SoTranscribe.c++"
+#ifndef WIN32	// FIXME: SoOffscreenRenderer not yet ported to the WIN32 platform
 #include "SoOffscreenRenderer.c++"
+#endif
 #include "SoByteStream.c++"
 #include "SoDebug.c++"
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/SoDB.c++ inventor/lib/database/src/so/SoDB.c++
--- /tmp/inventor/lib/database/src/so/SoDB.c++	2000-10-14 12:46:07.000000000 +0200
+++ inventor/lib/database/src/so/SoDB.c++	2005-08-01 14:06:19.000000000 +0200
@@ -52,6 +52,7 @@
  */
 
 #include <stdlib.h>
+#include <Inventor/SoCatch.h>
 #include <Inventor/SbDict.h>
 #include <Inventor/SbString.h>
 #include <Inventor/SoDB.h>
@@ -193,7 +194,8 @@
 	//	actions must be done before nodes
 	//	elements must be done before actions
 	//
-	SoBase::initClass();
+        SoCatch::initClass();
+        SoBase::initClass();
 	SoFieldContainer::initClass();
 	SoPath::initClass();
 	SoGlobalField::initClass();
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/SoInput.c++ inventor/lib/database/src/so/SoInput.c++
--- /tmp/inventor/lib/database/src/so/SoInput.c++	2000-10-26 01:47:47.000000000 +0200
+++ inventor/lib/database/src/so/SoInput.c++	2006-12-20 12:07:21.000000000 +0100
@@ -65,11 +65,15 @@
 #include <Inventor/SoPath.h>
 #include <Inventor/errors/SoDebugError.h>
 #include <Inventor/errors/SoReadError.h>
+#include "../../../mevis/src/utf8_filesupport_win32.h"
 
 // Static list of directories to search in.  Allocated by SoInput::init.
 SbStringList *SoInput::directories = NULL;
 
 #define COMMENT_CHAR '#'
+#define READ_STRINGBUFFER_SIZE 64
+
+#define SB_MAX(a,b) ((a) > (b)) ? (a) : (b)
 
 
 /////////////////////////////////////////////////////////////////////////
@@ -389,13 +393,22 @@
 	char	*dir;
 	int	i = 0;
 
+#ifdef WIN32
+	// Parse semicolon-separated directories from string
+	dir = strtok(d, ";");
+#else
 	// Parse colon- or space-separated directories from string
 	dir = strtok(d, ": \t");
+#endif
 
 	while (dir != NULL) {
 	    // Make sure directories are added in the same order
 	    directories->insert(new SbString(dir), i++);
-	    dir = strtok(NULL, ": \t");
+#ifdef WIN32
+	    dir = strtok(NULL, ";");
+#else
+            dir = strtok(NULL, ": \t");
+#endif
 	}
 
 	free(d);
@@ -422,12 +435,21 @@
 	char *d = strdup(dirs);
 	char *dir;
 
+#ifdef WIN32
+	// Parse semicolon-separated directories from string
+	dir = strtok(d, ";");
+#else
 	// Parse colon- or space-separated directories from string
 	dir = strtok(d, ": \t");
+#endif
 
 	while (dir != NULL) {
 	    addDirectoryLast(dir);
-	    dir = strtok(NULL, ": \t");
+#ifdef WIN32
+	    dir = strtok(NULL, ";");
+#else
+            dir = strtok(NULL, ": \t");
+#endif
 	}
 
 	free(d);
@@ -1757,10 +1779,17 @@
     int		i;
 
     // If filename is absolute
+#ifdef WIN32
+    if (isalpha(fileName[0]) && fileName[1] == ':') {
+	fullName = fileName;
+	fp = fopen_utf8(fileName, "rb");
+    }
+#else
     if (fileName[0] == '/') {
 	fullName = fileName;
 	fp = fopen(fileName, "r");
     }
+#endif
 
     // For relative file names, try each of the directories in the search path
     else {
@@ -1768,11 +1797,18 @@
 
 	for (i = 0; i < directories->getLength(); i++) {
 	    fullName = * (*directories)[i];
-	    fullName += "/";
+#ifdef WIN32
+	    fullName += "\\";
+#else
+            fullName += "/";
+#endif
 	    fullName += fileName;
 
+#ifdef WIN32
+	    fp = fopen_utf8(fullName.getString(), "rb");
+#else
 	    fp = fopen(fullName.getString(), "r");
-
+#endif
 	    if (fp != NULL)
 		break;
 	}
@@ -2070,7 +2106,7 @@
 SoInput::readHex(uint32_t &l)
 {
     int		i;
-    char	str[32];	// Number can't be longer than this
+    char	str[READ_STRINGBUFFER_SIZE];	// Number can't be longer than this
     char	*s = str;
     SbBool	ret;
 
@@ -2078,7 +2114,19 @@
     if (backBufIndex >= 0) {
 	ret = FALSE;
 	if (backBufIndex >= 3) {
-	    strcpy(str, backBuf.getString());
+
+	    // 2005-04-19 Felix: Check for buffer overflow
+	    if (backBuf.getLength() >= READ_STRINGBUFFER_SIZE) {
+		SoDebugError::post("SoInput::readHex",
+				   "Hexadecimal value to big for internal representation, value truncated to %d characters", READ_STRINGBUFFER_SIZE-1);
+
+		strncpy(str, backBuf.getString(), READ_STRINGBUFFER_SIZE-1);
+		*(str + READ_STRINGBUFFER_SIZE-1) = '\0';
+	    }
+	    else {
+		strcpy(str, backBuf.getString());
+	    }
+
 	    ret = TRUE;
 	}
 
@@ -2104,7 +2152,19 @@
 		*s = '\0';
 		break;
 	    }
-	    s++;
+
+	    // 2005-04-19 Felix: Check for buffer overflow
+	    if (s - str < READ_STRINGBUFFER_SIZE-1) {
+	        s++;
+	    }
+	    else {
+	        SoDebugError::post("SoInput::readHex",
+	                           "Hexadecimal value to big for internal representation, value truncated to %d characters", READ_STRINGBUFFER_SIZE-1);
+	        
+	        s = str + READ_STRINGBUFFER_SIZE-1;
+	        *s = '\0';
+	        break;
+	    }
 	}
 
 	ret = (s - str <= 0) ? FALSE : TRUE;
@@ -2186,7 +2246,7 @@
 //
 ////////////////////////////////////////////////////////////////////////
 {
-    char	str[32];	// Number can't be longer than this
+    char	str[READ_STRINGBUFFER_SIZE];	// Number can't be longer than this
     char	*s = str;
     int		i;
     SbBool	ret;
@@ -2194,7 +2254,17 @@
 
     // Read from backBuf if it is not empty
     if (backBufIndex >= 0) {
-	strcpy(str, backBuf.getString());
+	
+	// 2005-04-19 Felix: Check for buffer overflow
+	if (backBuf.getLength() >= READ_STRINGBUFFER_SIZE) {
+	    SoDebugError::post("SoInput::readInteger",
+	                       "Integer value to big for internal representation, value truncated to %d characters", READ_STRINGBUFFER_SIZE-1);
+	    
+	    *(strncpy(str, backBuf.getString(), READ_STRINGBUFFER_SIZE-1) + READ_STRINGBUFFER_SIZE-1) = '\0';
+	}
+	else {
+	    strcpy(str, backBuf.getString());
+	}
 
 	// Clear the back buffer.
 	backBuf.makeEmpty();
@@ -2221,7 +2291,19 @@
 		*s = '\0';
 		break;
 	    }
-	    s++;
+	    
+	    // 2005-04-19 Felix: Check for buffer overflow
+	    if (s - str < READ_STRINGBUFFER_SIZE-1) {
+	        s++;
+	    }
+	    else {
+	        SoDebugError::post("SoInput::readInteger",
+	                           "Integer value to big for internal representation, value truncated to %d characters", READ_STRINGBUFFER_SIZE-1);
+	        
+	        s = str + READ_STRINGBUFFER_SIZE-1;
+	        *s = '\0';
+	        break;
+	    }
 	}
 
 	ret = (s - str <= 0) ? FALSE : TRUE;
@@ -2342,14 +2424,24 @@
 //
 ////////////////////////////////////////////////////////////////////////
 {
-    char	str[32];	// Number can't be longer than this
+    char	str[READ_STRINGBUFFER_SIZE];	// Number can't be longer than this
     char	*s = str;
     int		i;
     SbBool	ret;
 
     // Read from backBuf if it is not empty
     if (backBufIndex >= 0) {
-	strcpy(str, backBuf.getString());
+	
+	// 2005-04-19 Felix: Check for buffer overflow
+	if (backBuf.getLength() >= READ_STRINGBUFFER_SIZE) {
+	    SoDebugError::post("SoInput::readUnsignedInteger",
+	                       "Unsigned integer value to big for internal representation, value truncated to %d characters", READ_STRINGBUFFER_SIZE-1);
+	    
+	    *(strncpy(str, backBuf.getString(), READ_STRINGBUFFER_SIZE-1) + READ_STRINGBUFFER_SIZE-1) = '\0';
+	}
+	else {
+	    strcpy(str, backBuf.getString());
+	}
 
 	// Clear the back buffer.
 	backBuf.makeEmpty();
@@ -2376,7 +2468,19 @@
 		*s = '\0';
 		break;
 	    }
-	    s++;
+
+	    // 2005-04-19 Felix: Check for buffer overflow
+	    if (s - str < READ_STRINGBUFFER_SIZE-1) {
+	        s++;
+	    }
+	    else {
+	        SoDebugError::post("SoInput::readUnsignedInteger",
+	                           "Unsigned integer value to big for internal representation, value truncated to %d characters", READ_STRINGBUFFER_SIZE-1);
+	        
+	        s = str + READ_STRINGBUFFER_SIZE-1;
+	        *s = '\0';
+	        break;
+	    }
 	}
 
 	ret = (s - str <= 0) ? FALSE : TRUE;
@@ -2534,7 +2638,7 @@
 ////////////////////////////////////////////////////////////////////////
 {
     int		n;
-    char	str[32];	// Number can't be longer than this
+    char	str[READ_STRINGBUFFER_SIZE];	// Number can't be longer than this
     char	*s = str;
     SbBool	ret;
 
@@ -2551,7 +2655,8 @@
 
     else if (fromBuffer()) {
 	SbBool	gotNum = FALSE;
-    
+        SbBool	isTruncated = FALSE;
+
 	////////////////////////////////////////////
 	//
 	// Leading sign
@@ -2565,7 +2670,8 @@
 	//
 	// Integer before decimal point
     
-	if ((n = readDigits(s)) > 0) {
+	// 2005-04-19 Felix: Check for buffer overflow
+	if ((n = readDigits(s, SB_MAX(READ_STRINGBUFFER_SIZE-1 - (s - str), 0))) > 0) {
 	    gotNum = TRUE;
 	    s += n;
 	}
@@ -2574,52 +2680,80 @@
 	//
 	// Decimal point
     
-	if (readChar(s, '.') > 0) {
-	    s++;
+        // 2005-04-19 Felix: Check for buffer overflow
+	if (s - str < READ_STRINGBUFFER_SIZE-1) {
+
+	    if (readChar(s, '.') > 0) {
+	        s++;
+
+	        ////////////////////////////////////////////
+	        //
+	        // Integer after decimal point (no sign)
+
+	        // 2005-04-19 Felix: Check for buffer overflow
+	        if ((n = readDigits(s, SB_MAX(READ_STRINGBUFFER_SIZE-1 - (s - str), 0))) > 0) {
+		    gotNum = TRUE;
+		    s += n;
+	        }
+	    }
     
+	    // If no number before or after decimal point, there's a problem
+	    if (! gotNum)
+		return FALSE;
+
 	    ////////////////////////////////////////////
 	    //
-	    // Integer after decimal point (no sign)
-    
-	    if ((n = readDigits(s)) > 0) {
-		gotNum = TRUE;
-		s += n;
+	    // 'e' or 'E' for exponent
+
+	    // 2005-04-19 Felix: Check for buffer overflow
+	    if (s - str < READ_STRINGBUFFER_SIZE-1) {
+
+		n = readChar(s, 'e');
+		if (n == 0)
+		    n = readChar(s, 'E');
+
+		if (n > 0) {
+		    s += n;
+
+		    ////////////////////////////////////////////
+		    //
+		    // Sign for exponent
+
+		    // 2005-04-19 Felix: Check for buffer overflow
+		    if (s - str < READ_STRINGBUFFER_SIZE-1) {
+
+			n = readChar(s, '-');
+			if (n == 0)
+			    n = readChar(s, '+');
+			s += n;
+
+			////////////////////////////////////////////
+			//
+			// Exponent integer
+
+			// 2005-04-19 Felix: Check for buffer overflow
+			if ((n = readDigits(s, SB_MAX(READ_STRINGBUFFER_SIZE-1 - (s - str), 0))) > 0)
+			    s += n;
+
+			else
+			    return FALSE;	// Invalid exponent
+		    }
+		    else {
+			isTruncated = TRUE;
+		    }
+		}
+	    }
+	    else {
+		isTruncated = TRUE;
 	    }
 	}
-    
-	// If no number before or after decimal point, there's a problem
-	if (! gotNum)
-	    return FALSE;
-    
-	////////////////////////////////////////////
-	//
-	// 'e' or 'E' for exponent
-    
-	n = readChar(s, 'e');
-	if (n == 0)
-	    n = readChar(s, 'E');
-    
-	if (n > 0) {
-	    s += n;
-    
-	    ////////////////////////////////////////////
-	    //
-	    // Sign for exponent
-    
-	    n = readChar(s, '-');
-	    if (n == 0)
-		n = readChar(s, '+');
-	    s += n;
-    
-	    ////////////////////////////////////////////
-	    //
-	    // Exponent integer
-    
-	    if ((n = readDigits(s)) > 0)
-		s += n;
-    
-	    else
-		return FALSE;	// Invalid exponent
+	else {
+	    isTruncated = TRUE;
+	}
+
+	if (isTruncated) {
+	    SoDebugError::post("SoInput::readReal",
+	                       "Double floating-point value to big for internal representation, value truncated to %d characters", READ_STRINGBUFFER_SIZE-1);
 	}
 
 	// Terminator
@@ -2646,7 +2780,7 @@
 // Use: private
 
 int
-SoInput::readDigits(char *string)
+SoInput::readDigits(char *string, uint32_t maxDigits)
 //
 ////////////////////////////////////////////////////////////////////////
 {
@@ -2655,8 +2789,10 @@
     if (fromBuffer()) {
 	while (getASCIIBuffer(c)) {
 
-	    if (isdigit(c))
+	    // 2005-04-19 Felix: Check for buffer overflow
+	    if (isdigit(c) && (s - string < maxDigits)) {
 		*s++ = c;
+            }
 
 	    else {
 		putBack(c);
@@ -2667,8 +2803,9 @@
     else {
 	while (getASCIIFile(c)) {
 
-	    if (isdigit(c))
+	    if (isdigit(c) && (s - string < maxDigits)) {
 		*s++ = c;
+	    }
 
 	    else {
 		putBack(c);
@@ -2810,7 +2947,7 @@
 
     if (addToGlobalDict) {
 	// Look for the first '+':
-	char *firstPlus = strchr(n, '+');
+        char *firstPlus = (char*) strchr(n, '+');
 
 	if (firstPlus == NULL) {
 	    base->setName(name);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/SoNormalGenerator.c++ inventor/lib/database/src/so/SoNormalGenerator.c++
--- /tmp/inventor/lib/database/src/so/SoNormalGenerator.c++	2000-10-14 12:46:07.000000000 +0200
+++ inventor/lib/database/src/so/SoNormalGenerator.c++	2006-05-09 15:02:04.000000000 +0200
@@ -54,6 +54,7 @@
 
 #include <Inventor/SbBox.h>
 #include <Inventor/misc/SoNormalGenerator.h>
+#include <string.h>
 
 ////////////////////////////////////////////////////////////////////////
 //
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/SoOutput.c++ inventor/lib/database/src/so/SoOutput.c++
--- /tmp/inventor/lib/database/src/so/SoOutput.c++	2001-09-25 02:45:35.000000000 +0200
+++ inventor/lib/database/src/so/SoOutput.c++	2005-08-03 11:28:57.000000000 +0200
@@ -62,6 +62,7 @@
 
 #include <Inventor/SoDB.h>
 #include <Inventor/SoOutput.h>
+#include "../../../mevis/src/utf8_filesupport_win32.h"
 
 /////////////////////////////////////////////////////////////////////////
 //
@@ -352,7 +353,11 @@
 //
 ////////////////////////////////////////////////////////////////////////
 {
+#ifdef WIN32
+    FILE *newFP = fopen_utf8(fileName, "wb");
+#else
     FILE *newFP = fopen(fileName, "w");
+#endif
 
     // Close open file, if any
     closeFile();
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/SoType.c++ inventor/lib/database/src/so/SoType.c++
--- /tmp/inventor/lib/database/src/so/SoType.c++	2003-07-12 00:40:53.000000000 +0200
+++ inventor/lib/database/src/so/SoType.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,16 +51,21 @@
  _______________________________________________________________________
  */
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SoType.h>
 #include <Inventor/SoLists.h>
 #include <Inventor/errors/SoDebugError.h>
+#ifndef WIN32
 #include <dlfcn.h>
+#endif
 #include <stdlib.h>
 #ifdef __sgi
 #include <sgidefs.h>
 #endif // __sgi
 #include <sys/types.h>
+#ifndef WIN32
 #include <unistd.h>
+#endif
 
 SoINTERNAL struct SoTypeData {
     SoType		type;
@@ -232,7 +237,11 @@
 	// XXX Alex -- add additional layer of abstraction on top
  	// of this to make porting to other platforms easier.
 	//
+#ifdef WIN32
+#define sgidlopen_version(a,b,c,d) LoadLibrary(a)
+#else
 #define sgidlopen_version(a,b,c,d) dlopen((a),(b))
+#endif // WIN32
 #endif // __sgi
 
     const char *nameChars = name.getString();
@@ -258,10 +267,14 @@
 	// /usr/local/lib/InventorDSO (if not root)  (or 32, 64)
 	// /usr/lib/InventorDSO (always)  (or 32, 64)
 
+#ifndef WIN32
 	SbBool isRoot = ((geteuid()!=getuid()) || (getegid()!=getgid())
 			 || (getuid() == 0));
 
 	void *dsoHandle = NULL;
+#else
+	HINSTANCE dsoHandle = NULL;
+#endif
        
 	// Temporary storage
 	char DSOFile[101], dummyFunc[101];
@@ -275,9 +288,15 @@
 	// string is longer than the initClass__... string.
 #endif
 
+#ifdef WIN32
+	sprintf(DSOFile, "%s.dll", nameChars);
+#else
 	sprintf(DSOFile, "%s.so", nameChars);
+#endif
+
 	dsoHandle = sgidlopen_version(DSOFile, RTLD_LAZY, "sgi3.0", 0);
 
+#ifndef WIN32
 	if (dsoHandle == NULL && !isRoot) {
 	    sprintf(DSOFile, "./%s.so", nameChars);
 	    dsoHandle = sgidlopen_version(DSOFile, RTLD_LAZY, "sgi3.0", 0);
@@ -291,10 +310,15 @@
 	    sprintf(DSOFile,"/usr/%s/InventorDSO/%s.so", libDir, nameChars);
 	    dsoHandle = sgidlopen_version(DSOFile, RTLD_LAZY, "sgi3.0", 0);
 	}	    
+#endif
 
 	if (dsoHandle  == NULL)
 	    return SoType::badType();
 
+#ifdef WIN32
+	sprintf(dummyFunc, "?initClass@%s@@SAXXZ", nameChars);
+#else
+
 #if ((__GNUC__ == 3) && (__GNUC_MINOR__ >= 1))
 #define DUMMY_FUNC "_ZN%d%s9initClassEv"
 #else
@@ -304,8 +328,14 @@
 	sprintf(dummyFunc, DUMMY_FUNC, name.getLength(),
 		nameChars, abiName);
 
+#endif  // WIN32
+
 	void (*dsoFunc)();
+#ifdef WIN32
+	dsoFunc = (void (*)())GetProcAddress(dsoHandle, dummyFunc);
+#else
 	dsoFunc = (void (*)())dlsym(dsoHandle, dummyFunc);
+#endif
 	if (dsoFunc == NULL) {
 #ifdef DEBUG
 	    SoDebugError::post("SoType::fromName",
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/upgraders/SoV1Text2.c++ inventor/lib/database/src/so/upgraders/SoV1Text2.c++
--- /tmp/inventor/lib/database/src/so/upgraders/SoV1Text2.c++	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/database/src/so/upgraders/SoV1Text2.c++	2007-04-04 18:45:00.000000000 +0200
@@ -54,10 +54,8 @@
 #include "SoV1Text2.h"
 #include <Inventor/nodes/SoText2.h>
 
-#ifdef IRIX_6
 #include <iconv.h>
 #include <errno.h>
-#endif /*IRIX_6*/
 
 
 SO_NODE_SOURCE(SoV1Text2);
@@ -128,10 +126,10 @@
 
     return result;
 }
-// Following is different for irix 6.2
-#ifdef IRIX_6
+
 static iconv_t codeConvert1 = NULL;
 static iconv_t codeConvert2 = NULL;
+
 ////////////////////////////////////////////////////////////////////////
 //
 // Description:
@@ -181,7 +179,11 @@
     size_t inbytes = strng.getLength();
     size_t outbytes = 2*inbytes;
     char* output = (char*)UCSBuf;    
+#if defined(WIN32) || defined(__APPLE__)
+    if ((iconv(codeConvert1, const_cast<const char**>(&input), &inbytes, &output, &outbytes) != NULL)){
+#else
     if ((iconv(codeConvert1, &input, &inbytes, &output, &outbytes) != NULL)){
+#endif
 #ifdef DEBUG
 	SoDebugError::post("SoV1Text2::convertToUTF8", 
 	    "Error converting text to UCS-2");
@@ -191,7 +193,11 @@
     outbytes = 2*strng.getLength()+1;
     inbytes = 2*strng.getLength();
     output = (char*)UTFBuf;    
+#if defined(WIN32) || defined(__APPLE__)
+    if ((iconv(codeConvert2, const_cast<const char**>(&input), &inbytes, &output, &outbytes) != 0)){
+#else
     if ((iconv(codeConvert2, &input, &inbytes, &output, &outbytes) != 0)){
+#endif
 #ifdef DEBUG
 	switch(errno){
 	    case EILSEQ:  printf("EILSEQ\n");
@@ -212,41 +218,3 @@
     SbString* str1 = new SbString(UTFBuf, 0, 2*strng.getLength()-outbytes);    
     return (str1);         
 }
-#else /*IRIX_6*/
-// For Irix 5.3, just make characters legal ascii:
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    make characters ascii
-//
-// Use: public, static 
-
-const SbString*
-SoV1Text2::convertToUTF8(const SbString &strng)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    const char* str = strng.getString();
-    SbBool ascii = TRUE;
-    for (int i= 0; i< strng.getLength(); i++){
-	if ( str[i]& 0x80) {
-	    ascii = FALSE;
-	    break;
-	}
-    }
-    if (ascii) return &strng;
-
-#ifdef DEBUG
-    SoDebugError::post("SoV1Text2::convertToUTF8", 
-	"Non ascii text was changed to ascii");
-#endif /*DEBUG*/    
-    char *asciiBuf = new char[strng.getLength()+1];
-    for (i= 0; i< strng.getLength(); i++){
-	if ( str[i] & 0x80 ) asciiBuf[i] = '_';
-	    else asciiBuf[i] =  str[i];
-    }
-    SbString* str1 = new SbString(asciiBuf, 0, strng.getLength()-1);    
-    return (str1);
-} 
-#endif /*IRIX_6*/
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/database/src/so/upgraders/SoV2Text2.c++ inventor/lib/database/src/so/upgraders/SoV2Text2.c++
--- /tmp/inventor/lib/database/src/so/upgraders/SoV2Text2.c++	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/database/src/so/upgraders/SoV2Text2.c++	2007-04-04 18:45:00.000000000 +0200
@@ -54,10 +54,8 @@
 #include "SoV2Text2.h"
 #include <Inventor/nodes/SoText2.h>
 
-#ifdef IRIX_6
 #include <iconv.h>
 #include <errno.h>
-#endif /*IRIX_6*/
 
 
 SO_NODE_SOURCE(SoV2Text2);
@@ -130,8 +128,7 @@
 
     return result;
 }
-// Following is different for irix 6.2
-#ifdef IRIX_6
+
 static iconv_t codeConvert1 = NULL;
 static iconv_t codeConvert2 = NULL;
 
@@ -192,7 +189,11 @@
     size_t inbytes = inString.getLength();
     size_t outbytes = 2*inbytes;
     char* output = (char*)UCSBuf;    
+#if defined(WIN32) || defined(__APPLE__)
+    if ((iconv(codeConvert1, const_cast<const char**>(&input), &inbytes, &output, &outbytes) == (size_t)-1)){
+#else
     if ((iconv(codeConvert1, &input, &inbytes, &output, &outbytes) != NULL)){
+#endif
 #ifdef DEBUG
 	SoDebugError::post("SoV2Text2::convertToUTF8", 
 	    "Error converting text to UCS-2");
@@ -202,7 +203,11 @@
     outbytes = 2*inString.getLength()+1;
     inbytes = 2*inString.getLength();
     output = (char*)UTFBuf;    
+#if defined(WIN32) || defined(__APPLE__)
+    if ((iconv(codeConvert2, const_cast<const char**>(&input), &inbytes, &output, &outbytes) == (size_t)-1)){
+#else
     if ((iconv(codeConvert2, &input, &inbytes, &output, &outbytes) != 0)){
+#endif
 #ifdef DEBUG
 	switch(errno){
 	    case EILSEQ:  printf("EILSEQ\n");
@@ -234,48 +239,3 @@
 
     return TRUE;
 }
-
-#else /*IRIX_6*/
-// For Irix 5.3, just make characters legal ascii:
-
-////////////////////////////////////////////////////////////////////////
-//
-// Description:
-//    make characters ascii
-//
-// Use: public, static 
-
-SbBool
-SoV2Text2::convertToUTF8(const SbString &inString, SbString& outString)
-//
-////////////////////////////////////////////////////////////////////////
-{
-    int i;
-    const char* str = inString.getString();
-    SbBool ascii = TRUE;
-    for (i= 0; i< inString.getLength(); i++){
-	if ( str[i]& 0x80) {
-	    ascii = FALSE;
-	    break;
-	}
-    }
-    if (ascii) {
-	outString = inString;
-	return TRUE;
-    }
-
-#ifdef DEBUG
-    SoDebugError::post("SoV2Text2::convertToUTF8", 
-	"Non ascii text was changed to ascii");
-#endif /*DEBUG*/    
-    char *asciiBuf = new char[inString.getLength()+1];
-    for (i= 0; i< inString.getLength(); i++){
-	if ( str[i] & 0x80 ) asciiBuf[i] = '_';
-	    else asciiBuf[i] =  str[i];
-    }
-    asciiBuf[inString.getLength()] = '\0';
-    outString = asciiBuf;
-    delete [] asciiBuf; 
-    return TRUE;
-} 
-#endif /*IRIX_6*/
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/GNUmakefile inventor/lib/GNUmakefile
--- /tmp/inventor/lib/GNUmakefile	2001-09-25 02:45:32.000000000 +0200
+++ inventor/lib/GNUmakefile	2005-09-27 12:16:23.000000000 +0200
@@ -1,14 +1,29 @@
 IVDEPTH = ..
 include $(IVDEPTH)/make/ivcommondefs
 
+ifeq ($(usingWin32), 1)
+ifneq (, $(findstring debug, $(LIBTYPE)))
+LIBDSO = Inventor_d.dll
+else
+LIBDSO = Inventor.dll
+endif
+else
 LIBDSO = libInventor.so
+endif
 
 LLDDSOOPTS += -L$(IVDEPTH)/libimage -L$(FLDIR)
 
+ifeq ($(usingWin32), 1)
+LLDLIBS = \
+	-llibjpeg -llibimage $(FLLIB) \
+        -lglu32 -lopengl32 \
+        -lwsock32
+else
 LLDLIBS = \
 	-ljpeg -limage $(FLLIB) \
         -lX11 -lm \
         -lGLU -lGL
+endif
 
 OBJECTS = \
 	./database/src/sb/projectors/SbProjectors.o \
@@ -177,11 +192,38 @@
 	./nodekits/src/details/SoNodeKitDetail.o \
 	./nodekits/src/nodekits/SoNodeKits.o \
 	./nodekits/src/upgraders/SoNodeKitUpgraders.o \
-	./nodekits/src/SoNodeKitPath.o
+	./nodekits/src/SoNodeKitPath.o \
+	./mevis/src/SoMeVis.o \
+	./mevis/src/SoCatch.o \
+	./mevis/src/SoTrace.o \
+	./mevis/src/elements/SoGLPolygonOffsetElement.o \
+	./mevis/src/elements/SoGLStencilBitsElement.o \
+	./mevis/src/elements/SoPolygonOffsetElement.o \
+	./mevis/src/elements/SoStencilBitsElement.o \
+	./mevis/src/fields/SoSFVec2s.o \
+	./mevis/src/fields/SoSFVec3s.o \
+	./mevis/src/nodes/SoPolygonOffset.o
+
+ifeq ($(usingWin32), 1)
+OBJECTS += \
+	./mevis/src/utf8_filesupport_win32.o
+
+DSOOBJECTS = \
+	./initDll.o
+
+RESOBJECTS = \
+	./resource.o
+
+OBJECTS += \
+	$(DSOOBJECTS) \
+	$(RESOBJECTS)
+endif
 
+ifneq ($(usingWin32), 1)
 LARCHIVE = libInventor.a
+endif
 
-SUBDIRS = database interaction nodekits
+SUBDIRS = database interaction nodekits mevis
 
 all: all_ivbin
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/initDll.c++ inventor/lib/initDll.c++
--- /tmp/inventor/lib/initDll.c++	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/initDll.c++	2006-07-17 15:46:47.000000000 +0200
@@ -0,0 +1,62 @@
+/*
+ *
+ *  Copyright (C) 2003 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2003   MeVis gGmbH
+ *
+ _______________________________________________________________________
+ ______________________  M E V I S   G G M B H  ________________________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   ...
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ ______________________  M E V I S   G G M B H  ________________________
+ _______________________________________________________________________
+ */
+
+#include <Inventor/system/SbSystem.h>
+
+BOOL APIENTRY DllMain(HANDLE hModule, DWORD ul_reason_for_call, LPVOID lpReserved)
+{
+   switch(ul_reason_for_call) {
+      case DLL_PROCESS_ATTACH:
+      case DLL_THREAD_ATTACH:
+      case DLL_THREAD_DETACH:
+      case DLL_PROCESS_DETACH:
+         break;
+   }
+   return TRUE;
+}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/actions/SoBoxHighlightRenderAction.h inventor/lib/interaction/include/Inventor/actions/SoBoxHighlightRenderAction.h
--- /tmp/inventor/lib/interaction/include/Inventor/actions/SoBoxHighlightRenderAction.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/actions/SoBoxHighlightRenderAction.h	2005-08-01 17:36:15.000000000 +0200
@@ -81,7 +81,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoBoxHLRenderAct
-class SoBoxHighlightRenderAction : public SoGLRenderAction {
+class INVENTOR_API SoBoxHighlightRenderAction : public SoGLRenderAction {
       SO_ACTION_HEADER(SoBoxHighlightRenderAction);
  public:
     // Constructor which takes no parameters. This sets up a dummy
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/actions/SoLineHighlightRenderAction.h inventor/lib/interaction/include/Inventor/actions/SoLineHighlightRenderAction.h
--- /tmp/inventor/lib/interaction/include/Inventor/actions/SoLineHighlightRenderAction.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/actions/SoLineHighlightRenderAction.h	2005-08-01 17:36:15.000000000 +0200
@@ -78,7 +78,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoLineHLRenderAct
-class SoLineHighlightRenderAction : public SoGLRenderAction {
+class INVENTOR_API SoLineHighlightRenderAction : public SoGLRenderAction {
       SO_ACTION_HEADER(SoLineHighlightRenderAction);
  public:
     // Constructor which takes no parameters. This sets up a dummy
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoCenterballDragger.h inventor/lib/interaction/include/Inventor/draggers/SoCenterballDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoCenterballDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoCenterballDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -122,7 +122,7 @@
 
 // C-api: prefix=SoCballDrag
 // C-api: public=rotation,center
-class SoCenterballDragger : public SoDragger {
+class INVENTOR_API SoCenterballDragger : public SoDragger {
 
     SO_KIT_HEADER(SoCenterballDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoDirectionalLightDragger.h inventor/lib/interaction/include/Inventor/draggers/SoDirectionalLightDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoDirectionalLightDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoDirectionalLightDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -123,7 +123,7 @@
 
 // C-api: prefix=SoDirLtDrag
 // C-api: public=rotation,translation
-class SoDirectionalLightDragger : public SoDragger {
+class INVENTOR_API SoDirectionalLightDragger : public SoDragger {
 
     SO_KIT_HEADER(SoDirectionalLightDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoDragger.h inventor/lib/interaction/include/Inventor/draggers/SoDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -86,7 +86,7 @@
 class SoDragger;  // forward reference
 
 // The following typedef is used in defining the callback function lists.
-typedef void SoDraggerCB(void *userData, SoDragger *dragger );
+typedef void INVENTOR_API SoDraggerCB(void *userData, SoDragger *dragger );
 
 //////////////////////////////////////////////////////////////////////////////
 //
@@ -99,7 +99,7 @@
 
 // C-api: prefix=SoDrag
 // C-api: public=isActive
-class SoDragger : public SoInteractionKit {
+class INVENTOR_API SoDragger : public SoInteractionKit {
 
     SO_KIT_HEADER(SoDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoDragPointDragger.h inventor/lib/interaction/include/Inventor/draggers/SoDragPointDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoDragPointDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoDragPointDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -112,7 +112,7 @@
 
 // C-api: prefix=SoDragPtDrag
 // C-api: public=translation
-class SoDragPointDragger : public SoDragger
+class INVENTOR_API SoDragPointDragger : public SoDragger
 {
     SO_KIT_HEADER(SoDragPointDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoHandleBoxDragger.h inventor/lib/interaction/include/Inventor/draggers/SoHandleBoxDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoHandleBoxDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoHandleBoxDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -119,7 +119,7 @@
 
 // C-api: prefix=SoHBoxDrag
 // C-api: public=translation,scaleFactor
-class SoHandleBoxDragger : public SoDragger {
+class INVENTOR_API SoHandleBoxDragger : public SoDragger {
 
     SO_KIT_HEADER(SoHandleBoxDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoJackDragger.h inventor/lib/interaction/include/Inventor/draggers/SoJackDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoJackDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoJackDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -125,7 +125,7 @@
 
 // C-api: prefix=SoJackDrag
 // C-api: public=rotation,translation,scaleFactor
-class SoJackDragger : public SoDragger
+class INVENTOR_API SoJackDragger : public SoDragger
 {
     SO_KIT_HEADER(SoJackDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoPointLightDragger.h inventor/lib/interaction/include/Inventor/draggers/SoPointLightDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoPointLightDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoPointLightDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -103,7 +103,7 @@
 
 // C-api: prefix=SoPtLtDrag
 // C-api: public=translation
-class SoPointLightDragger : public SoDragger
+class INVENTOR_API SoPointLightDragger : public SoDragger
 {
     SO_KIT_HEADER(SoPointLightDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoRotateCylindricalDragger.h inventor/lib/interaction/include/Inventor/draggers/SoRotateCylindricalDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoRotateCylindricalDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoRotateCylindricalDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -92,7 +92,7 @@
 
 // C-api: prefix=SoRotCylDrag
 // C-api: public=rotation
-class SoRotateCylindricalDragger : public SoDragger
+class INVENTOR_API SoRotateCylindricalDragger : public SoDragger
 {
     SO_KIT_HEADER(SoRotateCylindricalDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoRotateDiscDragger.h inventor/lib/interaction/include/Inventor/draggers/SoRotateDiscDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoRotateDiscDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoRotateDiscDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -94,7 +94,7 @@
 
 // C-api: prefix=SoRotDiscDrag
 // C-api: public=rotation
-class SoRotateDiscDragger : public SoDragger
+class INVENTOR_API SoRotateDiscDragger : public SoDragger
 {
     SO_KIT_HEADER(SoRotateDiscDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoRotateSphericalDragger.h inventor/lib/interaction/include/Inventor/draggers/SoRotateSphericalDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoRotateSphericalDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoRotateSphericalDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -93,7 +93,7 @@
 
 // C-api: prefix=SoRotSphDrag
 // C-api: public=rotation
-class SoRotateSphericalDragger : public SoDragger
+class INVENTOR_API SoRotateSphericalDragger : public SoDragger
 {
     SO_KIT_HEADER(SoRotateSphericalDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoScale1Dragger.h inventor/lib/interaction/include/Inventor/draggers/SoScale1Dragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoScale1Dragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoScale1Dragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -93,7 +93,7 @@
 
 // C-api: prefix=SoScale1Drag
 // C-api: public=scaleFactor
-class SoScale1Dragger : public SoDragger
+class INVENTOR_API SoScale1Dragger : public SoDragger
 {
     SO_KIT_HEADER(SoScale1Dragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoScale2Dragger.h inventor/lib/interaction/include/Inventor/draggers/SoScale2Dragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoScale2Dragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoScale2Dragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -94,7 +94,7 @@
 
 // C-api: prefix=SoScale2Drag
 // C-api: public=scaleFactor
-class SoScale2Dragger : public SoDragger
+class INVENTOR_API SoScale2Dragger : public SoDragger
 {
     SO_KIT_HEADER(SoScale2Dragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoScale2UniformDragger.h inventor/lib/interaction/include/Inventor/draggers/SoScale2UniformDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoScale2UniformDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoScale2UniformDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -95,7 +95,7 @@
 
 // C-api: prefix=SoScale2UniDrag
 // C-api: public=scaleFactor
-class SoScale2UniformDragger : public SoDragger
+class INVENTOR_API SoScale2UniformDragger : public SoDragger
 {
     SO_KIT_HEADER(SoScale2UniformDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoScaleUniformDragger.h inventor/lib/interaction/include/Inventor/draggers/SoScaleUniformDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoScaleUniformDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoScaleUniformDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -94,7 +94,7 @@
 
 // C-api: prefix=SoScaleUniDrag
 // C-api: public=scaleFactor
-class SoScaleUniformDragger : public SoDragger
+class INVENTOR_API SoScaleUniformDragger : public SoDragger
 {
     SO_KIT_HEADER(SoScaleUniformDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoSpotLightDragger.h inventor/lib/interaction/include/Inventor/draggers/SoSpotLightDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoSpotLightDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoSpotLightDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -119,7 +119,7 @@
 
 // C-api: prefix=SoSpotLtDrag
 // C-api: public=rotation,translation,angle
-class SoSpotLightDragger : public SoDragger
+class INVENTOR_API SoSpotLightDragger : public SoDragger
 {
     SO_KIT_HEADER(SoSpotLightDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoTabBoxDragger.h inventor/lib/interaction/include/Inventor/draggers/SoTabBoxDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoTabBoxDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoTabBoxDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -88,7 +88,7 @@
 
 // C-api: prefix=SoTabBoxDrag
 // C-api: public=translation,scaleFactor
-class SoTabBoxDragger : public SoDragger
+class INVENTOR_API SoTabBoxDragger : public SoDragger
 {
     SO_KIT_HEADER(SoTabBoxDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoTabPlaneDragger.h inventor/lib/interaction/include/Inventor/draggers/SoTabPlaneDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoTabPlaneDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoTabPlaneDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -92,7 +92,7 @@
 
 // C-api: prefix=SoTabPlnDrag
 // C-api: public=translation,scaleFactor
-class SoTabPlaneDragger : public SoDragger
+class INVENTOR_API SoTabPlaneDragger : public SoDragger
 {
     // Define typeId and name stuff
     SO_KIT_HEADER(SoTabPlaneDragger);
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoTrackballDragger.h inventor/lib/interaction/include/Inventor/draggers/SoTrackballDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoTrackballDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoTrackballDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -108,7 +108,7 @@
 
 // C-api: prefix=SoTballDrag
 // C-api: public=rotation,scaleFactor
-class SoTrackballDragger : public SoDragger {
+class INVENTOR_API SoTrackballDragger : public SoDragger {
 
     SO_KIT_HEADER(SoTrackballDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoTransformBoxDragger.h inventor/lib/interaction/include/Inventor/draggers/SoTransformBoxDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoTransformBoxDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoTransformBoxDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -100,7 +100,7 @@
 
 // C-api: prefix=SoXfBoxDrag
 // C-api: public=rotation,translation,scaleFactor
-class SoTransformBoxDragger : public SoDragger
+class INVENTOR_API SoTransformBoxDragger : public SoDragger
 {
     SO_KIT_HEADER(SoTransformBoxDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoTransformerDragger.h inventor/lib/interaction/include/Inventor/draggers/SoTransformerDragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoTransformerDragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoTransformerDragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -157,7 +157,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-class SoTransformerDragger : public SoDragger {
+class INVENTOR_API SoTransformerDragger : public SoDragger {
 
     SO_KIT_HEADER(SoTransformerDragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoTranslate1Dragger.h inventor/lib/interaction/include/Inventor/draggers/SoTranslate1Dragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoTranslate1Dragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoTranslate1Dragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -93,7 +93,7 @@
 
 // C-api: prefix=SoXlate1Drag
 // C-api: public=translation
-class SoTranslate1Dragger : public SoDragger
+class INVENTOR_API SoTranslate1Dragger : public SoDragger
 {
     SO_KIT_HEADER(SoTranslate1Dragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/draggers/SoTranslate2Dragger.h inventor/lib/interaction/include/Inventor/draggers/SoTranslate2Dragger.h
--- /tmp/inventor/lib/interaction/include/Inventor/draggers/SoTranslate2Dragger.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/draggers/SoTranslate2Dragger.h	2005-08-01 17:36:15.000000000 +0200
@@ -104,7 +104,7 @@
 
 // C-api: prefix=SoXlate2Drag
 // C-api: public=translation
-class SoTranslate2Dragger : public SoDragger
+class INVENTOR_API SoTranslate2Dragger : public SoDragger
 {
     SO_KIT_HEADER(SoTranslate2Dragger);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/manips/SoCenterballManip.h inventor/lib/interaction/include/Inventor/manips/SoCenterballManip.h
--- /tmp/inventor/lib/interaction/include/Inventor/manips/SoCenterballManip.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/manips/SoCenterballManip.h	2005-08-01 17:36:15.000000000 +0200
@@ -56,7 +56,7 @@
 #include <Inventor/manips/SoTransformManip.h>
 
 // C-api: prefix=SoCballManip
-class SoCenterballManip : public SoTransformManip
+class INVENTOR_API SoCenterballManip : public SoTransformManip
 {
     SO_NODE_HEADER(SoCenterballManip);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/manips/SoDirectionalLightManip.h inventor/lib/interaction/include/Inventor/manips/SoDirectionalLightManip.h
--- /tmp/inventor/lib/interaction/include/Inventor/manips/SoDirectionalLightManip.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/manips/SoDirectionalLightManip.h	2005-08-01 17:36:15.000000000 +0200
@@ -72,7 +72,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoDirLtManip
-class SoDirectionalLightManip : public SoDirectionalLight {
+class INVENTOR_API SoDirectionalLightManip : public SoDirectionalLight {
 
     SO_NODE_HEADER(SoDirectionalLightManip);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/manips/SoHandleBoxManip.h inventor/lib/interaction/include/Inventor/manips/SoHandleBoxManip.h
--- /tmp/inventor/lib/interaction/include/Inventor/manips/SoHandleBoxManip.h	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/manips/SoHandleBoxManip.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoHBoxManip
-class SoHandleBoxManip : public SoTransformManip {
+class INVENTOR_API SoHandleBoxManip : public SoTransformManip {
 
     SO_NODE_HEADER(SoHandleBoxManip);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/manips/SoJackManip.h inventor/lib/interaction/include/Inventor/manips/SoJackManip.h
--- /tmp/inventor/lib/interaction/include/Inventor/manips/SoJackManip.h	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/manips/SoJackManip.h	2005-08-01 17:36:15.000000000 +0200
@@ -59,7 +59,7 @@
 
 #include <Inventor/manips/SoTransformManip.h>
 
-class SoJackManip : public SoTransformManip
+class INVENTOR_API SoJackManip : public SoTransformManip
 {
     SO_NODE_HEADER(SoJackManip);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/manips/SoPointLightManip.h inventor/lib/interaction/include/Inventor/manips/SoPointLightManip.h
--- /tmp/inventor/lib/interaction/include/Inventor/manips/SoPointLightManip.h	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/manips/SoPointLightManip.h	2005-08-01 17:36:15.000000000 +0200
@@ -63,7 +63,7 @@
 #include <Inventor/sensors/SoFieldSensor.h>
 
 // C-api: prefix=SoPtLtManip
-class SoPointLightManip : public SoPointLight
+class INVENTOR_API SoPointLightManip : public SoPointLight
 {
     SO_NODE_HEADER(SoPointLightManip);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/manips/SoSpotLightManip.h inventor/lib/interaction/include/Inventor/manips/SoSpotLightManip.h
--- /tmp/inventor/lib/interaction/include/Inventor/manips/SoSpotLightManip.h	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/manips/SoSpotLightManip.h	2005-08-01 17:36:15.000000000 +0200
@@ -52,7 +52,7 @@
 #include <Inventor/sensors/SoFieldSensor.h>
 
 // C-api: prefix=SoSpotLtManip
-class SoSpotLightManip : public SoSpotLight
+class INVENTOR_API SoSpotLightManip : public SoSpotLight
 {
     SO_NODE_HEADER(SoSpotLightManip);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/manips/SoTabBoxManip.h inventor/lib/interaction/include/Inventor/manips/SoTabBoxManip.h
--- /tmp/inventor/lib/interaction/include/Inventor/manips/SoTabBoxManip.h	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/manips/SoTabBoxManip.h	2005-08-01 17:36:15.000000000 +0200
@@ -55,7 +55,7 @@
 
 #include <Inventor/manips/SoTransformManip.h>
 
-class SoTabBoxManip : public SoTransformManip
+class INVENTOR_API SoTabBoxManip : public SoTransformManip
 {
     SO_NODE_HEADER(SoTabBoxManip);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/manips/SoTrackballManip.h inventor/lib/interaction/include/Inventor/manips/SoTrackballManip.h
--- /tmp/inventor/lib/interaction/include/Inventor/manips/SoTrackballManip.h	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/manips/SoTrackballManip.h	2005-08-01 17:36:15.000000000 +0200
@@ -66,7 +66,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoTballManip
-class SoTrackballManip : public SoTransformManip {
+class INVENTOR_API SoTrackballManip : public SoTransformManip {
 
     SO_NODE_HEADER(SoTrackballManip);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/manips/SoTransformBoxManip.h inventor/lib/interaction/include/Inventor/manips/SoTransformBoxManip.h
--- /tmp/inventor/lib/interaction/include/Inventor/manips/SoTransformBoxManip.h	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/manips/SoTransformBoxManip.h	2005-08-01 17:36:15.000000000 +0200
@@ -56,7 +56,7 @@
 #include <Inventor/manips/SoTransformManip.h>
 
 // C-api: prefix=SoXfBoxManip
-class SoTransformBoxManip : public SoTransformManip
+class INVENTOR_API SoTransformBoxManip : public SoTransformManip
 {
     SO_NODE_HEADER(SoTransformBoxManip);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/manips/SoTransformerManip.h inventor/lib/interaction/include/Inventor/manips/SoTransformerManip.h
--- /tmp/inventor/lib/interaction/include/Inventor/manips/SoTransformerManip.h	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/manips/SoTransformerManip.h	2005-08-01 17:36:15.000000000 +0200
@@ -65,7 +65,7 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
-class SoTransformerManip : public SoTransformManip {
+class INVENTOR_API SoTransformerManip : public SoTransformManip {
 
     SO_NODE_HEADER(SoTransformerManip);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/manips/SoTransformManip.h inventor/lib/interaction/include/Inventor/manips/SoTransformManip.h
--- /tmp/inventor/lib/interaction/include/Inventor/manips/SoTransformManip.h	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/manips/SoTransformManip.h	2005-08-01 17:36:15.000000000 +0200
@@ -63,7 +63,7 @@
 #include <Inventor/sensors/SoFieldSensor.h>
 
 // C-api: prefix=SoXfManip
-class SoTransformManip : public SoTransform
+class INVENTOR_API SoTransformManip : public SoTransform
 {
     SO_NODE_HEADER(SoTransformManip);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/nodekits/SoInteractionKit.h inventor/lib/interaction/include/Inventor/nodekits/SoInteractionKit.h
--- /tmp/inventor/lib/interaction/include/Inventor/nodekits/SoInteractionKit.h	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/nodekits/SoInteractionKit.h	2005-08-01 17:36:15.000000000 +0200
@@ -82,7 +82,7 @@
 
 // C-api: prefix=SoInteractKit
 // C-api: public=renderCaching, boundingBoxCaching, renderCulling, pickCulling
-class SoInteractionKit : public SoBaseKit {
+class INVENTOR_API SoInteractionKit : public SoBaseKit {
 
     SO_KIT_HEADER(SoInteractionKit);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/nodes/SoAntiSquish.h inventor/lib/interaction/include/Inventor/nodes/SoAntiSquish.h
--- /tmp/inventor/lib/interaction/include/Inventor/nodes/SoAntiSquish.h	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/nodes/SoAntiSquish.h	2005-08-01 17:36:15.000000000 +0200
@@ -72,7 +72,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=sizing
-class SoAntiSquish : public SoTransformation {
+class INVENTOR_API SoAntiSquish : public SoTransformation {
 
     SO_NODE_HEADER(SoAntiSquish);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/nodes/SoSelection.h inventor/lib/interaction/include/Inventor/nodes/SoSelection.h
--- /tmp/inventor/lib/interaction/include/Inventor/nodes/SoSelection.h	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/nodes/SoSelection.h	2005-08-01 17:36:15.000000000 +0200
@@ -74,9 +74,9 @@
 class SoPath;
 
 // callback function prototypes
-typedef void SoSelectionPathCB(void *userData, SoPath *path);
-typedef void SoSelectionClassCB(void *userData, SoSelection *sel);
-typedef SoPath * SoSelectionPickCB(void *userData, const SoPickedPoint *pick);
+typedef INVENTOR_API void SoSelectionPathCB(void *userData, SoPath *path);
+typedef INVENTOR_API void SoSelectionClassCB(void *userData, SoSelection *sel);
+typedef INVENTOR_API SoPath * SoSelectionPickCB(void *userData, const SoPickedPoint *pick);
 
 //////////////////////////////////////////////////////////////////////////////
 //
@@ -88,7 +88,7 @@
 
 // C-api: public=policy
 // C-api: prefix=SoSel
-class SoSelection : public SoSeparator {
+class INVENTOR_API SoSelection : public SoSeparator {
 
     SO_NODE_HEADER(SoSelection);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/nodes/SoSurroundScale.h inventor/lib/interaction/include/Inventor/nodes/SoSurroundScale.h
--- /tmp/inventor/lib/interaction/include/Inventor/nodes/SoSurroundScale.h	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/nodes/SoSurroundScale.h	2005-08-01 17:36:15.000000000 +0200
@@ -108,7 +108,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: public=numNodesUpToContainer,numNodesUpToReset
-class SoSurroundScale : public SoTransformation {
+class INVENTOR_API SoSurroundScale : public SoTransformation {
 
     SO_NODE_HEADER(SoSurroundScale);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/SoInteraction.h inventor/lib/interaction/include/Inventor/SoInteraction.h
--- /tmp/inventor/lib/interaction/include/Inventor/SoInteraction.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/SoInteraction.h	2005-08-01 17:36:15.000000000 +0200
@@ -71,7 +71,7 @@
 
 #include <Inventor/SbBasic.h>
 
-class SoInteraction {
+class INVENTOR_API SoInteraction {
   public:
     static void		init();		// init all interaction classes
   private:
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/include/Inventor/SoSceneManager.h inventor/lib/interaction/include/Inventor/SoSceneManager.h
--- /tmp/inventor/lib/interaction/include/Inventor/SoSceneManager.h	2000-08-15 14:56:23.000000000 +0200
+++ inventor/lib/interaction/include/Inventor/SoSceneManager.h	2005-08-01 17:36:15.000000000 +0200
@@ -82,7 +82,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoSceneMgr
-class SoSceneManager {
+class INVENTOR_API SoSceneManager {
   public:
     // Constructor. 
     SoSceneManager();
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/actions/SoLineHL.c++ inventor/lib/interaction/src/actions/SoLineHL.c++
--- /tmp/inventor/lib/interaction/src/actions/SoLineHL.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/actions/SoLineHL.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,6 +51,7 @@
  _______________________________________________________________________
  */
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/SoPath.h>
 #include <Inventor/SoNodeKitPath.h>
 #include <Inventor/actions/SoSearchAction.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoCenterballDragger.c++ inventor/lib/interaction/src/draggers/SoCenterballDragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoCenterballDragger.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoCenterballDragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -114,43 +114,43 @@
     // This little grouping goes under the geomSeparator, since it's 
     // geometry only, not draggers.
     SO_KIT_ADD_CATALOG_ENTRY(XAxisSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(XAxis, SoSeparator, TRUE,
-				XAxisSwitch, ,TRUE);
+				XAxisSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(YAxisSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(YAxis, SoSeparator, TRUE,
-				YAxisSwitch, ,TRUE);
+				YAxisSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(ZAxisSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(ZAxis, SoSeparator, TRUE,
-				ZAxisSwitch, ,TRUE);
+				ZAxisSwitch,\x0,TRUE);
 
     // The rest of the stuff will go after the geomSeparator
     SO_KIT_ADD_CATALOG_ENTRY(rotator, SoRotateSphericalDragger, TRUE,
-				topSeparator, ,TRUE);
+				topSeparator,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(YRotator, SoRotateCylindricalDragger, TRUE,
-				topSeparator, ,TRUE);
+				topSeparator,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(ZCenterChanger, SoTranslate2Dragger, TRUE,
-				topSeparator, ,TRUE);
+				topSeparator,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(rotX90, SoRotation, TRUE,
-				topSeparator, ,FALSE);
+				topSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(ZRotator, SoRotateCylindricalDragger, TRUE,
-				topSeparator, ,TRUE);
+				topSeparator,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(YCenterChanger, SoTranslate2Dragger, TRUE,
-				topSeparator, ,TRUE);
+				topSeparator,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(rotY90, SoRotation, TRUE,
-				topSeparator, ,FALSE);
+				topSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(XCenterChanger, SoTranslate2Dragger, TRUE,
-				topSeparator, ,TRUE);
+				topSeparator,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(rot2X90, SoRotation, TRUE,
-				topSeparator, ,FALSE);
+				topSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(XRotator, SoRotateCylindricalDragger, TRUE,
-				topSeparator, ,TRUE);
+				topSeparator,\x0,TRUE);
 
 
     if ( SO_KIT_IS_FIRST_INSTANCE())
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoDirectionalLightDragger.c++ inventor/lib/interaction/src/draggers/SoDirectionalLightDragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoDirectionalLightDragger.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoDirectionalLightDragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -110,9 +110,9 @@
     SO_KIT_ADD_CATALOG_ENTRY(translatorSep, SoSeparator, 
 				TRUE, topSeparator, geomSeparator,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translatorRotInv, SoRotation, 
-				TRUE, translatorSep, ,TRUE);
+				TRUE, translatorSep,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator, SoDragPointDragger, 
-				TRUE, translatorSep, ,TRUE);
+				TRUE, translatorSep,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator, SoRotateSphericalDragger, 
 				TRUE, topSeparator, geomSeparator,TRUE);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoDragPointDragger.c++ inventor/lib/interaction/src/draggers/SoDragPointDragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoDragPointDragger.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoDragPointDragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -103,84 +103,84 @@
     SO_KIT_ADD_CATALOG_ENTRY(noRotSep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(xTranslatorSwitch, SoSwitch, FALSE, 
-				noRotSep, ,FALSE);
+				noRotSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(xTranslator, SoTranslate1Dragger, TRUE, 
-				xTranslatorSwitch, ,TRUE);
+				xTranslatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(xyTranslatorSwitch, SoSwitch, FALSE, 
-				noRotSep, ,FALSE);
+				noRotSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(xyTranslator, SoTranslate2Dragger, TRUE, 
-				xyTranslatorSwitch, ,TRUE);
+				xyTranslatorSwitch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(rotXSep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotX, SoRotation, TRUE, 
-				rotXSep, ,FALSE);
+				rotXSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(xzTranslatorSwitch, SoSwitch, FALSE, 
-				rotXSep, ,FALSE);
+				rotXSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(xzTranslator, SoTranslate2Dragger, TRUE, 
-				xzTranslatorSwitch, ,TRUE);
+				xzTranslatorSwitch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(rotYSep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotY, SoRotation, TRUE, 
-				rotYSep, ,FALSE);
+				rotYSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(zTranslatorSwitch, SoSwitch, FALSE, 
-				rotYSep, ,FALSE);
+				rotYSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(zTranslator, SoTranslate1Dragger, TRUE, 
-				zTranslatorSwitch, ,TRUE);
+				zTranslatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(yzTranslatorSwitch, SoSwitch, FALSE, 
-				rotYSep, ,FALSE);
+				rotYSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(yzTranslator, SoTranslate2Dragger, TRUE, 
-				yzTranslatorSwitch, ,TRUE);
+				yzTranslatorSwitch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(rotZSep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotZ, SoRotation, TRUE, 
-				rotZSep, ,FALSE);
+				rotZSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(yTranslatorSwitch, SoSwitch, FALSE, 
-				rotZSep, ,FALSE);
+				rotZSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(yTranslator, SoTranslate1Dragger, TRUE, 
-				yTranslatorSwitch, ,TRUE);
+				yTranslatorSwitch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(xFeedbackSwitch, SoSwitch, FALSE, 
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(xFeedbackSep, SoSeparator, FALSE,
-				xFeedbackSwitch, ,FALSE);
+				xFeedbackSwitch,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(xFeedbackTranslation, SoTranslation, FALSE,
-				xFeedbackSep, ,FALSE);
+				xFeedbackSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(xFeedback, SoSeparator, TRUE,
-				xFeedbackSep, ,TRUE);
+				xFeedbackSep,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(yFeedbackSwitch, SoSwitch, FALSE, 
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(yFeedbackSep, SoSeparator, FALSE,
-				yFeedbackSwitch, ,FALSE);
+				yFeedbackSwitch,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(yFeedbackTranslation, SoTranslation, FALSE,
-				yFeedbackSep, ,FALSE);
+				yFeedbackSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(yFeedback, SoSeparator, TRUE,
-				yFeedbackSep, ,TRUE);
+				yFeedbackSep,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(zFeedbackSwitch, SoSwitch, FALSE, 
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(zFeedbackSep, SoSeparator, FALSE,
-				zFeedbackSwitch, ,FALSE);
+				zFeedbackSwitch,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(zFeedbackTranslation, SoTranslation, FALSE,
-				zFeedbackSep, ,FALSE);
+				zFeedbackSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(zFeedback, SoSeparator, TRUE,
-				zFeedbackSep, ,TRUE);
+				zFeedbackSep,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(planeFeedbackSep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(planeFeedbackTranslation, SoTranslation, FALSE,
-				planeFeedbackSep, ,FALSE);
+				planeFeedbackSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(planeFeedbackSwitch, SoSwitch, FALSE, 
-				planeFeedbackSep, ,FALSE);
+				planeFeedbackSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(yzFeedback, SoSeparator, TRUE,
-				planeFeedbackSwitch, ,TRUE);
+				planeFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(xzFeedback, SoSeparator, TRUE,
-				planeFeedbackSwitch, ,TRUE);
+				planeFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(xyFeedback, SoSeparator, TRUE,
-				planeFeedbackSwitch, ,TRUE);
+				planeFeedbackSwitch,\x0,TRUE);
 
     // read geometry for shared parts
     if (SO_KIT_IS_FIRST_INSTANCE())
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoHandleBoxDragger.c++ inventor/lib/interaction/src/draggers/SoHandleBoxDragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoHandleBoxDragger.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoHandleBoxDragger.c++	2006-07-12 18:01:38.000000000 +0200
@@ -68,7 +68,7 @@
 #include <Inventor/nodes/SoSwitch.h>
 #include <Inventor/nodes/SoTranslation.h>
 #include <Inventor/nodes/SoTransform.h>
-#include <GL/gl.h>
+#include OPENGL_GL_H
 
 #include "geom/SoHandleBoxDraggerGeom.h"
 
@@ -97,158 +97,158 @@
     // These parts will all go under the geomSeparator, for efficient 
     // rendering
     SO_KIT_ADD_CATALOG_ENTRY(drawStyle, SoDrawStyle, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
 
     SO_KIT_ADD_CATALOG_ENTRY(translator1Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator1, SoSeparator, TRUE,
-				translator1Switch, ,TRUE);
+				translator1Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator1Active, SoSeparator, TRUE,
-				translator1Switch, ,TRUE);
+				translator1Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator2Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator2, SoSeparator, TRUE,
-				translator2Switch, ,TRUE);
+				translator2Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator2Active, SoSeparator, TRUE,
-				translator2Switch, ,TRUE);
+				translator2Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator3Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator3, SoSeparator, TRUE,
-				translator3Switch, ,TRUE);
+				translator3Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator3Active, SoSeparator, TRUE,
-				translator3Switch, ,TRUE);
+				translator3Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator4Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator4, SoSeparator, TRUE,
-				translator4Switch, ,TRUE);
+				translator4Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator4Active, SoSeparator, TRUE,
-				translator4Switch, ,TRUE);
+				translator4Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator5Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator5, SoSeparator, TRUE,
-				translator5Switch, ,TRUE);
+				translator5Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator5Active, SoSeparator, TRUE,
-				translator5Switch, ,TRUE);
+				translator5Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator6Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator6, SoSeparator, TRUE,
-				translator6Switch, ,TRUE);
+				translator6Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator6Active, SoSeparator, TRUE,
-				translator6Switch, ,TRUE);
+				translator6Switch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(extruder1Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder1, SoSeparator, TRUE,
-				extruder1Switch, ,TRUE);
+				extruder1Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder1Active, SoSeparator, TRUE,
-				extruder1Switch, ,TRUE);
+				extruder1Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder2Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder2, SoSeparator, TRUE,
-				extruder2Switch, ,TRUE);
+				extruder2Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder2Active, SoSeparator, TRUE,
-				extruder2Switch, ,TRUE);
+				extruder2Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder3Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder3, SoSeparator, TRUE,
-				extruder3Switch, ,TRUE);
+				extruder3Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder3Active, SoSeparator, TRUE,
-				extruder3Switch, ,TRUE);
+				extruder3Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder4Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder4, SoSeparator, TRUE,
-				extruder4Switch, ,TRUE);
+				extruder4Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder4Active, SoSeparator, TRUE,
-				extruder4Switch, ,TRUE);
+				extruder4Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder5Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder5, SoSeparator, TRUE,
-				extruder5Switch, ,TRUE);
+				extruder5Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder5Active, SoSeparator, TRUE,
-				extruder5Switch, ,TRUE);
+				extruder5Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder6Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder6, SoSeparator, TRUE,
-				extruder6Switch, ,TRUE);
+				extruder6Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(extruder6Active, SoSeparator, TRUE,
-				extruder6Switch, ,TRUE);
+				extruder6Switch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(uniform1Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform1, SoSeparator, TRUE,
-				uniform1Switch, ,TRUE);
+				uniform1Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform1Active, SoSeparator, TRUE,
-				uniform1Switch, ,TRUE);
+				uniform1Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform2Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform2, SoSeparator, TRUE,
-				uniform2Switch, ,TRUE);
+				uniform2Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform2Active, SoSeparator, TRUE,
-				uniform2Switch, ,TRUE);
+				uniform2Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform3Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform3, SoSeparator, TRUE,
-				uniform3Switch, ,TRUE);
+				uniform3Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform3Active, SoSeparator, TRUE,
-				uniform3Switch, ,TRUE);
+				uniform3Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform4Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform4, SoSeparator, TRUE,
-				uniform4Switch, ,TRUE);
+				uniform4Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform4Active, SoSeparator, TRUE,
-				uniform4Switch, ,TRUE);
+				uniform4Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform5Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform5, SoSeparator, TRUE,
-				uniform5Switch, ,TRUE);
+				uniform5Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform5Active, SoSeparator, TRUE,
-				uniform5Switch, ,TRUE);
+				uniform5Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform6Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform6, SoSeparator, TRUE,
-				uniform6Switch, ,TRUE);
+				uniform6Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform6Active, SoSeparator, TRUE,
-				uniform6Switch, ,TRUE);
+				uniform6Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform7Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform7, SoSeparator, TRUE,
-				uniform7Switch, ,TRUE);
+				uniform7Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform7Active, SoSeparator, TRUE,
-				uniform7Switch, ,TRUE);
+				uniform7Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform8Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform8, SoSeparator, TRUE,
-				uniform8Switch, ,TRUE);
+				uniform8Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(uniform8Active, SoSeparator, TRUE,
-				uniform8Switch, ,TRUE);
+				uniform8Switch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(arrowTranslation, SoTranslation, 
-				TRUE, geomSeparator, ,FALSE);
+				TRUE, geomSeparator,\x0,FALSE);
 
     SO_KIT_ADD_CATALOG_ENTRY(arrow1Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(arrow1, SoSeparator, TRUE,
-				arrow1Switch, ,TRUE);
+				arrow1Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(arrow2Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(arrow2, SoSeparator, TRUE,
-				arrow2Switch, ,TRUE);
+				arrow2Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(arrow3Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(arrow3, SoSeparator, TRUE,
-				arrow3Switch, ,TRUE);
+				arrow3Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(arrow4Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(arrow4, SoSeparator, TRUE,
-				arrow4Switch, ,TRUE);
+				arrow4Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(arrow5Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(arrow5, SoSeparator, TRUE,
-				arrow5Switch, ,TRUE);
+				arrow5Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(arrow6Switch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(arrow6, SoSeparator, TRUE,
-				arrow6Switch, ,TRUE);
+				arrow6Switch,\x0,TRUE);
 
     // read geometry for shared parts
     if (SO_KIT_IS_FIRST_INSTANCE())
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoRotateCylindricalDragger.c++ inventor/lib/interaction/src/draggers/SoRotateCylindricalDragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoRotateCylindricalDragger.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoRotateCylindricalDragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -85,17 +85,17 @@
     // Put this stuff under the geomSeparator so it will draw more
     // efficiently.
     SO_KIT_ADD_CATALOG_ENTRY(rotatorSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator, SoSeparator, TRUE,
-				rotatorSwitch, ,TRUE);
+				rotatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotatorActive, SoSeparator, TRUE,
-				rotatorSwitch, ,TRUE);
+				rotatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(feedback, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackActive, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
 
     // read geometry for shared parts
     if (SO_KIT_IS_FIRST_INSTANCE())
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoRotateDiscDragger.c++ inventor/lib/interaction/src/draggers/SoRotateDiscDragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoRotateDiscDragger.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoRotateDiscDragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -85,17 +85,17 @@
     // Put this stuff under the geomSeparator so it will draw more
     // efficiently.
     SO_KIT_ADD_CATALOG_ENTRY(rotatorSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator, SoSeparator, TRUE,
-				rotatorSwitch, ,TRUE);
+				rotatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotatorActive, SoSeparator, TRUE,
-				rotatorSwitch, ,TRUE);
+				rotatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(feedback, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackActive, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
 
     // read geometry for shared parts
     if (SO_KIT_IS_FIRST_INSTANCE())
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoRotateSphericalDragger.c++ inventor/lib/interaction/src/draggers/SoRotateSphericalDragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoRotateSphericalDragger.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoRotateSphericalDragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -86,17 +86,17 @@
     // Put this stuff under the geomSeparator so it will draw more
     // efficiently.
     SO_KIT_ADD_CATALOG_ENTRY(rotatorSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator, SoSeparator, TRUE,
-				rotatorSwitch, ,TRUE);
+				rotatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotatorActive, SoSeparator, TRUE,
-				rotatorSwitch, ,TRUE);
+				rotatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(feedback, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackActive, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
 
     // read geometry for shared parts
     if (SO_KIT_IS_FIRST_INSTANCE())
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoScale1Dragger.c++ inventor/lib/interaction/src/draggers/SoScale1Dragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoScale1Dragger.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoScale1Dragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -84,17 +84,17 @@
     // Put this stuff under the geomSeparator so it will draw more
     // efficiently.
     SO_KIT_ADD_CATALOG_ENTRY(scalerSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(scaler, SoSeparator, TRUE,
-				scalerSwitch, ,TRUE);
+				scalerSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scalerActive, SoSeparator, TRUE,
-				scalerSwitch, ,TRUE);
+				scalerSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(feedback, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackActive, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
 
     // read geometry for shared parts
     if (SO_KIT_IS_FIRST_INSTANCE())
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoScale2Dragger.c++ inventor/lib/interaction/src/draggers/SoScale2Dragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoScale2Dragger.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoScale2Dragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -85,17 +85,17 @@
     // Put this stuff under the geomSeparator so it will draw more
     // efficiently.
     SO_KIT_ADD_CATALOG_ENTRY(scalerSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(scaler, SoSeparator, TRUE,
-				scalerSwitch, ,TRUE);
+				scalerSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scalerActive, SoSeparator, TRUE,
-				scalerSwitch, ,TRUE);
+				scalerSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(feedback, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackActive, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
 
     // read geometry for shared parts
     if (SO_KIT_IS_FIRST_INSTANCE())
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoScale2UniformDragger.c++ inventor/lib/interaction/src/draggers/SoScale2UniformDragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoScale2UniformDragger.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoScale2UniformDragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -84,17 +84,17 @@
     // Put this stuff under the geomSeparator so it will draw more
     // efficiently.
     SO_KIT_ADD_CATALOG_ENTRY(scalerSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(scaler, SoSeparator, TRUE,
-				scalerSwitch, ,TRUE);
+				scalerSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scalerActive, SoSeparator, TRUE,
-				scalerSwitch, ,TRUE);
+				scalerSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(feedback, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackActive, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
 
     // read geometry for shared parts
     if (SO_KIT_IS_FIRST_INSTANCE())
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoScaleUniformDragger.c++ inventor/lib/interaction/src/draggers/SoScaleUniformDragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoScaleUniformDragger.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoScaleUniformDragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -84,17 +84,17 @@
     // Put this stuff under the geomSeparator so it will draw more
     // efficiently.
     SO_KIT_ADD_CATALOG_ENTRY(scalerSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(scaler, SoSeparator, TRUE,
-				scalerSwitch, ,TRUE);
+				scalerSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scalerActive, SoSeparator, TRUE,
-				scalerSwitch, ,TRUE);
+				scalerSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(feedback, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackActive, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
 
     // read geometry for shared parts
     if (SO_KIT_IS_FIRST_INSTANCE())
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoSpotLightDragger.c++ inventor/lib/interaction/src/draggers/SoSpotLightDragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoSpotLightDragger.c++	2000-10-14 12:46:08.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoSpotLightDragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -112,23 +112,23 @@
     SO_KIT_ADD_CATALOG_ENTRY(translatorSep, SoSeparator, 
 				TRUE, topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translatorRotInv, SoRotation, 
-				TRUE, translatorSep, ,FALSE);
+				TRUE, translatorSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator, SoDragPointDragger, 
-				TRUE, translatorSep, ,TRUE);
+				TRUE, translatorSep,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator, SoRotateSphericalDragger, 
 				TRUE, topSeparator, geomSeparator,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(beamSep, SoSeparator, 
 				TRUE, topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(beamPlacement, SoTranslation, 
-				TRUE, beamSep, ,TRUE);
+				TRUE, beamSep,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(beamScale, SoScale, 
-				TRUE, beamSep, ,TRUE);
+				TRUE, beamSep,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(beamSwitch, SoSwitch, 
-				TRUE, beamSep, ,FALSE);
+				TRUE, beamSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(beam, SoSeparator, 
-				TRUE, beamSwitch, ,TRUE);
+				TRUE, beamSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(beamActive, SoSeparator, 
-				TRUE, beamSwitch, ,TRUE);
+				TRUE, beamSwitch,\x0,TRUE);
 
     // Read the default geometry for this dragger
     if (SO_KIT_IS_FIRST_INSTANCE())
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoTabBoxDragger.c++ inventor/lib/interaction/src/draggers/SoTabBoxDragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoTabBoxDragger.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoTabBoxDragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -94,48 +94,48 @@
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane1Sep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane1Xf, SoTransform, TRUE,
-				tabPlane1Sep, ,FALSE);
+				tabPlane1Sep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane1, SoTabPlaneDragger, TRUE,
-				tabPlane1Sep, ,TRUE);
+				tabPlane1Sep,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane2Sep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane2Xf, SoTransform, TRUE,
-				tabPlane2Sep, ,FALSE);
+				tabPlane2Sep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane2, SoTabPlaneDragger, TRUE,
-				tabPlane2Sep, ,TRUE);
+				tabPlane2Sep,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane3Sep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane3Xf, SoTransform, TRUE,
-				tabPlane3Sep, ,FALSE);
+				tabPlane3Sep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane3, SoTabPlaneDragger, TRUE,
-				tabPlane3Sep, ,TRUE);
+				tabPlane3Sep,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane4Sep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane4Xf, SoTransform, TRUE,
-				tabPlane4Sep, ,FALSE);
+				tabPlane4Sep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane4, SoTabPlaneDragger, TRUE,
-				tabPlane4Sep, ,TRUE);
+				tabPlane4Sep,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane5Sep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane5Xf, SoTransform, TRUE,
-				tabPlane5Sep, ,FALSE);
+				tabPlane5Sep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane5, SoTabPlaneDragger, TRUE,
-				tabPlane5Sep, ,TRUE);
+				tabPlane5Sep,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane6Sep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane6Xf, SoTransform, TRUE,
-				tabPlane6Sep, ,FALSE);
+				tabPlane6Sep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(tabPlane6, SoTabPlaneDragger, TRUE,
-				tabPlane6Sep, ,TRUE);
+				tabPlane6Sep,\x0,TRUE);
 
     // Geometry to draw a nice box instead of drawing the planes separately...
     SO_KIT_ADD_CATALOG_ENTRY(boxGeom, SoSeparator, TRUE,
-				geomSeparator, ,TRUE);
+				geomSeparator,\x0,TRUE);
 
     // Read the default geometry for this dragger
     if (SO_KIT_IS_FIRST_INSTANCE())
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoTabPlaneDragger.c++ inventor/lib/interaction/src/draggers/SoTabPlaneDragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoTabPlaneDragger.c++	2000-10-14 12:46:08.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoTabPlaneDragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -108,41 +108,41 @@
     isBuiltIn = TRUE;
 
     SO_KIT_ADD_CATALOG_ENTRY( planeSwitch, SoSwitch, TRUE,
-				 geomSeparator, , FALSE );
+				 geomSeparator,\x0, FALSE );
     SO_KIT_ADD_CATALOG_ENTRY( translator, SoSeparator, TRUE,
-				 planeSwitch, , TRUE );
+				 planeSwitch,\x0, TRUE );
     SO_KIT_ADD_CATALOG_ENTRY( scaleTabs, SoSeparator, TRUE,
-				 planeSwitch, , FALSE );
+				 planeSwitch,\x0, FALSE );
     SO_KIT_ADD_CATALOG_ENTRY( scaleTabMaterial, SoMaterial, TRUE,
-				 scaleTabs, , TRUE );
+				 scaleTabs,\x0, TRUE );
     SO_KIT_ADD_CATALOG_ENTRY( scaleTabHints, SoShapeHints, TRUE,
-				 scaleTabs, , TRUE );
+				 scaleTabs,\x0, TRUE );
     SO_KIT_ADD_CATALOG_ENTRY( scaleTabMaterialBinding, SoMaterialBinding, TRUE,
-				 scaleTabs, , FALSE );
+				 scaleTabs,\x0, FALSE );
     SO_KIT_ADD_CATALOG_ENTRY( scaleTabNormalBinding, SoNormalBinding, TRUE,
-				 scaleTabs, , FALSE );
+				 scaleTabs,\x0, FALSE );
     SO_KIT_ADD_CATALOG_ENTRY( scaleTabNormal, SoNormal, TRUE,
-				 scaleTabs, , FALSE );
+				 scaleTabs,\x0, FALSE );
     SO_KIT_ADD_CATALOG_ENTRY( edgeScaleCoords, SoCoordinate3, TRUE,
-				 scaleTabs, , FALSE );
+				 scaleTabs,\x0, FALSE );
     SO_KIT_ADD_CATALOG_ENTRY( edgeScaleTab0, SoIndexedFaceSet, TRUE,
-				 scaleTabs, , FALSE );
+				 scaleTabs,\x0, FALSE );
     SO_KIT_ADD_CATALOG_ENTRY( edgeScaleTab1, SoIndexedFaceSet, TRUE,
-				 scaleTabs, , FALSE );
+				 scaleTabs,\x0, FALSE );
     SO_KIT_ADD_CATALOG_ENTRY( edgeScaleTab2, SoIndexedFaceSet, TRUE,
-				 scaleTabs, , FALSE );
+				 scaleTabs,\x0, FALSE );
     SO_KIT_ADD_CATALOG_ENTRY( edgeScaleTab3, SoIndexedFaceSet, TRUE,
-				 scaleTabs, , FALSE );
+				 scaleTabs,\x0, FALSE );
     SO_KIT_ADD_CATALOG_ENTRY( cornerScaleCoords, SoCoordinate3, TRUE,
-				 scaleTabs, , FALSE );
+				 scaleTabs,\x0, FALSE );
     SO_KIT_ADD_CATALOG_ENTRY( cornerScaleTab0, SoIndexedFaceSet, TRUE,
-				 scaleTabs, , FALSE );
+				 scaleTabs,\x0, FALSE );
     SO_KIT_ADD_CATALOG_ENTRY( cornerScaleTab1, SoIndexedFaceSet, TRUE,
-				 scaleTabs, , FALSE );
+				 scaleTabs,\x0, FALSE );
     SO_KIT_ADD_CATALOG_ENTRY( cornerScaleTab2, SoIndexedFaceSet, TRUE,
-				 scaleTabs, , FALSE );
+				 scaleTabs,\x0, FALSE );
     SO_KIT_ADD_CATALOG_ENTRY( cornerScaleTab3, SoIndexedFaceSet, TRUE,
-				 scaleTabs, , FALSE );
+				 scaleTabs,\x0, FALSE );
 
     if (SO_KIT_IS_FIRST_INSTANCE())
 	readDefaultParts("tabPlaneDragger.iv", geomBuffer, sizeof(geomBuffer));
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoTrackballDragger.c++ inventor/lib/interaction/src/draggers/SoTrackballDragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoTrackballDragger.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoTrackballDragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -109,49 +109,49 @@
     // Put this stuff under the geomSeparator so it will draw more
     // efficiently.
     SO_KIT_ADD_CATALOG_ENTRY(rotatorSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator, SoSeparator, TRUE,
-				rotatorSwitch, ,TRUE);
+				rotatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotatorActive, SoSeparator, TRUE,
-				rotatorSwitch, ,TRUE);
+				rotatorSwitch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(XRotatorSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(XRotator, SoSeparator, TRUE,
-				XRotatorSwitch, ,TRUE);
+				XRotatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(XRotatorActive, SoSeparator, TRUE,
-				XRotatorSwitch, ,TRUE);
+				XRotatorSwitch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(YRotatorSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(YRotator, SoSeparator, TRUE,
-				YRotatorSwitch, ,TRUE);
+				YRotatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(YRotatorActive, SoSeparator, TRUE,
-				YRotatorSwitch, ,TRUE);
+				YRotatorSwitch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(ZRotatorSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(ZRotator, SoSeparator, TRUE,
-				ZRotatorSwitch, ,TRUE);
+				ZRotatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(ZRotatorActive, SoSeparator, TRUE,
-				ZRotatorSwitch, ,TRUE);
+				ZRotatorSwitch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(userAxisRotation, SoRotation, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
 
     SO_KIT_ADD_CATALOG_ENTRY(userAxisSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(userAxis, SoSeparator, TRUE,
-				userAxisSwitch, ,TRUE);
+				userAxisSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(userAxisActive, SoSeparator, TRUE,
-				userAxisSwitch, ,TRUE);
+				userAxisSwitch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(userRotatorSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(userRotator, SoSeparator, TRUE,
-				userRotatorSwitch, ,TRUE);
+				userRotatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(userRotatorActive, SoSeparator, TRUE,
-				userRotatorSwitch, ,TRUE);
+				userRotatorSwitch,\x0,TRUE);
 
     // read geometry for shared parts
     if (SO_KIT_IS_FIRST_INSTANCE())
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoTransformBoxDragger.c++ inventor/lib/interaction/src/draggers/SoTransformBoxDragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoTransformBoxDragger.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoTransformBoxDragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -105,65 +105,65 @@
     SO_KIT_ADD_CATALOG_ENTRY(rotator1Sep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator1Rot, SoRotation, TRUE,
-				rotator1Sep, ,FALSE);
+				rotator1Sep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator1, SoRotateCylindricalDragger, TRUE,
-				rotator1Sep, ,TRUE);
+				rotator1Sep,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(rotator2Sep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator2Rot, SoRotation, TRUE,
-				rotator2Sep, ,FALSE);
+				rotator2Sep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator2, SoRotateCylindricalDragger, TRUE,
-				rotator2Sep, ,TRUE);
+				rotator2Sep,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(rotator3Sep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator3Rot, SoRotation, TRUE,
-				rotator3Sep, ,FALSE);
+				rotator3Sep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator3, SoRotateCylindricalDragger, TRUE,
-				rotator3Sep, ,TRUE);
+				rotator3Sep,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(translator1Sep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator1Rot, SoRotation, TRUE,
-				translator1Sep, ,FALSE);
+				translator1Sep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator1, SoTranslate2Dragger, TRUE,
-				translator1Sep, ,TRUE);
+				translator1Sep,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(translator2Sep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator2Rot, SoRotation, TRUE,
-				translator2Sep, ,FALSE);
+				translator2Sep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator2, SoTranslate2Dragger, TRUE,
-				translator2Sep, ,TRUE);
+				translator2Sep,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(translator3Sep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator3Rot, SoRotation, TRUE,
-				translator3Sep, ,FALSE);
+				translator3Sep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator3, SoTranslate2Dragger, TRUE,
-				translator3Sep, ,TRUE);
+				translator3Sep,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(translator4Sep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator4Rot, SoRotation, TRUE,
-				translator4Sep, ,FALSE);
+				translator4Sep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator4, SoTranslate2Dragger, TRUE,
-				translator4Sep, ,TRUE);
+				translator4Sep,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(translator5Sep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator5Rot, SoRotation, TRUE,
-				translator5Sep, ,FALSE);
+				translator5Sep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator5, SoTranslate2Dragger, TRUE,
-				translator5Sep, ,TRUE);
+				translator5Sep,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(translator6Sep, SoSeparator, FALSE,
 				topSeparator, geomSeparator,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator6Rot, SoRotation, TRUE,
-				translator6Sep, ,FALSE);
+				translator6Sep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator6, SoTranslate2Dragger, TRUE,
-				translator6Sep, ,TRUE);
+				translator6Sep,\x0,TRUE);
 
     // Read the default geometry for this dragger
     if (SO_KIT_IS_FIRST_INSTANCE())
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoTransformerDragger.c++ inventor/lib/interaction/src/draggers/SoTransformerDragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoTransformerDragger.c++	2000-10-14 12:46:08.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoTransformerDragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -192,7 +192,7 @@
 				topSeparator, geomSeparator, FALSE );
 
     SO_KIT_ADD_CATALOG_ENTRY(translatorSep, SoSeparator, TRUE,
-				topSeparator, ,FALSE);
+				topSeparator,\x0,FALSE);
 
     // ORDER OF THESE IS IMPORTANT!
     // This is because all commands in this routine and subroutines
@@ -214,294 +214,294 @@
 SoTransformerDragger::makeTranslaterCatalogParts()
 {
     SO_KIT_ADD_CATALOG_ENTRY(translator1Switch, SoSwitch, TRUE,
-				translatorSep, ,FALSE);
+				translatorSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator1LocateGroup,SoLocateHighlight, TRUE,
-				translator1Switch, ,FALSE);
+				translator1Switch,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator1, SoSeparator, TRUE,
-				translator1LocateGroup, ,TRUE);
+				translator1LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator1Active, SoSeparator, TRUE,
-				translator1Switch, ,TRUE);
+				translator1Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator2Switch, SoSwitch, TRUE,
-				translatorSep, ,FALSE);
+				translatorSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator2LocateGroup,SoLocateHighlight, TRUE,
-				translator2Switch, ,FALSE);
+				translator2Switch,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator2, SoSeparator, TRUE,
-				translator2LocateGroup, ,TRUE);
+				translator2LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator2Active, SoSeparator, TRUE,
-				translator2Switch, ,TRUE);
+				translator2Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator3Switch, SoSwitch, TRUE,
-				translatorSep, ,FALSE);
+				translatorSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator3LocateGroup,SoLocateHighlight, TRUE,
-				translator3Switch, ,FALSE);
+				translator3Switch,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator3, SoSeparator, TRUE,
-				translator3LocateGroup, ,TRUE);
+				translator3LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator3Active, SoSeparator, TRUE,
-				translator3Switch, ,TRUE);
+				translator3Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator4Switch, SoSwitch, TRUE,
-				translatorSep, ,FALSE);
+				translatorSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator4LocateGroup,SoLocateHighlight, TRUE,
-				translator4Switch, ,FALSE);
+				translator4Switch,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator4, SoSeparator, TRUE,
-				translator4LocateGroup, ,TRUE);
+				translator4LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator4Active, SoSeparator, TRUE,
-				translator4Switch, ,TRUE);
+				translator4Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator5Switch, SoSwitch, TRUE,
-				translatorSep, ,FALSE);
+				translatorSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator5LocateGroup,SoLocateHighlight, TRUE,
-				translator5Switch, ,FALSE);
+				translator5Switch,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator5, SoSeparator, TRUE,
-				translator5LocateGroup, ,TRUE);
+				translator5LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator5Active, SoSeparator, TRUE,
-				translator5Switch, ,TRUE);
+				translator5Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator6Switch, SoSwitch, TRUE,
-				translatorSep, ,FALSE);
+				translatorSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator6LocateGroup,SoLocateHighlight, TRUE,
-				translator6Switch, ,FALSE);
+				translator6Switch,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator6, SoSeparator, TRUE,
-				translator6LocateGroup, ,TRUE);
+				translator6LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translator6Active, SoSeparator, TRUE,
-				translator6Switch, ,TRUE);
+				translator6Switch,\x0,TRUE);
 }
 
 void
 SoTransformerDragger::makeRotaterCatalogParts()
 {
     SO_KIT_ADD_CATALOG_ENTRY(rotatorSep, SoSeparator, TRUE,
-				topSeparator, ,FALSE);
+				topSeparator,\x0,FALSE);
 
     SO_KIT_ADD_CATALOG_ENTRY(rotator1Switch, SoSwitch, TRUE,
-				rotatorSep, ,FALSE);
+				rotatorSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator1LocateGroup, SoLocateHighlight, TRUE,
-				rotator1Switch, ,TRUE);
+				rotator1Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator1, SoSeparator, TRUE,
-				rotator1LocateGroup, ,TRUE);
+				rotator1LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator1Active, SoSeparator, TRUE,
-				rotator1Switch, ,TRUE);
+				rotator1Switch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(rotator2Switch, SoSwitch, TRUE,
-				rotatorSep, ,FALSE);
+				rotatorSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator2LocateGroup, SoLocateHighlight, TRUE,
-				rotator2Switch, ,TRUE);
+				rotator2Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator2, SoSeparator, TRUE,
-				rotator2LocateGroup, ,TRUE);
+				rotator2LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator2Active, SoSeparator, TRUE,
-				rotator2Switch, ,TRUE);
+				rotator2Switch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(rotator3Switch, SoSwitch, TRUE,
-				rotatorSep, ,FALSE);
+				rotatorSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator3LocateGroup, SoLocateHighlight, TRUE,
-				rotator3Switch, ,TRUE);
+				rotator3Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator3, SoSeparator, TRUE,
-				rotator3LocateGroup, ,TRUE);
+				rotator3LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator3Active, SoSeparator, TRUE,
-				rotator3Switch, ,TRUE);
+				rotator3Switch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(rotator4Switch, SoSwitch, TRUE,
-				rotatorSep, ,FALSE);
+				rotatorSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator4LocateGroup, SoLocateHighlight, TRUE,
-				rotator4Switch, ,TRUE);
+				rotator4Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator4, SoSeparator, TRUE,
-				rotator4LocateGroup, ,TRUE);
+				rotator4LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator4Active, SoSeparator, TRUE,
-				rotator4Switch, ,TRUE);
+				rotator4Switch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(rotator5Switch, SoSwitch, TRUE,
-				rotatorSep, ,FALSE);
+				rotatorSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator5LocateGroup, SoLocateHighlight, TRUE,
-				rotator5Switch, ,TRUE);
+				rotator5Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator5, SoSeparator, TRUE,
-				rotator5LocateGroup, ,TRUE);
+				rotator5LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator5Active, SoSeparator, TRUE,
-				rotator5Switch, ,TRUE);
+				rotator5Switch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(rotator6Switch, SoSwitch, TRUE,
-				rotatorSep, ,FALSE);
+				rotatorSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator6LocateGroup, SoLocateHighlight, TRUE,
-				rotator6Switch, ,TRUE);
+				rotator6Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator6, SoSeparator, TRUE,
-				rotator6LocateGroup, ,TRUE);
+				rotator6LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(rotator6Active, SoSeparator, TRUE,
-				rotator6Switch, ,TRUE);
+				rotator6Switch,\x0,TRUE);
 }
 
 void
 SoTransformerDragger::makeScalerCatalogParts()
 {
     SO_KIT_ADD_CATALOG_ENTRY(scaleSep, SoSeparator, TRUE,
-				topSeparator, ,FALSE);
+				topSeparator,\x0,FALSE);
 
     SO_KIT_ADD_CATALOG_ENTRY(scale1Switch, SoSwitch, TRUE,
-				scaleSep, ,FALSE);
+				scaleSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(scale1LocateGroup, SoLocateHighlight, TRUE,
-				scale1Switch, ,TRUE);
+				scale1Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scale1, SoSeparator, TRUE,
-				scale1LocateGroup, ,TRUE);
+				scale1LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scale1Active, SoSeparator, TRUE,
-				scale1Switch, ,TRUE);
+				scale1Switch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(scale2Switch, SoSwitch, TRUE,
-				scaleSep, ,FALSE);
+				scaleSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(scale2LocateGroup, SoLocateHighlight, TRUE,
-				scale2Switch, ,TRUE);
+				scale2Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scale2, SoSeparator, TRUE,
-				scale2LocateGroup, ,TRUE);
+				scale2LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scale2Active, SoSeparator, TRUE,
-				scale2Switch, ,TRUE);
+				scale2Switch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(scale3Switch, SoSwitch, TRUE,
-				scaleSep, ,FALSE);
+				scaleSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(scale3LocateGroup, SoLocateHighlight, TRUE,
-				scale3Switch, ,TRUE);
+				scale3Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scale3, SoSeparator, TRUE,
-				scale3LocateGroup, ,TRUE);
+				scale3LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scale3Active, SoSeparator, TRUE,
-				scale3Switch, ,TRUE);
+				scale3Switch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(scale4Switch, SoSwitch, TRUE,
-				scaleSep, ,FALSE);
+				scaleSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(scale4LocateGroup, SoLocateHighlight, TRUE,
-				scale4Switch, ,TRUE);
+				scale4Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scale4, SoSeparator, TRUE,
-				scale4LocateGroup, ,TRUE);
+				scale4LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scale4Active, SoSeparator, TRUE,
-				scale4Switch, ,TRUE);
+				scale4Switch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(scale5Switch, SoSwitch, TRUE,
-				scaleSep, ,FALSE);
+				scaleSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(scale5LocateGroup, SoLocateHighlight, TRUE,
-				scale5Switch, ,TRUE);
+				scale5Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scale5, SoSeparator, TRUE,
-				scale5LocateGroup, ,TRUE);
+				scale5LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scale5Active, SoSeparator, TRUE,
-				scale5Switch, ,TRUE);
+				scale5Switch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(scale6Switch, SoSwitch, TRUE,
-				scaleSep, ,FALSE);
+				scaleSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(scale6LocateGroup, SoLocateHighlight, TRUE,
-				scale6Switch, ,TRUE);
+				scale6Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scale6, SoSeparator, TRUE,
-				scale6LocateGroup, ,TRUE);
+				scale6LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scale6Active, SoSeparator, TRUE,
-				scale6Switch, ,TRUE);
+				scale6Switch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(scale7Switch, SoSwitch, TRUE,
-				scaleSep, ,FALSE);
+				scaleSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(scale7LocateGroup, SoLocateHighlight, TRUE,
-				scale7Switch, ,TRUE);
+				scale7Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scale7, SoSeparator, TRUE,
-				scale7LocateGroup, ,TRUE);
+				scale7LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scale7Active, SoSeparator, TRUE,
-				scale7Switch, ,TRUE);
+				scale7Switch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(scale8Switch, SoSwitch, TRUE,
-				scaleSep, ,FALSE);
+				scaleSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(scale8LocateGroup, SoLocateHighlight, TRUE,
-				scale8Switch, ,TRUE);
+				scale8Switch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scale8, SoSeparator, TRUE,
-				scale8LocateGroup, ,TRUE);
+				scale8LocateGroup,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(scale8Active, SoSeparator, TRUE,
-				scale8Switch, ,TRUE);
+				scale8Switch,\x0,TRUE);
 }
 
 void 
 SoTransformerDragger::makeAxisFeedbackCatalogParts()
 {
     SO_KIT_ADD_CATALOG_ENTRY(axisFeedbackSep, SoSeparator, 
-				TRUE, geomSeparator, ,FALSE);
+				TRUE, geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(axisFeedbackLocation, SoTranslation, 
-				TRUE, axisFeedbackSep, ,FALSE);
+				TRUE, axisFeedbackSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(xAxisFeedbackSwitch, SoSwitch, TRUE,
-				axisFeedbackSep, ,FALSE);
+				axisFeedbackSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(xAxisFeedbackActive, SoSeparator, TRUE,
-				xAxisFeedbackSwitch, ,TRUE);
+				xAxisFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(xAxisFeedbackSelect, SoSeparator, TRUE,
-				xAxisFeedbackSwitch, ,TRUE);
+				xAxisFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(xCrosshairFeedback, SoSeparator, TRUE,
-				xAxisFeedbackSwitch, ,TRUE);
+				xAxisFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(yAxisFeedbackSwitch, SoSwitch, TRUE,
-				axisFeedbackSep, ,FALSE);
+				axisFeedbackSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(yAxisFeedbackActive, SoSeparator, TRUE,
-				yAxisFeedbackSwitch, ,TRUE);
+				yAxisFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(yAxisFeedbackSelect, SoSeparator, TRUE,
-				yAxisFeedbackSwitch, ,TRUE);
+				yAxisFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(yCrosshairFeedback, SoSeparator, TRUE,
-				yAxisFeedbackSwitch, ,TRUE);
+				yAxisFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(zAxisFeedbackSwitch, SoSwitch, TRUE,
-				axisFeedbackSep, ,FALSE);
+				axisFeedbackSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(zAxisFeedbackActive, SoSeparator, TRUE,
-				zAxisFeedbackSwitch, ,TRUE);
+				zAxisFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(zAxisFeedbackSelect, SoSeparator, TRUE,
-				zAxisFeedbackSwitch, ,TRUE);
+				zAxisFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(zCrosshairFeedback, SoSeparator, TRUE,
-				zAxisFeedbackSwitch, ,TRUE);
+				zAxisFeedbackSwitch,\x0,TRUE);
 }
 
 void
 SoTransformerDragger::makeBoxFeedbackCatalogParts()
 {
     SO_KIT_ADD_CATALOG_ENTRY(translateBoxFeedbackSep, SoSeparator, 
-				TRUE, geomSeparator, ,FALSE);
+				TRUE, geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translateBoxFeedbackSwitch, SoSwitch, TRUE,
-				translateBoxFeedbackSep, ,FALSE);
+				translateBoxFeedbackSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translateBoxFeedbackRotation, SoRotation, 
-				TRUE, translateBoxFeedbackSwitch, ,FALSE);
+				TRUE, translateBoxFeedbackSwitch,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translateBoxFeedback, SoSeparator, TRUE,
-				translateBoxFeedbackSwitch, ,TRUE);
+				translateBoxFeedbackSwitch,\x0,TRUE);
 
     SO_KIT_ADD_CATALOG_ENTRY(scaleBoxFeedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(scaleBoxFeedback, SoSeparator, TRUE,
-				scaleBoxFeedbackSwitch, ,TRUE);
+				scaleBoxFeedbackSwitch,\x0,TRUE);
 }
 
 void
 SoTransformerDragger::makeWallFeedbackCatalogParts()
 {
     SO_KIT_ADD_CATALOG_ENTRY(posXWallFeedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(posXWallFeedback, SoSeparator, TRUE,
-				posXWallFeedbackSwitch, ,TRUE);
+				posXWallFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(posXRoundWallFeedback, SoSeparator, TRUE,
-				posXWallFeedbackSwitch, ,TRUE);
+				posXWallFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(posYWallFeedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(posYWallFeedback, SoSeparator, TRUE,
-				posYWallFeedbackSwitch, ,TRUE);
+				posYWallFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(posYRoundWallFeedback, SoSeparator, TRUE,
-				posYWallFeedbackSwitch, ,TRUE);
+				posYWallFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(posZWallFeedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(posZWallFeedback, SoSeparator, TRUE,
-				posZWallFeedbackSwitch, ,TRUE);
+				posZWallFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(posZRoundWallFeedback, SoSeparator, TRUE,
-				posZWallFeedbackSwitch, ,TRUE);
+				posZWallFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(negXWallFeedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(negXWallFeedback, SoSeparator, TRUE,
-				negXWallFeedbackSwitch, ,TRUE);
+				negXWallFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(negXRoundWallFeedback, SoSeparator, TRUE,
-				negXWallFeedbackSwitch, ,TRUE);
+				negXWallFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(negYWallFeedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(negYWallFeedback, SoSeparator, TRUE,
-				negYWallFeedbackSwitch, ,TRUE);
+				negYWallFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(negYRoundWallFeedback, SoSeparator, TRUE,
-				negYWallFeedbackSwitch, ,TRUE);
+				negYWallFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(negZWallFeedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(negZWallFeedback, SoSeparator, TRUE,
-				negZWallFeedbackSwitch, ,TRUE);
+				negZWallFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(negZRoundWallFeedback, SoSeparator, TRUE,
-				negZWallFeedbackSwitch, ,TRUE);
+				negZWallFeedbackSwitch,\x0,TRUE);
 }
 
 void
 SoTransformerDragger::makeRadialFeedbackCatalogParts()
 {
     SO_KIT_ADD_CATALOG_ENTRY(radialFeedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(radialFeedback, SoSeparator, TRUE,
-				radialFeedbackSwitch, ,TRUE);
+				radialFeedbackSwitch,\x0,TRUE);
 }
 
 void
@@ -511,25 +511,25 @@
     // This is because the antiSquish node can cause matrices that change
     // every frame and might break caches for the whole box.
     SO_KIT_ADD_CATALOG_ENTRY(circleFeedbackSep, SoSeparator, TRUE,
-				topSeparator, ,FALSE);
+				topSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(circleFeedbackTransformSwitch, SoSwitch, TRUE,
-				circleFeedbackSep, ,FALSE);
+				circleFeedbackSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(circleFeedbackAntiSquish, SoAntiSquish, TRUE,
-				circleFeedbackTransformSwitch, ,FALSE);
+				circleFeedbackTransformSwitch,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(circleFeedbackTransform, SoTransform, TRUE,
-				circleFeedbackTransformSwitch, ,FALSE);
+				circleFeedbackTransformSwitch,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(xCircleFeedbackSwitch, SoSwitch, TRUE,
-				circleFeedbackSep, ,FALSE);
+				circleFeedbackSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(xCircleFeedback, SoSeparator, TRUE,
-				xCircleFeedbackSwitch, ,TRUE);
+				xCircleFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(yCircleFeedbackSwitch, SoSwitch, TRUE,
-				circleFeedbackSep, ,FALSE);
+				circleFeedbackSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(yCircleFeedback, SoSeparator, TRUE,
-				yCircleFeedbackSwitch, ,TRUE);
+				yCircleFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(zCircleFeedbackSwitch, SoSwitch, TRUE,
-				circleFeedbackSep, ,FALSE);
+				circleFeedbackSep,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(zCircleFeedback, SoSeparator, TRUE,
-				zCircleFeedbackSwitch, ,TRUE);
+				zCircleFeedbackSwitch,\x0,TRUE);
 }
 
 ////////////////////////////////////////////////////////////////////////
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoTranslate1Dragger.c++ inventor/lib/interaction/src/draggers/SoTranslate1Dragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoTranslate1Dragger.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoTranslate1Dragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -84,17 +84,17 @@
     // Put this stuff under the geomSeparator so it will draw more
     // efficiently.
     SO_KIT_ADD_CATALOG_ENTRY(translatorSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator, SoSeparator, TRUE,
-				translatorSwitch, ,TRUE);
+				translatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translatorActive, SoSeparator, TRUE,
-				translatorSwitch, ,TRUE);
+				translatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(feedback, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackActive, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
 
     // read geometry for shared parts
     if (SO_KIT_IS_FIRST_INSTANCE())
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/draggers/SoTranslate2Dragger.c++ inventor/lib/interaction/src/draggers/SoTranslate2Dragger.c++
--- /tmp/inventor/lib/interaction/src/draggers/SoTranslate2Dragger.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/draggers/SoTranslate2Dragger.c++	2005-08-01 17:36:15.000000000 +0200
@@ -87,23 +87,23 @@
     // Put this stuff under the geomSeparator so it will draw more
     // efficiently.
     SO_KIT_ADD_CATALOG_ENTRY(translatorSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(translator, SoSeparator, TRUE,
-				translatorSwitch, ,TRUE);
+				translatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(translatorActive, SoSeparator, TRUE,
-				translatorSwitch, ,TRUE);
+				translatorSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(feedback, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(feedbackActive, SoSeparator, TRUE,
-				feedbackSwitch, ,TRUE);
+				feedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(axisFeedbackSwitch, SoSwitch, TRUE,
-				geomSeparator, ,FALSE);
+				geomSeparator,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(xAxisFeedback, SoSeparator, TRUE,
-				axisFeedbackSwitch, ,TRUE);
+				axisFeedbackSwitch,\x0,TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(yAxisFeedback, SoSeparator, TRUE,
-				axisFeedbackSwitch, ,TRUE);
+				axisFeedbackSwitch,\x0,TRUE);
 
     // read geometry for shared parts
     if (SO_KIT_IS_FIRST_INSTANCE())
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/nodekits/SoInteractionKit.c++ inventor/lib/interaction/src/nodekits/SoInteractionKit.c++
--- /tmp/inventor/lib/interaction/src/nodekits/SoInteractionKit.c++	2000-08-15 14:56:25.000000000 +0200
+++ inventor/lib/interaction/src/nodekits/SoInteractionKit.c++	2006-12-20 12:07:21.000000000 +0100
@@ -86,9 +86,9 @@
     isBuiltIn = TRUE;
 
     // Add a separator to the catalog.
-    SO_KIT_ADD_CATALOG_ENTRY(topSeparator, SoSeparator, TRUE, this, ,FALSE);
+    SO_KIT_ADD_CATALOG_ENTRY(topSeparator, SoSeparator, TRUE, this,\x0,FALSE);
     SO_KIT_ADD_CATALOG_ENTRY(geomSeparator,SoSeparator, 
-				TRUE, topSeparator, ,FALSE);
+				TRUE, topSeparator,\x0,FALSE);
 
     SO_KIT_ADD_FIELD(renderCaching,            (AUTO));
     SO_KIT_ADD_FIELD(boundingBoxCaching,       (AUTO));
@@ -854,8 +854,8 @@
 	    // (as in "childList[0].appearance")
 	    // If so, get the string up to whichever came first.
 	    // This will be the 'intermediary' we look for.
-	    char *dotPtr   = strchr( partName.getString(), '.' );
-	    char *brackPtr = strchr( partName.getString(), '[' );
+            char *dotPtr   = (char*) strchr( partName.getString(), '.' );
+	    char *brackPtr = (char*) strchr( partName.getString(), '[' );
 
 	    if ( dotPtr != NULL || brackPtr != NULL ) {
 		char *nameCopy = strdup( partName.getString() );
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/SoSceneMgr.c++ inventor/lib/interaction/src/SoSceneMgr.c++
--- /tmp/inventor/lib/interaction/src/SoSceneMgr.c++	2000-08-15 14:56:24.000000000 +0200
+++ inventor/lib/interaction/src/SoSceneMgr.c++	2006-07-12 18:01:38.000000000 +0200
@@ -65,9 +65,8 @@
 #include <Inventor/actions/SoGLRenderAction.h>
 #include <Inventor/actions/SoHandleEventAction.h>
 
-#include <GL/gl.h>
-#include <GL/glu.h>
-#include <GL/glx.h>
+#include OPENGL_GL_H
+#include OPENGL_GLU_H
 
 #include <SoDebug.h>
 
@@ -510,7 +509,7 @@
 {
     // reinitialize if necessary
     if (graphicsInitNeeded) {
-	int numBits[1];
+	GLint numBits[1];
 	glGetIntegerv(GL_DEPTH_BITS, numBits);
 	needZbuffer = (numBits[0] != 0); // FALSE for overlay windows !
 	if (needZbuffer)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/interaction/src/SoSelection.c++ inventor/lib/interaction/src/SoSelection.c++
--- /tmp/inventor/lib/interaction/src/SoSelection.c++	2000-10-14 12:46:08.000000000 +0200
+++ inventor/lib/interaction/src/SoSelection.c++	2006-07-17 15:46:47.000000000 +0200
@@ -52,7 +52,10 @@
  */
 
 
+#include <Inventor/system/SbSystem.h>
+#ifndef WIN32
 #include <X11/Xlib.h>
+#endif
 
 #include <Inventor/SoDB.h>
 #include <Inventor/SoInput.h>
@@ -219,6 +222,12 @@
 	    
 	    if (mouseDownPickPath != NULL) {
 		mouseDownPickPath->ref();	// ...in with the new
+	    }
+
+	    // 2005-04-11 Felix: If paths are required to match, handle the action
+	    // since it will be set as handled on SoButtonEvent::UP and both form an
+	    // integrated whole from the point of interaction.
+	    if (pickMatching || (mouseDownPickPath != NULL)) {
 		action->setHandled();
 	    }
 	}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/GNUmakefile inventor/lib/mevis/GNUmakefile
--- /tmp/inventor/lib/mevis/GNUmakefile	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/GNUmakefile	2005-08-01 17:36:15.000000000 +0200
@@ -0,0 +1,18 @@
+IVDEPTH = ../..
+include $(IVDEPTH)/make/ivcommondefs
+
+SUBDIRS = src
+
+all:
+	$(SUBDIRS_MAKERULE)
+
+HEADERS_SUBDIRS = include
+
+install:
+	$(HEADERS_SUBDIRS_MAKERULE)
+
+COMMONPREF = xxx
+$(COMMONTARGS): %: $(COMMONPREF)%
+	$(SUBDIRS_MAKERULE)
+
+include $(IVCOMMONRULES)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/GNUmakefile inventor/lib/mevis/include/GNUmakefile
--- /tmp/inventor/lib/mevis/include/GNUmakefile	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/GNUmakefile	2006-07-14 14:59:49.000000000 +0200
@@ -0,0 +1,24 @@
+IVDEPTH = ../../..
+include $(IVDEPTH)/make/ivcommondefs
+
+HDRSUBDIR = ../
+
+ifeq ($(usingWin32), 1)
+HEADERS += \
+	SoWinEnterScope.h \
+	SoWinLeaveScope.h \
+	inttypes.h
+endif
+
+HEADERS_SUBDIRS = Inventor
+
+all:
+
+install: install_ivheaders
+	$(HEADERS_SUBDIRS_MAKERULE)
+
+COMMONPREF = xxx
+$(COMMONTARGS): %: $(COMMONPREF)%
+	$(HEADERS_SUBDIRS_MAKERULE)
+
+include $(IVCOMMONRULES)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/inttypes.h inventor/lib/mevis/include/inttypes.h
--- /tmp/inventor/lib/mevis/include/inttypes.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/inttypes.h	2005-08-09 15:41:29.000000000 +0200
@@ -0,0 +1,34 @@
+/*
+ * Copyright (C) 2003,04   MeVis gGmbH
+ *
+ _______________________________________________________________________
+ ______________________  M E V I S   G G M B H  ________________________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |	This include file contains typedef's for standard integer types.
+ |
+ |   Author(s)		: Felix Ritter
+ |
+ ______________________  M E V I S   G G M B H  ________________________
+ _______________________________________________________________________
+ */
+
+#ifndef _INT_TYPES_
+#define _INT_TYPES_
+
+#ifdef WIN32
+
+typedef signed int int32_t;
+typedef unsigned int uint32_t;
+
+typedef signed short int int16_t;
+typedef unsigned short int uint16_t;
+
+typedef signed char int8_t;
+typedef unsigned char uint8_t;
+
+#endif
+
+#endif  // _INT_TYPES_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/elements/GNUmakefile inventor/lib/mevis/include/Inventor/elements/GNUmakefile
--- /tmp/inventor/lib/mevis/include/Inventor/elements/GNUmakefile	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/elements/GNUmakefile	2005-08-03 12:46:28.000000000 +0200
@@ -0,0 +1,16 @@
+IVDEPTH = ../../../../..
+include $(IVDEPTH)/make/ivcommondefs
+
+HDRSUBDIR = elements
+
+HEADERS = \
+	SoGLPolygonOffsetElement.h \
+	SoGLStencilBitsElement.h \
+	SoPolygonOffsetElement.h \
+	SoStencilBitsElement.h
+
+all:
+
+install: install_ivheaders
+
+include $(IVCOMMONRULES)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/elements/SoGLPolygonOffsetElement.h inventor/lib/mevis/include/Inventor/elements/SoGLPolygonOffsetElement.h
--- /tmp/inventor/lib/mevis/include/Inventor/elements/SoGLPolygonOffsetElement.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/elements/SoGLPolygonOffsetElement.h	2007-04-10 16:40:15.000000000 +0200
@@ -0,0 +1,113 @@
+/*
+ *
+ *  Copyright (C) 2004 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2004   MeVis Research GmbH
+ *
+ _______________________________________________________________________
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   ...
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ _______________________________________________________________________
+ */
+
+#ifndef _SO_GL_POLYGON_OFFSET_ELEMENT_
+#define _SO_GL_POLYGON_OFFSET_ELEMENT_
+
+#include <Inventor/system/SbSystem.h>
+#include <Inventor/elements/SoPolygonOffsetElement.h>
+
+SoEXTENDER class INVENTOR_API SoGLPolygonOffsetElement : public SoPolygonOffsetElement
+{
+   typedef SoPolygonOffsetElement inherited;
+
+   SO_ELEMENT_HEADER(SoGLPolygonOffsetElement);
+
+   public:
+
+      // Initializes element
+      virtual void	init(SoState *state);
+
+      // Override push() method to copy state pointer and value of
+      // previous element, to avoid sending GL commands if the elements
+      // are the same.
+      virtual void	push(SoState *state);
+
+      // Override pop() method so side effects can occur in GL
+      virtual void	pop(SoState *state, const SoElement *childElt);
+      
+      friend int operator ==(const SoGLPolygonOffsetElement &e1, const SoGLPolygonOffsetElement &e2);
+      friend int operator !=(const SoGLPolygonOffsetElement &e1, const SoGLPolygonOffsetElement &e2) {
+         return !(e1 == e2);
+      }
+
+   protected:
+
+      virtual void	setElt(float factor, float units, Style styles, SbBool on);
+
+      // Destructor.
+      virtual		~SoGLPolygonOffsetElement();
+
+   SoINTERNAL public:
+
+      // Initializes the SoGLPolygonOffsetElement class.
+      static void       initClass();
+
+   private:
+
+      // This variable is TRUE if the value in this element was copied
+      // from our parent.  If set is called with the same value, no GL
+      // commands have to be done-- it is as if this element doesn't
+      // exist, and the parent's value is used.  Of course, a cache
+      // dependency will have to be added in this case (if the parent
+      // changes, the cache is not valid).  Set sets this flag to false.
+      SbBool   _copiedFromParent;
+      
+      Style    _currentstyles;
+      float    _currentoffsetfactor;
+      float    _currentoffsetunits;
+
+      // We need to store the state.
+      SoState *_state;
+
+      // Sends changes in element to GL
+      void		send();
+};
+
+#endif  // _SO_GL_POLYGON_OFFSET_ELEMENT_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/elements/SoGLStencilBitsElement.h inventor/lib/mevis/include/Inventor/elements/SoGLStencilBitsElement.h
--- /tmp/inventor/lib/mevis/include/Inventor/elements/SoGLStencilBitsElement.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/elements/SoGLStencilBitsElement.h	2007-04-10 16:40:15.000000000 +0200
@@ -0,0 +1,79 @@
+/*
+ *
+ *  Copyright (C) 2003 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2003   MeVis Research GmbH
+ *
+ _______________________________________________________________________
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   ...
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ _______________________________________________________________________
+ */
+
+#ifndef _SO_GL_STENCIL_BITS_ELEMENT_
+#define _SO_GL_STENCIL_BITS_ELEMENT_
+
+#include <Inventor/system/SbSystem.h>
+#include <Inventor/elements/SoStencilBitsElement.h>
+
+SoEXTENDER class INVENTOR_API SoGLStencilBitsElement : public SoStencilBitsElement
+{
+   typedef SoStencilBitsElement inherited;
+   
+   SO_ELEMENT_HEADER(SoGLStencilBitsElement);
+   
+   public:
+
+      // Clears only the masked bits (which must be adjacent) to value.
+      // Value is shifted automatically to fit in the masked bits.
+      static void       clear(SoState *state, uint32_t mask, int32_t value = 0);
+      
+   protected:
+
+      // Destructor.
+      virtual		~SoGLStencilBitsElement();
+
+   SoINTERNAL public:
+
+      // Initializes the SoGLStencilBitsElement class.
+      static void       initClass();
+};
+
+#endif  // _SO_GL_STENCIL_BITS_ELEMENT_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/elements/SoPolygonOffsetElement.h inventor/lib/mevis/include/Inventor/elements/SoPolygonOffsetElement.h
--- /tmp/inventor/lib/mevis/include/Inventor/elements/SoPolygonOffsetElement.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/elements/SoPolygonOffsetElement.h	2007-04-10 16:40:15.000000000 +0200
@@ -0,0 +1,100 @@
+/*
+ *
+ *  Copyright (C) 2004 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2004   MeVis Research GmbH
+ *
+ _______________________________________________________________________
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   ...
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ _______________________________________________________________________
+ */
+
+#ifndef  _SO_POLYGON_OFFSET_ELEMENT_
+#define  _SO_POLYGON_OFFSET_ELEMENT_
+
+#include <Inventor/system/SbSystem.h>
+#include <Inventor/elements/SoReplacedElement.h>
+
+SoEXTENDER class INVENTOR_API SoPolygonOffsetElement : public SoReplacedElement
+{
+   typedef SoReplacedElement inherited;
+
+   SO_ELEMENT_HEADER(SoPolygonOffsetElement);
+
+   public:
+
+      enum Style {
+         FILLED = 0x01,
+         LINES  = 0x02,
+         POINTS = 0x04,
+         ALL    = 0xff
+      };
+
+      // Initializes element
+      virtual void	init(SoState * state);
+
+      static void	set(SoState *state, SoNode *node, float factor, float units, Style styles, SbBool on);
+     
+      static void	get(SoState *state, float &factor, float &units, Style &styles, SbBool &on);
+      
+      static Style	getStyle(SoState *state);
+      
+      static void	getDefault(float &factor, float &units, Style &styles, SbBool &on);
+
+   protected:
+
+      Style  _style;
+      SbBool _active;
+      float  _offsetfactor;
+      float  _offsetunits;
+
+      // Destructor.
+      virtual		~SoPolygonOffsetElement();
+
+      virtual void	setElt(float factor, float units, Style styles, SbBool on);
+
+   SoINTERNAL public:
+
+      // Initializes the SoPolygonOffsetElement class.
+      static void       initClass();
+};
+
+#endif  // _SO_POLYGON_OFFSET_ELEMENT_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/elements/SoStencilBitsElement.h inventor/lib/mevis/include/Inventor/elements/SoStencilBitsElement.h
--- /tmp/inventor/lib/mevis/include/Inventor/elements/SoStencilBitsElement.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/elements/SoStencilBitsElement.h	2007-04-10 16:40:15.000000000 +0200
@@ -0,0 +1,113 @@
+/*
+ *
+ *  Copyright (C) 2003 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2003   MeVis Research GmbH
+ *
+ _______________________________________________________________________
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   Manages stencil bits of the OpenGL stencil buffer
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ _______________________________________________________________________
+ */
+
+#ifndef _SO_STENCIL_BITS_ELEMENT_
+#define _SO_STENCIL_BITS_ELEMENT_
+
+#include <Inventor/system/SbSystem.h>
+#include <Inventor/elements/SoInt32Element.h>
+
+SoEXTENDER class INVENTOR_API SoStencilBitsElement : public SoInt32Element
+{
+   typedef SoInt32Element inherited;
+   
+   SO_ELEMENT_HEADER(SoStencilBitsElement);
+   
+   public:
+
+      // Initializes element
+      virtual void	init(SoState *state);
+
+      // Acquires a certain number of bits for stencil operations.
+      // This returns a mask of the acquired bits or 0x0 if there
+      // are not enough stencil bits available.
+      static uint32_t   acquireBits(SoState *state, SoNode *node, int num);
+      
+      // Releases the stencil bits specified by the mask.
+      static void       releaseBits(SoState *state, uint32_t mask);
+      
+      // Returns a mask of the current stencil bits in use.
+      static uint32_t   get(SoState *state) {
+	 return (uint32_t)SoInt32Element::get(classStackIndex, state);
+      }
+
+      // Returns the default mask of stencil bits in use.
+      static uint32_t   getDefault() {
+	 return 0x0;
+      }
+      
+      // Returns the number of stencil bits not currently used.
+      static int        getNumRemainingBits(SoState *state);
+
+      // Returns the number of bits supported by GL implementation.
+      static int        getNumGLBits();
+      
+      // Overrides push() method to copy values from next instance in the stack.
+      virtual void      push(SoState *state);
+
+   protected:
+
+      // Number of positions a value must be shifted according to mask.
+      static int	getNumBitPositionsToShift(uint32_t mask);
+      
+      // Destructor.
+      virtual		~SoStencilBitsElement();
+
+   SoINTERNAL public:
+
+      // Initializes the SoStencilBitsElement class.
+      static void       initClass();
+
+   private:
+
+      // Stores number of bits supported by GL implementation.
+      static int        numGLBits;
+};
+
+#endif  // _SO_STENCIL_BITS_ELEMENT_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/fields/GNUmakefile inventor/lib/mevis/include/Inventor/fields/GNUmakefile
--- /tmp/inventor/lib/mevis/include/Inventor/fields/GNUmakefile	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/fields/GNUmakefile	2005-09-27 11:11:42.000000000 +0200
@@ -0,0 +1,14 @@
+IVDEPTH = ../../../../..
+include $(IVDEPTH)/make/ivcommondefs
+
+HDRSUBDIR = fields
+
+HEADERS = \
+	SoSFVec2s.h \
+	SoSFVec3s.h
+
+all:
+
+install: install_ivheaders
+
+include $(IVCOMMONRULES)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/fields/SoSFVec2s.h inventor/lib/mevis/include/Inventor/fields/SoSFVec2s.h
--- /tmp/inventor/lib/mevis/include/Inventor/fields/SoSFVec2s.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/fields/SoSFVec2s.h	2007-04-10 16:40:15.000000000 +0200
@@ -0,0 +1,78 @@
+/*
+ *
+ *  Copyright (C) 2005 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2005   MeVis Research GmbH
+ *
+ _______________________________________________________________________
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ |
+ |   $Revision$
+ |
+ |   Classes:
+ |	SoSFVec2s
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ _______________________________________________________________________
+ */
+
+#ifndef  _SO_SF_VEC2S_
+#define  _SO_SF_VEC2S_
+
+#include <Inventor/system/SbSystem.h>
+#include <Inventor/fields/SoSubField.h>
+#include <Inventor/SbLinear.h>
+
+class INVENTOR_API SoSFVec2s : public SoSField
+{
+   typedef SoSField inherited;
+   
+   SO_SFIELD_HEADER(SoSFVec2s, SbVec2s, const SbVec2s &);
+
+   public:
+
+      //! Set value from 2 shorts
+      void         setValue(short x, short y);
+
+      //! Set value from array of 2 shorts
+      void         setValue(const short xy[2]);
+
+
+   SoINTERNAL public:
+
+      //! Initialize class with runtime type system.
+      static void  initClass();
+};
+
+#endif  // _SO_SF_VEC2S_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/fields/SoSFVec3s.h inventor/lib/mevis/include/Inventor/fields/SoSFVec3s.h
--- /tmp/inventor/lib/mevis/include/Inventor/fields/SoSFVec3s.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/fields/SoSFVec3s.h	2007-04-10 16:40:15.000000000 +0200
@@ -0,0 +1,78 @@
+/*
+ *
+ *  Copyright (C) 2005 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2005   MeVis Research GmbH
+ *
+ _______________________________________________________________________
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ |
+ |   $Revision$
+ |
+ |   Classes:
+ |	SoSFVec3s
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ _______________________________________________________________________
+ */
+
+#ifndef  _SO_SF_VEC3S_
+#define  _SO_SF_VEC3S_
+
+#include <Inventor/system/SbSystem.h>
+#include <Inventor/fields/SoSubField.h>
+#include <Inventor/SbLinear.h>
+
+class INVENTOR_API SoSFVec3s : public SoSField
+{
+   typedef SoSField inherited;
+   
+   SO_SFIELD_HEADER(SoSFVec3s, SbVec3s, const SbVec3s &);
+
+   public:
+
+      //! Set value from 3 shorts
+      void         setValue(short x, short y, short z);
+
+      //! Set value from array of 3 shorts
+      void         setValue(const short xyz[3]);
+
+
+   SoINTERNAL public:
+
+      //! Initialize class with runtime type system.
+      static void  initClass();
+};
+
+#endif  // _SO_SF_VEC3S_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/GNUmakefile inventor/lib/mevis/include/Inventor/GNUmakefile
--- /tmp/inventor/lib/mevis/include/Inventor/GNUmakefile	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/GNUmakefile	2006-07-17 11:15:24.000000000 +0200
@@ -0,0 +1,27 @@
+IVDEPTH = ../../../..
+include $(IVDEPTH)/make/ivcommondefs
+
+HDRSUBDIR =
+
+HEADERS = \
+	SoCatch.h \
+	SoInventor.h \
+	SoMeVis.h \
+	SoTrace.h
+
+HEADERS_SUBDIRS = \
+	elements \
+	fields \
+	nodes \
+	system
+
+all:
+
+install: install_ivheaders
+	$(HEADERS_SUBDIRS_MAKERULE)
+
+COMMONPREF = xxx
+$(COMMONTARGS): %: $(COMMONPREF)%
+	$(HEADERS_SUBDIRS_MAKERULE)
+
+include $(IVCOMMONRULES)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/nodes/GNUmakefile inventor/lib/mevis/include/Inventor/nodes/GNUmakefile
--- /tmp/inventor/lib/mevis/include/Inventor/nodes/GNUmakefile	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/nodes/GNUmakefile	2005-08-01 19:25:42.000000000 +0200
@@ -0,0 +1,13 @@
+IVDEPTH = ../../../../..
+include $(IVDEPTH)/make/ivcommondefs
+
+HDRSUBDIR = nodes
+
+HEADERS = \
+	SoPolygonOffset.h
+
+all:
+
+install: install_ivheaders
+
+include $(IVCOMMONRULES)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/nodes/SoPolygonOffset.h inventor/lib/mevis/include/Inventor/nodes/SoPolygonOffset.h
--- /tmp/inventor/lib/mevis/include/Inventor/nodes/SoPolygonOffset.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/nodes/SoPolygonOffset.h	2007-04-10 16:40:15.000000000 +0200
@@ -0,0 +1,101 @@
+/*
+ *
+ *  Copyright (C) 2004 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2004   MeVis Research GmbH
+ *
+ _______________________________________________________________________
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   ...
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ _______________________________________________________________________
+ */
+
+#ifndef  _SO_POLYGON_OFFSET_
+#define  _SO_POLYGON_OFFSET_
+
+#include <Inventor/system/SbSystem.h>
+#include <Inventor/elements/SoPolygonOffsetElement.h>
+#include <Inventor/nodes/SoSubNode.h>
+#include <Inventor/fields/SoSFBitMask.h>
+#include <Inventor/fields/SoSFBool.h>
+#include <Inventor/fields/SoSFFloat.h>
+
+class SoAction;
+class SoCallbackAction;
+class SoGLRenderAction;
+
+class INVENTOR_API SoPolygonOffset : public SoNode
+{
+   SO_NODE_HEADER(SoPolygonOffset);
+   
+   typedef SoNode inherited;
+
+   protected:
+
+      virtual ~SoPolygonOffset();
+
+   public:
+
+      enum Style {
+         FILLED = SoPolygonOffsetElement::FILLED,
+         LINES  = SoPolygonOffsetElement::LINES, 
+         POINTS = SoPolygonOffsetElement::POINTS,
+         ALL    = SoPolygonOffsetElement::ALL
+      };
+      
+      SoSFFloat    factor;
+      SoSFFloat    units;
+      SoSFBitMask  styles;
+      SoSFBool     on;
+      
+      SoPolygonOffset();
+
+   SoEXTENDER public:
+
+      virtual void doAction(SoAction *action);
+      virtual void callback(SoCallbackAction *action);
+      virtual void GLRender(SoGLRenderAction *action);
+
+   SoINTERNAL public:
+
+      static void initClass() ;
+};
+
+#endif  // _SO_POLYGON_OFFSET_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/SoCatch.h inventor/lib/mevis/include/Inventor/SoCatch.h
--- /tmp/inventor/lib/mevis/include/Inventor/SoCatch.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/SoCatch.h	2007-04-10 16:40:15.000000000 +0200
@@ -0,0 +1,245 @@
+/*
+ *
+ *  Copyright (C) 2004 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2004   MeVis Research GmbH
+ *
+ _______________________________________________________________________
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   Macro file to implement exception handlers around some code to make
+ |   code safe. In the case of caught exception an error message is composed
+ |   and send to SoError.
+ |   The usage of the exception handler is optional and can be enabled/disabled
+ |   by the static class function SoCatch::enableExceptionHandling().
+ |
+ |   Author(s)      : Wolf Spindler, Felix Ritter
+ |
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ _______________________________________________________________________
+ */
+
+#ifndef  _SO_CATCH_
+#define  _SO_CATCH_
+
+#include <Inventor/system/SbSystem.h>
+#include <Inventor/misc/SoBasic.h>
+#include <Inventor/SbString.h>
+#include <Inventor/errors/SoError.h>
+
+//////////////////////////////////////////////////////////////////////////////
+//
+//  Class containing static functions to control global
+//  exception handling for OpenInventor.
+//
+//////////////////////////////////////////////////////////////////////////////
+
+class INVENTOR_API SoCatch
+{
+   public:
+
+      // Function to query exception handling for all
+      // SO_CATCH* macros.
+      static SbBool isExceptionHandlingEnabled();
+
+      // Function to enabled/disable exception handling for all
+      // SO_CATCH* macros when passing TRUE/FALSE.
+      static void enableExceptionHandling(SbBool on);
+
+      // Initializes the SoCatch class.
+      static void initClass();
+
+      // Posts composed error message. Used in catch branches on
+      // caught exceptions. All accesses on construction parts of
+      // message fragments are done as save as possible so that
+      // even crashes in type name accesses hopefully do not lead
+      // to further crashes but in a controlled error message.
+      //
+      // ERR_OBJ_TYPE_ID may be SoType::badType() which will be handled as
+      // no type (ignored). On all other type ids the id name will be used
+      // as string parameter for the error report. It typically should
+      // be the type id of the object which probably caused the crash.
+      //
+      // OP_DESCR_STR may be "" or another string describing
+      // the operation which were applied while the error occured, for
+      // example "delete" when the code between try / catch is for example
+      // "delete ERR_OBJ_PTR;".
+      //
+      // ACTION_TYPE_ID may be SoType::badType() which will be handled as
+      // no type (ignored). On all other type ids the name will be used
+      // as string parameter for error report. It should typically be
+      // the class type id of the class which was using the error
+      // causing object (for example an action traversing using a node).
+      //
+      // END_STR may be "" or any other terminating string to finish
+      // the error message.
+      //   "Crash in
+      //    <ERR_OBJ_TYPE_ID.getName()>
+      //    while
+      //    <OP_DESCR_STR>
+      //    <ACTION_TYPE_ID.getName()>
+      //    <END_STR>"
+      static void postExceptionMessage(SoType      ERR_OBJ_TYPE_ID,
+                                       const char *OP_DESCR_STR,
+                                       SoType      ACTION_TYPE_ID,
+                                       const char *END_STR);
+
+   private:
+
+      // State member variable describing whether exceptions shall be catched
+      // or not.
+      static SbBool _isExceptionHandlingEnabled;
+
+};
+
+#if !defined(DISABLE_ERRORTRACING)
+
+// See documentation of SO_CATCH_END.
+#define SO_CATCH_START \
+    if (!SoCatch::isExceptionHandlingEnabled()) {
+
+
+// See documentation of SO_CATCH_END.
+// CODE_BEFORE_TRY can be some initialization code or ";" done only in
+// case of enabled exception handling directly before calling
+// try; so some variables can be initialized from objects before
+// these object are changed due to the execution which could cause
+// the exception. For example a type could be read from an object
+// before it's deleted. The type then can be used in SO_CATCH_END.
+// See also SO_CATCH_END examples.
+#define SO_CATCH_ELSE(CODE_BEFORE_TRY) \
+    }                                  \
+    else {                             \
+      CODE_BEFORE_TRY                  \
+      try {
+
+
+// Third macro used after SO_CATCH_START, SO_CATCH_ELSE and SO_CATCH_END.
+// Usage:
+// 1   SO_CATCH_START
+// 2     <user_code>
+// 3   SO_CATCH_ELSE(;)
+// 4     <user_code>
+// 5   SO_CATCH_END(ERR_OBJ_PTR, OP_DESCR_STR, ACTION_PTR, END_STR).
+//
+// It is strongly recommended that <user code> in line 2 and 4
+// is identical since only one of both will be executed dependent
+// on whether exception handling is enabled or not.
+//
+// Some code can be passed to SO_CATCH_ELSE in the case that
+// the stuff passed to SO_CATCH_ELSE requires some parameters
+// which need to be initialized outside the try body. If no code
+// needs to be passed a ; can be used instead.
+//
+// For a parameter description of this macro see
+// SoCatch::postExceptionMessage();
+//
+// Examples:
+// myNodePtr is a pointer to a node of class SoMyNode.
+// rednerActionPtr is a pointer to a SoGLRenderAction.
+//
+//  SO_CATCH_START
+//
+//    userCode
+//
+//  SO_CATCH_ELSE(;)
+//
+//    userCode
+//
+//  SO_CATCH_END(myNodePtr->getTypeId(), "applying",
+//               renderActionPtr->getTypeId(), "to it.")
+//
+// would result in
+//
+// "Crash in SoMyNode while applying SoGLRenderAction to it."
+//
+//
+// or
+//
+//
+// this is deleted and could cause an exception.
+//
+//  SO_CATCH_START
+//
+//    delete this;
+//
+//  SO_CATCH_ELSE(SoType myType=getTypeId();)
+//
+//    delete this;
+//
+//  SO_CATCH_END(myType, "deleting", SoType::badType(), "it.")
+//
+// would result in
+//
+// "Crash in SoMyType while deleting it."
+//
+// In both cases eventually a list of most recently called and
+// traced functions and/or the call stack of traced functions is
+// printed as specified in the settings of the SoGlobalTraceBuffer
+// instance.
+#define SO_CATCH_END(ERR_OBJ_TYPE_ID, OP_DESCR_STR, ACTION_TYPE_ID, END_STR)    \
+      }                                                       \
+      catch(...) {                                            \
+        /* Bad case, we caught a crash. Compose            */ \
+        /* the error string and post it to SoError.        */ \
+        try {                                                 \
+          /* Do extra save message posting since we must   */ \
+          /* assume that passed parameters (which could    */ \
+          /* be expressions) also could be corrupt.        */ \
+          SoCatch::postExceptionMessage(ERR_OBJ_TYPE_ID,      \
+                                        OP_DESCR_STR,         \
+                                        ACTION_TYPE_ID,       \
+                                        END_STR);             \
+        }                                                     \
+        catch(...) {                                          \
+          SoError::post("<Could not create error message "    \
+                        "after catching fatal error>");       \
+        }                                                     \
+      } /* catch(...) */                                      \
+    } /* else of SO_CATCH_ELSE */
+
+#else  // DISABLE_ERRORTRACING
+
+#define SO_CATCH_START \
+    if(1) {
+#define SO_CATCH_ELSE(CODE_BEFORE_TRY) \
+    }                                  \
+    else {
+#define SO_CATCH_END(ERR_OBJ_TYPE_ID, OP_DESCR_STR, ACTION_TYPE_ID, END_STR) \
+    }
+
+#endif  // DISABLE_ERRORTRACING
+
+#endif  // _SO_CATCH_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/SoInventor.h inventor/lib/mevis/include/Inventor/SoInventor.h
--- /tmp/inventor/lib/mevis/include/Inventor/SoInventor.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/SoInventor.h	2007-04-10 16:40:15.000000000 +0200
@@ -0,0 +1,176 @@
+/*
+ *
+ *  Copyright (C) 2006 MeVis Research GmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2006   MeVis Research GmbH
+ *
+ _______________________________________________________________________
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |      This header file includes all Open Inventor headers.
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ _______________________________________________________________________
+ */
+
+#ifndef  _SO_INVENTOR_
+#define  _SO_INVENTOR_
+
+// SGI Open Inventor (2.1.x)
+
+#include <Inventor/Sb.h>
+#include <Inventor/So.h>
+
+#include <Inventor/SoSceneManager.h>
+
+#include <Inventor/SoInteraction.h>
+
+#include <Inventor/elements/SoAccumulatedElement.h>
+#include <Inventor/elements/SoBBoxModelMatrixElement.h>
+#include <Inventor/elements/SoCacheElement.h>
+#include <Inventor/elements/SoClipPlaneElement.h>
+#include <Inventor/elements/SoComplexityElement.h>
+#include <Inventor/elements/SoComplexityTypeElement.h>
+#include <Inventor/elements/SoCoordinateElement.h>
+#include <Inventor/elements/SoCreaseAngleElement.h>
+#include <Inventor/elements/SoDrawStyleElement.h>
+#include <Inventor/elements/SoElement.h>
+#include <Inventor/elements/SoElements.h>
+#include <Inventor/elements/SoFloatElement.h>
+#include <Inventor/elements/SoFocalDistanceElement.h>
+#include <Inventor/elements/SoFontNameElement.h>
+#include <Inventor/elements/SoFontSizeElement.h>
+#include <Inventor/elements/SoGLCacheContextElement.h>
+#include <Inventor/elements/SoGLClipPlaneElement.h>
+#include <Inventor/elements/SoGLCoordinateElement.h>
+#include <Inventor/elements/SoGLDrawStyleElement.h>
+#include <Inventor/elements/SoGLLazyElement.h>
+#include <Inventor/elements/SoGLLightIdElement.h>
+#include <Inventor/elements/SoGLLinePatternElement.h>
+#include <Inventor/elements/SoGLLineWidthElement.h>
+#include <Inventor/elements/SoGLModelMatrixElement.h>
+#include <Inventor/elements/SoGLNormalElement.h>
+#include <Inventor/elements/SoGLPointSizeElement.h>
+#include <Inventor/elements/SoGLProjectionMatrixElement.h>
+#include <Inventor/elements/SoGLRenderPassElement.h>
+#include <Inventor/elements/SoGLShapeHintsElement.h>
+#include <Inventor/elements/SoGLStencilBitsElement.h>
+#include <Inventor/elements/SoGLTextureCoordinateElement.h>
+#include <Inventor/elements/SoGLTextureEnabledElement.h>
+#include <Inventor/elements/SoGLTextureImageElement.h>
+#include <Inventor/elements/SoGLTextureMatrixElement.h>
+#include <Inventor/elements/SoGLUpdateAreaElement.h>
+#include <Inventor/elements/SoGLViewingMatrixElement.h>
+#include <Inventor/elements/SoGLPolygonOffsetElement.h>
+#include <Inventor/elements/SoGLViewportRegionElement.h>
+#include <Inventor/elements/SoStencilBitsElement.h>
+#include <Inventor/elements/SoInt32Element.h>
+#include <Inventor/elements/SoLazyElement.h>
+#include <Inventor/elements/SoLightAttenuationElement.h>
+#include <Inventor/elements/SoLightModelElement.h>
+#include <Inventor/elements/SoLinePatternElement.h>
+#include <Inventor/elements/SoLineWidthElement.h>
+#include <Inventor/elements/SoLocalBBoxMatrixElement.h>
+#include <Inventor/elements/SoMaterialBindingElement.h>
+#include <Inventor/elements/SoModelMatrixElement.h>
+#include <Inventor/elements/SoNormalBindingElement.h>
+#include <Inventor/elements/SoNormalElement.h>
+#include <Inventor/elements/SoOverrideElement.h>
+#include <Inventor/elements/SoPickRayElement.h>
+#include <Inventor/elements/SoPickStyleElement.h>
+#include <Inventor/elements/SoPointSizeElement.h>
+#include <Inventor/elements/SoPolygonOffsetElement.h>
+#include <Inventor/elements/SoProfileCoordinateElement.h>
+#include <Inventor/elements/SoProfileElement.h>
+#include <Inventor/elements/SoProjectionMatrixElement.h>
+#include <Inventor/elements/SoReplacedElement.h>
+#include <Inventor/elements/SoShapeHintsElement.h>
+#include <Inventor/elements/SoShapeStyleElement.h>
+#include <Inventor/elements/SoSubElement.h>
+#include <Inventor/elements/SoSwitchElement.h>
+#include <Inventor/elements/SoTextureCoordinateBindingElement.h>
+#include <Inventor/elements/SoTextureCoordinateElement.h>
+#include <Inventor/elements/SoTextureImageElement.h>
+#include <Inventor/elements/SoTextureMatrixElement.h>
+#include <Inventor/elements/SoTextureQualityElement.h>
+#include <Inventor/elements/SoUnitsElement.h>
+#include <Inventor/elements/SoViewingMatrixElement.h>
+#include <Inventor/elements/SoViewportRegionElement.h>
+#include <Inventor/elements/SoViewVolumeElement.h>
+#include <Inventor/elements/SoWindowElement.h>
+
+#include <Inventor/manips/SoCenterballManip.h>
+#include <Inventor/manips/SoDirectionalLightManip.h>
+#include <Inventor/manips/SoHandleBoxManip.h>
+#include <Inventor/manips/SoJackManip.h>
+#include <Inventor/manips/SoPointLightManip.h>
+#include <Inventor/manips/SoSpotLightManip.h>
+#include <Inventor/manips/SoTabBoxManip.h>
+#include <Inventor/manips/SoTrackballManip.h>
+#include <Inventor/manips/SoTransformBoxManip.h>
+#include <Inventor/manips/SoTransformerManip.h>
+#include <Inventor/manips/SoTransformManip.h>
+
+#include <Inventor/nodekits/SoAppearanceKit.h>
+#include <Inventor/nodekits/SoBaseKit.h>
+#include <Inventor/nodekits/SoCameraKit.h>
+#include <Inventor/nodekits/SoInteractionKit.h>
+#include <Inventor/nodekits/SoLightKit.h>
+#include <Inventor/nodekits/SoNodeKit.h>
+#include <Inventor/nodekits/SoNodekitCatalog.h>
+#include <Inventor/nodekits/SoNodeKitListPart.h>
+#include <Inventor/nodekits/SoNodekitParts.h>
+#include <Inventor/nodekits/SoSceneKit.h>
+#include <Inventor/nodekits/SoSeparatorKit.h>
+#include <Inventor/nodekits/SoShapeKit.h>
+#include <Inventor/nodekits/SoSubKit.h>
+#include <Inventor/nodekits/SoWrapperKit.h>
+
+// MeVis Research extensions
+
+#include <Inventor/SoCatch.h>
+#include <Inventor/SoMeVis.h>
+#include <Inventor/SoTrace.h>
+#include <Inventor/elements/SoGLPolygonOffsetElement.h>
+#include <Inventor/elements/SoGLStencilBitsElement.h>
+#include <Inventor/elements/SoPolygonOffsetElement.h>
+#include <Inventor/elements/SoStencilBitsElement.h>
+#include <Inventor/fields/SoSFVec2s.h>
+#include <Inventor/fields/SoSFVec3s.h>
+#include <Inventor/nodes/SoPolygonOffset.h>
+
+#endif  // _SO_INVENTOR_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/SoMeVis.h inventor/lib/mevis/include/Inventor/SoMeVis.h
--- /tmp/inventor/lib/mevis/include/Inventor/SoMeVis.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/SoMeVis.h	2007-04-10 16:40:15.000000000 +0200
@@ -0,0 +1,71 @@
+/*
+ *
+ *  Copyright (C) 2005 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2005   MeVis Research GmbH
+ *
+ _______________________________________________________________________
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |      This class is used in conjunction with OI MeVis extensions.
+ |   The init() method must be called in order for classes to work
+ |   properly.
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ _______________________________________________________________________
+ */
+
+#ifndef  _SO_MEVIS_
+#define  _SO_MEVIS_
+
+#include <Inventor/system/SbSystem.h>
+#include <Inventor/SbBasic.h>
+
+class INVENTOR_API SoMeVis
+{
+   public:
+
+      // Init all MeVis classes
+      static void     init();
+
+   private:
+    
+      // Have MeVis classes been initialized?
+      static SbBool   initialized;
+};
+
+#endif  // _SO_MEVIS_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/SoTrace.h inventor/lib/mevis/include/Inventor/SoTrace.h
--- /tmp/inventor/lib/mevis/include/Inventor/SoTrace.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/SoTrace.h	2007-04-10 16:40:15.000000000 +0200
@@ -0,0 +1,325 @@
+/*
+ *
+ *  Copyright (C) 2004 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2004   MeVis Research GmbH
+ *
+ _______________________________________________________________________
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   This include file contains a class to manage a buffer for a stack
+ |   and a list of string pointers for tracing debug and release code.
+ |
+ |   Author(s)      : Wolf Spindler, Felix Ritter
+ |
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ _______________________________________________________________________
+ */
+
+#ifndef  _SO_TRACE_
+#define  _SO_TRACE_
+
+#include <Inventor/system/SbSystem.h>
+#include <Inventor/SbString.h>
+#include <inttypes.h>
+
+
+//////////////////////////////////////////////////////////////////////////////
+//
+//  This macro can/should be inserted at first position in user
+//  implemented class methods and functions. It stores pointers
+//  to a string in buffers for the most recently called function
+//  and on a call stack. In error cases these buffers can be read
+//  to analyse the crash/error position.
+//
+//////////////////////////////////////////////////////////////////////////////
+
+#if !defined(DISABLE_ERRORTRACING)
+
+# define SO_TRACE_IN(__classAndMethod___)  \
+   static const char *const __SO_TRACE_IN_STRING_BUF = __FILE__ ":" __classAndMethod___; \
+   SoTrace<uint16_t> __SoTraceObject(__SO_TRACE_IN_STRING_BUF, SoGlobalTraceBuffer);
+
+#else
+
+# define SO_TRACE_IN(__classAndMethod___)
+
+#endif  // DISABLE_ERRORTRACING
+
+// The type used in the SoGlobalTraceBuffer.
+typedef uint16_t SoGlobalTraceBufferType;
+
+
+
+//////////////////////////////////////////////////////////////////////////////
+//
+//  This class manages a list and a stack of pointers to permanent strings.
+//  The constructor initializes the buffers to empty pointers.
+//  It will be used by the Trace class called by SO_TRACE_IN macros on
+//  function entries to track the call stack and call list.
+//  Overflows especially of the list will occur and are included in class
+//  design; so the buffers have exactly of a size identical with index
+//  range of the stack pointer and the list pointer. Accepting overflows
+//  limits the stack size and the number of list entries; however, so no
+//  checks for overflow etc. are necessary which permits maximum tracing
+//  performance.
+//  INDEXTYPE specifies the data type and indirectly the size of the
+//  stack and the list. Normally it should be uint16_t which then
+//  will result in 65536 stack and list entries. Other types are
+//  not supported.
+//
+//////////////////////////////////////////////////////////////////////////////
+
+template <typename INDEXTYPE> class SoTraceBuffer
+{
+   public:
+
+      // Initializing constructor. It resets the stack and
+      // list buffer and also listEnd and stackTop indices.
+      inline SoTraceBuffer() {
+      	 _initClass();
+      }
+
+      // Add trace description. It appends the passed string reference
+      // to the trace buffer and to the top of the trace stack. Then it
+      // increases trace index and stack pointer.
+      // traceInString may be NULL. If not NULL it must point to
+      // any null-terminated permanent string.
+      // VERY TIME CRITICAL!
+      inline void    	add(const char *const traceInString) {
+      	 // Push string address onto the stack. Be sure that
+      	 // _stackTop is incremented after storing pointer to
+      	 // make memory access and incrementation of index independent.
+      	 // So the CPU can execute both statements parallel.
+      	 // Also be sure to increment index NOT within "[" and "]"
+      	 // to avoid that indexing works on 32bit integers which would
+         // access areas outside buffers.
+      	 _traceStack[_traceStackTop] = traceInString;
+      	 ++_traceStackTop;
+
+      	 // Append string address to end of trace list. For optimizing
+      	 // performance also see _traceStack push above.
+      	 _traceList[_traceListEnd] = traceInString;
+      	 ++_traceListEnd;
+      }
+
+      // Destructor. It decreases stack pointer and resets last
+      // stored string pointer to
+      // VERY TIME CRITICAL!
+      inline void    	remove() {
+      	 // Decrement trace stack top. Be sure that integer index
+      	 // is really limited to size of INDEXTYPE since passing
+      	 // decremented _traceStackTop without masking it could
+      	 // lead to usage of 32 bit index in index "[" "]" and
+      	 // accesses outside buffers. Note that mask calculation
+      	 // is constant and probably will be evaluated on compile
+      	 // time.
+      	 _traceStackTop = (INDEXTYPE)((_traceStackTop - 1) & _bufferIndexMask);
+
+      	 // Reset stack entry. So unused entries do not use
+      	 // invalid information.
+      	 _traceStack[_traceStackTop] = NULL;
+      }
+
+      // Returns index into trace stack buffer. It addresses the entry to
+      // be written on next push.
+      inline INDEXTYPE	getTraceStackTop() const {
+      	 return _traceStackTop;
+      }
+
+      // Returns index into trace list buffer. It addresses the entry to
+      // be written on next append.
+      inline INDEXTYPE	getTraceListEnd() const {
+      	 return _traceListEnd;
+      }
+
+      // Returns the pointer to the first element of the trace stack.
+      inline const char *const *getTraceStack() const {
+      	 return _traceStack;
+      }
+
+      // Returns the pointer to the first element of the trace list.
+      inline const char *const *getTraceList() const {
+      	 return _traceList;
+      }
+
+      // Maximum number of trace list entries to be shown on fatal error outputs.
+      inline SoGlobalTraceBufferType getMaxNumTraceListDumps() const {
+      	 return _maxNumTraceListDumps;
+      }
+
+      // Sets the maximum number of trace list entries to be shown on fatal error outputs.
+      inline void    	setMaxNumTraceListDumps(SoGlobalTraceBufferType num) {
+      	 _maxNumTraceListDumps = num;
+      }
+
+      // Maximum number of trace stack entries to be shown on fatal error outputs.
+      inline SoGlobalTraceBufferType getMaxNumTraceStackDumps() const {
+      	 return _maxNumTraceStackDumps;
+      }
+
+      // Sets the maximum number of trace stack entries to be shown on fatal error outputs.
+      inline void    	setMaxNumTraceStackDumps(SoGlobalTraceBufferType num) {
+      	 _maxNumTraceStackDumps = num;
+      }
+
+      // Returns an SbString which returns a dump of trace list and trace dump
+      // entries for debugging purposes.
+      SbString       	getTraceDumpString() const;
+
+   private:
+
+      // Initializing constructor. It resets the stack and
+      // list buffer and also listEnd and stackTop indices.
+      inline void    	_initClass() {
+      	 // Initialize both buffers with NULL pointers.
+      	 memset(_traceStack, 0, _numBufBytes);
+      	 memset(_traceList,  0, _numBufBytes);
+
+      	 // Reset indices into stack and list.
+      	 _traceStackTop = 0;
+      	 _traceListEnd  = 0;
+      }
+
+      // Calculate the number of buffer entries, the byte size of the buffer
+      // and a bit mask to limit an index to index only buffer elements.
+      // We put it into an enum to define constants in the header usable
+      // as array sizes without having the need to spend constant members for it.
+      enum {
+      	 _numBufEntries   = (1L << (sizeof(INDEXTYPE) << 3)) ,
+         _numBufBytes     = _numBufEntries * sizeof(const char *),
+         _bufferIndexMask = _numBufEntries - 1
+      };
+
+      // Index to the entry to be written on next push.
+      INDEXTYPE         _traceStackTop;
+
+      // Index to the entry to be written on next append.
+      INDEXTYPE         _traceListEnd;
+
+      // Buffer for the trace stack.
+      const char       *_traceStack[_numBufEntries];
+
+      // Buffer for the trace list.
+      const char       *_traceList[_numBufEntries];
+
+      // The number of trace list outputs dumped into an error message
+      // in the case of a fatal error. Default is 16.
+      SoGlobalTraceBufferType _maxNumTraceListDumps;
+
+      // The number of trace stack outputs dumped into an error message
+      // in the case of a fatal error. Default is 32.
+      SoGlobalTraceBufferType _maxNumTraceStackDumps;
+};
+
+
+
+//////////////////////////////////////////////////////////////////////////////
+//
+//  This class simply implements a constructor and a destructor.
+//  The constructor calls the add method of a SoTraceBuffer and the destructor
+//  calls the remove method of a SoTraceBuffer.
+//  It will typically be called of SO_TRACE_IN macros on function entries
+//  to track the string description of the function name in a call stack
+//  and a call list in a SoTraceBuffer object.
+//  INDEXTYPE specifies the data type and indirectly the size of the
+//  stack and the list. Normally it should be uint8_t or uint16_t which then
+//  will result in 256 or 65536 stack and list entries. Other types are
+//  not supported.
+//
+//////////////////////////////////////////////////////////////////////////////
+
+template <typename INDEXTYPE> class SoTrace
+{
+   public:
+
+      // Constructor. It adds the passed string reference to the
+      // trace buffer and to the top of the trace stack. Passed
+      // string pointer also may be NULL. If not NULL it must
+      // point to any null-terminated non changing permanent string.
+      // To be used by SO_TRACE_IN macros.
+      // traceInString is the string pointer to the permanent
+      //        static string to be added to list and pushed to stack.
+      // traceBuf is the TraceBuffer in which the string
+      //        shall be appended and pushed.
+      // VERY TIME CRITICAL!
+      inline SoTrace(const char *const traceInString, SoTraceBuffer<INDEXTYPE> &traceBuf) : _traceBuf(traceBuf) {
+      	 // Push string addres on stack and at end of trace list.
+      	 traceBuf.add(traceInString);
+      }
+
+      // Destructor. It removes the last entry from the SoTraceBuffer.
+      // That pops the last pushed string reference from the stack
+      // and resets its entry to NULL.
+      // Normally automatically called when leaving the scope where
+      // the constructor is called.
+      // VERY TIME CRITICAL!
+      inline ~SoTrace() {
+      	 _traceBuf.remove();
+      }
+
+   private:
+
+      // Stores the reference to the TraceBuffer object during lifetime
+      // of this TraceObject. The TraceBuffer is used for managing the
+      // trace stack and the trace list.
+      SoTraceBuffer<INDEXTYPE> &_traceBuf;
+
+      // Implement copy constructor to avoid compiler warnings.
+      // It is not intented to be used and so it is private.
+      inline SoTrace(const SoTrace &trace) : _traceBuf(trace._traceBuf) {
+      }
+
+      // Implement assignment operator to avoid compiler warnings.
+      // It is not intented to be used directly and so it is private.
+      // References cannot be assigned/changed, so _traceBuf cannot be assigned.
+      inline SoTrace<INDEXTYPE> &operator=(const SoTrace &trace) {
+      	 return *this;
+      }
+};
+
+
+//////////////////////////////////////////////////////////////////////////////
+//
+//  This is a global singleton of the SoTraceBuffer class. It is used
+//  by all SO_TRACE_IN macros to trace function calls in inventor code.
+//  In the case of catched error exceptions the most recently called
+//  functions and function stack can be dumped.
+//
+//////////////////////////////////////////////////////////////////////////////
+
+extern INVENTOR_API SoTraceBuffer<SoGlobalTraceBufferType> SoGlobalTraceBuffer;
+
+#endif  // _SO_TYPE_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/system/GNUmakefile inventor/lib/mevis/include/Inventor/system/GNUmakefile
--- /tmp/inventor/lib/mevis/include/Inventor/system/GNUmakefile	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/system/GNUmakefile	2006-07-17 11:15:24.000000000 +0200
@@ -0,0 +1,14 @@
+IVDEPTH = ../../../../..
+include $(IVDEPTH)/make/ivcommondefs
+
+HDRSUBDIR = system
+
+HEADERS = \
+	SbConfig.h \
+	SbSystem.h
+
+all:
+
+install: install_ivheaders
+
+include $(IVCOMMONRULES)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/system/SbConfig.h inventor/lib/mevis/include/Inventor/system/SbConfig.h
--- /tmp/inventor/lib/mevis/include/Inventor/system/SbConfig.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/system/SbConfig.h	2007-01-30 10:37:13.000000000 +0100
@@ -0,0 +1,59 @@
+/*
+ *
+ *  Copyright (C) 2006 MeVis Research GmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2006   MeVis Research GmbH
+ *
+ _______________________________________________________________________
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   The file configures some of the Open Inventor features
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ _______________________________________________________________________
+ */
+
+#ifndef _SB_CONFIG_
+#define _SB_CONFIG_
+
+// Disable/enable error tracing
+// #define DISABLE_ERRORTRACING 1
+
+// Use GLX on Mac OS X and not Apple GL (not recommended)
+// #define APPLE_GLX 1
+
+#endif  // _SB_CONFIG_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/Inventor/system/SbSystem.h inventor/lib/mevis/include/Inventor/system/SbSystem.h
--- /tmp/inventor/lib/mevis/include/Inventor/system/SbSystem.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/Inventor/system/SbSystem.h	2007-04-05 10:23:49.000000000 +0200
@@ -0,0 +1,151 @@
+/*
+ *
+ *  Copyright (C) 2006 MeVis Research GmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2006   MeVis Research GmbH
+ *
+ _______________________________________________________________________
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   The file defines some platform specific macros
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ _______________  M E V I S   R E S E A R C H   G M B H  _______________
+ _______________________________________________________________________
+ */
+
+#ifndef _SB_SYSTEM_
+#define _SB_SYSTEM_
+
+#include <Inventor/system/SbConfig.h>
+
+#ifdef WIN32
+
+#ifndef  __i386__
+# define __i386__  1
+#endif
+
+// Disable some annoying warnings on MSVC 6
+#ifdef _MSC_VER
+# pragma warning(disable:4244) // float, double
+# pragma warning(disable:4305) // float, double
+# pragma warning(disable:4309) // float, double
+# pragma warning(disable:4251) // export
+# pragma warning(disable:4291) // no delete destructor
+#endif
+
+#include <windows.h>
+#include <winsock.h>    // declares many unix types
+#include <math.h>
+
+// The following ifdef block is the standard way of creating macros which make exporting
+// from a DLL simpler. All files within this DLL are compiled with the INVENTOR_EXPORTS
+// symbol defined on the command line. this symbol should not be defined on any project
+// that uses this DLL. This way any other project whose source files include this file see
+// INVENTOR_API functions as being imported from a DLL, wheras this DLL sees symbols
+// defined with this macro as being exported.
+#if defined(INVENTOR_EXPORTS) && !defined(INVENTOR_IMPORTS)
+# define INVENTOR_API __declspec(dllexport)
+#else
+# define INVENTOR_API __declspec(dllimport)
+#endif
+
+#ifdef _DEBUG
+# define SGIOIVDLL "Inventor_d.dll"
+# define SGIOIVLIB "Inventor_d.lib"
+#else
+# define SGIOIVDLL "Inventor.dll"
+# define SGIOIVLIB "Inventor.lib"
+#endif
+
+// Tell MSVC which Open Inventor DLL to link against
+#if defined(_MSC_VER) && !defined(__SGIOIV_BUILD_DLL)
+# pragma comment(lib,SGIOIVLIB)
+#endif
+
+#else   // not WIN32
+
+#define INVENTOR_API
+
+#ifndef  CALLBACK
+# define CALLBACK
+#endif
+
+#ifndef  WINGDIAPI
+# define WINGDIAPI
+#endif
+
+#ifndef  APIENTRY
+# define APIENTRY
+#endif
+
+#endif  // WIN32
+
+// OpenGL system settings
+
+#ifdef __APPLE__
+
+#define OPENGL_GL_H  <OpenGL/gl.h>
+#define OPENGL_GLU_H <OpenGL/glu.h>
+
+#define OPENGL_CALLBACKFUNC GLvoid (CALLBACK *)(...)
+
+#else   // not __APPLE__
+
+#define OPENGL_GL_H  <GL/gl.h>
+#define OPENGL_GLU_H <GL/glu.h>
+
+#define OPENGL_CALLBACKFUNC GLvoid (CALLBACK *)()
+
+#endif	// __APPLE__
+
+// Font system settings
+
+#if defined(WIN32)
+
+#define IV_DEFAULT_FONTNAME "Times"
+
+#elif defined(__APPLE__)
+
+#define IV_DEFAULT_FONTNAME "Times-Roman"
+
+#else
+
+#define IV_DEFAULT_FONTNAME "Utopia-Regular"
+
+#endif
+
+#endif  // _SB_SYSTEM_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/SoWinEnterScope.h inventor/lib/mevis/include/SoWinEnterScope.h
--- /tmp/inventor/lib/mevis/include/SoWinEnterScope.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/SoWinEnterScope.h	2005-08-02 14:03:21.000000000 +0200
@@ -0,0 +1,55 @@
+/*
+ *
+ *  Copyright (C) 2004 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2004   MeVis gGmbH
+ *
+ _______________________________________________________________________
+ ______________________  M E V I S   G G M B H  ________________________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |  This file does only exist for TGS Open Inventor compatibility.
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ ______________________  M E V I S   G G M B H  ________________________
+ _______________________________________________________________________
+ */
+
+#ifndef _SO_WIN_ENTER_SCOPE_
+#define _SO_WIN_ENTER_SCOPE_
+
+// Do nothing
+
+#endif  // _SO_WIN_ENTER_SCOPE_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/include/SoWinLeaveScope.h inventor/lib/mevis/include/SoWinLeaveScope.h
--- /tmp/inventor/lib/mevis/include/SoWinLeaveScope.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/include/SoWinLeaveScope.h	2005-08-02 14:03:21.000000000 +0200
@@ -0,0 +1,55 @@
+/*
+ *
+ *  Copyright (C) 2004 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2004   MeVis gGmbH
+ *
+ _______________________________________________________________________
+ ______________________  M E V I S   G G M B H  ________________________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |  This file does only exist for TGS Open Inventor compatibility.
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ ______________________  M E V I S   G G M B H  ________________________
+ _______________________________________________________________________
+ */
+
+#ifndef _SO_WIN_LEAVE_SCOPE_
+#define _SO_WIN_LEAVE_SCOPE_
+
+// Do nothing
+
+#endif  // _SO_WIN_LEAVE_SCOPE_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/src/elements/GNUmakefile inventor/lib/mevis/src/elements/GNUmakefile
--- /tmp/inventor/lib/mevis/src/elements/GNUmakefile	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/src/elements/GNUmakefile	2005-08-03 12:46:28.000000000 +0200
@@ -0,0 +1,12 @@
+IVDEPTH = ../../../..
+include $(IVDEPTH)/make/ivcommondefs
+
+CXXFILES = \
+	SoGLPolygonOffsetElement.c++ \
+	SoGLStencilBitsElement.c++ \
+	SoPolygonOffsetElement.c++ \
+	SoStencilBitsElement.c++
+
+all install: $(OBJECTS)
+
+include $(IVCOMMONRULES)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/src/elements/SoGLPolygonOffsetElement.c++ inventor/lib/mevis/src/elements/SoGLPolygonOffsetElement.c++
--- /tmp/inventor/lib/mevis/src/elements/SoGLPolygonOffsetElement.c++	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/src/elements/SoGLPolygonOffsetElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -0,0 +1,204 @@
+/*
+ *
+ *  Copyright (C) 2004 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2004   MeVis gGmbH
+ *
+ _______________________________________________________________________
+ ______________________  M E V I S   G G M B H  ________________________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   ...
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ ______________________  M E V I S   G G M B H  ________________________
+ _______________________________________________________________________
+ */
+
+#include <Inventor/elements/SoGLPolygonOffsetElement.h>
+#include OPENGL_GL_H
+
+SO_ELEMENT_SOURCE(SoGLPolygonOffsetElement);
+
+SoGLPolygonOffsetElement::~SoGLPolygonOffsetElement()
+{
+}
+
+void
+SoGLPolygonOffsetElement::initClass()
+{
+   SO_ELEMENT_INIT_CLASS(SoGLPolygonOffsetElement, inherited);
+}
+
+void
+SoGLPolygonOffsetElement::init(SoState *state)
+{
+   inherited::init(state);
+   
+   _copiedFromParent= FALSE;
+   
+   // Save the state.
+   _state = state;
+
+   _currentstyles       = (Style)0;
+   _currentoffsetfactor = 1.0f;
+   _currentoffsetunits  = 1.0f;
+}
+
+void
+SoGLPolygonOffsetElement::push(SoState *state)
+{
+   const SoGLPolygonOffsetElement *prevElt = (const SoGLPolygonOffsetElement*)getNextInStack();
+
+   _offsetfactor = prevElt->_offsetfactor;
+   _offsetunits  = prevElt->_offsetunits;
+   _style        = prevElt->_style;
+   _active       = prevElt->_active;
+   
+   _currentstyles= prevElt->_currentstyles;
+   _currentoffsetfactor= prevElt->_currentoffsetfactor;
+   _currentoffsetunits= prevElt->_currentoffsetunits;
+   
+   _copiedFromParent= TRUE;
+   _state= state;
+}
+
+void
+SoGLPolygonOffsetElement::pop(SoState *state, const SoElement *childElt)
+{
+   // Since popping this element has GL side effects, make sure any
+   // open caches capture it.  We may not send any GL commands, but
+   // the cache dependency must exist even if we don't send any GL
+   // commands, because if the element changes, the _lack_ of GL
+   // commands here is a bug (remember, GL commands issued here are
+   // put inside the cache).
+   capture(state);
+   _copiedFromParent = FALSE;
+   
+   // If the previous element didn't have the same value...
+   const SoGLPolygonOffsetElement *child = (const SoGLPolygonOffsetElement*)childElt;
+
+   _currentstyles       = child->_currentstyles;
+   _currentoffsetfactor = child->_currentoffsetfactor;
+   _currentoffsetunits  = child->_currentoffsetunits;
+
+   if(*this != *child)
+      send();
+}
+
+void
+SoGLPolygonOffsetElement::setElt(float factor, float units, Style styles, SbBool on)
+{
+   // Optimization:  on push, we copy the value from the previous
+   // element.  If the element is set to the same value, we don't
+   // bother sending it, but do add a cache dependency on the
+   // previous element.
+
+   if(   _style        != styles
+      || _active       != on
+      || _offsetfactor != factor
+      || _offsetunits  != units
+   ) {
+       inherited::setElt(factor, units, styles, on);
+       send();
+       _copiedFromParent = FALSE;
+   }
+   else if(_copiedFromParent) {
+       SoGLPolygonOffsetElement *parent = (SoGLPolygonOffsetElement *)getNextInStack();
+       parent->capture(_state);
+   }
+}
+
+void
+SoGLPolygonOffsetElement::send()
+{
+   if(_active) {
+      if(_style & FILLED) {
+         if(!(_currentstyles & FILLED))
+            glEnable(GL_POLYGON_OFFSET_FILL);
+      }
+      else {
+         if(_currentstyles & FILLED)
+            glDisable(GL_POLYGON_OFFSET_FILL);
+      }
+      if(_style & LINES) {
+         if(!(_currentstyles & LINES))
+            glEnable(GL_POLYGON_OFFSET_LINE);
+      }
+      else {
+         if(_currentstyles & LINES)
+            glDisable(GL_POLYGON_OFFSET_LINE);
+      }
+      if(_style & POINTS) {
+         if(!(_currentstyles & POINTS))
+            glEnable(GL_POLYGON_OFFSET_POINT);
+      }
+      else {
+         if(_currentstyles & POINTS)
+            glDisable(GL_POLYGON_OFFSET_POINT);
+      }
+
+      glPolygonOffset(_offsetfactor, _offsetunits);
+
+      _currentstyles = _style;
+   }
+   else { // ! active
+      if(_currentstyles & FILLED)
+         glDisable(GL_POLYGON_OFFSET_FILL);
+      if(_currentstyles & LINES)
+         glDisable(GL_POLYGON_OFFSET_LINE);
+      if(_currentstyles & POINTS)
+         glDisable(GL_POLYGON_OFFSET_POINT);
+
+      _currentstyles = (Style)0;
+   }  
+
+   // update current offset values before returning
+   _currentoffsetfactor = _offsetfactor;
+   _currentoffsetunits  = _offsetunits;
+}
+
+int
+operator ==(const SoGLPolygonOffsetElement &e1, const SoGLPolygonOffsetElement &e2)
+{
+   return(e1._style               == e2._style
+       && e1._active              == e2._active
+       && e1._offsetfactor        == e2._offsetfactor
+       && e1._offsetunits         == e2._offsetunits
+
+       && e1._currentstyles       == e2._currentstyles
+       && e1._currentoffsetfactor == e2._currentoffsetfactor
+       && e1._currentoffsetunits  == e2._currentoffsetunits);
+}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/src/elements/SoGLStencilBitsElement.c++ inventor/lib/mevis/src/elements/SoGLStencilBitsElement.c++
--- /tmp/inventor/lib/mevis/src/elements/SoGLStencilBitsElement.c++	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/src/elements/SoGLStencilBitsElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -0,0 +1,117 @@
+/*
+ *
+ *  Copyright (C) 2003 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2003   MeVis gGmbH
+ *
+ _______________________________________________________________________
+ ______________________  M E V I S   G G M B H  ________________________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   ...
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ ______________________  M E V I S   G G M B H  ________________________
+ _______________________________________________________________________
+ */
+
+#include <Inventor/elements/SoGLStencilBitsElement.h>
+#include <Inventor/elements/SoViewportRegionElement.h>
+#include OPENGL_GL_H
+
+SO_ELEMENT_SOURCE(SoGLStencilBitsElement)
+
+SoGLStencilBitsElement::~SoGLStencilBitsElement()
+{
+}
+
+void
+SoGLStencilBitsElement::initClass()
+{
+   SO_ELEMENT_INIT_CLASS(SoGLStencilBitsElement, inherited);
+}
+
+void
+SoGLStencilBitsElement::clear(SoState *state, uint32_t mask, int32_t value)
+{
+   if(mask == 0x0)
+      return;
+   
+   value <<= getNumBitPositionsToShift(mask);
+   
+   const SoGLStencilBitsElement *elt = (SoGLStencilBitsElement *)getConstElement(state, classStackIndex);
+   
+   // If no other node has stencil bits in use, then
+   if((mask & (uint32_t)elt->data) == (uint32_t)elt->data) {
+      glClearStencil((GLint)value);
+      glClear(GL_STENCIL_BUFFER_BIT);
+   }
+   else {
+      const SbViewportRegion &vp = SoViewportRegionElement::get(state);
+      SbVec2s vpSize = vp.getViewportSizePixels();
+
+      glPushAttrib(GL_STENCIL_BUFFER_BIT | GL_DEPTH_BUFFER_BIT | GL_COLOR_BUFFER_BIT);
+
+      glEnable(GL_STENCIL_TEST);
+      
+      glStencilFunc(GL_ALWAYS, (GLint)value, mask);
+      glStencilOp(GL_REPLACE, GL_REPLACE, GL_REPLACE);
+
+      glDisable(GL_DEPTH_TEST);
+      glColorMask(GL_FALSE, GL_FALSE, GL_FALSE, GL_FALSE);
+
+      glMatrixMode(GL_PROJECTION);
+      glPushMatrix();
+      glLoadIdentity();
+      glOrtho(0, vpSize[0], 0, vpSize[1], -1, 1);
+      glMatrixMode(GL_MODELVIEW);
+      glPushMatrix();
+      glLoadIdentity();
+
+      glBegin(GL_QUADS);
+      glVertex2i(0, 0);
+      glVertex2i(vpSize[0], 0);
+      glVertex2i(vpSize[0], vpSize[1]);
+      glVertex2i(0, vpSize[1]);
+      glEnd();
+
+      glMatrixMode(GL_PROJECTION);
+      glPopMatrix();
+      glMatrixMode(GL_MODELVIEW);
+      glPopMatrix();
+
+      glPopAttrib();
+   }
+}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/src/elements/SoPolygonOffsetElement.c++ inventor/lib/mevis/src/elements/SoPolygonOffsetElement.c++
--- /tmp/inventor/lib/mevis/src/elements/SoPolygonOffsetElement.c++	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/src/elements/SoPolygonOffsetElement.c++	2005-08-03 12:46:28.000000000 +0200
@@ -0,0 +1,114 @@
+/*
+ *
+ *  Copyright (C) 2004 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2004   MeVis gGmbH
+ *
+ _______________________________________________________________________
+ ______________________  M E V I S   G G M B H  ________________________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   ...
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ ______________________  M E V I S   G G M B H  ________________________
+ _______________________________________________________________________
+ */
+
+#include <Inventor/elements/SoPolygonOffsetElement.h>
+
+SO_ELEMENT_SOURCE(SoPolygonOffsetElement);
+
+SoPolygonOffsetElement::~SoPolygonOffsetElement()
+{
+}
+
+void
+SoPolygonOffsetElement::initClass()
+{
+   SO_ELEMENT_INIT_CLASS(SoPolygonOffsetElement, inherited);
+}
+
+void
+SoPolygonOffsetElement::init(SoState * state)
+{
+   SoPolygonOffsetElement::getDefault(_offsetfactor, _offsetunits, _style, _active);
+}
+
+void
+SoPolygonOffsetElement::set(SoState *state, SoNode *node, float factor, float units, Style styles, SbBool on)
+{
+   SoPolygonOffsetElement *elem = (SoPolygonOffsetElement *)SoReplacedElement::getElement(state, classStackIndex, node);
+   
+   if(elem != NULL)
+      elem->setElt(factor, units, styles, on);
+}
+
+void
+SoPolygonOffsetElement::get(SoState *state, float &factor, float &units, Style &styles, SbBool &on)
+{
+   const SoPolygonOffsetElement *elem= (const SoPolygonOffsetElement *)SoElement::getConstElement(state, classStackIndex);
+
+   factor = elem->_offsetfactor;
+   units  = elem->_offsetunits;
+   styles = elem->_style;
+   on     = elem->_active;
+}
+
+SoPolygonOffsetElement::Style
+SoPolygonOffsetElement::getStyle(SoState *state)
+{
+   const SoPolygonOffsetElement *elem= (const SoPolygonOffsetElement *)SoElement::getConstElement(state, classStackIndex);
+
+   return elem->_style;
+}
+
+void
+SoPolygonOffsetElement::setElt(float factor, float units, Style styles, SbBool on)
+{
+   _offsetfactor = factor;
+   _offsetunits  = units;
+   _style        = styles;
+   _active       = on;
+}
+
+void
+SoPolygonOffsetElement::getDefault(float &factor, float &units, Style &styles, SbBool &on)
+{
+   factor = 0.0f;
+   units  = 0.0f;
+   styles = SoPolygonOffsetElement::FILLED;
+   on     = FALSE;
+}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/src/elements/SoStencilBitsElement.c++ inventor/lib/mevis/src/elements/SoStencilBitsElement.c++
--- /tmp/inventor/lib/mevis/src/elements/SoStencilBitsElement.c++	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/src/elements/SoStencilBitsElement.c++	2006-07-12 18:01:38.000000000 +0200
@@ -0,0 +1,176 @@
+/*
+ *
+ *  Copyright (C) 2003 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2003   MeVis gGmbH
+ *
+ _______________________________________________________________________
+ ______________________  M E V I S   G G M B H  ________________________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   ...
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ ______________________  M E V I S   G G M B H  ________________________
+ _______________________________________________________________________
+ */
+
+
+#include <Inventor/elements/SoStencilBitsElement.h>
+#include OPENGL_GL_H
+
+SO_ELEMENT_SOURCE(SoStencilBitsElement)
+
+// This holds the number of bits supported by GL implementation
+int SoStencilBitsElement::numGLBits = -1;
+
+SoStencilBitsElement::~SoStencilBitsElement()
+{
+}
+
+void
+SoStencilBitsElement::initClass()
+{
+   SO_ELEMENT_INIT_CLASS(SoStencilBitsElement, inherited);
+}
+
+void
+SoStencilBitsElement::init(SoState *)
+{
+   data = getDefault();
+}
+
+uint32_t
+SoStencilBitsElement::acquireBits(SoState *state, SoNode *, int num)
+{
+   // Get an instance we can change (pushing if necessary)
+   SoStencilBitsElement *elt = (SoStencilBitsElement *)getElement(state, classStackIndex);
+
+   // Being overridden?
+   if(elt == NULL)
+      return 0x0;
+
+   int max_num_bits = getNumGLBits();
+   
+   uint32_t avail_bits = ~ (uint32_t)elt->data;
+   uint32_t mask = 0x0;
+   
+   for(uint32_t bit_test = 0x1; num > 0 && bit_test < ((uint32_t)0x1 << max_num_bits); bit_test <<= 1) {
+      if(avail_bits & bit_test) {       // Is this bit available?
+         mask |= bit_test;
+         
+         num--;
+      }
+   }
+   
+   if(num > 0)  // Not enough bits remaining!
+      return 0x0;
+
+   elt->data = (uint32_t)elt->data | mask;
+   
+   return mask;
+}
+
+void
+SoStencilBitsElement::releaseBits(SoState *state, uint32_t mask)
+{
+   // Get an instance we can change (pushing if necessary)
+   SoStencilBitsElement *elt = (SoStencilBitsElement *)getElement(state, classStackIndex);
+
+   // Being overridden?
+   if(elt == NULL)
+      return;
+
+   elt->data = (uint32_t)elt->data ^ mask;
+}
+
+int
+SoStencilBitsElement::getNumBitPositionsToShift(uint32_t mask)
+{
+   if(mask == 0x0)
+      return 0;
+   
+   int max_num_bits = getNumGLBits();
+   int num = 0;
+   
+   for(uint32_t bit_test = 0x1; bit_test < ((uint32_t)0x1 << max_num_bits); bit_test <<= 1) {
+      if(mask & bit_test) {       // Is this bit set in mask?
+         break;
+      }
+      num++;
+   }
+   
+   return num;
+}
+
+int
+SoStencilBitsElement::getNumRemainingBits(SoState *state)
+{
+   const SoStencilBitsElement *elt= (SoStencilBitsElement *)getConstElement(state, classStackIndex);
+
+   int max_num_bits = getNumGLBits();
+   
+   uint32_t avail_bits = ~ (uint32_t)elt->data;
+   int remaining_bits = 0;
+   
+   for(uint32_t bit_test = 0x1; bit_test < ((uint32_t)0x1 << max_num_bits); bit_test <<= 1) {
+      if(avail_bits & bit_test) // Is this bit available?
+         remaining_bits++;
+   }
+   
+   return remaining_bits;
+}
+
+int
+SoStencilBitsElement::getNumGLBits()
+{
+   // Inquire GL if not already done
+   if(numGLBits < 0) {
+      GLint num;
+      glGetIntegerv(GL_STENCIL_BITS, &num);
+
+      numGLBits = num;
+   }
+
+   return numGLBits;
+}
+
+void
+SoStencilBitsElement::push(SoState * /*state*/)
+{
+   // Copying current mask of stencil bits in use from
+   // previous top instance.
+   data = ((SoStencilBitsElement *)getNextInStack())->data;
+}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/src/fields/GNUmakefile inventor/lib/mevis/src/fields/GNUmakefile
--- /tmp/inventor/lib/mevis/src/fields/GNUmakefile	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/src/fields/GNUmakefile	2005-09-27 11:11:42.000000000 +0200
@@ -0,0 +1,10 @@
+IVDEPTH = ../../../..
+include $(IVDEPTH)/make/ivcommondefs
+
+CXXFILES = \
+	SoSFVec2s.c++ \
+	SoSFVec3s.c++
+
+all install: $(OBJECTS)
+
+include $(IVCOMMONRULES)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/src/fields/SoSFVec2s.c++ inventor/lib/mevis/src/fields/SoSFVec2s.c++
--- /tmp/inventor/lib/mevis/src/fields/SoSFVec2s.c++	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/src/fields/SoSFVec2s.c++	2005-09-27 11:11:42.000000000 +0200
@@ -0,0 +1,87 @@
+/*
+ *
+ *  Copyright (C) 2005 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2005   MeVis gGmbH
+ *
+ _______________________________________________________________________
+ ______________________  M E V I S   G G M B H  ________________________
+ |
+ |   $Revision$
+ |
+ |   Classes:
+ |	SoSFVec2s
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ ______________________  M E V I S   G G M B H  ________________________
+ _______________________________________________________________________
+ */
+
+#include <Inventor/fields/SoSFVec2s.h>
+
+SO_SFIELD_SOURCE(SoSFVec2s, SbVec2s, const SbVec2s &);
+
+void
+SoSFVec2s::initClass()
+{
+   SO_SFIELD_INIT_CLASS(SoSFVec2s, inherited);
+}
+
+void
+SoSFVec2s::setValue(short x, short y)
+{
+   setValue(SbVec2s(x, y));
+}
+
+void
+SoSFVec2s::setValue(const short xy[2])
+{
+   setValue(SbVec2s(xy));
+}
+
+SbBool
+SoSFVec2s::readValue(SoInput *in)
+{
+   return(in->read(value[0]) && in->read(value[1]));
+}
+
+void
+SoSFVec2s::writeValue(SoOutput *out) const
+{
+   out->write(value[0]);
+
+   if(!out->isBinary())
+      out->write(' ');
+
+   out->write(value[1]);
+}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/src/fields/SoSFVec3s.c++ inventor/lib/mevis/src/fields/SoSFVec3s.c++
--- /tmp/inventor/lib/mevis/src/fields/SoSFVec3s.c++	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/src/fields/SoSFVec3s.c++	2005-09-27 11:11:42.000000000 +0200
@@ -0,0 +1,92 @@
+/*
+ *
+ *  Copyright (C) 2005 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2005   MeVis gGmbH
+ *
+ _______________________________________________________________________
+ ______________________  M E V I S   G G M B H  ________________________
+ |
+ |   $Revision$
+ |
+ |   Classes:
+ |	SoSFVec3s
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ ______________________  M E V I S   G G M B H  ________________________
+ _______________________________________________________________________
+ */
+
+#include <Inventor/fields/SoSFVec3s.h>
+
+SO_SFIELD_SOURCE(SoSFVec3s, SbVec3s, const SbVec3s &);
+
+void
+SoSFVec3s::initClass()
+{
+   SO_SFIELD_INIT_CLASS(SoSFVec3s, inherited);
+}
+
+void
+SoSFVec3s::setValue(short x, short y, short z)
+{
+   setValue(SbVec3s(x, y, z));
+}
+
+void
+SoSFVec3s::setValue(const short xyz[3])
+{
+   setValue(SbVec3s(xyz));
+}
+
+SbBool
+SoSFVec3s::readValue(SoInput *in)
+{
+   return(in->read(value[0]) && in->read(value[1]) && in->read(value[2]));
+}
+
+void
+SoSFVec3s::writeValue(SoOutput *out) const
+{
+   out->write(value[0]);
+
+   if(!out->isBinary())
+      out->write(' ');
+
+   out->write(value[1]);
+
+   if(!out->isBinary())
+      out->write(' ');
+   
+   out->write(value[2]);
+}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/src/GNUmakefile inventor/lib/mevis/src/GNUmakefile
--- /tmp/inventor/lib/mevis/src/GNUmakefile	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/src/GNUmakefile	2005-08-04 10:58:07.000000000 +0200
@@ -0,0 +1,23 @@
+IVDEPTH = ../../..
+include $(IVDEPTH)/make/ivcommondefs
+
+CXXFILES =  \
+	SoCatch.c++ \
+	SoMeVis.c++ \
+	SoTrace.c++
+
+ifeq ($(usingWin32), 1)
+CXXFILES +=  \
+	utf8_filesupport_win32.c++
+endif
+
+SUBDIRS = elements fields nodes
+
+all install: $(OBJECTS)
+	$(SUBDIRS_MAKERULE)
+
+COMMONPREF = xxx
+$(COMMONTARGS): %: $(COMMONPREF)%
+	$(SUBDIRS_MAKERULE)
+
+include $(IVCOMMONRULES)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/src/nodes/GNUmakefile inventor/lib/mevis/src/nodes/GNUmakefile
--- /tmp/inventor/lib/mevis/src/nodes/GNUmakefile	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/src/nodes/GNUmakefile	2005-08-01 19:25:42.000000000 +0200
@@ -0,0 +1,9 @@
+IVDEPTH = ../../../..
+include $(IVDEPTH)/make/ivcommondefs
+
+CXXFILES = \
+	SoPolygonOffset.c++
+
+all install: $(OBJECTS)
+
+include $(IVCOMMONRULES)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/src/nodes/SoPolygonOffset.c++ inventor/lib/mevis/src/nodes/SoPolygonOffset.c++
--- /tmp/inventor/lib/mevis/src/nodes/SoPolygonOffset.c++	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/src/nodes/SoPolygonOffset.c++	2005-08-01 19:25:42.000000000 +0200
@@ -0,0 +1,118 @@
+/*
+ *
+ *  Copyright (C) 2004 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2004   MeVis gGmbH
+ *
+ _______________________________________________________________________
+ ______________________  M E V I S   G G M B H  ________________________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   ...
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ ______________________  M E V I S   G G M B H  ________________________
+ _______________________________________________________________________
+ */
+
+#include <Inventor/nodes/SoPolygonOffset.h>
+#include <Inventor/elements/SoOverrideElement.h>
+#include <Inventor/elements/SoGLPolygonOffsetElement.h>
+#include <Inventor/actions/SoGLRenderAction.h>
+#include <Inventor/actions/SoCallbackAction.h>
+
+SO_NODE_SOURCE(SoPolygonOffset);
+
+SoPolygonOffset::SoPolygonOffset()
+{
+   SO_NODE_CONSTRUCTOR(SoPolygonOffset);
+
+   SO_NODE_ADD_FIELD(factor, (1.f));
+   SO_NODE_ADD_FIELD(units,  (1.f));
+   SO_NODE_ADD_FIELD(styles, (FILLED));
+   SO_NODE_ADD_FIELD(on,     (TRUE));
+
+   SO_NODE_DEFINE_ENUM_VALUE(Style, FILLED);
+   SO_NODE_DEFINE_ENUM_VALUE(Style, LINES);
+   SO_NODE_DEFINE_ENUM_VALUE(Style, POINTS);
+
+   SO_NODE_SET_SF_ENUM_TYPE(styles, Style);
+
+   isBuiltIn = TRUE;
+}
+
+SoPolygonOffset::~SoPolygonOffset()
+{
+}
+
+void
+SoPolygonOffset::initClass()
+{
+   SO__NODE_INIT_CLASS(SoPolygonOffset, "PolygonOffset", SoNode);
+
+   SO_ENABLE(SoGLRenderAction, SoGLPolygonOffsetElement);
+   SO_ENABLE(SoGLRenderAction, SoOverrideElement);
+   
+   SO_ENABLE(SoCallbackAction, SoPolygonOffsetElement);
+   SO_ENABLE(SoCallbackAction, SoOverrideElement);
+}
+
+void
+SoPolygonOffset::doAction(SoAction * action)
+{
+   SoState *state= action->getState();
+
+   if(SoOverrideElement::getPolygonOffsetOverride(state))
+      return;
+
+   SoPolygonOffsetElement::set(state, this, factor.getValue(), units.getValue(),
+                               (SoPolygonOffsetElement::Style)styles.getValue(),
+                               on.getValue());
+
+   if(isOverride())
+      SoOverrideElement::setPolygonOffsetOverride(state, this, TRUE);
+}
+
+void
+SoPolygonOffset::GLRender(SoGLRenderAction * action)
+{
+   SoPolygonOffset::doAction((SoAction *)action);
+}
+
+void
+SoPolygonOffset::callback(SoCallbackAction * action)
+{
+   SoPolygonOffset::doAction((SoAction *)action);
+}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/src/SoCatch.c++ inventor/lib/mevis/src/SoCatch.c++
--- /tmp/inventor/lib/mevis/src/SoCatch.c++	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/src/SoCatch.c++	2005-08-04 10:58:07.000000000 +0200
@@ -0,0 +1,144 @@
+/*
+ *
+ *  Copyright (C) 2004 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2004   MeVis gGmbH
+ *
+ _______________________________________________________________________
+ ______________________  M E V I S   G G M B H  ________________________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   Macro file to implement exception handlers around some code to make
+ |   code safe. In the case of caught exception an error message is composed
+ |   and send to SoError.
+ |   The usage of the exception handler is optional and can be enabled/disabled
+ |   by the static class function SoCatch::enableExceptionHandling().
+ |
+ |   Author(s)      : Wolf Spindler, Felix Ritter
+ |
+ ______________________  M E V I S   G G M B H  ________________________
+ _______________________________________________________________________
+ */
+
+#include <Inventor/SoCatch.h>
+#include <Inventor/SoTrace.h>
+
+
+SbBool SoCatch::_isExceptionHandlingEnabled=false;
+
+
+SbBool
+SoCatch::isExceptionHandlingEnabled()
+{
+   return _isExceptionHandlingEnabled;
+}
+
+void
+SoCatch::enableExceptionHandling(SbBool on)
+{
+   _isExceptionHandlingEnabled = on;
+}
+
+void
+SoCatch::initClass()
+{
+   _isExceptionHandlingEnabled = false;
+}
+
+void
+SoCatch::postExceptionMessage(SoType      ERR_OBJ_TYPE_ID,
+                              const char *OP_DESCR_STR,
+                              SoType      ACTION_TYPE_ID,
+                              const char *END_STR)
+{
+   SbString objName = "<unknown object>";
+   try {
+      if(ERR_OBJ_TYPE_ID != SoType::badType()) {
+      	 objName = ERR_OBJ_TYPE_ID.getName().getString();
+      }
+   }
+   catch(...) {
+      objName="<error getting objTypeName>";
+   }
+
+   SbString opString = "";
+   try {
+      if(OP_DESCR_STR) {
+      	 opString = OP_DESCR_STR;
+      }
+   }
+   catch(...) {
+      opString = "<error getting description>";
+   }
+
+   SbString actionName = "";
+   try {
+      if(ACTION_TYPE_ID != SoType::badType()) {
+      	 actionName = ACTION_TYPE_ID.getName().getString();
+      }
+   }
+   catch(...) {
+      actionName="<error getting action type name>";
+   }
+
+   SbString endString = "";
+   try {
+      if(END_STR) {
+      	 endString = END_STR;
+      }
+   }
+   catch(...) {
+      endString = "<error getting endStr name>";
+   }
+
+   SbString traceInfos ="";
+   try {
+      traceInfos = SoGlobalTraceBuffer.getTraceDumpString();
+   }
+   catch(...) {
+      traceInfos="<error getting traceInfos name>";
+   }
+
+   try {
+      SoError::post("Crash in %s while %s %s %s %s",
+                    objName   .getString(),
+                    opString  .getString(),
+                    actionName.getString(),
+                    endString .getString(),
+                    traceInfos.getString());
+   }
+   catch(...) {
+      SoError::post("<Could not create error message after catching error>");
+   }
+}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/src/SoMeVis.c++ inventor/lib/mevis/src/SoMeVis.c++
--- /tmp/inventor/lib/mevis/src/SoMeVis.c++	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/src/SoMeVis.c++	2005-09-27 11:11:42.000000000 +0200
@@ -0,0 +1,101 @@
+/*
+ *
+ *  Copyright (C) 2005 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2005   MeVis gGmbH
+ *
+ _______________________________________________________________________
+ ______________________  M E V I S   G G M B H  ________________________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   ...
+ |
+ |   Author(s)      : Felix Ritter
+ |
+ ______________________  M E V I S   G G M B H  ________________________
+ _______________________________________________________________________
+ */
+
+#include <Inventor/SoMeVis.h>
+#include <Inventor/SoDB.h>
+#include <Inventor/nodekits/SoNodeKit.h>
+#include <Inventor/SoInteraction.h>
+
+#include <Inventor/elements/SoPolygonOffsetElement.h>
+#include <Inventor/elements/SoStencilBitsElement.h>
+#include <Inventor/elements/SoGLPolygonOffsetElement.h>
+#include <Inventor/elements/SoGLStencilBitsElement.h>
+
+#include <Inventor/fields/SoSFVec2s.h>
+#include <Inventor/fields/SoSFVec3s.h>
+
+#include <Inventor/nodes/SoPolygonOffset.h>
+
+SbBool SoMeVis::initialized = FALSE;
+
+////////////////////////////////////////////////////////////////////////
+//
+// Description:
+//    Initialize all MeVis classes.
+//
+// Use: public
+
+void
+SoMeVis::init()
+//
+////////////////////////////////////////////////////////////////////////
+{
+   // Only initialize once
+   if(!initialized) {
+        
+      SoDB::init();           // no problem if called multiple times
+      SoNodeKit::init();      // no problem if called multiple times
+      SoInteraction::init();  // no problem if called multiple times
+        
+      // elements
+      SoPolygonOffsetElement::initClass();
+      SoStencilBitsElement::initClass();
+      SoGLPolygonOffsetElement::initClass();
+      SoGLStencilBitsElement::initClass();
+
+      // fields
+      SoSFVec2s::initClass();
+      SoSFVec3s::initClass();
+        
+      // nodes
+      SoPolygonOffset::initClass();
+
+      initialized = TRUE;
+   }
+}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/src/SoTrace.c++ inventor/lib/mevis/src/SoTrace.c++
--- /tmp/inventor/lib/mevis/src/SoTrace.c++	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/src/SoTrace.c++	2005-08-09 16:32:29.000000000 +0200
@@ -0,0 +1,157 @@
+/*
+ *
+ *  Copyright (C) 2004 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2004   MeVis gGmbH
+ *
+ _______________________________________________________________________
+ ______________________  M E V I S   G G M B H  ________________________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   This file contains a class to manage a buffer for a stack and a list
+ |   of string pointers for tracing debug and release code.
+ |
+ |   Author(s)      : Wolf Spindler, Felix Ritter
+ |
+ ______________________  M E V I S   G G M B H  ________________________
+ _______________________________________________________________________
+ */
+
+#include <string.h>
+#include <Inventor/SoTrace.h>
+
+
+template <typename INDEXTYPE> 
+SbString
+SoTraceBuffer<INDEXTYPE>::getTraceDumpString() const
+{
+  try {
+    // A buffer to string number into it.
+    char num[512] = "";
+
+    SbString endLineStr = "\n";
+
+    // Scan all trace list in global tracing instance. Start with the newest entry
+    // and increment it until it reaches the current one. Note that it is a ring buffer.
+    SbString                traceListStr = "";
+    SoGlobalTraceBufferType indexCounter = 0;
+    SoGlobalTraceBufferType entry        = 0;
+    
+    if((_maxNumTraceStackDumps > 0) && (getTraceStackTop() > 0)) {
+      sprintf(num, "\nCall stack of the last %d traced functions:\n", _maxNumTraceStackDumps);
+      traceListStr += num;
+
+      // Create trace stack string.
+      SoGlobalTraceBufferType stackCnt    = 0;
+      const char * const *traceStack      = getTraceStack();
+      SoGlobalTraceBufferType stackTop    = getTraceStackTop();
+      SoGlobalTraceBufferType stackPreTop = stackTop;
+      stackPreTop--;
+      indexCounter = 1;
+
+      for(entry = stackPreTop; (entry != stackTop) && (stackCnt < _maxNumTraceStackDumps); entry--, stackCnt++) {
+        // Create a number string from indexCounter.
+        sprintf(num, "%5d ", indexCounter);
+
+        // Get entry. Note that it might be empty or NULL.
+        const char *entryStrPtr = traceStack[entry];
+
+        if(entryStrPtr) {
+          traceListStr += ((SbString)num);
+          traceListStr += entryStrPtr;
+          traceListStr += endLineStr;
+        }
+
+        // Go to previous entry.
+        indexCounter++;
+      }
+    }
+
+    if(_maxNumTraceListDumps > 0) {
+      SoGlobalTraceBufferType listCnt = 0;
+      sprintf(num, "\nCall list of the %d most recently traced functions:\n", _maxNumTraceListDumps);
+      traceListStr += num;
+      SoGlobalTraceBufferType listEnd    = getTraceListEnd();
+      SoGlobalTraceBufferType listPreEnd = listEnd;
+      listPreEnd--;
+      indexCounter = 1;
+      const char * const *traceList = SoGlobalTraceBuffer.getTraceList();
+      entry=0;
+
+      for(entry = listPreEnd; (entry != listEnd) && (listCnt < _maxNumTraceListDumps); entry--, listCnt++) {
+        // Create a number string from indexCounter.
+        sprintf(num, "%5d ", indexCounter);
+
+        // Get entry. Note that it might be empty or NULL.
+        const char *entryStrPtr = traceList[entry];
+
+        if(entryStrPtr) {
+          traceListStr += ((SbString)num);
+          traceListStr += entryStrPtr;
+          traceListStr += endLineStr;
+        }
+
+        // Go to previous entry.
+        indexCounter++;
+      }
+    }
+
+    // Return composed list.
+    return traceListStr;
+  }
+  catch(...) {
+    return "<Could not determine last called functions or function stack>";
+  }
+}
+
+
+SoTraceBuffer<SoGlobalTraceBufferType> SoGlobalTraceBuffer;
+
+
+#if defined(__sgi)
+
+// The #pragma instantiate directive causes a specific instance of a template declaration to be immediately instantiated.
+#pragma instantiate SbString SoTraceBuffer<SoGlobalTraceBufferType>::getTraceDumpString() const
+
+#else
+
+// Dummy function not to be called. It is only used to force
+// the instantiation of template functionality implemented in .c++.
+void
+_dummyFunction_DO_NOT_CALL()
+{
+  SoGlobalTraceBuffer.getTraceDumpString();
+}
+
+#endif
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/src/utf8_filesupport_win32.c++ inventor/lib/mevis/src/utf8_filesupport_win32.c++
--- /tmp/inventor/lib/mevis/src/utf8_filesupport_win32.c++	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/src/utf8_filesupport_win32.c++	2005-08-02 12:52:12.000000000 +0200
@@ -0,0 +1,70 @@
+/*
+ *
+ *  Copyright (C) 2004 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2004   MeVis gGmbH
+ *
+ _______________________________________________________________________
+ ______________________  M E V I S   G G M B H  ________________________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   This include file contains code for handling UTF-8 path names.
+ |
+ |   Author(s)      : Florian Link, Felix Ritter
+ |
+ ______________________  M E V I S   G G M B H  ________________________
+ _______________________________________________________________________
+ */
+
+#include <windows.h>
+#include <stdio.h>
+
+FILE *
+fopen_utf8(const char *filename, const char *mode)
+{
+  FILE *file = NULL;
+  WCHAR wMode[32];
+  WCHAR wFileName[MAX_PATH];
+
+  // convert the mode from ascii to ucs2
+  MultiByteToWideChar(CP_ACP, 0, mode, strlen(mode)+1, wMode, 32);
+  
+  // convert the filename from utf8 to ucs2
+  int r = MultiByteToWideChar(CP_UTF8, 0, filename,
+                              strlen(filename)+1, wFileName, MAX_PATH);
+  if (r!=0) {
+    file = _wfopen(wFileName, wMode);
+  }
+  return file;
+}
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/mevis/src/utf8_filesupport_win32.h inventor/lib/mevis/src/utf8_filesupport_win32.h
--- /tmp/inventor/lib/mevis/src/utf8_filesupport_win32.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/mevis/src/utf8_filesupport_win32.h	2005-08-02 14:03:21.000000000 +0200
@@ -0,0 +1,55 @@
+/*
+ *
+ *  Copyright (C) 2004 MeVis gGmbH  All Rights Reserved.
+ *
+ *  This library is free software; you can redistribute it and/or
+ *  modify it under the terms of the GNU Lesser General Public
+ *  License as published by the Free Software Foundation; either
+ *  version 2.1 of the License, or (at your option) any later version.
+ *
+ *  This library is distributed in the hope that it will be useful,
+ *  but WITHOUT ANY WARRANTY; without even the implied warranty of
+ *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
+ *  Lesser General Public License for more details.
+ *
+ *  Further, this software is distributed without any warranty that it is
+ *  free of the rightful claim of any third person regarding infringement
+ *  or the like.  Any license provided herein, whether implied or
+ *  otherwise, applies only to this software file.  Patent licenses, if
+ *  any, provided herein do not apply to combinations of this program with
+ *  other software, or any other product whatsoever.
+ *
+ *  You should have received a copy of the GNU Lesser General Public
+ *  License along with this library; if not, write to the Free Software
+ *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
+ *
+ *  Contact information: MeVis, Center for Medical Diagnostic Systems and
+ *  Visualization GmbH, Universittsallee 29, D-28359 Bremen, GERMANY, or:
+ *
+ *  http://www.mevis.de
+ *
+ */
+
+/*
+ * Copyright (C) 2004   MeVis gGmbH
+ *
+ _______________________________________________________________________
+ ______________________  M E V I S   G G M B H  ________________________
+ |
+ |   $Revision$
+ |
+ |   Description:
+ |   This include file contains declarations for handling UTF-8 path names.
+ |
+ |   Author(s)      : Florian Link, Felix Ritter
+ |
+ ______________________  M E V I S   G G M B H  ________________________
+ _______________________________________________________________________
+ */
+
+#ifndef _UTF8_FILE_SUPPORT_WIN32_
+#define _UTF8_FILE_SUPPORT_WIN32_
+
+FILE *fopen_utf8(const char *filename, const char *mode);
+
+#endif  // _UTF8_FILE_SUPPORT_WIN32_
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/include/Inventor/details/SoNodeKitDetail.h inventor/lib/nodekits/include/Inventor/details/SoNodeKitDetail.h
--- /tmp/inventor/lib/nodekits/include/Inventor/details/SoNodeKitDetail.h	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/include/Inventor/details/SoNodeKitDetail.h	2006-07-17 15:46:47.000000000 +0200
@@ -64,6 +64,7 @@
 #ifndef _SO_NODE_KIT_DETAIL_
 #define _SO_NODE_KIT_DETAIL_
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/details/SoSubDetail.h>
 
 class SoNode;
@@ -78,7 +79,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoNkDtl
-class SoNodeKitDetail : public SoDetail {
+class INVENTOR_API SoNodeKitDetail : public SoDetail {
     
     SO_DETAIL_HEADER(SoNodeKitDetail);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoAppearanceKit.h inventor/lib/nodekits/include/Inventor/nodekits/SoAppearanceKit.h
--- /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoAppearanceKit.h	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/include/Inventor/nodekits/SoAppearanceKit.h	2005-08-01 17:36:15.000000000 +0200
@@ -87,7 +87,7 @@
 ////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoAppearKit
-class SoAppearanceKit : public SoBaseKit {
+class INVENTOR_API SoAppearanceKit : public SoBaseKit {
 
     SO_KIT_HEADER(SoAppearanceKit);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoBaseKit.h inventor/lib/nodekits/include/Inventor/nodekits/SoBaseKit.h
--- /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoBaseKit.h	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/include/Inventor/nodekits/SoBaseKit.h	2005-08-01 17:36:15.000000000 +0200
@@ -93,7 +93,7 @@
 ////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoKit
-class SoBaseKit : public SoNode {
+class INVENTOR_API SoBaseKit : public SoNode {
 
     // Instead of calling SO_KIT_HEADER(className) here,
     // which is the norm for all nodekits, explicitly write the contents
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoCameraKit.h inventor/lib/nodekits/include/Inventor/nodekits/SoCameraKit.h
--- /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoCameraKit.h	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/include/Inventor/nodekits/SoCameraKit.h	2005-08-01 17:36:15.000000000 +0200
@@ -85,7 +85,7 @@
 ////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoCamKit
-class SoCameraKit : public SoBaseKit {
+class INVENTOR_API SoCameraKit : public SoBaseKit {
 
     SO_KIT_HEADER(SoCameraKit);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoLightKit.h inventor/lib/nodekits/include/Inventor/nodekits/SoLightKit.h
--- /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoLightKit.h	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/include/Inventor/nodekits/SoLightKit.h	2005-08-01 17:36:15.000000000 +0200
@@ -87,7 +87,7 @@
 ////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoLtKit
-class SoLightKit : public SoBaseKit {
+class INVENTOR_API SoLightKit : public SoBaseKit {
 
     SO_KIT_HEADER(SoLightKit);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoNodekitCatalog.h inventor/lib/nodekits/include/Inventor/nodekits/SoNodekitCatalog.h
--- /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoNodekitCatalog.h	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/include/Inventor/nodekits/SoNodekitCatalog.h	2005-08-01 17:36:15.000000000 +0200
@@ -74,7 +74,7 @@
 //
 //
 ////////////////////////////////////////////////////////////////////
-SoINTERNAL class SoNodekitCatalogEntry {
+SoINTERNAL class INVENTOR_API SoNodekitCatalogEntry {
     private:
 	SbName     name;		// Reference name of this entry 
 	SoType     type;		// Type of node allowable for setting
@@ -152,7 +152,7 @@
 ////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoNkitCat
-class SoNodekitCatalog {
+class INVENTOR_API SoNodekitCatalog {
 
   public:
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoNodeKit.h inventor/lib/nodekits/include/Inventor/nodekits/SoNodeKit.h
--- /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoNodeKit.h	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/include/Inventor/nodekits/SoNodeKit.h	2005-08-01 17:36:15.000000000 +0200
@@ -68,7 +68,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoNkit
-class SoNodeKit {
+class INVENTOR_API SoNodeKit {
   public:
     static void		init(); // init all nodeKit classes
   private:
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoNodeKitListPart.h inventor/lib/nodekits/include/Inventor/nodekits/SoNodeKitListPart.h
--- /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoNodeKitListPart.h	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/include/Inventor/nodekits/SoNodeKitListPart.h	2005-08-01 17:36:15.000000000 +0200
@@ -93,7 +93,7 @@
 ////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoNkitListPart
-class SoNodeKitListPart : public SoNode {
+class INVENTOR_API SoNodeKitListPart : public SoNode {
 
     SO_NODE_HEADER(SoNodeKitListPart);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoNodekitParts.h inventor/lib/nodekits/include/Inventor/nodekits/SoNodekitParts.h
--- /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoNodekitParts.h	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/include/Inventor/nodekits/SoNodekitParts.h	2005-08-01 17:36:15.000000000 +0200
@@ -75,7 +75,7 @@
 ////////////////////////////////////////////////////////////////////
 //    Class: SoNodekitParts
 ////////////////////////////////////////////////////////////////////
-SoEXTENDER class SoNodekitParts {
+SoEXTENDER class INVENTOR_API SoNodekitParts {
 
   SoEXTENDER public:
     // Instances of SoNodekitParts are created only by subclasses of SoBaseKit.
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoSceneKit.h inventor/lib/nodekits/include/Inventor/nodekits/SoSceneKit.h
--- /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoSceneKit.h	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/include/Inventor/nodekits/SoSceneKit.h	2005-08-01 17:36:15.000000000 +0200
@@ -89,7 +89,7 @@
 //      "cameraList"    "lightList"   "childList"     
 //
 ////////////////////////////////////////////////////////////////////
-class SoSceneKit : public SoBaseKit {
+class INVENTOR_API SoSceneKit : public SoBaseKit {
 
     SO_KIT_HEADER(SoSceneKit);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoSeparatorKit.h inventor/lib/nodekits/include/Inventor/nodekits/SoSeparatorKit.h
--- /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoSeparatorKit.h	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/include/Inventor/nodekits/SoSeparatorKit.h	2005-08-01 17:36:15.000000000 +0200
@@ -97,7 +97,7 @@
 
 // C-api: prefix=SoSepKit
 // C-api: public=renderCaching,boundingBoxCaching,renderCulling,pickCulling
-class SoSeparatorKit : public SoBaseKit {
+class INVENTOR_API SoSeparatorKit : public SoBaseKit {
 
     SO_KIT_HEADER(SoSeparatorKit);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoShapeKit.h inventor/lib/nodekits/include/Inventor/nodekits/SoShapeKit.h
--- /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoShapeKit.h	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/include/Inventor/nodekits/SoShapeKit.h	2005-08-01 17:36:15.000000000 +0200
@@ -106,7 +106,7 @@
 //
 
 ////////////////////////////////////////////////////////////////////
-class SoShapeKit : public SoSeparatorKit {
+class INVENTOR_API SoShapeKit : public SoSeparatorKit {
 
     SO_KIT_HEADER(SoShapeKit);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoSubKit.h inventor/lib/nodekits/include/Inventor/nodekits/SoSubKit.h
--- /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoSubKit.h	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/include/Inventor/nodekits/SoSubKit.h	2005-08-01 17:36:15.000000000 +0200
@@ -200,11 +200,13 @@
 //
 // Internal initialization macros
 // 
-#define SO__KIT_INIT_CLASS(className,classPrintName,parentClass)	      \
+#define SO__KIT_INIT_CLASS(className,classPrintName,parentClass) {	      \
     SO__NODE_INIT_CLASS(className,classPrintName,parentClass);                \
+    int _value_false= 0;						      \
     do {          							      \
         parentNodekitCatalogPtr = parentClass::getClassNodekitCatalogPtr();   \
-    } while (0)
+    } while (_value_false);						      \
+    }
 
 ////////////////////////////////////////////
 //
@@ -216,11 +218,13 @@
 // The parentNodekitCatalogPtr is also initialized here.
 // 
 
-#define SO_KIT_INIT_CLASS(className,parentClass,parentPrintClass)	      \
+#define SO_KIT_INIT_CLASS(className,parentClass,parentPrintClass) {	      \
     SO_NODE_INIT_CLASS(className,parentClass,parentPrintClass);               \
+    int _value_false= 0;						      \
     do {          							      \
         parentNodekitCatalogPtr = parentClass::getClassNodekitCatalogPtr();   \
-    } while (0)
+    } while (_value_false);						      \
+    }
 
 ////////////////////////////////////////////
 //
@@ -233,8 +237,9 @@
 //   from SoSubNode.h
 //
 
-#define SO__KIT_INHERIT_CATALOG(className)	          		      \
+#define SO__KIT_INHERIT_CATALOG(className) {	          		      \
     /* get a copy of the catalog from the base class */                       \
+    int _value_false= 0;						      \
     do { 								      \
 	if (firstInstance) 						      \
 	    if (parentNodekitCatalogPtr == NULL)  /* only true in SoBaseKit */\
@@ -242,8 +247,8 @@
 	    else						      	      \
 		nodekitCatalog						      \
 	      =(*parentNodekitCatalogPtr)->clone(SoType::fromName(SO__QUOTE(className)));\
-    }									      \
-    while (0)
+    } while (_value_false);						      \
+    }
 
 ////////////////////////////////////////////
 //
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoWrapperKit.h inventor/lib/nodekits/include/Inventor/nodekits/SoWrapperKit.h
--- /tmp/inventor/lib/nodekits/include/Inventor/nodekits/SoWrapperKit.h	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/include/Inventor/nodekits/SoWrapperKit.h	2005-08-01 17:36:15.000000000 +0200
@@ -99,7 +99,7 @@
 //
 ////////////////////////////////////////////////////////////
 // C-api: prefix=SoWrapKit
-class SoWrapperKit : public SoSeparatorKit {
+class INVENTOR_API SoWrapperKit : public SoSeparatorKit {
 
     SO_KIT_HEADER(SoWrapperKit);
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/include/Inventor/SoNodeKitPath.h inventor/lib/nodekits/include/Inventor/SoNodeKitPath.h
--- /tmp/inventor/lib/nodekits/include/Inventor/SoNodeKitPath.h	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/include/Inventor/SoNodeKitPath.h	2005-08-01 17:36:15.000000000 +0200
@@ -75,7 +75,7 @@
 //////////////////////////////////////////////////////////////////////////////
 
 // C-api: prefix=SoNkitPath
-class SoNodeKitPath : public SoPath {
+class INVENTOR_API SoNodeKitPath : public SoPath {
 
   public:
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/src/nodekits/SoAppearKit.c++ inventor/lib/nodekits/src/nodekits/SoAppearKit.c++
--- /tmp/inventor/lib/nodekits/src/nodekits/SoAppearKit.c++	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/src/nodekits/SoAppearKit.c++	2005-08-01 17:36:15.000000000 +0200
@@ -83,14 +83,14 @@
     // Use combinations of ...ADD_CATALOG_ENTRY 
     // and ...ADD_CATALOG_LIST_ENTRY.  See SoSubKit.h for more info
     // on syntax of these macros.
-    SO_KIT_ADD_CATALOG_ENTRY(lightModel,  SoLightModel, TRUE, this, ,TRUE );
-    SO_KIT_ADD_CATALOG_ENTRY(environment, SoEnvironment,TRUE, this, ,TRUE );
-    SO_KIT_ADD_CATALOG_ENTRY(drawStyle,   SoDrawStyle,  TRUE, this, ,TRUE );
-    SO_KIT_ADD_CATALOG_ENTRY(material,    SoMaterial,   TRUE, this, ,TRUE );
-    SO_KIT_ADD_CATALOG_ENTRY(complexity,  SoComplexity, TRUE, this, ,TRUE );
-    SO_KIT_ADD_CATALOG_ENTRY(texture2,    SoTexture2,   TRUE, this, ,TRUE );
+    SO_KIT_ADD_CATALOG_ENTRY(lightModel,  SoLightModel, TRUE, this,\x0,TRUE );
+    SO_KIT_ADD_CATALOG_ENTRY(environment, SoEnvironment,TRUE, this,\x0,TRUE );
+    SO_KIT_ADD_CATALOG_ENTRY(drawStyle,   SoDrawStyle,  TRUE, this,\x0,TRUE );
+    SO_KIT_ADD_CATALOG_ENTRY(material,    SoMaterial,   TRUE, this,\x0,TRUE );
+    SO_KIT_ADD_CATALOG_ENTRY(complexity,  SoComplexity, TRUE, this,\x0,TRUE );
+    SO_KIT_ADD_CATALOG_ENTRY(texture2,    SoTexture2,   TRUE, this,\x0,TRUE );
 
-    SO_KIT_ADD_CATALOG_ENTRY(font,        SoFont,     TRUE, this, ,TRUE );
+    SO_KIT_ADD_CATALOG_ENTRY(font,        SoFont,     TRUE, this,\x0,TRUE );
 
     SO_KIT_INIT_INSTANCE();
 }
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/src/nodekits/SoBaseKit.c++ inventor/lib/nodekits/src/nodekits/SoBaseKit.c++
--- /tmp/inventor/lib/nodekits/src/nodekits/SoBaseKit.c++	2000-10-13 22:28:00.000000000 +0200
+++ inventor/lib/nodekits/src/nodekits/SoBaseKit.c++	2005-08-01 17:36:15.000000000 +0200
@@ -251,7 +251,7 @@
 	catalogError();
 
     SO_KIT_ADD_CATALOG_LIST_ENTRY(callbackList, SoSeparator, TRUE,
-				       this, , SoCallback, TRUE );
+				       this,\x0, SoCallback, TRUE );
     SO_KIT_ADD_LIST_ITEM_TYPE(callbackList, SoEventCallback );
 
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/src/nodekits/SoCameraKit.c++ inventor/lib/nodekits/src/nodekits/SoCameraKit.c++
--- /tmp/inventor/lib/nodekits/src/nodekits/SoCameraKit.c++	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/src/nodekits/SoCameraKit.c++	2005-08-01 17:36:15.000000000 +0200
@@ -82,11 +82,11 @@
     // and ...ADD_CATALOG_LIST_ENTRY.  See SoSubKit.h for more info
     // on syntax of these macros.
     SO_KIT_ADD_CATALOG_ENTRY(transformGroup, SoTransformSeparator, 
-				TRUE, this, , TRUE );
+				TRUE, this,\x0, TRUE );
     SO_KIT_ADD_CATALOG_ENTRY(transform, SoTransform, 
-				    TRUE, transformGroup, , TRUE  );
+				    TRUE, transformGroup,\x0, TRUE  );
     SO_KIT_ADD_CATALOG_ABSTRACT_ENTRY(camera, SoCamera, SoPerspectiveCamera,
-					 FALSE, transformGroup, , TRUE);
+					 FALSE, transformGroup,\x0, TRUE);
 
     SO_KIT_INIT_INSTANCE();
 }
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/src/nodekits/SoLightKit.c++ inventor/lib/nodekits/src/nodekits/SoLightKit.c++
--- /tmp/inventor/lib/nodekits/src/nodekits/SoLightKit.c++	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/src/nodekits/SoLightKit.c++	2005-08-01 17:36:15.000000000 +0200
@@ -85,15 +85,15 @@
     // on syntax of these macros.
 
     SO_KIT_ADD_CATALOG_ENTRY(transformGroup, SoTransformSeparator,
-			    TRUE,  this, , TRUE);
+			    TRUE,  this,\x0, TRUE);
     SO_KIT_ADD_CATALOG_ENTRY(transform, SoTransform, 
-				    TRUE, transformGroup, , TRUE  );
+				    TRUE, transformGroup,\x0, TRUE  );
     SO_KIT_ADD_CATALOG_ABSTRACT_ENTRY(light, SoLight, SoDirectionalLight, 
-				    FALSE, transformGroup, , TRUE  );
+				    FALSE, transformGroup,\x0, TRUE  );
     SO_KIT_ADD_CATALOG_ENTRY( iconSeparator, SoSeparator, TRUE,
-				    transformGroup, , TRUE);
+				    transformGroup,\x0, TRUE);
     SO_KIT_ADD_CATALOG_ABSTRACT_ENTRY( icon, SoNode, SoCube, TRUE,
-				    iconSeparator, , TRUE);
+				    iconSeparator,\x0, TRUE);
 
     SO_KIT_INIT_INSTANCE();
 }
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/src/nodekits/SoNkCatalog.c++ inventor/lib/nodekits/src/nodekits/SoNkCatalog.c++
--- /tmp/inventor/lib/nodekits/src/nodekits/SoNkCatalog.c++	2001-09-25 02:45:46.000000000 +0200
+++ inventor/lib/nodekits/src/nodekits/SoNkCatalog.c++	2006-07-12 18:01:38.000000000 +0200
@@ -59,6 +59,7 @@
 #include <Inventor/nodekits/SoBaseKit.h>
 #include <Inventor/nodes/SoSeparator.h>
 #include <Inventor/nodes/SoSwitch.h>
+#include <stdlib.h>
 
 // Static variables for the nodekit catalog class...
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/src/nodekits/SoNkParts.c++ inventor/lib/nodekits/src/nodekits/SoNkParts.c++
--- /tmp/inventor/lib/nodekits/src/nodekits/SoNkParts.c++	2000-10-29 16:04:18.000000000 +0100
+++ inventor/lib/nodekits/src/nodekits/SoNkParts.c++	2006-05-09 15:02:04.000000000 +0200
@@ -62,6 +62,7 @@
 #include <Inventor/SoPath.h>
 #include <Inventor/fields/SoSFNode.h>
 #include <Inventor/nodes/SoGroup.h>
+#include <stdlib.h>
 
 #include <SoDebug.h>
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/src/nodekits/SoSceneKit.c++ inventor/lib/nodekits/src/nodekits/SoSceneKit.c++
--- /tmp/inventor/lib/nodekits/src/nodekits/SoSceneKit.c++	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/src/nodekits/SoSceneKit.c++	2005-08-01 17:36:15.000000000 +0200
@@ -85,13 +85,13 @@
 
     // this is a switch node, so the user can pick which camera to look 
     // through.
-    SO_KIT_ADD_CATALOG_ENTRY(topSeparator, SoSeparator, TRUE, this, , FALSE);
+    SO_KIT_ADD_CATALOG_ENTRY(topSeparator, SoSeparator, TRUE, this,\x0, FALSE);
     SO_KIT_ADD_CATALOG_LIST_ENTRY(cameraList, SoSwitch, TRUE,
-					topSeparator, , SoCameraKit, TRUE );
+					topSeparator,\x0, SoCameraKit, TRUE );
     SO_KIT_ADD_CATALOG_LIST_ENTRY(lightList, SoGroup, TRUE,
-					topSeparator, , SoLightKit, TRUE );
+					topSeparator,\x0, SoLightKit, TRUE );
     SO_KIT_ADD_CATALOG_LIST_ENTRY(childList, SoGroup, TRUE,
-					topSeparator, , SoShapeKit, TRUE );
+					topSeparator,\x0, SoShapeKit, TRUE );
     SO_KIT_ADD_LIST_ITEM_TYPE(childList, SoSeparatorKit );
 
     SO_KIT_INIT_INSTANCE();
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/src/nodekits/SoSeparatorKit.c++ inventor/lib/nodekits/src/nodekits/SoSeparatorKit.c++
--- /tmp/inventor/lib/nodekits/src/nodekits/SoSeparatorKit.c++	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/src/nodekits/SoSeparatorKit.c++	2005-08-01 17:36:15.000000000 +0200
@@ -85,25 +85,25 @@
     // on syntax of these macros.
 
     SO_KIT_ADD_CATALOG_ENTRY(topSeparator, SoSeparator, TRUE,
-				    this, , FALSE );
+				    this,\x0, FALSE );
 
     SO_KIT_ADD_CATALOG_ENTRY(pickStyle, SoPickStyle, TRUE,
-				       topSeparator, , TRUE );
+				       topSeparator,\x0, TRUE );
 
     SO_KIT_ADD_CATALOG_ENTRY(appearance,     SoAppearanceKit, TRUE,
-				    topSeparator, , TRUE );
+				    topSeparator,\x0, TRUE );
 
     SO_KIT_ADD_CATALOG_ENTRY(units,      SoUnits, TRUE,
-				    topSeparator, , TRUE );
+				    topSeparator,\x0, TRUE );
 
     SO_KIT_ADD_CATALOG_ENTRY(transform,      SoTransform, TRUE,
-				    topSeparator, , TRUE );
+				    topSeparator,\x0, TRUE );
 
     SO_KIT_ADD_CATALOG_ENTRY(texture2Transform, SoTexture2Transform, TRUE,
-				    topSeparator, , TRUE );
+				    topSeparator,\x0, TRUE );
 
     SO_KIT_ADD_CATALOG_LIST_ENTRY(childList, SoSeparator, TRUE,
-				       topSeparator, , SoShapeKit, TRUE );
+				       topSeparator,\x0, SoShapeKit, TRUE );
     SO_KIT_ADD_LIST_ITEM_TYPE(childList, SoSeparatorKit );
 
     SO_KIT_ADD_FIELD(renderCaching,            (AUTO));
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/src/nodekits/SoShapeKit.c++ inventor/lib/nodekits/src/nodekits/SoShapeKit.c++
--- /tmp/inventor/lib/nodekits/src/nodekits/SoShapeKit.c++	2000-11-18 04:24:54.000000000 +0100
+++ inventor/lib/nodekits/src/nodekits/SoShapeKit.c++	2005-08-01 17:36:15.000000000 +0200
@@ -122,7 +122,7 @@
 				    topSeparator, childList, TRUE );
     SO_KIT_ADD_CATALOG_ABSTRACT_ENTRY( textureCoordinateFunction, 
 		    SoTextureCoordinateFunction, SoTextureCoordinateDefault,
-		    TRUE, topSeparator, ,TRUE );
+		    TRUE, topSeparator,\x0,TRUE );
     SO_KIT_ADD_CATALOG_ENTRY(profileCoordinate2, SoProfileCoordinate2, TRUE,
 				    topSeparator, childList, TRUE );
     SO_KIT_ADD_CATALOG_ENTRY(profileCoordinate3, SoProfileCoordinate3, TRUE,
@@ -131,11 +131,11 @@
 		    		    topSeparator, childList, SoProfile, TRUE );
 
     SO_KIT_ADD_CATALOG_ENTRY(localTransform, SoTransform, TRUE,
-				    topSeparator, , TRUE );
+				    topSeparator,\x0, TRUE );
     SO_KIT_ADD_CATALOG_ENTRY(shapeSeparator, SoSeparator, TRUE,
-				    topSeparator, , TRUE );
+				    topSeparator,\x0, TRUE );
     SO_KIT_ADD_CATALOG_ABSTRACT_ENTRY(shape, SoShape,
-			    SoCube, FALSE, shapeSeparator, , TRUE  );
+			    SoCube, FALSE, shapeSeparator,\x0, TRUE  );
 
     SO_KIT_INIT_INSTANCE();
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/src/nodekits/SoWrapperKit.c++ inventor/lib/nodekits/src/nodekits/SoWrapperKit.c++
--- /tmp/inventor/lib/nodekits/src/nodekits/SoWrapperKit.c++	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/src/nodekits/SoWrapperKit.c++	2005-08-01 17:36:15.000000000 +0200
@@ -79,9 +79,9 @@
     // and ...ADD_CATALOG_LIST_ENTRY.  See SoSubKit.h for more info
     // on syntax of these macros.
     SO_KIT_ADD_CATALOG_ENTRY(localTransform, SoTransform, TRUE,
-				    topSeparator, , TRUE );
+				    topSeparator,\x0, TRUE );
     SO_KIT_ADD_CATALOG_ENTRY(contents, SoSeparator, TRUE,
-				    topSeparator, , TRUE );
+				    topSeparator,\x0, TRUE );
 
     SO_KIT_INIT_INSTANCE();
 }
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/src/upgraders/SoV1NkCatalog.c++ inventor/lib/nodekits/src/upgraders/SoV1NkCatalog.c++
--- /tmp/inventor/lib/nodekits/src/upgraders/SoV1NkCatalog.c++	2001-09-25 02:45:47.000000000 +0200
+++ inventor/lib/nodekits/src/upgraders/SoV1NkCatalog.c++	2006-07-12 18:01:38.000000000 +0200
@@ -58,6 +58,7 @@
 #include <Inventor/nodes/SoSeparator.h>
 #include <Inventor/nodes/SoSwitch.h>
 #include <Inventor/errors/SoDebugError.h>
+#include <stdlib.h>
 
 // Static variables for the nodekit catalog class...
 
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/nodekits/src/upgraders/SoV1NodeKit.c++ inventor/lib/nodekits/src/upgraders/SoV1NodeKit.c++
--- /tmp/inventor/lib/nodekits/src/upgraders/SoV1NodeKit.c++	2000-08-15 14:56:26.000000000 +0200
+++ inventor/lib/nodekits/src/upgraders/SoV1NodeKit.c++	2006-07-17 15:46:47.000000000 +0200
@@ -51,6 +51,7 @@
  _______________________________________________________________________
  */
 
+#include <Inventor/system/SbSystem.h>
 #include <Inventor/misc/upgraders/SoV1NodeKit.h>
 #include <Inventor/misc/upgraders/SoV1AppearanceKit.h>
 #include <Inventor/misc/upgraders/SoV1BaseKit.h>
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/lib/resource.rc inventor/lib/resource.rc
--- /tmp/inventor/lib/resource.rc	1970-01-01 01:00:00.000000000 +0100
+++ inventor/lib/resource.rc	2007-04-10 16:40:15.000000000 +0200
@@ -0,0 +1,39 @@
+#include "winres.h"
+
+/////////////////////////////////////////////////////////////////////////////
+//
+// Version
+//
+
+VS_VERSION_INFO VERSIONINFO
+ FILEVERSION 2,4,0,0
+ PRODUCTVERSION 2,4,0,0
+ FILEFLAGSMASK 0x3fL
+#ifdef _DEBUG
+ FILEFLAGS 0x1L
+#else
+ FILEFLAGS 0x0L
+#endif
+ FILEOS 0x40004L
+ FILETYPE 0x2L
+ FILESUBTYPE 0x0L
+BEGIN
+    BLOCK "StringFileInfo"
+    BEGIN
+        BLOCK "040904b0"
+        BEGIN
+            VALUE "CompanyName", "MeVis Research GmbH (www.mevis-research.de)\0"
+            VALUE "FileDescription", "Open Inventor\0"
+            VALUE "FileVersion", "2, 4, 0, 0\0"
+            VALUE "LegalCopyright", "GNU Lesser General Public License\0"
+            VALUE "ProductName", "Open Inventor\0"
+            VALUE "ProductVersion", "2.4.0\0"
+        END
+    END
+    BLOCK "VarFileInfo"
+    BEGIN
+        VALUE "Translation", 0x409, 1200
+    END
+END
+
+/////////////////////////////////////////////////////////////////////////////
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/libFL/ang/fl.c inventor/libFL/ang/fl.c
--- /tmp/inventor/libFL/ang/fl.c	2003-07-12 00:40:53.000000000 +0200
+++ inventor/libFL/ang/fl.c	2007-04-05 12:58:09.000000000 +0200
@@ -34,6 +34,7 @@
 #include <stdlib.h>
 #ifdef WIN32
 #include <windows.h>
+#include <shlobj.h>
 #include <io.h>
 #ifndef R_OK
 #define R_OK 4
@@ -41,6 +42,9 @@
 #else
 #include <unistd.h>
 #endif
+#if defined(__APPLE__)
+#include <ApplicationServices/ApplicationServices.h>
+#endif
 #include <string.h>
 #include "fl.h"
 
@@ -95,19 +99,26 @@
   NULL
 };
 
-static char *fontPath = IVPREFIX "/share/data/fonts";
-int fl_debug = FALSE;
-
+#if defined(WIN32)
+static char *fontPath = NULL;
 /*
  * Most Inventor font names don't exist in 
  * windows, so we'll default to a common
  * windows font.
  */
- 
-#ifdef WIN32
-static char fontDefault[_MAX_DIR];
+static char fontDefault[MAX_PATH] = {0};
+#elif defined(__APPLE__)
+/*
+ * We use Apple Type Services for Fonts References on Mac OS X instead of hard-coded
+ * directories if no explicit font path it set via environment variable.
+ */
+static char *fontPath = NULL;
+#else
+static char *fontPath = IVPREFIX "/share/data/fonts";
 #endif
 
+int fl_debug = FALSE;
+
 
 /*
  * Initialize the given font implementation. Returns true if OK, false
@@ -118,21 +129,15 @@
 {
   GLboolean ret;
   char *ev;
+
 #ifdef WIN32
-  static char dirBuffer[_MAX_DIR];
-  UINT dirBufferSize;
-  char fontDir[] = "\\fonts";  // winnt default font directory
-
-  dirBufferSize = GetWindowsDirectory(dirBuffer, sizeof(dirBuffer));
-  if ((dirBufferSize > 0) &&
-      (dirBufferSize + 2 + strlen(fontDir) <= sizeof(dirBuffer)))
-  {
-    strcat(dirBuffer,fontDir);
-    fontPath=dirBuffer;
-    *fontDefault = '\0';
-    strcat(fontDefault,fontPath);
-    strcat(fontDefault,"times.ttf");
-  }
+  /* obtain Windows font path */
+  static CHAR szPath[MAX_PATH] = {0};
+  SHGetSpecialFolderPathA(NULL, szPath, CSIDL_FONTS, 0);
+  fontPath = szPath;
+
+  /* setup fallback font */
+  strcat(strcpy(fontDefault, fontPath), "\\times.ttf");
 #endif
 
   ev = getenv("FL_DEBUG");
@@ -166,26 +171,68 @@
 char *
 _flSearchFont(const GLubyte *fontName)
 {
-  char buffer[1024];
-  char *path;
+  char *path = NULL;
 
-  /* In future, the fontPath could have multiple dir as in "path1:path2:...",
-     the fontName may be lookup in a mapping table. For now, this suffice. */
-  sprintf(buffer, "%s/%s", fontPath, fontName);
-  if (access(buffer, R_OK) == 0) {
-    path = strdup(buffer);
+  if (fontPath) { /* Try to locate font in given fonts directory */
+    int i;
+    char buffer[1024];
+
+    const char *fontExt[] = {
+      "", ".ttf", ".pfa", ".pfb", ".otf"
+    };
+    
+    for (i = 0; !path && (i < sizeof(fontExt)/sizeof(fontExt[0])); i++) {
+      /* In the future, the fontPath could have multiple directroy entries as in "path1:path2:...",
+       * For now, only one directory is supported.
+       */
+      sprintf(buffer, "%s/%s%s", fontPath, fontName, fontExt[i]);
+      if (access(buffer, R_OK) == 0) {
+        path = strdup(buffer);
+      }
+    }
   }
-#ifdef WIN32
+
+#if defined(__APPLE__)
+
+  if (!path) { /* Use Apple Type Services to locate font by postscript name or normal naming scheme */
+    CFStringRef name = CFStringCreateWithCString(kCFAllocatorDefault, (const char *)fontName, kCFStringEncodingUTF8);
+    /* Try to find font by using its postscript name */
+    ATSFontRef font = ATSFontFindFromPostScriptName(name, kATSOptionFlagsDefault);
+    if (font == kATSFontRefUnspecified) {
+      /* Try to find font by using normal naming scheme */
+      font = ATSFontFindFromName(name, kATSOptionFlagsDefault);
+      if (font == kATSFontRefUnspecified) {
+        /* Use fallback font */
+        font = ATSFontFindFromPostScriptName(CFSTR("Times-Roman"), kATSOptionFlagsDefault);
+      }
+    }
+    CFRelease(name);
+    if (font != kATSFontRefUnspecified) {
+      FSSpec spec;
+      if (ATSFontGetFileSpecification(font, &spec) == noErr) {
+        FSRef fsRef;
+        if (FSpMakeFSRef(&spec, &fsRef) == noErr) {
+          /* Obtain posix path from file system reference */
+          UInt8 buffer[1024];
+          if (FSRefMakePath(&fsRef, buffer, sizeof(buffer)) == noErr) {
+            path = strdup((const char *)buffer);
+          }
+        }
+      }
+    }
+  }
+
+#elif defined(WIN32)
+
   /*
-   * The font wasn't found, so we'll try the default
-   * windows font instead of giving up.
+   * If the font wasn't found, we'll try the default
+   * font instead of giving up.
    */
-  else if (access(fontDefault, R_OK) == 0) {
-    path = fontDefault;
+  if (!path && access(fontDefault, R_OK) == 0) {
+    path = strdup(fontDefault);
   }
-#endif
-  else
-    path = NULL;
+
+#endif  // WIN32
 
   TRACE(("_flSearchFont: path=[%s]\n", path));
 
@@ -245,11 +292,8 @@
 _flDestroyFont(FLfontStruct *fs)
 {
   FLfontImpl *impl = _flGetFontImpl();
-#if defined(WIN32) || defined(__APPLE__)
-  CHECK(fs, impl, destroyFont, NULL);
-#else
+
   CHECK(fs, impl, destroyFont, /* nothing to return */);
-#endif
 
   impl->destroyFont(fs);
 }
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/libFL/ang/flendian.h inventor/libFL/ang/flendian.h
--- /tmp/inventor/libFL/ang/flendian.h	1970-01-01 01:00:00.000000000 +0100
+++ inventor/libFL/ang/flendian.h	2007-04-05 10:23:49.000000000 +0200
@@ -0,0 +1,29 @@
+#ifndef __flendian_h_
+#define __flendian_h_
+
+#if defined (__GLIBC__)
+# include <endian.h>
+# if (__BYTE_ORDER == __LITTLE_ENDIAN)
+#  define FL_LITTLE_ENDIAN
+# elif (__BYTE_ORDER == __BIG_ENDIAN)
+#  define FL_BIG_ENDIAN
+# else
+#  error Unknown machine endianness detected. The file flendian.h needs to be set up for your CPU type.
+# endif
+# define FL_BYTE_ORDER __BYTE_ORDER
+#elif defined(__sparc) || defined(__sparc__) \
+   || defined(_POWER) || defined(__powerpc__) \
+   || defined(__ppc__) || defined(__hppa) \
+   || defined(_MIPSEB) || defined(_POWER) \
+   || defined(__s390__)
+# define FL_BIG_ENDIAN
+#elif defined(__i386__) || defined(__alpha__) \
+   || defined(__ia64) || defined(__ia64__) \
+   || defined(_M_IX86) || defined(_M_IA64) \
+   || defined(_M_ALPHA)
+# define FL_LITTLE_ENDIAN
+#else
+# error The file flendian.h needs to be set up for your CPU type.
+#endif
+
+#endif  /* __flendian_h_ */
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/libFL/ang/flfreetype.c inventor/libFL/ang/flfreetype.c
--- /tmp/inventor/libFL/ang/flfreetype.c	2001-03-24 03:34:24.000000000 +0100
+++ inventor/libFL/ang/flfreetype.c	2007-04-05 10:23:49.000000000 +0200
@@ -35,6 +35,7 @@
 #include <string.h>
 #include <math.h>
 #include "fl.h"
+#include "flendian.h"
 #include "flfreetype.h"
 
 typedef unsigned short SbUCS2;
@@ -318,7 +319,11 @@
 {
   FLfontStruct *fs;
   FLbitmap *bitmap;
+#ifdef FL_LITTLE_ENDIAN
+  GLuint c = (UCS2[1] << 8) | UCS2[0];
+#else
   GLuint c = (UCS2[0] << 8) | UCS2[1];
+#endif
 
   TRACE(("_flFTUniGetBitmap: 0x%04x\n", c));
   while ((fs = *fsList++))
@@ -333,7 +338,11 @@
 {
   FLfontStruct *fs;
   FLoutline *outline;
+#ifdef FL_LITTLE_ENDIAN
+  GLuint c = (UCS2[1] << 8) | UCS2[0];
+#else
   GLuint c = (UCS2[0] << 8) | UCS2[1];
+#endif
 
   TRACE(("_flFTUniGetOutline: 0x%04x\n", c));
   while ((fs = *fsList++))
@@ -694,7 +703,7 @@
 
 /* States and directions of each line, arc, and face. */
 typedef enum TDirection {
-  Unknown,
+  UnknownDirection,
   Ascending,
   Descending,
   Flat
@@ -1671,7 +1680,7 @@
   ras.last.x = SCALED (to->x);
   ras.last.y = SCALED (to->y);
 
-  ras.state      = Unknown;
+  ras.state      = UnknownDirection;
   ras.first_face = NULL;
 
   top = ras.cursor;
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/libFL/ang/flfreetype.h inventor/libFL/ang/flfreetype.h
--- /tmp/inventor/libFL/ang/flfreetype.h	2001-03-24 03:34:24.000000000 +0100
+++ inventor/libFL/ang/flfreetype.h	2006-07-10 09:15:59.000000000 +0200
@@ -1,7 +1,8 @@
 #ifndef __flfreetype_h_
 #define __flfreetype_h_
 
-#include <freetype/freetype.h>
+#include <ft2build.h>
+#include FT_FREETYPE_H
 
 #ifndef __fl_h_
 #include "fl.h"
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/libFL/ang/GNUmakefile inventor/libFL/ang/GNUmakefile
--- /tmp/inventor/libFL/ang/GNUmakefile	2001-03-24 03:34:24.000000000 +0100
+++ inventor/libFL/ang/GNUmakefile	2005-08-01 17:36:15.000000000 +0200
@@ -1,15 +1,31 @@
 IVDEPTH = ../..
 include $(IVDEPTH)/make/ivcommondefs
 
+ifeq ($(usingWin32), 1)
+ARCHIVE = libFL.lib
+else
 ARCHIVE = libFL.a
-
-LCINCS += -I/usr/include/freetype2
+endif
 
 CFILES = fl.c flclient.c flfreetype.c
 
+
+ifeq ($(usingWin32), 1)
+LCINCS += -I$(FREETYPEINCDIR)
+
+all install: flclient.h all_ivbin
+
+# copy file; cl.exe doesn't recognize file if it's linked in CYGWIN
+flclient.h: ../src/flclient.h
+	if [ ! -f flclient.h ]; then cp -f ../src/flclient.h .; fi
+else
+LCINCS += -I/usr/include/freetype2
+
 all install: link all_ivbin
 
 link:
 	if [ ! -L flclient.h ]; then ln -s ../src/flclient.h .; fi
+endif
+
 
 include $(IVCOMMONRULES)
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/libFL/src/flclient.h inventor/libFL/src/flclient.h
--- /tmp/inventor/libFL/src/flclient.h	2001-03-24 03:47:41.000000000 +0100
+++ inventor/libFL/src/flclient.h	2006-07-12 18:01:38.000000000 +0200
@@ -4,9 +4,13 @@
 #ifdef WIN32
 #include <windows.h>
 #endif
+#ifdef __APPLE__
+#include <OpenGL/gl.h>
+#else
 #ifndef __gl_h_
 #include <GL/gl.h>
 #endif /* __gl_h_ */
+#endif
 
 #ifdef __cplusplus
 extern "C" {
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/libimage/GNUmakefile inventor/libimage/GNUmakefile
--- /tmp/inventor/libimage/GNUmakefile	2000-09-18 10:58:26.000000000 +0200
+++ inventor/libimage/GNUmakefile	2005-08-01 17:36:15.000000000 +0200
@@ -1,7 +1,11 @@
 IVDEPTH = ..
 include $(IVDEPTH)/make/ivcommondefs
 
+ifeq ($(usingWin32), 1)
+ARCHIVE = libimage.lib
+else
 ARCHIVE = libimage.a
+endif
 
 CFILES = \
 	close.c \
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/libimage/image.h inventor/libimage/image.h
--- /tmp/inventor/libimage/image.h	2000-08-15 14:56:29.000000000 +0200
+++ inventor/libimage/image.h	2005-08-01 17:36:15.000000000 +0200
@@ -142,11 +142,13 @@
 IMAGE *icreate();
 unsigned short *ibufalloc();
 
+#ifndef WIN32
 #define _IOEOF          0020    /* EOF reached on read */
 #define _IOERR          0040    /* I/O error from system */
 #define _IOREAD         0001    /* currently reading */
 #define _IOWRT          0002    /* currently writing */
 #define _IORW           0200    /* opened for reading and writing */
+#endif
 
 #define IMAGEDEF		/* for backwards compatibility */
 #ifdef __cplusplus
Binary files /tmp/inventor/libimage/libimage.a and inventor/libimage/libimage.a differ
Binary files /tmp/inventor/libimage/libimage_d.a and inventor/libimage/libimage_d.a differ
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/libSoXt/src/SoXt.c++ inventor/libSoXt/src/SoXt.c++
--- /tmp/inventor/libSoXt/src/SoXt.c++	2000-10-29 16:04:18.000000000 +0100
+++ inventor/libSoXt/src/SoXt.c++	2005-08-03 16:34:17.000000000 +0200
@@ -56,6 +56,7 @@
 #include <Inventor/SoDB.h>
 #include <Inventor/SoInteraction.h>
 #include <Inventor/nodekits/SoNodeKit.h>
+#include <Inventor/SoMeVis.h>
 #include <Inventor/sensors/SoSensorManager.h>
 #include <Inventor/Xt/SoXt.h>
 #include <Xm/MessageB.h>
@@ -173,6 +174,7 @@
     SoDB::init();
     SoNodeKit::init();
     SoInteraction::init();
+    SoMeVis::init();
     
     // bind Inventor with Xt
     eventHandler = new SoXtEventHandler(XtWidgetToApplicationContext(mainWidget));
@@ -208,6 +210,7 @@
     SoDB::init();
     SoNodeKit::init();
     SoInteraction::init();
+    SoMeVis::init();
     
     // bind Inventor with Xt
     eventHandler = new SoXtEventHandler(XtWidgetToApplicationContext(mainWidget));
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/mac_build.sh inventor/mac_build.sh
--- /tmp/inventor/mac_build.sh	1970-01-01 01:00:00.000000000 +0100
+++ inventor/mac_build.sh	2006-09-19 08:31:43.000000000 +0200
@@ -0,0 +1,39 @@
+#! /bin/csh
+
+@ NUM_LOCAL_JOBS = `hwprefs cpu_count` * 2
+
+setenv MAKE "make -j ${NUM_LOCAL_JOBS}"
+
+echo "Using: ${MAKE}"
+
+rm -f  ${MEVIS_THIRDPARTY_LIB}/Inventor/inventor/libFL/libFL*
+rm -f  ${MEVIS_THIRDPARTY_LIB}/Inventor/inventor/libimage/libimage*
+rm -rf ${MEVIS_THIRDPARTY_LIB}/lib/Inventor.framework
+
+qmake -o Makefile.ppp ppp.pro
+${MAKE} -f Makefile.ppp distclean
+qmake -o Makefile.ppp ppp.pro
+${MAKE} -f Makefile.ppp
+
+./gensources.sh
+
+foreach build (release debug)
+setenv CONFIG "CONFIG+=$build"
+
+qmake ${CONFIG} -o Makefile.FL FL.pro
+${MAKE} -f Makefile.FL distclean
+qmake ${CONFIG} -o Makefile.FL FL.pro
+${MAKE} -f Makefile.FL
+
+qmake ${CONFIG} -o Makefile.image image.pro
+${MAKE} -f Makefile.image distclean
+qmake ${CONFIG} -o Makefile.image image.pro
+${MAKE} -f Makefile.image
+
+qmake ${CONFIG} -o Makefile.inventor inventor.pro
+${MAKE} -f Makefile.inventor clean
+# qmake ${CONFIG} -o Makefile.inventor "CONFIG+=build_oiv_installer" inventor.pro
+qmake ${CONFIG} -o Makefile.inventor inventor.pro
+${MAKE} -f Makefile.inventor
+
+end
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/mac_proper.sh inventor/mac_proper.sh
--- /tmp/inventor/mac_proper.sh	1970-01-01 01:00:00.000000000 +0100
+++ inventor/mac_proper.sh	2006-09-18 15:35:46.000000000 +0200
@@ -0,0 +1,17 @@
+#! /bin/sh
+
+rm -f  ${MEVIS_THIRDPARTY_LIB}/Inventor/inventor/libFL/libFL*
+rm -f  ${MEVIS_THIRDPARTY_LIB}/Inventor/inventor/libimage/libimage*
+rm -rf ${MEVIS_THIRDPARTY_LIB}/lib/Inventor.framework
+
+qmake -o Makefile.ppp ppp.pro
+make -f Makefile.ppp distclean
+
+qmake -o Makefile.FL FL.pro
+make -f Makefile.FL distclean
+
+qmake -o Makefile.image image.pro
+make -f Makefile.image distclean
+
+qmake -o Makefile.inventor inventor.pro
+make -f Makefile.inventor distclean
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/make/commondefs inventor/make/commondefs
--- /tmp/inventor/make/commondefs	2001-06-16 01:27:00.000000000 +0200
+++ inventor/make/commondefs	2005-08-01 14:15:49.000000000 +0200
@@ -737,7 +737,7 @@
 #	  makefile need not define CFILES &c before including commondefs.
 #
 SOURCES=$(HFILES) $(ASFILES) $(C++FILES) $(CXXFILES) $(CFILES) $(EFILES) \
-	$(FFILES) $(LFILES) $(PFILES) $(RFILES) $(SHFILES) $(YFILES)
+	$(FFILES) $(LFILES) $(PFILES) $(RFILES) $(SHFILES) $(YFILES) $(RCFILES)
 
 CXXO1=$(CXXFILES:.c++=.o) $(C++FILES:.c++=.o)
 CXXO2=$(CXXO1:.cxx=.o)
@@ -766,6 +766,7 @@
 #
 DIRT=$(GDIRT) $(VDIRT) $(LDIRT) $(XDIRT)
 GDIRT=*.[oue] a.out core lex.yy.[co] y.tab.[cho] $(_FORCE) ar.tmp.*
+GDIRT+=*.obj *.exp *.pdb *.ilk
 
 #
 # Local definitions.  These are used for debugging purposes.  Make sure that
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/make/commonrules inventor/make/commonrules
--- /tmp/inventor/make/commonrules	2000-09-18 09:27:37.000000000 +0200
+++ inventor/make/commonrules	2005-08-01 14:06:19.000000000 +0200
@@ -51,7 +51,7 @@
 	rm -rf $(DIRT)
 
 $(COMMONPREF)rmtargets:
-	rm -rf $(TARGETS)
+	rm -rf $(TARGETS) $(TARGETS).lib $(TARGETS).dll $(TARGETS).exe
 
 #
 # Lint and C tags support.
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/make/ivcommondefs inventor/make/ivcommondefs
--- /tmp/inventor/make/ivcommondefs	2005-01-07 14:47:05.000000000 +0100
+++ inventor/make/ivcommondefs	2006-05-08 11:22:01.000000000 +0200
@@ -36,6 +36,51 @@
 endif
 
 
+#
+# Settings for Microsoft Windows
+#
+
+ifeq ($(usingWin32), 1)
+
+FREETYPE = 1
+
+IVROOT = .
+INSTALLDIR = $(IVDEPTH)/../install/sgioiv
+
+FREETYPEDIR = $(IVDEPTH)/../install
+FREETYPEINCDIR = $(FREETYPEDIR)/include/freetype2
+FREETYPELIBDIR = $(FREETYPEDIR)/lib
+
+JPEGDIR = $(IVDEPTH)/../install
+JPEGINCDIR = $(JPEGDIR)/include
+JPEGLIBDIR = $(JPEGDIR)/lib
+
+CC  = wrapmsvc.exe
+C++ = wrapmsvc.exe
+LD  = wrapmsvc.exe
+RSC = rc.exe
+
+YACC = byacc.exe
+
+INSTALL = /usr/bin/install
+
+ifneq (, $(findstring debug, $(LIBTYPE)))
+WIN32OPTS = /MDd /GX -DWIN32 -DDEBUG -DINVENTOR_EXPORTS -D__SGIOIV_BUILD_DLL
+else
+WIN32OPTS = /MD /GX -DWIN32 -DINVENTOR_EXPORTS -D__SGIOIV_BUILD_DLL
+endif
+
+LCXXOPTS += $(WIN32OPTS)
+LCOPTS += $(WIN32OPTS)
+
+LCXXINCS += -I$(FREETYPEINCDIR) -I$(JPEGINCDIR)
+LCINCS += -I$(FREETYPEINCDIR) -I$(JPEGINCDIR)
+
+LDDSOOPTS += -L$(FREETYPELIBDIR) -L$(JPEGLIBDIR)
+LDOPTS += -L$(FREETYPELIBDIR) -L$(JPEGLIBDIR)
+
+endif
+
 
 #
 # Assume FreeBSD options are the same as those for Linux.
@@ -112,28 +157,29 @@
 
 CC  = /usr/bin/gcc
 C++ = /usr/bin/g++
-LD  = /usr/bin/libtool
+LD  = /usr/bin/g++
 
 ARFLAGS = vrs
 INSTALL = /usr/bin/install
 
-LCXXDEFS += $(MATHDEFS)
-LCDEFS += $(MATHDEFS)
-
-DARWINOPTS = -dynamic -fno-common
+DARWINOPTS = -dynamic -fPIC -fno-common
 LCXXOPTS += $(DARWINOPTS)
 LCOPTS += $(DARWINOPTS)
 
+OPTDIR = /opt/local
+OPTINCDIR = $(OPTDIR)/include
+OPTLIBDIR = $(OPTDIR)/lib
+
 X11DIR = /usr/X11R6
 X11INCDIR = $(X11DIR)/include
 X11LIBDIR = $(X11DIR)/lib
 
-LCXXINCS += -I$(X11INCDIR)
-LCINCS += -I$(X11INCDIR) -I$(X11INCDIR)/freetype2
+LCXXINCS += -I$(X11INCDIR) -I$(OPTINCDIR)
+LCINCS += -I$(X11INCDIR) -I$(X11INCDIR)/freetype2 -I$(OPTINCDIR)
 
-LDDSOOPTS += -dynamic -all_load -L$(X11LIBDIR)
-LDOPTS += -multiply_defined suppress -L$(X11LIBDIR)
-CXXDSOOPTS += -bundle -flat_namespace -undefined suppress -L$(X11LIBDIR)
+LDDSOOPTS += -dynamiclib -all_load -L$(X11LIBDIR) -L$(OPTLIBDIR)
+LDOPTS += -bind_at_load -multiply_defined suppress -L$(X11LIBDIR) -L$(OPTLIBDIR)
+CXXDSOOPTS += -bundle -flat_namespace -undefined suppress -L$(X11LIBDIR) -L$(OPTLIBDIR)
 
 LOCALRULES = $(IVDEPTH)/make/localrules.apple
 
@@ -147,7 +193,7 @@
 
 OPTIMIZER = -O -DNDEBUG
 ifneq (, $(findstring debug, $(LIBTYPE)))
-OPTIMIZER = -g
+OPTIMIZER = -g -DDEBUG
 endif
 
 
@@ -161,6 +207,7 @@
 	-I$(IVDEPTH)/lib/database/include \
 	-I$(IVDEPTH)/lib/interaction/include \
 	-I$(IVDEPTH)/lib/nodekits/include \
+	-I$(IVDEPTH)/lib/mevis/include \
 	-I$(IVDEPTH)/libSoXt/include
 
 LCXXINCS += $(IVLIBHDRDIRS)
@@ -173,7 +220,11 @@
 #
 
 FLDIR = $(IVDEPTH)/libFL/src
+ifeq ($(usingWin32), 1)
+FLLIB = -llibFL
+else
 FLLIB = -lFL
+endif
 ifdef FREETYPE
 FLDIR = $(IVDEPTH)/libFL/freetype
 FLLIB += -lfreetype
@@ -197,13 +248,21 @@
 # Inventor install directories.
 #
 
+ifeq ($(usingWin32), 1)
+IVPREFIX = $(INSTALLDIR)
+else
 IVPREFIX = /usr
+endif
 LCXXOPTS += -DIVPREFIX=\"$(IVPREFIX)\"
 LCOPTS += -DIVPREFIX=\"$(IVPREFIX)\"
 
 IVBINDIR = $(IVROOT)/$(IVPREFIX)/bin
 IVLIBDIR = $(IVROOT)/$(IVPREFIX)/lib
+ifeq ($(usingWin32), 1)
+IVDLIBDIR = $(IVLIBDIR)
+else
 IVDLIBDIR = $(IVLIBDIR)/InventorDebug
+endif
 IVHDRTOP = $(IVROOT)/$(IVPREFIX)/include/Inventor
 IVHDRDIR = $(IVHDRTOP)/$(HDRSUBDIR)
 IVMAN1DIR = $(IVROOT)/$(IVPREFIX)/man/man1
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/make/ivcommonrules inventor/make/ivcommonrules
--- /tmp/inventor/make/ivcommonrules	2003-07-12 00:40:54.000000000 +0200
+++ inventor/make/ivcommonrules	2005-08-01 14:15:49.000000000 +0200
@@ -21,6 +21,29 @@
 # Rules for building and installing Inventor and InventorXt DSO's.
 #
 
+ifeq ($(usingWin32), 1)
+$(LIBDSO): $(DSOOBJECTS) $(RESOBJECTS)
+	for i in $(SUBDIRS); do $(MAKE) -C$$i all || exit 1; done
+	$(RM) $(LIBDSO)
+ifneq (, $(findstring debug, $(LIBTYPE)))
+	$(LD) /LINK /DLL /DEBUG $(LDDSOOPTS) -o $@ $(OBJECTS) $(LDLIBS) $(POST_LDDSOOPTS)
+else
+	$(LD) /LINK /DLL $(LDDSOOPTS) -o $@ $(OBJECTS) $(LDLIBS) $(POST_LDDSOOPTS)
+endif
+
+install_ivlibdso: $(LIBDSO)
+	if [ "$(LIBTYPE)" = "debug" ]; then \
+	  mkdir -p $(IVDLIBDIR); \
+	  $(INSTALL) -m 755 $< $(IVDLIBDIR); \
+	  $(INSTALL) -m 755 `basename $< .dll`.lib $(IVDLIBDIR); \
+	  $(INSTALL) -m 755 `basename $< .dll`.pdb $(IVDLIBDIR); \
+	else \
+	  mkdir -p $(IVLIBDIR); \
+	  $(INSTALL) -m 755 $< $(IVLIBDIR); \
+	  $(INSTALL) -m 755 `basename $< .dll`.lib $(IVLIBDIR); \
+	fi
+
+else
 $(LIBDSO): $(LARCHIVE)
 	$(LD) $(LDDSOOPTS) $^ $(LDLIBS) $(POST_LDDSOOPTS) -o $@
 
@@ -38,6 +61,8 @@
 	  $(INSTALL) -m 755 $< $(IVDLIBDIR); \
 	fi
 
+endif
+
 install_ivheaders:
 	mkdir -p $(IVHDRDIR)
 	for h in $(HEADERS); do $(INSTALL) -m 644 $$h $(IVHDRDIR); done
@@ -47,6 +72,17 @@
 
 
 #
+# Rule for creating resource files (WIN32)
+# Note: The compiled resource files end with .o instead of .res otherwise
+#       wrapmsvc.exe wouldn't link them in.
+#
+
+.SUFFIXES: .rc .o
+
+.rc.o:
+	$(RSC) $(RSCFLAGS) /r /fo$@ $<
+
+#
 # Rules for creating and installing man pages from documentation in IVM format.
 #
 
@@ -88,8 +124,13 @@
 $(PROGRAMS_EXT):
 	$(MAKE) -f GNUmakefile.$@
 
+ifeq ($(usingWin32), 1)
+$(ARCHIVE): $(LTARGETS) $(OBJECTS)
+	$(LD) /LIB -o $@ $(OBJECTS)
+else
 $(ARCHIVE): $(LTARGETS) $(OBJECTS)
 	$(AR) $(ARFLAGS) $@ $(OBJECTS)
+endif
 
 $(DSO): $(OBJECTS)
 	$(LD) $(LDDSOOPTS) $(OBJECTS) $(LDLIBS) $(POST_LDDSOOPTS) -o $@
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/make/localrules.apple inventor/make/localrules.apple
--- /tmp/inventor/make/localrules.apple	2003-07-12 00:40:54.000000000 +0200
+++ inventor/make/localrules.apple	2006-05-08 11:22:01.000000000 +0200
@@ -4,7 +4,7 @@
 ifeq ($(usingDarwin), 1)
 
 LIBDSO := $(LIBDSO:.so=.dylib)
-LLDLIBS += -lXm -lXt -lX11 -lGLU -lGL -liconv -ldl -lcc_dynamic -lstdc++
+LLDLIBS += -lXm -lXt -lX11 -lGLU -lGL -liconv -ldl
 
 BUNDLE := $(DSO:.so=.bundle)
 DSO :=
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/make/system inventor/make/system
--- /tmp/inventor/make/system	2005-01-07 14:47:05.000000000 +0100
+++ inventor/make/system	2005-08-01 14:06:19.000000000 +0200
@@ -1,4 +1,5 @@
 usingIrix = 0
+usingWin32 = 0
 usingLinux = 0
 usingIA64 = 0
 usingFreeBSD = 0
@@ -10,6 +11,10 @@
 usingIrix = 1
 endif
 
+ifneq (, $(findstring cygwin, $(UNAME)))
+usingWin32 = 1
+endif
+
 ifneq (, $(findstring linux, $(UNAME)))
 usingLinux = 1
 endif
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/Makefile.image inventor/Makefile.image
--- /tmp/inventor/Makefile.image	1970-01-01 01:00:00.000000000 +0100
+++ inventor/Makefile.image	2007-05-02 18:08:30.000000000 +0200
@@ -0,0 +1,240 @@
+#############################################################################
+# Makefile for building: libimage_d.a
+# Generated by qmake (2.01a) (Qt 4.2.1) on: Wed May 2 18:08:30 2007
+# Project:  image.pro
+# Template: lib
+# Command: /home/ilab/packages/qt/Qt-4.2.1/bin/qmake -Wall -t lib -unix CONFIG+=staticlib unix:CONFIG+=depend CONFIG+=sgi CONFIG+=MeVisLab CONFIG-=release CONFIG+=debug -o Makefile.image image.pro
+#############################################################################
+
+####### Compiler, tools and options
+
+CC            = gcc
+CXX           = g++
+LEX           = flex
+YACC          = yacc
+DEFINES       = -DDEBUG -DMEVIS_TARGET=image_d -D_DEBUG -DDEBUG -DMeVisLab -DILAB5 -DMEVISLAB -DUNIX -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS -DLINUX -DUNIX_USE_X -DARCH_LITTLEENDIAN
+CFLAGS        = -pipe -MMD -g -D_REENTRANT -fPIC -Wall -W  $(DEFINES)
+CXXFLAGS      = -pipe -MMD -g -D_REENTRANT -fPIC -Wall -W  $(DEFINES)
+LEXFLAGS      = 
+YACCFLAGS     = -d
+INCPATH       = -I../../../packages/qt/Qt-4.2.1/mkspecs/linux-g++ -I. -I.
+AR            = ar cqs
+RANLIB        = 
+QMAKE         = /home/ilab/packages/qt/Qt-4.2.1/bin/qmake
+TAR           = tar -cf
+COMPRESS      = gzip -9f
+COPY          = cp -f
+COPY_FILE     = $(COPY)
+COPY_DIR      = $(COPY) -r
+INSTALL_FILE  = install -m 644 -p
+INSTALL_DIR   = $(COPY_DIR)
+INSTALL_PROGRAM = install -m 755 -p
+DEL_FILE      = rm -f
+SYMLINK       = ln -sf
+DEL_DIR       = rmdir
+MOVE          = mv -f
+CHK_DIR_EXISTS= test -d
+MKDIR         = mkdir -p
+
+####### Output directory
+
+OBJECTS_DIR   = tmp/obj/
+
+####### Files
+
+SOURCES       = libimage/close.c \
+		libimage/filbuf.c \
+		libimage/flsbuf.c \
+		libimage/name.c \
+		libimage/open.c \
+		libimage/pix.c \
+		libimage/rdwr.c \
+		libimage/rle.c \
+		libimage/row.c 
+OBJECTS       = tmp/obj/close.o \
+		tmp/obj/filbuf.o \
+		tmp/obj/flsbuf.o \
+		tmp/obj/name.o \
+		tmp/obj/open.o \
+		tmp/obj/pix.o \
+		tmp/obj/rdwr.o \
+		tmp/obj/rle.o \
+		tmp/obj/row.o
+DIST          = ../../../packages/qt/Qt-4.2.1/mkspecs/common/unix.conf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/common/g++.conf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/common/linux.conf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/qconfig.pri \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/qt_functions.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/qt_config.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/exclusive_builds.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/default_pre.prf \
+		../../../mevis/Libraries/make/mevisInternal.pri \
+		../../../mevis/Libraries/make/systemInit.pro \
+		../../../mevis/Libraries/make/system.pro \
+		../../make/thirdpartyPackages.pro \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/debug.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/default_post.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/unix/thread.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/staticlib.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/static.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/warn_on.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/resources.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/uic.prf \
+		image.pro
+QMAKE_TARGET  = image_d
+DESTDIR       = libimage/
+TARGET        = libimage_d.a
+
+first: all
+####### Implicit rules
+
+.SUFFIXES: .o .c .cpp .cc .cxx .C
+
+.cpp.o:
+	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"
+
+.cc.o:
+	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"
+
+.cxx.o:
+	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"
+
+.C.o:
+	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"
+
+.c.o:
+	$(CC) -c $(CFLAGS) $(INCPATH) -o "$@" "$<"
+
+####### Build rules
+
+all: Makefile.image libimage/$(TARGET) 
+
+staticlib: libimage/$(TARGET)
+
+libimage/$(TARGET):  $(OBJECTS) $(OBJCOMP) 
+	@$(CHK_DIR_EXISTS) libimage/ || $(MKDIR) libimage/ 
+	-$(DEL_FILE) $(TARGET)
+	$(AR) $(TARGET) $(OBJECTS)
+	-$(DEL_FILE) libimage/$(TARGET)
+	-$(MOVE) $(TARGET) libimage/
+
+
+Makefile.image: image.pro  ../../../packages/qt/Qt-4.2.1/mkspecs/linux-g++/qmake.conf ../../../packages/qt/Qt-4.2.1/mkspecs/common/unix.conf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/common/g++.conf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/common/linux.conf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/qconfig.pri \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/qt_functions.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/qt_config.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/exclusive_builds.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/default_pre.prf \
+		../../../mevis/Libraries/make/mevisInternal.pri \
+		../../../mevis/Libraries/make/systemInit.pro \
+		../../../mevis/Libraries/make/system.pro \
+		../../make/thirdpartyPackages.pro \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/debug.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/default_post.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/unix/thread.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/staticlib.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/static.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/warn_on.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/resources.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/uic.prf
+	$(QMAKE) -Wall -t lib -unix CONFIG+=staticlib unix:CONFIG+=depend CONFIG+=sgi CONFIG+=MeVisLab CONFIG-=release CONFIG+=debug -o Makefile.image image.pro
+../../../packages/qt/Qt-4.2.1/mkspecs/common/unix.conf:
+../../../packages/qt/Qt-4.2.1/mkspecs/common/g++.conf:
+../../../packages/qt/Qt-4.2.1/mkspecs/common/linux.conf:
+../../../packages/qt/Qt-4.2.1/mkspecs/qconfig.pri:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/qt_functions.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/qt_config.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/exclusive_builds.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/default_pre.prf:
+../../../mevis/Libraries/make/mevisInternal.pri:
+../../../mevis/Libraries/make/systemInit.pro:
+../../../mevis/Libraries/make/system.pro:
+../../make/thirdpartyPackages.pro:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/debug.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/default_post.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/unix/thread.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/staticlib.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/static.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/warn_on.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/resources.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/uic.prf:
+qmake:  FORCE
+	@$(QMAKE) -Wall -t lib -unix CONFIG+=staticlib unix:CONFIG+=depend CONFIG+=sgi CONFIG+=MeVisLab CONFIG-=release CONFIG+=debug -o Makefile.image image.pro
+
+dist: 
+	@$(CHK_DIR_EXISTS) tmp/obj/image_d1.0.0 || $(MKDIR) tmp/obj/image_d1.0.0 
+	$(COPY_FILE) --parents $(SOURCES) $(DIST) tmp/obj/image_d1.0.0/ && (cd `dirname tmp/obj/image_d1.0.0` && $(TAR) image_d1.0.0.tar image_d1.0.0 && $(COMPRESS) image_d1.0.0.tar) && $(MOVE) `dirname tmp/obj/image_d1.0.0`/image_d1.0.0.tar.gz . && $(DEL_FILE) -r tmp/obj/image_d1.0.0
+
+
+yaccclean:
+lexclean:
+clean:compiler_clean 
+	-$(DEL_FILE) $(OBJECTS)
+	-$(DEL_FILE) *~ core *.core
+
+
+####### Sub-libraries
+
+distclean: clean
+	-$(DEL_FILE) $(TARGET) 
+	-$(DEL_FILE) Makefile.image
+
+
+compiler_rcc_make_all:
+compiler_rcc_clean:
+compiler_uic_make_all:
+compiler_uic_clean:
+compiler_image_collection_make_all: qmake_image_collection.cpp
+compiler_image_collection_clean:
+	-$(DEL_FILE) qmake_image_collection.cpp
+compiler_clean: compiler_rcc_clean compiler_uic_clean compiler_image_collection_clean 
+
+####### Compile
+
+tmp/obj/close.o: libimage/close.c libimage/image.h
+	$(CC) -c $(CFLAGS) $(INCPATH) -o tmp/obj/close.o libimage/close.c
+
+tmp/obj/filbuf.o: libimage/filbuf.c libimage/image.h
+	$(CC) -c $(CFLAGS) $(INCPATH) -o tmp/obj/filbuf.o libimage/filbuf.c
+
+tmp/obj/flsbuf.o: libimage/flsbuf.c libimage/image.h
+	$(CC) -c $(CFLAGS) $(INCPATH) -o tmp/obj/flsbuf.o libimage/flsbuf.c
+
+tmp/obj/name.o: libimage/name.c libimage/image.h
+	$(CC) -c $(CFLAGS) $(INCPATH) -o tmp/obj/name.o libimage/name.c
+
+tmp/obj/open.o: libimage/open.c libimage/image.h
+	$(CC) -c $(CFLAGS) $(INCPATH) -o tmp/obj/open.o libimage/open.c
+
+tmp/obj/pix.o: libimage/pix.c libimage/image.h
+	$(CC) -c $(CFLAGS) $(INCPATH) -o tmp/obj/pix.o libimage/pix.c
+
+tmp/obj/rdwr.o: libimage/rdwr.c libimage/image.h
+	$(CC) -c $(CFLAGS) $(INCPATH) -o tmp/obj/rdwr.o libimage/rdwr.c
+
+tmp/obj/rle.o: libimage/rle.c libimage/image.h
+	$(CC) -c $(CFLAGS) $(INCPATH) -o tmp/obj/rle.o libimage/rle.c
+
+tmp/obj/row.o: libimage/row.c libimage/image.h
+	$(CC) -c $(CFLAGS) $(INCPATH) -o tmp/obj/row.o libimage/row.c
+
+####### Install
+
+install:   FORCE
+
+uninstall:   FORCE
+
+FORCE:
+
+
+#----- Appended by NBuild-Task image -----
+depfiles := $(foreach dep,$(basename $(notdir $(SOURCES))),$(wildcard $(dep).d))
+ifneq ($(depfiles),)
+$(warning Including dependency files: $(depfiles))
+include $(depfiles)
+endif
+#----- End of NBuild-Data -----
+
+
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/Makefile.ppp inventor/Makefile.ppp
--- /tmp/inventor/Makefile.ppp	1970-01-01 01:00:00.000000000 +0100
+++ inventor/Makefile.ppp	2007-05-02 18:06:45.000000000 +0200
@@ -0,0 +1,214 @@
+#############################################################################
+# Makefile for building: tools/ppp/ppp
+# Generated by qmake (2.01a) (Qt 4.2.1) on: Wed May 2 18:06:45 2007
+# Project:  ppp.pro
+# Template: app
+# Command: /home/ilab/packages/qt/Qt-4.2.1/bin/qmake -Wall -unix unix:CONFIG+=depend CONFIG+=sgi CONFIG+=MeVisLab CONFIG-=release CONFIG+=debug -o Makefile.ppp ppp.pro
+#############################################################################
+
+####### Compiler, tools and options
+
+CC            = gcc
+CXX           = g++
+LEX           = flex
+YACC          = yacc
+DEFINES       = -DNDEBUG -DMEVIS_TARGET=ppp_d -D_DEBUG -DDEBUG -DMeVisLab -DILAB5 -DMEVISLAB -DUNIX -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS -DLINUX -DUNIX_USE_X -DARCH_LITTLEENDIAN
+CFLAGS        = -pipe -idirafter lib/mevis/include -MMD -g -D_REENTRANT -Wall -W  $(DEFINES)
+CXXFLAGS      = -pipe -idirafter lib/mevis/include -MMD -g -D_REENTRANT -Wall -W  $(DEFINES)
+LEXFLAGS      = 
+YACCFLAGS     = -d
+INCPATH       = -I../../../packages/qt/Qt-4.2.1/mkspecs/linux-g++ -I. -Ilib/database/include -Ilib/interaction/include -Ilib/nodekits/include -Ilib/mevis/include -I.
+LINK          = g++
+LFLAGS        = -Wl,--hash-style=both -Wl,--hash-style=both -Wl,-rpath,/home/ilab/packages/qt/Qt-4.2.1/lib
+LIBS          = $(SUBLIBS)   -L/home/ilab/ThirdParty/lib -lpthread
+AR            = ar cqs
+RANLIB        = 
+QMAKE         = /home/ilab/packages/qt/Qt-4.2.1/bin/qmake
+TAR           = tar -cf
+COMPRESS      = gzip -9f
+COPY          = cp -f
+COPY_FILE     = $(COPY)
+COPY_DIR      = $(COPY) -r
+INSTALL_FILE  = install -m 644 -p
+INSTALL_DIR   = $(COPY_DIR)
+INSTALL_PROGRAM = install -m 755 -p
+DEL_FILE      = rm -f
+SYMLINK       = ln -sf
+DEL_DIR       = rmdir
+MOVE          = mv -f
+CHK_DIR_EXISTS= test -d
+MKDIR         = mkdir -p
+
+####### Output directory
+
+OBJECTS_DIR   = tmp/obj/
+
+####### Files
+
+SOURCES       = tools/ppp/ppp.c++ 
+OBJECTS       = tmp/obj/ppp.o
+DIST          = ../../../packages/qt/Qt-4.2.1/mkspecs/common/unix.conf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/common/g++.conf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/common/linux.conf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/qconfig.pri \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/qt_functions.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/qt_config.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/exclusive_builds.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/default_pre.prf \
+		../../../mevis/Libraries/make/mevisInternal.pri \
+		../../../mevis/Libraries/make/systemInit.pro \
+		../../../mevis/Libraries/make/system.pro \
+		../../make/thirdpartyPackages.pro \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/debug.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/default_post.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/unix/thread.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/shared.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/warn_on.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/resources.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/uic.prf \
+		ppp.pro
+QMAKE_TARGET  = ppp
+DESTDIR       = tools/ppp/
+TARGET        = tools/ppp/ppp
+TARGETD       = tools/ppp/ppp
+
+first: all
+####### Implicit rules
+
+.SUFFIXES: .o .c .cpp .cc .cxx .C .c++
+
+.cpp.o:
+	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"
+
+.cc.o:
+	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"
+
+.cxx.o:
+	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"
+
+.C.o:
+	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"
+
+.c++.o:
+	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$<"
+
+.c.o:
+	$(CC) -c $(CFLAGS) $(INCPATH) -o "$@" "$<"
+
+####### Build rules
+
+all: Makefile.ppp $(TARGET)
+
+$(TARGET):  $(OBJECTS)  
+	@$(CHK_DIR_EXISTS) tools/ppp/ || $(MKDIR) tools/ppp/ 
+	$(LINK) $(LFLAGS) -o $(TARGET) $(OBJECTS) $(OBJCOMP) $(LIBS)
+
+Makefile.ppp: ppp.pro  ../../../packages/qt/Qt-4.2.1/mkspecs/linux-g++/qmake.conf ../../../packages/qt/Qt-4.2.1/mkspecs/common/unix.conf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/common/g++.conf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/common/linux.conf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/qconfig.pri \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/qt_functions.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/qt_config.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/exclusive_builds.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/default_pre.prf \
+		../../../mevis/Libraries/make/mevisInternal.pri \
+		../../../mevis/Libraries/make/systemInit.pro \
+		../../../mevis/Libraries/make/system.pro \
+		../../make/thirdpartyPackages.pro \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/debug.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/default_post.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/unix/thread.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/shared.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/warn_on.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/resources.prf \
+		../../../packages/qt/Qt-4.2.1/mkspecs/features/uic.prf
+	$(QMAKE) -Wall -unix unix:CONFIG+=depend CONFIG+=sgi CONFIG+=MeVisLab CONFIG-=release CONFIG+=debug -o Makefile.ppp ppp.pro
+../../../packages/qt/Qt-4.2.1/mkspecs/common/unix.conf:
+../../../packages/qt/Qt-4.2.1/mkspecs/common/g++.conf:
+../../../packages/qt/Qt-4.2.1/mkspecs/common/linux.conf:
+../../../packages/qt/Qt-4.2.1/mkspecs/qconfig.pri:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/qt_functions.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/qt_config.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/exclusive_builds.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/default_pre.prf:
+../../../mevis/Libraries/make/mevisInternal.pri:
+../../../mevis/Libraries/make/systemInit.pro:
+../../../mevis/Libraries/make/system.pro:
+../../make/thirdpartyPackages.pro:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/debug.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/default_post.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/unix/thread.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/shared.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/warn_on.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/resources.prf:
+../../../packages/qt/Qt-4.2.1/mkspecs/features/uic.prf:
+qmake:  FORCE
+	@$(QMAKE) -Wall -unix unix:CONFIG+=depend CONFIG+=sgi CONFIG+=MeVisLab CONFIG-=release CONFIG+=debug -o Makefile.ppp ppp.pro
+
+dist: 
+	@$(CHK_DIR_EXISTS) tmp/obj/ppp1.0.0 || $(MKDIR) tmp/obj/ppp1.0.0 
+	$(COPY_FILE) --parents $(SOURCES) $(DIST) tmp/obj/ppp1.0.0/ && (cd `dirname tmp/obj/ppp1.0.0` && $(TAR) ppp1.0.0.tar ppp1.0.0 && $(COMPRESS) ppp1.0.0.tar) && $(MOVE) `dirname tmp/obj/ppp1.0.0`/ppp1.0.0.tar.gz . && $(DEL_FILE) -r tmp/obj/ppp1.0.0
+
+
+yaccclean:
+lexclean:
+clean:compiler_clean 
+	-$(DEL_FILE) $(OBJECTS)
+	-$(DEL_FILE) *~ core *.core
+
+
+####### Sub-libraries
+
+distclean: clean
+	-$(DEL_FILE) $(TARGET) 
+	-$(DEL_FILE) Makefile.ppp
+
+
+compiler_rcc_make_all:
+compiler_rcc_clean:
+compiler_uic_make_all:
+compiler_uic_clean:
+compiler_image_collection_make_all: qmake_image_collection.cpp
+compiler_image_collection_clean:
+	-$(DEL_FILE) qmake_image_collection.cpp
+compiler_clean: compiler_rcc_clean compiler_uic_clean compiler_image_collection_clean 
+
+####### Compile
+
+tmp/obj/ppp.o: tools/ppp/ppp.c++ lib/database/src/sb/Sb.c++ \
+		lib/database/src/sb/SbBox.c++ \
+		lib/database/src/sb/SbColor.c++ \
+		lib/database/src/sb/SbCylinder.c++ \
+		lib/database/src/sb/SbDict.c++ \
+		lib/database/src/sb/SbLine.c++ \
+		lib/database/src/sb/SbMatrix.c++ \
+		lib/database/src/sb/SbName.c++ \
+		lib/database/src/sb/SbPList.c++ \
+		lib/database/src/sb/SbPlane.c++ \
+		lib/database/src/sb/SbRotation.c++ \
+		lib/database/src/sb/SbSphere.c++ \
+		lib/database/src/sb/SbString.c++ \
+		lib/database/src/sb/SbTime.c++ \
+		lib/database/src/sb/SbVec.c++ \
+		lib/database/src/sb/SbView.c++ \
+		lib/database/src/sb/SbViewportRegion.c++
+	$(CXX) -c $(CXXFLAGS) $(INCPATH) -o tmp/obj/ppp.o tools/ppp/ppp.c++
+
+####### Install
+
+install:   FORCE
+
+uninstall:   FORCE
+
+FORCE:
+
+
+#----- Appended by NBuild-Task ppp -----
+depfiles := $(foreach dep,$(basename $(notdir $(SOURCES))),$(wildcard $(dep).d))
+ifneq ($(depfiles),)
+$(warning Including dependency files: $(depfiles))
+include $(depfiles)
+endif
+#----- End of NBuild-Data -----
+
+
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/name.d inventor/name.d
--- /tmp/inventor/name.d	1970-01-01 01:00:00.000000000 +0100
+++ inventor/name.d	2007-05-02 18:08:32.000000000 +0200
@@ -0,0 +1 @@
+name.o: libimage/name.c libimage/image.h
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/open.d inventor/open.d
--- /tmp/inventor/open.d	1970-01-01 01:00:00.000000000 +0100
+++ inventor/open.d	2007-05-02 18:08:31.000000000 +0200
@@ -0,0 +1 @@
+open.o: libimage/open.c libimage/image.h
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/pix.d inventor/pix.d
--- /tmp/inventor/pix.d	1970-01-01 01:00:00.000000000 +0100
+++ inventor/pix.d	2007-05-02 18:08:32.000000000 +0200
@@ -0,0 +1 @@
+pix.o: libimage/pix.c libimage/image.h
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/ppp.bat inventor/ppp.bat
--- /tmp/inventor/ppp.bat	1970-01-01 01:00:00.000000000 +0100
+++ inventor/ppp.bat	2006-07-06 17:14:10.000000000 +0200
@@ -0,0 +1 @@
+"%MEVIS_LIB%\make\win32\createDsp.bat" ppp
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/ppp.pro inventor/ppp.pro
--- /tmp/inventor/ppp.pro	1970-01-01 01:00:00.000000000 +0100
+++ inventor/ppp.pro	2006-10-06 12:07:56.000000000 +0200
@@ -0,0 +1,40 @@
+TEMPLATE = app
+
+TARGET = ppp
+
+DESTDIR = tools/ppp
+
+macx::CONFIG -= app_bundle
+
+!win32::OBJECTS_DIR = obj
+
+QMAKE_EXT_CPP += .c++
+
+# postprocessing flags
+MSVC_KEEP_DESTDIR = 1
+
+win32::QMAKE_CXXFLAGS += /TP
+
+win32::DEFINES += WIN32 INVENTOR_EXPORTS __SGIOIV_BUILD_DLL
+win32::DEFINES -= UNICODE
+
+unix:!macx:QMAKE_CFLAGS += -idirafter lib/mevis/include
+unix:!macx:QMAKE_CXXFLAGS += -idirafter lib/mevis/include
+unix::DEFINES += NDEBUG
+
+# include settings of required libraries
+include( $(MEVIS_THIRDPARTY_LIB)/make/thirdpartyPackages.pro )
+
+# make sure there is no debug postfix on the target
+TARGET = ppp
+
+INCLUDEPATH += \
+    lib/database/include \
+    lib/interaction/include \
+    lib/nodekits/include \
+    lib/mevis/include
+
+win32::CONFIG += console
+
+SOURCES += \
+    tools/ppp/ppp.c++
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/rdwr.d inventor/rdwr.d
--- /tmp/inventor/rdwr.d	1970-01-01 01:00:00.000000000 +0100
+++ inventor/rdwr.d	2007-05-02 18:08:30.000000000 +0200
@@ -0,0 +1 @@
+rdwr.o: libimage/rdwr.c libimage/image.h
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/rle.d inventor/rle.d
--- /tmp/inventor/rle.d	1970-01-01 01:00:00.000000000 +0100
+++ inventor/rle.d	2007-05-02 18:08:30.000000000 +0200
@@ -0,0 +1 @@
+rle.o: libimage/rle.c libimage/image.h
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/row.d inventor/row.d
--- /tmp/inventor/row.d	1970-01-01 01:00:00.000000000 +0100
+++ inventor/row.d	2007-05-02 18:08:30.000000000 +0200
@@ -0,0 +1 @@
+row.o: libimage/row.c libimage/image.h
Binary files /tmp/inventor/tmp/obj/close.o and inventor/tmp/obj/close.o differ
Binary files /tmp/inventor/tmp/obj/filbuf.o and inventor/tmp/obj/filbuf.o differ
Binary files /tmp/inventor/tmp/obj/flsbuf.o and inventor/tmp/obj/flsbuf.o differ
Binary files /tmp/inventor/tmp/obj/name.o and inventor/tmp/obj/name.o differ
Binary files /tmp/inventor/tmp/obj/open.o and inventor/tmp/obj/open.o differ
Binary files /tmp/inventor/tmp/obj/pix.o and inventor/tmp/obj/pix.o differ
Binary files /tmp/inventor/tmp/obj/ppp.o and inventor/tmp/obj/ppp.o differ
Binary files /tmp/inventor/tmp/obj/rdwr.o and inventor/tmp/obj/rdwr.o differ
Binary files /tmp/inventor/tmp/obj/rle.o and inventor/tmp/obj/rle.o differ
Binary files /tmp/inventor/tmp/obj/row.o and inventor/tmp/obj/row.o differ
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/tools/ppp/GNUmakefile inventor/tools/ppp/GNUmakefile
--- /tmp/inventor/tools/ppp/GNUmakefile	2000-09-18 10:58:26.000000000 +0200
+++ inventor/tools/ppp/GNUmakefile	2005-08-01 17:36:15.000000000 +0200
@@ -5,7 +5,13 @@
 
 CXXFILES = ppp.c++
 
+
+ifeq ($(usingWin32), 1)
+LLDOPTS += /FORCE:UNRESOLVED
+else
 LLDLIBS = -lm
+endif
+
 
 all install: $(PROGRAM)
 
Binary files /tmp/inventor/tools/ppp/ppp and inventor/tools/ppp/ppp differ
diff -r -B --unified --exclude=CVS --exclude=.svn --exclude=windows --exclude=mac --exclude=''\''*.d'\''' --exclude=''\''*.bat'\''' --exclude=''\''*.pro'\''' --new-file /tmp/inventor/tools/ppp/ppp.c++ inventor/tools/ppp/ppp.c++
--- /tmp/inventor/tools/ppp/ppp.c++	2001-09-25 02:45:58.000000000 +0200
+++ inventor/tools/ppp/ppp.c++	2006-12-13 16:00:30.000000000 +0100
@@ -115,6 +115,7 @@
 // There is a nasty cyclic make dependency if we try to use libdatabase.a,
 // so instead just include the following code directly:
 #undef DEBUG
+#define _SO_DEBUG_ERROR
 #include "../../lib/database/src/sb/Sb.c++"
 
 // Special characters
@@ -627,6 +628,11 @@
 //
 //////////////////////////////////////////////////////////////////////////////
 
+#ifdef _MSC_VER
+  #if _MSC_VER >= 1400
+int
+  #endif
+#endif
 main(int, char *argv[])
 {
     char	buf[1024];
