cmake_minimum_required(VERSION 2.4.3)
set(CMAKE_ALLOW_LOOSE_LOOP_CONSTRUCTS true)

PROJECT(BULLET_PHYSICS)
SET(BULLET_VERSION 2.83)

IF(COMMAND cmake_policy)
  cmake_policy(SET CMP0003 NEW)
ENDIF(COMMAND cmake_policy)

OPTION(USE_DOUBLE_PRECISION "Use double precision"	OFF)
OPTION(USE_GRAPHICAL_BENCHMARK "Use Graphical Benchmark" OFF)
OPTION(BUILD_SHARED_LIBS "Use shared libraries" ON)
OPTION(USE_CUSTOM_VECTOR_MATH "Use custom vectormath library" OFF)

IF(MSVC)
  IF (CMAKE_CL_64)
    ADD_DEFINITIONS(-D_WIN64)
  ELSE()
    OPTION(USE_MSVC_SSE "Use MSVC /arch:sse option"	ON)
    IF (USE_MSVC_SSE)
      SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /arch:SSE")
    ENDIF()
  ENDIF()
  OPTION(USE_MSVC_FAST_FLOATINGPOINT "Use MSVC /fp:fast option"	ON)
  IF (USE_MSVC_FAST_FLOATINGPOINT)
    SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /fp:fast")
  ENDIF()
ENDIF(MSVC)

IF (USE_DOUBLE_PRECISION)
  ADD_DEFINITIONS( -DBT_USE_DOUBLE_PRECISION)
  SET( BULLET_DOUBLE_DEF "-DBT_USE_DOUBLE_PRECISION")
ENDIF (USE_DOUBLE_PRECISION)


OPTION(USE_GLUT "Use Glut" OFF)

FIND_PACKAGE(OpenGL)
IF (NOT OPENGL_FOUND)
  SET(OPENGL_gl_LIBRARY opengl32)
  SET(OPENGL_glu_LIBRARY glu32)
ENDIF (NOT OPENGL_FOUND)

IF (APPLE)
  FIND_LIBRARY(COCOA_LIBRARY Cocoa)
ENDIF()

if(NOT LIB_DIR)
  set(LIB_DIR lib)
endif(NOT LIB_DIR)
if(NOT BIN_DIR)
  set(BIN_DIR bin)
endif(NOT BIN_DIR)

if(MSVC)
  add_definitions("-DBULLET_DLL_EXPORTS")
endif(MSVC)

add_subdirectory(src)

# Local Variables:
# tab-width: 8
# mode: cmake
# indent-tabs-mode: t
# End:
# ex: shiftwidth=2 tabstop=8
