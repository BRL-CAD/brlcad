(* 
  AIM EXPRESS long form for ISO 10303-227 ed2 TC1
  Pete Lazo
  2007-10-04
  ISO TC184/SC4/WG3 N2405
*)

SCHEMA plant_spatial_configuration;

(* ***********************************
Constants in the schema plant_spatial_configuration
*********************************** *)

   CONSTANT
      dummy_tri : topological_representation_item := 
representation_item('') || topological_representation_item();
      dummy_gri : geometric_representation_item := 
representation_item('') || geometric_representation_item();
   END_CONSTANT;

(* ***********************************
Types in the schema plant_spatial_configuration
*********************************** *)

   TYPE action_request_item = SELECT
      (product);
   END_TYPE;

   TYPE ahead_or_behind = ENUMERATION OF
      (ahead,
       exact,
       behind);
   END_TYPE;

   TYPE amount_of_substance_measure = REAL;
   END_TYPE;

   TYPE angle_relator = ENUMERATION OF
      (equal,
       large,
       small);
   END_TYPE;

   TYPE approval_item = SELECT
      (change_action,
       electrical_system,
       ducting_system,
       instrumentation_and_control_system,
       piping_system,
       structural_system,
       cableway_system,
       hvac_system,
       versioned_action_request);
   END_TYPE;

   TYPE area_measure = REAL;
   END_TYPE;

   TYPE area_or_view = SELECT
      (presentation_area,
       presentation_view);
   END_TYPE;

   TYPE associated_item = SELECT
      (document,
       ducting_system,
       hvac_section_termination,
       organizational_project,
       piping_system,
       plant_item_connection,
       plant_item_connector,
       plant_line_definition,
       plant_line_segment_definition,
       plant_line_segment_termination,
       product,
       product_definition,
       representation,
       shape_dimension_representation,
       plant_arrangement_definition,
       plant_arrangement_segment_definition,
       mechanical_system,
       plant_arrangement_segment_termination);
   END_TYPE;

   TYPE attribute_type = SELECT
      (label,
       text);
   END_TYPE;

   TYPE axis2_placement = SELECT
      (axis2_placement_2d,
       axis2_placement_3d);
   END_TYPE;

   TYPE b_spline_curve_form = ENUMERATION OF
      (polyline_form,
       circular_arc,
       elliptic_arc,
       parabolic_arc,
       hyperbolic_arc,
       unspecified);
   END_TYPE;

   TYPE b_spline_surface_form = ENUMERATION OF
      (plane_surf,
       cylindrical_surf,
       conical_surf,
       spherical_surf,
       toroidal_surf,
       surf_of_revolution,
       ruled_surf,
       generalised_cone,
       quadric_surf,
       surf_of_linear_extrusion,
       unspecified);
   END_TYPE;

   TYPE boolean_operand = SELECT
      (solid_model,
       half_space_solid,
       csg_primitive,
       boolean_result,
       half_space_2d);
   END_TYPE;

   TYPE boolean_operator = ENUMERATION OF
      (union,
       intersection,
       difference);
   END_TYPE;

   TYPE box_characteristic_select = SELECT
      (box_height,
       box_width,
       box_slant_angle,
       box_rotate_angle);
   END_TYPE;

   TYPE box_height = positive_ratio_measure;
   END_TYPE;

   TYPE box_rotate_angle = plane_angle_measure;
   END_TYPE;

   TYPE box_slant_angle = plane_angle_measure;
   END_TYPE;

   TYPE box_width = positive_ratio_measure;
   END_TYPE;

   TYPE celsius_temperature_measure = REAL;
   END_TYPE;

   TYPE change_item = SELECT
      (assembly_component_usage,
       axis2_placement_2d,
       axis2_placement_3d,
       document,
       ducting_system,
       electrical_system,
       externally_defined_plant_item_definition,
       hvac_connector,
       instrumentation_and_control_system,
       line_branch_connection,
       line_plant_item_branch_connection,
       line_plant_item_connection,
       line_termination_connection,
       mechanical_system,
       piping_system,
       plant,
       plant_item_connection,
       plant_item_connector,
       plant_line_definition,
       plant_line_segment_definition,
       plant_line_segment_termination,
       process_capability,
       product,
       product_definition,
       product_definition_relationship,
       product_definition_shape,
       property_definition,
       reference_geometry,
       representation,
       shape_aspect,
       shape_aspect_relationship,
       site,
       site_feature,
       sited_plant,
       structural_system);
   END_TYPE;

   TYPE change_life_cycle_item = SELECT
      (directed_action);
   END_TYPE;

   TYPE character_spacing_select = SELECT
      (length_measure,
       ratio_measure,
       measure_with_unit);
   END_TYPE;

   TYPE character_style_select = SELECT
      (text_style_for_defined_font);
   END_TYPE;

   TYPE characterized_action_definition = SELECT
      (action,
       action_method,
       action_method_relationship,
       action_relationship);
   END_TYPE;

   TYPE characterized_definition = SELECT
      (characterized_object,
       characterized_product_definition,
       shape_definition);
   END_TYPE;

   TYPE characterized_material_property = SELECT
      (material_property_representation,
       product_material_composition_relationship);
   END_TYPE;

   TYPE characterized_product_definition = SELECT
      (product_definition,
       product_definition_relationship);
   END_TYPE;

   TYPE classification_item = SELECT
      (cableway_system,
       drawing_revision,
       ducting_system,
       electrical_system,
       hvac_component_definition,
       hvac_connector,
       instrumentation_and_control_system,
       material_property,
       piping_component_definition,
       piping_system,
       plant_item_connection,
       plant_item_connector,
       applied_document_reference,
       product,
       product_definition,
       structural_system,
       mechanical_system,
       mechanical_component_definition);
   END_TYPE;

   TYPE configuration_design_item = SELECT
      (product_definition,
       product_definition_formation);
   END_TYPE;

   TYPE context_dependent_measure = REAL;
   END_TYPE;

   TYPE count_measure = NUMBER;
   END_TYPE;

   TYPE csg_primitive = SELECT
      (sphere,
       ellipsoid,
       block,
       right_angular_wedge,
       rectangular_pyramid,
       torus,
       right_circular_cone,
       eccentric_cone,
       right_circular_cylinder,
       cyclide_segment_solid);
   END_TYPE;

   TYPE csg_select = SELECT
      (boolean_result,
       csg_primitive);
   END_TYPE;

   TYPE curve_font_or_scaled_curve_font_select = SELECT
      (curve_style_font_select);
   END_TYPE;

   TYPE curve_on_surface = SELECT
      (pcurve,
       surface_curve,
       composite_curve_on_surface);
   END_TYPE;

   TYPE curve_or_annotation_curve_occurrence = SELECT
      (curve,
       annotation_curve_occurrence);
   END_TYPE;

   TYPE curve_or_render = SELECT
      (curve_style);
   END_TYPE;

   TYPE curve_style_font_select = SELECT
      (curve_style_font,
       pre_defined_curve_font,
       externally_defined_curve_font);
   END_TYPE;

   TYPE date_and_time_item = SELECT
      (change_action,
       change_item,
       change_life_cycle_stage_assignment,
       product);
   END_TYPE;

   TYPE date_time_or_event_occurrence = SELECT
      (date_time_select);
   END_TYPE;

   TYPE date_time_select = SELECT
      (date,
       local_time,
       date_and_time);
   END_TYPE;

   TYPE dated_item = SELECT
      (action_directive,
       change_action,
       change_item,
       product);
   END_TYPE;

   TYPE day_in_month_number = INTEGER;
   WHERE
      WR1:
         (1 <= SELF) AND (SELF <= 31);
   END_TYPE;

   TYPE defined_glyph_select = SELECT
  (pre_defined_character_glyph,
   externally_defined_character_glyph);
  END_TYPE;

   TYPE defined_symbol_select = SELECT
      (externally_defined_symbol);
   END_TYPE;

   TYPE derived_property_select = SELECT
      (property_definition);
   END_TYPE;

   TYPE description_attribute_select = SELECT
      (action_request_solution,
       application_context,
       approval_role,
       date_role,
       date_time_role,
       effectivity,
       external_source,
       organization_role,
       person_and_organization_role,
       person_and_organization,
       person_role,
       property_definition_representation,
       representation);
   END_TYPE;

   TYPE design_project_item = SELECT
      (product_definition);
   END_TYPE;

   TYPE dimension_count = INTEGER;
   WHERE
      WR1:
         SELF > 0;
   END_TYPE;

   TYPE dimensional_characteristic = SELECT
      (dimensional_location,
       dimensional_size);
   END_TYPE;

   TYPE document_item = SELECT
      (externally_defined_plant_item_definition,
       heat_tracing_representation,
       material_property,
       piping_component_class,
       piping_system,
       plant_item_connector,
       plant_line_segment_definition,
       product,
       product_definition,
       product_definition_relationship,
       property_definition,
       representation,
       representation_item,
       site,
       mechanical_system,
       analysis_tracing_representation,
       plant_arrangement_segment_definition,
       mechanical_component_class);
   END_TYPE;

   TYPE draughting_callout_element = SELECT
      (annotation_text_occurrence,
       annotation_symbol_occurrence,
       annotation_curve_occurrence);
   END_TYPE;

   TYPE draughting_titled_item = SELECT
      (drawing_revision,
       drawing_sheet_revision);
   END_TYPE;

   TYPE effectivity_context_item = SELECT
      (product_definition);
   END_TYPE;

   TYPE effectivity_item = SELECT
      (product,
       product_definition);
   END_TYPE;

   TYPE electric_current_measure = REAL;
   END_TYPE;

   TYPE fill_area_style_tile_shape_select = SELECT
      (fill_area_style_tile_symbol_with_style);
   END_TYPE;

   TYPE fill_style_select = SELECT
      (fill_area_style_colour,
       externally_defined_tile_style,
       fill_area_style_tiles,
       externally_defined_hatch_style,
       fill_area_style_hatching);
   END_TYPE;

   TYPE font_select = SELECT
      (pre_defined_text_font,
       externally_defined_text_font);
   END_TYPE;

   TYPE founded_item_select = SELECT
      (founded_item,
       representation_item);
   END_TYPE;

   TYPE geometric_set_select = SELECT
      (point,
       curve,
       surface);
   END_TYPE;

   TYPE hiding_or_blanking_select = SELECT
      (presentation_area,
       presentation_view,
       product_data_representation_view,
       annotation_fill_area,
       area_dependent_annotation_representation,
       view_dependent_annotation_representation);
   END_TYPE;

   TYPE hour_in_day = INTEGER;
   WHERE
      WR1:
         (0 <= SELF) AND (SELF < 24);
   END_TYPE;

   TYPE id_attribute_select = SELECT
      (action,
       property_definition,
       shape_aspect,
       shape_aspect_relationship,
       application_context,
       group,
       organizational_project,
       representation);
   END_TYPE;

   TYPE identified_item = SELECT
      (document,
       product_definition,
       property_definition,
       shape_aspect);
   END_TYPE;

   TYPE identifier = STRING;
   END_TYPE;

   TYPE invisibility_context = SELECT
      (presentation_layer_usage,
       presentation_representation,
       presentation_set);
   END_TYPE;

   TYPE invisible_item = SELECT
      (styled_item,
       presentation_layer_assignment,
       representation);
   END_TYPE;
   TYPE knot_type = ENUMERATION OF
      (uniform_knots,
       quasi_uniform_knots,
       piecewise_bezier_knots,
       unspecified);
   END_TYPE;
   TYPE label = STRING;
   END_TYPE;
   TYPE layered_item = SELECT
      (presentation_representation,
       representation_item);
   END_TYPE;

   TYPE length_measure = REAL;
   END_TYPE;

   TYPE list_of_reversible_topology_item = LIST [0:?] OF 
reversible_topology_item;
   END_TYPE;

   TYPE luminous_intensity_measure = REAL;
   END_TYPE;

   TYPE marker_select = SELECT
      (marker_type);
   END_TYPE;

   TYPE marker_type = ENUMERATION OF
      (dot,
       x,
       plus,
       asterisk,
       ring,
       square,
       triangle);
   END_TYPE;

   TYPE mass_measure = REAL;
   END_TYPE;

   TYPE measure_value = SELECT
      (length_measure,
       mass_measure,
       time_measure,
       electric_current_measure,
       thermodynamic_temperature_measure,
       celsius_temperature_measure,
       amount_of_substance_measure,
       luminous_intensity_measure,
       plane_angle_measure,
       solid_angle_measure,
       area_measure,
       volume_measure,
       ratio_measure,
       parameter_value,
       numeric_measure,
       context_dependent_measure,
       positive_length_measure,
       positive_plane_angle_measure,
       positive_ratio_measure,
       count_measure);
   END_TYPE;

   TYPE minute_in_hour = INTEGER;
   WHERE
      WR1:
         (0 <= SELF) AND (SELF <= 59);
   END_TYPE;

   TYPE month_in_year_number = INTEGER;
   WHERE
      WR1:
         (1 <= SELF) AND (SELF <= 12);
   END_TYPE;

   TYPE name_attribute_select = SELECT
      (action_request_solution,
       derived_unit,
       effectivity,
       person_and_organization,
       product_definition,
       product_definition_substitute,
       property_definition_representation);
   END_TYPE;

   TYPE numeric_measure = NUMBER;
   END_TYPE;

   TYPE parameter_value = REAL;
   END_TYPE;

   TYPE pcurve_or_surface = SELECT
      (pcurve,
       surface);
   END_TYPE;

   TYPE person_organization_select = SELECT
      (person,
       organization,
       person_and_organization);
   END_TYPE;

   TYPE plane_angle_measure = REAL;
   END_TYPE;

   TYPE plant_spatial_configuration_organization_item = SELECT
      (catalogue,
       change_action,
       design_project,
       document,
       plant,
       product_definition_formation,
       product_definition_relationship,
       representation,
       site);
   END_TYPE;

   TYPE plant_spatial_configuration_person_and_organization_item = 
SELECT
      (change_item,
       plant,
       site);
   END_TYPE;

   TYPE plant_spatial_configuration_person_item = SELECT
      (document,
       plant,
       product_definition_relationship,
       representation,
       site);
   END_TYPE;

   TYPE positive_length_measure = length_measure;
   WHERE
      WR1:
         SELF > 0.00000;
   END_TYPE;

   TYPE positive_plane_angle_measure = plane_angle_measure;
   WHERE
      WR1:
         SELF > 0.00000;
   END_TYPE;

   TYPE positive_ratio_measure = ratio_measure;
   WHERE
      WR1:
         SELF > 0.00000;
   END_TYPE;

   TYPE preferred_surface_curve_representation = ENUMERATION OF
      (curve_3d,
       pcurve_s1,
       pcurve_s2);
   END_TYPE;

   TYPE presentable_text = STRING;
   END_TYPE;

   TYPE presentation_representation_select = SELECT
      (presentation_representation,
       presentation_set);
   END_TYPE;

   TYPE presentation_size_assignment_select = SELECT
      (presentation_view,
       presentation_area,
       area_in_set);
   END_TYPE;

   TYPE presentation_style_select = SELECT
      (point_style,
       curve_style,
       symbol_style,
       fill_area_style,
       text_style);
   END_TYPE;

   TYPE presented_item_select = SELECT
      (product_definition);
   END_TYPE;

   TYPE product_or_formation_or_definition = SELECT
      (product,
       product_definition_formation,
       product_definition);
   END_TYPE;

   TYPE property_or_shape_select = SELECT
      (property_definition,
       shape_definition);
   END_TYPE;

   TYPE purchase_item = SELECT
      (product);
   END_TYPE;

   TYPE ratio_measure = REAL;
   END_TYPE;

   TYPE represented_definition = SELECT
      (property_definition,
       property_definition_relationship,
       shape_aspect,
       shape_aspect_relationship);
   END_TYPE;

   TYPE reversible_topology = SELECT
      (reversible_topology_item,
       list_of_reversible_topology_item,
       set_of_reversible_topology_item);
   END_TYPE;

   TYPE reversible_topology_item = SELECT
      (edge,
       path,
       face,
       face_bound,
       closed_shell,
       open_shell);
   END_TYPE;

   TYPE role_select = SELECT
      (action_assignment,
       action_request_assignment,
       approval_assignment,
       approval_date_time,
       document_reference,
       effectivity_assignment,
       group_assignment,
       name_assignment);
   END_TYPE;

   TYPE second_in_minute = REAL;
   WHERE
      WR1:
         (0 <= SELF) AND (SELF <= 60.0000);
   END_TYPE;

   TYPE set_of_reversible_topology_item = SET [0:?] OF 
reversible_topology_item;
   END_TYPE;

   TYPE shape_definition = SELECT
      (product_definition_shape,
       shape_aspect,
       shape_aspect_relationship);
   END_TYPE;

   TYPE shell = SELECT
      (vertex_shell,
       wire_shell,
       open_shell,
       closed_shell);
   END_TYPE;

   TYPE si_prefix = ENUMERATION OF
      (exa,
       peta,
       tera,
       giga,
       mega,
       kilo,
       hecto,
       deca,
       deci,
       centi,
       milli,
       micro,
       nano,
       pico,
       femto,
       atto);
   END_TYPE;

   TYPE si_unit_name = ENUMERATION OF
      (metre,
       gram,
       second,
       ampere,
       kelvin,
       mole,
       candela,
       radian,
       steradian,
       hertz,
       newton,
       pascal,
       joule,
       watt,
       coulomb,
       volt,
       farad,
       ohm,
       siemens,
       weber,
       tesla,
       henry,
       degree_Celsius,
       lumen,
       lux,
       becquerel,
       gray,
       sievert);
   END_TYPE;

   TYPE size_select = SELECT
      (positive_length_measure,
       measure_with_unit);
   END_TYPE;

   TYPE solid_angle_measure = REAL;
   END_TYPE;

   TYPE source = ENUMERATION OF
      (made,
       bought,
       not_known);
   END_TYPE;

   TYPE source_item = SELECT
      (identifier);
   END_TYPE;

   TYPE style_context_select = SELECT
      (group,
       presentation_layer_assignment,
       representation,
       representation_item,
       presentation_set);
   END_TYPE;

   TYPE supported_item = SELECT
      (action_directive,
       action,
       action_method);
   END_TYPE;

   TYPE surface_boundary = SELECT
      (boundary_curve,
       degenerate_pcurve);
   END_TYPE;

   TYPE surface_side = ENUMERATION OF
    (positive,
     negative,
     both);
   END_TYPE;

   TYPE surface_side_style_select = SELECT
    (pre_defined_surface_side_style);
   END_TYPE;

   TYPE symbol_style_select = SELECT
      (symbol_colour);
   END_TYPE;

   TYPE text = STRING;
   END_TYPE;

   TYPE text_alignment = label;
   END_TYPE;

   TYPE text_delineation = label;
   END_TYPE;

   TYPE text_or_character = SELECT
      (annotation_text,
       text_literal);
   END_TYPE;

   TYPE text_path = ENUMERATION OF
      (left,
       right,
       up,
       down);
   END_TYPE;

   TYPE thermodynamic_temperature_measure = REAL;
   END_TYPE;

   TYPE time_measure = REAL;
   END_TYPE;

   TYPE transformation = SELECT
      (item_defined_transformation,
       functionally_defined_transformation);
   END_TYPE;

   TYPE transition_code = ENUMERATION OF
      (discontinuous,
       continuous,
       cont_same_gradient,
       cont_same_gradient_same_curvature);
   END_TYPE;

   TYPE trimming_preference = ENUMERATION OF
      (cartesian,
       parameter,
       unspecified);
   END_TYPE;



   TYPE trimming_select = SELECT
      (cartesian_point,
       parameter_value);
   END_TYPE;

   TYPE unit = SELECT
      (named_unit,
       derived_unit);
   END_TYPE;

   TYPE value_qualifier = SELECT
      (precision_qualifier,
       type_qualifier);
   END_TYPE;

   TYPE vector_or_direction = SELECT
      (vector,
       direction);
   END_TYPE;

   TYPE volume_measure = REAL;
   END_TYPE;

   TYPE wireframe_model = SELECT
      (shell_based_wireframe_model);
   END_TYPE;

   TYPE year_number = INTEGER;
   END_TYPE;
(* ***********************************
Entities in the schema plant_spatial_configuration
*********************************** *)
   ENTITY action;
      name : label;
      description : OPTIONAL text;
      chosen_method : action_method;
   DERIVE
      id : identifier := get_id_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ID_ATTRIBUTE.IDENTIFIED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY action_assignment
   ABSTRACT SUPERTYPE;
      assigned_action : action;
   DERIVE
      role : object_role := get_role(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;
   END_ENTITY;

   ENTITY action_directive;
      name : label;
      description : OPTIONAL text;
      analysis : text;
      comment : text;
      requests : SET [1:?] OF versioned_action_request;
   END_ENTITY;

   ENTITY action_method;
      name : label;
      description : OPTIONAL text;
      consequence : text;
      purpose : text;
   END_ENTITY;

   ENTITY action_method_relationship;
      name : label;
      description : OPTIONAL text;
      relating_method : action_method;
      related_method : action_method;
   END_ENTITY;

   ENTITY action_relationship;
      name : label;
      description : OPTIONAL text;
      relating_action : action;
      related_action : action;
   END_ENTITY;

   ENTITY action_request_assignment
   ABSTRACT SUPERTYPE;
      assigned_action_request : versioned_action_request;
   DERIVE
      role : object_role := get_role(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;
   END_ENTITY;

   ENTITY action_request_solution;
      method : action_method;
      request : versioned_action_request;
   DERIVE
      description : text := get_description_value(SELF);
      name : label := get_name_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
      WR2:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'NAME_ATTRIBUTE.NAMED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY action_request_status;
      status : label;
      assigned_request : versioned_action_request;
   END_ENTITY;

   ENTITY action_status;
      status : label;
      assigned_action : executed_action;
   END_ENTITY;

   ENTITY advanced_face
   SUBTYPE OF (face_surface);
   WHERE
      WR1:
         SIZEOF([ 'PLANT_SPATIAL_CONFIGURATION.ELEMENTARY_SURFACE', 
'PLANT_SPATIAL_CONFIGURATION.B_SPLINE_SURFACE', 
'PLANT_SPATIAL_CONFIGURATION.SWEPT_SURFACE' ] * TYPEOF(face_geometry)) 
= 1;
      WR2:
         SIZEOF(QUERY (elp_fbnds <* QUERY (bnds <* bounds| 
('PLANT_SPATIAL_CONFIGURATION.EDGE_LOOP' IN TYPEOF(bnds.bound)))| NOT 
(SIZEOF(QUERY (oe <* elp_fbnds.bound\path.edge_list| NOT 
('PLANT_SPATIAL_CONFIGURATION.EDGE_CURVE' IN 
TYPEOF(oe\oriented_edge.edge_element)))) = 0))) = 0;
      WR3:
         SIZEOF(QUERY (elp_fbnds <* QUERY (bnds <* bounds| 
('PLANT_SPATIAL_CONFIGURATION.EDGE_LOOP' IN TYPEOF(bnds.bound)))| NOT 
(SIZEOF(QUERY (oe <* elp_fbnds.bound\path.edge_list| NOT (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.LINE', 
'PLANT_SPATIAL_CONFIGURATION.CONIC', 
'PLANT_SPATIAL_CONFIGURATION.POLYLINE', 
'PLANT_SPATIAL_CONFIGURATION.SURFACE_CURVE', 
'PLANT_SPATIAL_CONFIGURATION.B_SPLINE_CURVE' ] * 
TYPEOF(oe.edge_element\edge_curve.edge_geometry)) = 1))) = 0))) = 0;
      WR4:
         SIZEOF(QUERY (elp_fbnds <* QUERY (bnds <* bounds| 
('PLANT_SPATIAL_CONFIGURATION.EDGE_LOOP' IN TYPEOF(bnds.bound)))| NOT 
(SIZEOF(QUERY (oe <* elp_fbnds.bound\path.edge_list| NOT 
((('PLANT_SPATIAL_CONFIGURATION.VERTEX_POINT' IN 
TYPEOF(oe\edge.edge_start)) AND 
('PLANT_SPATIAL_CONFIGURATION.CARTESIAN_POINT' IN 
TYPEOF(oe\edge.edge_start\vertex_point.vertex_geometry))) AND 
(('PLANT_SPATIAL_CONFIGURATION.VERTEX_POINT' IN 
TYPEOF(oe\edge.edge_end)) AND 
('PLANT_SPATIAL_CONFIGURATION.CARTESIAN_POINT' IN 
TYPEOF(oe\edge.edge_end\vertex_point.vertex_geometry)))))) = 0))) = 0;
      WR5:
         SIZEOF(QUERY (elp_fbnds <* QUERY (bnds <* bounds| 
('PLANT_SPATIAL_CONFIGURATION.EDGE_LOOP' IN TYPEOF(bnds.bound)))| 
('PLANT_SPATIAL_CONFIGURATION.ORIENTED_PATH' IN 
TYPEOF(elp_fbnds.bound)))) = 0;
      WR6:
         NOT ('PLANT_SPATIAL_CONFIGURATION.SWEPT_SURFACE' IN 
TYPEOF(face_geometry)) OR (SIZEOF([ 'PLANT_SPATIAL_CONFIGURATION.LINE', 
'PLANT_SPATIAL_CONFIGURATION.CONIC', 
'PLANT_SPATIAL_CONFIGURATION.POLYLINE', 
'PLANT_SPATIAL_CONFIGURATION.B_SPLINE_CURVE' ] * 
TYPEOF(face_geometry\swept_surface.swept_curve)) = 1);
      WR7:
         SIZEOF(QUERY (vlp_fbnds <* QUERY (bnds <* bounds| 
('PLANT_SPATIAL_CONFIGURATION.VERTEX_LOOP' IN TYPEOF(bnds.bound)))| NOT 
(('PLANT_SPATIAL_CONFIGURATION.VERTEX_POINT' IN 
TYPEOF(vlp_fbnds\face_bound.bound\vertex_loop.loop_vertex)) AND 
('PLANT_SPATIAL_CONFIGURATION.CARTESIAN_POINT' IN 
TYPEOF(vlp_fbnds\face_bound.bound\vertex_loop.loop_vertex\vertex_point.
vertex_geometry))))) = 0;
      WR8:
         SIZEOF(QUERY (bnd <* bounds| NOT (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.EDGE_LOOP', 
'PLANT_SPATIAL_CONFIGURATION.VERTEX_LOOP' ] * TYPEOF(bnd.bound)) = 1))) 
= 0;
      WR9:
         SIZEOF(QUERY (elp_fbnds <* QUERY (bnds <* bounds| 
('PLANT_SPATIAL_CONFIGURATION.EDGE_LOOP' IN TYPEOF(bnds.bound)))| NOT 
(SIZEOF(QUERY (oe <* elp_fbnds.bound\path.edge_list| 
('PLANT_SPATIAL_CONFIGURATION.SURFACE_CURVE' IN 
TYPEOF(oe\oriented_edge.edge_element\edge_curve.edge_geometry)) AND NOT 
(SIZEOF(QUERY (sc_ag <* 
oe.edge_element\edge_curve.edge_geometry\surface_curve.associated_geometry |
 NOT ('PLANT_SPATIAL_CONFIGURATION.PCURVE' IN TYPEOF(sc_ag)))) = 0))) = 0))) = 0;
      WR10:
         (NOT ('PLANT_SPATIAL_CONFIGURATION.SWEPT_SURFACE' IN 
TYPEOF(face_geometry)) OR (NOT ('PLANT_SPATIAL_CONFIGURATION.POLYLINE' 
IN TYPEOF(face_geometry\swept_surface.swept_curve)) OR 
(SIZEOF(face_geometry\swept_surface.swept_curve\polyline.points) >= 
3))) AND (SIZEOF(QUERY (elp_fbnds <* QUERY (bnds <* bounds| 
('PLANT_SPATIAL_CONFIGURATION.EDGE_LOOP' IN TYPEOF(bnds.bound)))| NOT 
(SIZEOF(QUERY (oe <* elp_fbnds.bound\path.edge_list| 
('PLANT_SPATIAL_CONFIGURATION.POLYLINE' IN 
TYPEOF(oe\oriented_edge.edge_element\edge_curve.edge_geometry)) AND NOT 
(SIZEOF(oe\oriented_edge.edge_element\edge_curve.edge_geometry\polyline
.points) >= 3))) = 0))) = 0);
   END_ENTITY;

   ENTITY amount_of_substance_measure_with_unit
   SUBTYPE OF (measure_with_unit);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.AMOUNT_OF_SUBSTANCE_UNIT' IN 
TYPEOF(SELF\measure_with_unit.unit_component);
   END_ENTITY;

   ENTITY amount_of_substance_unit
   SUBTYPE OF (named_unit);
   WHERE
      WR1:
         ((((((SELF\named_unit.dimensions.length_exponent = 0.00000) 
AND (SELF\named_unit.dimensions.mass_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.time_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.electric_current_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 
0.00000)) AND (SELF\named_unit.dimensions.amount_of_substance_exponent 
= 1.00000)) AND (SELF\named_unit.dimensions.luminous_intensity_exponent 
= 0.00000);
   END_ENTITY;

   ENTITY analysis_tracing_representation
   SUBTYPE OF (representation);
   END_ENTITY;

   ENTITY angular_location
   SUBTYPE OF (dimensional_location);
      angle_selection : angle_relator;
   END_ENTITY;

   ENTITY annotation_curve_occurrence
   SUBTYPE OF (annotation_occurrence);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.CURVE' IN 
TYPEOF(SELF\styled_item.item);
   END_ENTITY;

   ENTITY annotation_fill_area
   SUBTYPE OF (geometric_representation_item);
      boundaries : SET [1:?] OF curve;
   END_ENTITY;

   ENTITY annotation_fill_area_occurrence
   SUBTYPE OF (annotation_occurrence);
      fill_style_target : point;
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.ANNOTATION_FILL_AREA' IN 
TYPEOF(SELF.item);
   END_ENTITY;

   ENTITY annotation_occurrence
   SUPERTYPE OF (ONEOF(annotation_point_occurrence, 
annotation_curve_occurrence, annotation_fill_area_occurrence, 
annotation_text_occurrence, annotation_symbol_occurrence))
   SUBTYPE OF (styled_item);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_REPRESENTATION_ITEM' IN 
TYPEOF(SELF);
   END_ENTITY;

   ENTITY annotation_occurrence_relationship;
      name : label;
      description : text;
      relating_annotation_occurrence : annotation_occurrence;
      related_annotation_occurrence : annotation_occurrence;
   END_ENTITY;

   ENTITY annotation_point_occurrence
   SUBTYPE OF (annotation_occurrence);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.POINT' IN 
TYPEOF(SELF\styled_item.item);
   END_ENTITY;

   ENTITY annotation_symbol
   SUBTYPE OF (mapped_item);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.SYMBOL_REPRESENTATION_MAP' IN 
TYPEOF(SELF\mapped_item.mapping_source);
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.SYMBOL_TARGET' IN 
TYPEOF(SELF\mapped_item.mapping_target);
      WR3:
         'PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_REPRESENTATION_ITEM' IN 
TYPEOF(SELF);
   END_ENTITY;

   ENTITY annotation_symbol_occurrence
   SUBTYPE OF (annotation_occurrence);
   WHERE
      WR1:
         SIZEOF([ 'PLANT_SPATIAL_CONFIGURATION.ANNOTATION_SYMBOL', 
'PLANT_SPATIAL_CONFIGURATION.DEFINED_SYMBOL' ] * 
TYPEOF(SELF\styled_item.item)) > 0;
   END_ENTITY;

   ENTITY annotation_text
   SUBTYPE OF (mapped_item);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT' IN 
TYPEOF(SELF\mapped_item.mapping_target);
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.TEXT_STRING_REPRESENTATION' IN 
TYPEOF(SELF\mapped_item.mapping_source.mapped_representation);
      WR3:
         'PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_REPRESENTATION_ITEM' IN 
TYPEOF(SELF);
   END_ENTITY;

ENTITY annotation_text_character
  SUBTYPE OF (mapped_item);
  alignment : text_alignment;
  WHERE
    WR1: 'PLANT_SPATIAL_CONFIGURATION.CHARACTER_GLYPH_SYMBOL' IN
         TYPEOF (SELF\mapped_item.mapping_source.mapped_representation);
    WR2: 'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT' IN
         TYPEOF (SELF\mapped_item.mapping_target);
    WR3: 'PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_REPRESENTATION_ITEM' IN
         TYPEOF (SELF);
END_ENTITY;

   ENTITY annotation_text_occurrence
   SUBTYPE OF (annotation_occurrence);
   WHERE
      WR1:
         SIZEOF([ 'PLANT_SPATIAL_CONFIGURATION.TEXT_LITERAL', 
'PLANT_SPATIAL_CONFIGURATION.ANNOTATION_TEXT', 
'PLANT_SPATIAL_CONFIGURATION.ANNOTATION_TEXT_CHARACTER', 
'PLANT_SPATIAL_CONFIGURATION.DEFINED_CHARACTER_GLYPH', 
'PLANT_SPATIAL_CONFIGURATION.COMPOSITE_TEXT' ] * 
TYPEOF(SELF\styled_item.item)) > 0;
   END_ENTITY;

   ENTITY annotation_text_with_extent
   SUBTYPE OF (annotation_text);
      extent : planar_extent;
   END_ENTITY;

   ENTITY application_context;
      application : label;
   DERIVE
      description : text := get_description_value(SELF);
      id : identifier := get_id_value(SELF);
   INVERSE
      context_elements : SET [1:?] OF application_context_element FOR 
frame_of_reference;
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
      WR2:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ID_ATTRIBUTE.IDENTIFIED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY application_context_element
   SUPERTYPE OF (ONEOF(product_context, product_definition_context));
      name : label;
      frame_of_reference : application_context;
   END_ENTITY;

   ENTITY application_protocol_definition;
      status : label;
      application_interpreted_model_schema_name : label;
      application_protocol_year : year_number;
      application : application_context;
   END_ENTITY;

   ENTITY applied_action_request_assignment
   SUBTYPE OF (action_request_assignment);
      items : SET [1:?] OF action_request_item;
   END_ENTITY;

   ENTITY applied_approval_assignment
   SUBTYPE OF (approval_assignment);
      items : SET [1:?] OF approval_item;
   END_ENTITY;

   ENTITY applied_classification_assignment
   SUBTYPE OF (classification_assignment);
      items : SET [1:?] OF classification_item;
   WHERE
      WR1:
         NOT (SIZEOF(QUERY (item <* SELF.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTION' IN TYPEOF(item)))) 
= 0) OR (SIZEOF(TYPEOF(SELF.assigned_class) * [ 
'PLANT_SPATIAL_CONFIGURATION.CONNECTION_FUNCTIONAL_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.CONNECTION_MOTION_CLASS' ]) >= 1);
      WR2:
         NOT (SIZEOF(QUERY (item <* SELF.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTOR' IN TYPEOF(item)))) 
= 0) OR (SIZEOF(TYPEOF(SELF.assigned_class) * [ 
'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.ELECTRICAL_CONNECTOR_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.MECHANICAL_CONNECTOR_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.EXTERNALLY_DEFINED_CLASS', 
('PLANT_SPATIAL_CONFIGURATION.' + 'STRUCTURAL_LOAD_CONNECTOR_CLASS') ]) 
>= 1);
   END_ENTITY;

   ENTITY applied_date_and_time_assignment
   SUBTYPE OF (date_and_time_assignment);
      items : SET [1:?] OF date_and_time_item;
   END_ENTITY;

   ENTITY applied_date_assignment
   SUBTYPE OF (date_assignment);
      items : SET [1:?] OF dated_item;
   END_ENTITY;

   ENTITY applied_document_reference
   SUBTYPE OF (document_reference);
      items : SET [1:?] OF document_item;
   END_ENTITY;

   ENTITY applied_document_usage_constraint_assignment
   SUBTYPE OF (document_usage_constraint_assignment);
      items : SET [1:?] OF document_item;
   END_ENTITY;

   ENTITY applied_effectivity_assignment
   SUBTYPE OF (effectivity_assignment);
      items : SET [1:?] OF effectivity_item;
   END_ENTITY;

   ENTITY applied_effectivity_context_assignment
   SUBTYPE OF (effectivity_context_assignment);
      items : SET [1:?] OF effectivity_context_item;
   END_ENTITY;

   ENTITY applied_identification_assignment
   SUBTYPE OF (identification_assignment);
      items : SET [1:?] OF identified_item;
   WHERE
      WR1:
         applied_identification_correlation(SELF);
   END_ENTITY;

   ENTITY approval;
      status : approval_status;
      level : label;
   END_ENTITY;

   ENTITY approval_assignment
   ABSTRACT SUPERTYPE;
      assigned_approval : approval;
   DERIVE
      role : object_role := get_role(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;
   END_ENTITY;

   ENTITY approval_date_time;
      date_time : date_time_select;
      dated_approval : approval;
   DERIVE
      role : object_role := get_role(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;
   END_ENTITY;

   ENTITY approval_person_organization;
      person_organization : person_organization_select;
      authorized_approval : approval;
      role : approval_role;
   END_ENTITY;

   ENTITY approval_role;
      role : label;
   DERIVE
      description : text := get_description_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY approval_status;
      name : label;
   END_ENTITY;

   ENTITY area_dependent_annotation_representation
   SUBTYPE OF (presentation_representation);
   WHERE
      WR1:
         SIZEOF(QUERY (item <* SELF\representation.items| NOT (SIZEOF([ 
('PLANT_SPATIAL_CONFIGURATION.' + 'ANNOTATION_OCCURRENCE'), 
'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT' ] * TYPEOF(item)) = 1))) 
= 0;
      WR2:
         SIZEOF(QUERY (item <* SELF\representation.items| 
('PLANT_SPATIAL_CONFIGURATION.ANNOTATION_OCCURRENCE' IN TYPEOF(item)))) 
>= 1;
   END_ENTITY;

   ENTITY area_in_set;
      area : presentation_area;
      in_set : presentation_set;
   END_ENTITY;

   ENTITY arrangement_branch_connection
   SUBTYPE OF (shape_aspect_relationship);
   WHERE
      WR1:
         SELF.description = 'branch location';
      WR2:
         
'PLANT_SPATIAL_CONFIGURATION.PLANT_ARRANGEMENT_SEGMENT_DEFINITION' IN 
TYPEOF(SELF.relating_shape_aspect.of_shape.definition);
      WR3:
         
'PLANT_SPATIAL_CONFIGURATION.PLANT_ARRANGEMENT_SEGMENT_TERMINATION' IN 
TYPEOF(SELF.related_shape_aspect);
   END_ENTITY;

   ENTITY arrangement_less_mechanical_system
   SUBTYPE OF (product_definition);
   END_ENTITY;

   ENTITY arrangement_load
   SUBTYPE OF (property_definition);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.DESIGN_ARRANGEMENT_PERFORMANCE' 
IN TYPEOF(SELF.definition);
      WR2:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'arrangement load characteristics'))) = 
1;
      WR3:
         SIZEOF(QUERY (spc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'arrangement load characteristics'))| 
NOT (SIZEOF(spc.used_representation.items) >= 1))) = 0;
      WR4:
         SIZEOF(QUERY (spc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'arrangement load characteristics'))| 
NOT (SIZEOF(QUERY (it <* spc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'constituent loads'))) = 1))) = 0;
   END_ENTITY;

   ENTITY arrangement_plant_item_branch_connection
   SUBTYPE OF (shape_aspect_relationship);
   END_ENTITY;

   ENTITY arrangement_plant_item_connection
   SUBTYPE OF (shape_aspect_relationship);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.' + 
'PLANT_ARRANGEMENT_SEGMENT_TERMINATION' IN 
TYPEOF(SELF.relating_shape_aspect);
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTOR' IN 
TYPEOF(SELF.related_shape_aspect);
      WR3:
         
SELF\shape_aspect_relationship.related_shape_aspect.
of_shape\property_definition.definition\product_definition.
frame_of_reference\application_context_element.name = 'physical occurrence';
   END_ENTITY;

   ENTITY arrangement_termination_connection
   SUBTYPE OF (shape_aspect_relationship);
   WHERE
      WR1:
         SIZEOF(TYPEOF(SELF.relating_shape_aspect) * [ 
'PLANT_SPATIAL_CONFIGURATION.CONNECTION_NODE', 
'PLANT_SPATIAL_CONFIGURATION.PLANT_ARRANGEMENT_SEGMENT_TERMINATION' ]) 
>= 1;
      WR2:
         
'PLANT_SPATIAL_CONFIGURATION.PLANT_ARRANGEMENT_SEGMENT_TERMINATION' IN 
TYPEOF(SELF.related_shape_aspect);
   END_ENTITY;

   ENTITY assembly_component_usage
   SUBTYPE OF (product_definition_usage);
      reference_designator : OPTIONAL identifier;
   END_ENTITY;

   ENTITY axis1_placement
   SUBTYPE OF (placement);
      axis : OPTIONAL direction;
   DERIVE
      z : direction := NVL(normalise(axis), dummy_gri || direction([ 
0.00000, 0.00000, 1.00000 ]));
   WHERE
      WR1:
         SELF\geometric_representation_item.dim = 3;
   END_ENTITY;

   ENTITY axis2_placement_2d
   SUBTYPE OF (placement);
      ref_direction : OPTIONAL direction;
   DERIVE
      p : LIST [2:2] OF direction := build_2axes(ref_direction);
   WHERE
      WR1:
         SELF\geometric_representation_item.dim = 2;
   END_ENTITY;

   ENTITY axis2_placement_3d
   SUBTYPE OF (placement);
      axis : OPTIONAL direction;
      ref_direction : OPTIONAL direction;
   DERIVE
      p : LIST [3:3] OF direction := build_axes(axis, ref_direction);
   WHERE
      WR1:
         SELF\placement.location.dim = 3;
      WR2:
         NOT EXISTS(axis) OR (axis.dim = 3);
      WR3:
         NOT EXISTS(ref_direction) OR (ref_direction.dim = 3);
      WR4:
         (NOT EXISTS(axis) OR NOT EXISTS(ref_direction)) OR 
(cross_product(axis, ref_direction).magnitude > 0.00000);
   END_ENTITY;

   ENTITY b_spline_curve
   SUPERTYPE OF (ONEOF(uniform_curve, b_spline_curve_with_knots, 
quasi_uniform_curve, bezier_curve) ANDOR rational_b_spline_curve)
   SUBTYPE OF (bounded_curve);
      degree : INTEGER;
      control_points_list : LIST [2:?] OF cartesian_point;
      curve_form : b_spline_curve_form;
      closed_curve : LOGICAL;
      self_intersect : LOGICAL;
   DERIVE
      upper_index_on_control_points : INTEGER := 
SIZEOF(control_points_list) - 1;
      control_points : ARRAY [0:upper_index_on_control_points] OF 
cartesian_point := list_to_array(control_points_list, 0, 
upper_index_on_control_points);
   WHERE
      WR1:
         ((('PLANT_SPATIAL_CONFIGURATION.UNIFORM_CURVE' IN 
TYPEOF(SELF)) OR ('PLANT_SPATIAL_CONFIGURATION.QUASI_UNIFORM_CURVE' IN 
TYPEOF(SELF))) OR ('PLANT_SPATIAL_CONFIGURATION.BEZIER_CURVE' IN 
TYPEOF(SELF))) OR 
('PLANT_SPATIAL_CONFIGURATION.B_SPLINE_CURVE_WITH_KNOTS' IN 
TYPEOF(SELF));
   END_ENTITY;

   ENTITY b_spline_curve_with_knots
   SUBTYPE OF (b_spline_curve);
      knot_multiplicities : LIST [2:?] OF INTEGER;
      knots : LIST [2:?] OF parameter_value;
      knot_spec : knot_type;
   DERIVE
      upper_index_on_knots : INTEGER := SIZEOF(knots);
   WHERE
      WR1:
         constraints_param_b_spline(degree, upper_index_on_knots, 
upper_index_on_control_points, knot_multiplicities, knots);
      WR2:
         SIZEOF(knot_multiplicities) = upper_index_on_knots;
   END_ENTITY;

   ENTITY b_spline_surface
   SUPERTYPE OF (ONEOF(b_spline_surface_with_knots, uniform_surface, 
quasi_uniform_surface, bezier_surface) ANDOR rational_b_spline_surface)
   SUBTYPE OF (bounded_surface);
      u_degree : INTEGER;
      v_degree : INTEGER;
      control_points_list : LIST [2:?] OF LIST [2:?] OF 
cartesian_point;
      surface_form : b_spline_surface_form;
      u_closed : LOGICAL;
      v_closed : LOGICAL;
      self_intersect : LOGICAL;
   DERIVE
      u_upper : INTEGER := SIZEOF(control_points_list) - 1;
      v_upper : INTEGER := SIZEOF(control_points_list[1]) - 1;
      control_points : ARRAY [0:u_upper] OF ARRAY [0:v_upper] OF 
cartesian_point := make_array_of_array(control_points_list, 0, u_upper, 
0, v_upper);
   WHERE
      WR1:
         ((('PLANT_SPATIAL_CONFIGURATION.UNIFORM_SURFACE' IN 
TYPEOF(SELF)) OR ('PLANT_SPATIAL_CONFIGURATION.QUASI_UNIFORM_SURFACE' 
IN TYPEOF(SELF))) OR ('PLANT_SPATIAL_CONFIGURATION.BEZIER_SURFACE' IN 
TYPEOF(SELF))) OR 
('PLANT_SPATIAL_CONFIGURATION.B_SPLINE_SURFACE_WITH_KNOTS' IN 
TYPEOF(SELF));
   END_ENTITY;

   ENTITY b_spline_surface_with_knots
   SUBTYPE OF (b_spline_surface);
      u_multiplicities : LIST [2:?] OF INTEGER;
      v_multiplicities : LIST [2:?] OF INTEGER;
      u_knots : LIST [2:?] OF parameter_value;
      v_knots : LIST [2:?] OF parameter_value;
      knot_spec : knot_type;
   DERIVE
      knot_u_upper : INTEGER := SIZEOF(u_knots);
      knot_v_upper : INTEGER := SIZEOF(v_knots);
   WHERE
      WR1:
         constraints_param_b_spline(SELF\b_spline_surface.u_degree, 
knot_u_upper, SELF\b_spline_surface.u_upper, u_multiplicities, 
u_knots);
      WR2:
         constraints_param_b_spline(SELF\b_spline_surface.v_degree, 
knot_v_upper, SELF\b_spline_surface.v_upper, v_multiplicities, 
v_knots);
      WR3:
         SIZEOF(u_multiplicities) = knot_u_upper;
      WR4:
         SIZEOF(v_multiplicities) = knot_v_upper;
   END_ENTITY;

   ENTITY bezier_curve
   SUBTYPE OF (b_spline_curve);
   END_ENTITY;

   ENTITY bezier_surface
   SUBTYPE OF (b_spline_surface);
   END_ENTITY;

   ENTITY blank_fitting_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))) = 0))) = 0;
      WR2:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (pcd <* QUERY (it <* aca.items| 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))| NOT (SIZEOF(QUERY (aca1 <* 
USEDIN(pcd.formation.of_product, 'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
class_in_tree(aca1.assigned_class, 'blank'))) = 1))) = 0))) = 0;
   END_ENTITY;

   ENTITY block
   SUBTYPE OF (geometric_representation_item);
      position : axis2_placement_3d;
      x : positive_length_measure;
      y : positive_length_measure;
      z : positive_length_measure;
   END_ENTITY;

   ENTITY bolt_and_nut_component_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.BOLT_AND_NUT_COMPONENT_DEFINITION' IN 
TYPEOF(it)))) = 0))) = 0;
      WR2:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (pcd <* QUERY (it <* aca.items| 
('PLANT_SPATIAL_CONFIGURATION.BOLT_AND_NUT_COMPONENT_DEFINITION' IN 
TYPEOF(it)))| NOT (SIZEOF(QUERY (aca1 <* 
USEDIN(pcd.formation.of_product, 'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
class_in_tree(aca1.assigned_class, 'bolt and nut component'))) = 1))) = 
0))) = 0;
   END_ENTITY;

   ENTITY bolt_and_nut_component_definition
   SUBTYPE OF (product_definition);
   END_ENTITY;

   ENTITY bolt_and_nut_set_definition
   SUBTYPE OF (product_definition);
   END_ENTITY;

   ENTITY boolean_result
   SUBTYPE OF (geometric_representation_item);
      operator : boolean_operator;
      first_operand : boolean_operand;
      second_operand : boolean_operand;
   END_ENTITY;

   ENTITY boundary_curve
   SUBTYPE OF (composite_curve_on_surface);
   WHERE
      WR1:
         SELF\composite_curve.closed_curve;
   END_ENTITY;

   ENTITY bounded_curve
   SUPERTYPE OF (ONEOF(polyline, b_spline_curve, trimmed_curve, 
bounded_pcurve, bounded_surface_curve, composite_curve))
   SUBTYPE OF (curve);
   END_ENTITY;

   ENTITY bounded_pcurve
   SUBTYPE OF (pcurve, bounded_curve);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.BOUNDED_CURVE' IN 
TYPEOF(SELF\pcurve.reference_to_curve.items[1]);
   END_ENTITY;

   ENTITY bounded_surface
   SUPERTYPE OF (ONEOF(b_spline_surface, rectangular_trimmed_surface, 
curve_bounded_surface, rectangular_composite_surface))
   SUBTYPE OF (surface);
   END_ENTITY;

   ENTITY bounded_surface_curve
   SUBTYPE OF (surface_curve, bounded_curve);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.BOUNDED_CURVE' IN 
TYPEOF(SELF\surface_curve.curve_3d);
   END_ENTITY;

   ENTITY brep_with_voids
   SUBTYPE OF (manifold_solid_brep);
      voids : SET [1:?] OF oriented_closed_shell;
   END_ENTITY;

   ENTITY cableway_component_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'CLASSIFICATION_ASSIGNMENT.ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.CABLEWAY_COMPONENT_DEFINITION' IN 
TYPEOF(it)))) = 0))) = 0;
      WR2:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (pcd <* QUERY (it <* aca.items| 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))| NOT (SIZEOF(QUERY (aca1 <* 
USEDIN(pcd.formation.of_product, 'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
class_in_tree(aca1.assigned_class, 'cableway component'))) = 1))) = 
0))) = 0;
   END_ENTITY;

   ENTITY cableway_component_definition
   SUBTYPE OF (product_definition);
   END_ENTITY;

   ENTITY cableway_connector_class
   SUBTYPE OF (group);
   END_ENTITY;

   ENTITY cableway_system
   SUBTYPE OF (product_definition);
   WHERE
      WR1:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PLANT' IN 
TYPEOF(pdr.relating_product_definition.formation.of_product)) AND 
(pdr.relating_product_definition.frame_of_reference.
name = 'functional occurrence'))) = 1;
   END_ENTITY;

   ENTITY calendar_date
   SUBTYPE OF (date);
      day_component : day_in_month_number;
      month_component : month_in_year_number;
   WHERE
      WR1:
         valid_calendar_date(SELF);
   END_ENTITY;

   ENTITY camera_image
   SUBTYPE OF (mapped_item);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.CAMERA_USAGE' IN 
TYPEOF(SELF\mapped_item.mapping_source);
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.PLANAR_BOX' IN 
TYPEOF(SELF\mapped_item.mapping_target);
      WR3:
         'PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_REPRESENTATION_ITEM' IN 
TYPEOF(SELF);
   END_ENTITY;

   ENTITY camera_model
   SUPERTYPE OF (camera_model_d2)
   SUBTYPE OF (geometric_representation_item);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ITEM_DEFINED_TRANSFORMATION.' + 'TRANSFORM_ITEM_1')) + 
SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'REPRESENTATION_MAP.MAPPING_ORIGIN')) > 0;
      WR2:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'STYLED_ITEM.ITEM')) = 0;
   END_ENTITY;

   ENTITY camera_model_d2
   SUBTYPE OF (camera_model);
      view_window : planar_box;
      view_window_clipping : BOOLEAN;
   WHERE
      WR1:
         SELF\geometric_representation_item.dim = 2;
   END_ENTITY;

   ENTITY camera_model_d2_shape_clipping
   SUBTYPE OF (camera_model_d2);
      shape_clipping : curve;
   END_ENTITY;

   ENTITY camera_usage
   SUBTYPE OF (representation_map);
   WHERE
      WR1:
         NOT ('PLANT_SPATIAL_CONFIGURATION.PRESENTATION_REPRESENTATION' 
IN TYPEOF(SELF\representation_map.mapped_representation));
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.CAMERA_MODEL' IN 
TYPEOF(SELF\representation_map.mapping_origin);
   END_ENTITY;

   ENTITY cartesian_point
   SUBTYPE OF (point);
      coordinates : LIST [1:3] OF length_measure;
   END_ENTITY;

   ENTITY cartesian_transformation_operator
   SUPERTYPE OF (cartesian_transformation_operator_3d)
   SUBTYPE OF (geometric_representation_item, 
functionally_defined_transformation);
      axis1 : OPTIONAL direction;
      axis2 : OPTIONAL direction;
      local_origin : cartesian_point;
      scale : OPTIONAL REAL;
   DERIVE
      scl : REAL := NVL(scale, 1.00000);
   WHERE
      WR1:
         scl > 0.00000;
   END_ENTITY;

   ENTITY cartesian_transformation_operator_3d
   SUBTYPE OF (cartesian_transformation_operator);
      axis3 : OPTIONAL direction;
   DERIVE
      u : LIST [3:3] OF direction := base_axis(3, 
SELF\cartesian_transformation_operator.axis1, 
SELF\cartesian_transformation_operator.axis2, axis3);
   WHERE
      WR1:
         SELF\geometric_representation_item.dim = 3;
   END_ENTITY;

   ENTITY catalogue
   SUBTYPE OF (document, external_source);
   END_ENTITY;

   ENTITY catalogue_connector
   SUBTYPE OF (shape_aspect, externally_defined_item);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.CHARACTERIZED_OBJECT' IN 
TYPEOF(SELF.of_shape);
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.CATALOGUE' IN 
TYPEOF(SELF.source);
   END_ENTITY;

   ENTITY catalogue_item
   SUBTYPE OF (externally_defined_plant_item_definition);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.CATALOGUE' IN 
TYPEOF(SELF.source);
      WR2:
         SELF.frame_of_reference.name = 'physical definition';
   END_ENTITY;

   ENTITY celsius_temperature_measure_with_unit
   SUBTYPE OF (measure_with_unit);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.THERMODYNAMIC_TEMPERATURE_UNIT' 
IN TYPEOF(SELF\measure_with_unit.unit_component);
   END_ENTITY;

   ENTITY centre_of_symmetry
   SUBTYPE OF (derived_shape_aspect);
   WHERE
      WR1:
         SIZEOF(QUERY (sadr <* 
SELF\derived_shape_aspect.deriving_relationships| NOT 
('PLANT_SPATIAL_CONFIGURATION.SYMMETRIC_SHAPE_ASPECT' IN 
TYPEOF(sadr\shape_aspect_relationship.related_shape_aspect)))) = 0;
   END_ENTITY;

   ENTITY change_action
   SUBTYPE OF (directed_action);
   WHERE
      WR1:
         SIZEOF(QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 'ACTION_ASSIGNMENT.ASSIGNED_ACTION')| 
('PLANT_SPATIAL_CONFIGURATION.' + 
'PLANT_SPATIAL_CONFIGURATION_CHANGE_ASSIGNMENT' IN TYPEOF(ca)))) >= 1;
      WR2:
         SIZEOF(QUERY (ar <* SELF\directed_action.directive.requests| 
NOT (SIZEOF(USEDIN(ar, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ACTION_REQUEST_SOLUTION.REQUEST')) = 1))) = 0;
      WR3:
         SIZEOF(USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.ACTION_STATUS.' + 'ASSIGNED_ACTION')) = 1;
   END_ENTITY;

   ENTITY change_item_id_assignment
   SUBTYPE OF (name_assignment);
      items : SET [1:?] OF change_item;
   END_ENTITY;

   ENTITY change_life_cycle_stage_assignment
   SUBTYPE OF (group_assignment);
      items : SET [1:?] OF change_life_cycle_item;
   END_ENTITY;

   ENTITY character_glyph_symbol
   SUBTYPE OF (symbol_representation);
     character_box  : planar_extent;
     baseline_ratio : ratio_measure;
   DERIVE
     box_height : length_measure := character_box.size_in_y;
   WHERE
     WR1: {0.0 <= baseline_ratio <= 1.0};
     WR2: item_in_context(SELF.character_box, 
                       SELF\representation.context_of_items);
     WR3: 'PLANT_SPATIAL_CONFIGURATION.POSITIVE_LENGTH_MEASURE'
        IN TYPEOF (SELF.box_height);
   END_ENTITY;

   ENTITY characterized_object;
      name : label;
      description : OPTIONAL text;
   END_ENTITY;

   ENTITY circle
   SUBTYPE OF (conic);
      radius : positive_length_measure;
   END_ENTITY;

   ENTITY clamp_component_definition
   SUBTYPE OF (product_definition);
   END_ENTITY;

   ENTITY clamp_set_definition
   SUBTYPE OF (product_definition);
   END_ENTITY;

   ENTITY classification_assignment
   ABSTRACT SUPERTYPE;
      assigned_class : group;
      role : classification_role;
   END_ENTITY;

   ENTITY classification_role;
      name : label;
      description : OPTIONAL text;
   END_ENTITY;

   ENTITY closed_shell
   SUBTYPE OF (connected_face_set);
   END_ENTITY;

   ENTITY colour;
   END_ENTITY;

   ENTITY colour_rgb
   SUBTYPE OF (colour_specification);
      red : REAL;
      green : REAL;
      blue : REAL;
   WHERE
      WR1:
         (0.00000 <= red) AND (red <= 1.00000);
      WR2:
         (0.00000 <= green) AND (green <= 1.00000);
      WR3:
         (0.00000 <= blue) AND (blue <= 1.00000);
   END_ENTITY;

   ENTITY colour_specification
   SUBTYPE OF (colour);
      name : label;
   END_ENTITY;

   ENTITY composite_curve
   SUBTYPE OF (bounded_curve);
      segments : LIST [1:?] OF composite_curve_segment;
      self_intersect : LOGICAL;
   DERIVE
      n_segments : INTEGER := SIZEOF(segments);
      closed_curve : LOGICAL := segments[n_segments].transition <> 
discontinuous;
   WHERE
      WR1:
         NOT closed_curve AND (SIZEOF(QUERY (temp <* segments| 
(temp.transition = discontinuous))) = 1) OR closed_curve AND 
(SIZEOF(QUERY (temp <* segments| (temp.transition = discontinuous))) = 
0);
   END_ENTITY;

   ENTITY composite_curve_on_surface
   SUPERTYPE OF (boundary_curve)
   SUBTYPE OF (composite_curve);
   DERIVE
      basis_surface : SET [0:2] OF surface := get_basis_surface(SELF);
   WHERE
      WR1:
         SIZEOF(basis_surface) > 0;
      WR2:
         constraints_composite_curve_on_surface(SELF);
   END_ENTITY;

   ENTITY composite_curve_segment
   SUBTYPE OF (founded_item);
      transition : transition_code;
      same_sense : BOOLEAN;
      parent_curve : curve;
   INVERSE
      using_curves : BAG [1:?] OF composite_curve FOR segments;
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.BOUNDED_CURVE' IN 
TYPEOF(parent_curve);
   END_ENTITY;

  ENTITY composite_text
    SUBTYPE OF (geometric_representation_item);
    collected_text : SET[2:?] of text_or_character;
  WHERE
    WR1: acyclic_composite_text( SELF, SELF.collected_text);
  END_ENTITY;

   ENTITY conic
   SUPERTYPE OF (ONEOF(circle, ellipse, hyperbola, parabola))
   SUBTYPE OF (curve);
      position : axis2_placement;
   END_ENTITY;

   ENTITY conical_surface
   SUBTYPE OF (elementary_surface);
      radius : length_measure;
      semi_angle : plane_angle_measure;
   WHERE
      WR1:
         radius >= 0.00000;
   END_ENTITY;

   ENTITY connected_face_set
   SUPERTYPE OF (ONEOF(closed_shell, open_shell))
   SUBTYPE OF (topological_representation_item);
      cfs_faces : SET [1:?] OF face;
   END_ENTITY;

   ENTITY connection_functional_class
   SUBTYPE OF (group);
   END_ENTITY;

   ENTITY connection_material_definition
   SUBTYPE OF (product_definition);
   END_ENTITY;

   ENTITY connection_motion_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SELF.name IN [ 'flexible', 'locked orientation' ];
   END_ENTITY;

   ENTITY connection_node
   SUBTYPE OF (shape_aspect);
   WHERE
      WR1:
         ('PLANT_SPATIAL_CONFIGURATION.PIPING_SYSTEM' IN 
TYPEOF(SELF.of_shape.definition)) AND (SIZEOF(QUERY (sar <* 
USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.SHAPE_ASPECT_RELATIONSHIP.' + 
'RELATING_SHAPE_ASPECT')| 
('PLANT_SPATIAL_CONFIGURATION.LINE_TERMINATION_CONNECTION' IN 
TYPEOF(sar)))) >= 2) XOR 
('PLANT_SPATIAL_CONFIGURATION.MECHANICAL_SYSTEM' IN 
TYPEOF(SELF.of_shape.definition)) AND (SIZEOF(QUERY (sar <* 
USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.SHAPE_ASPECT_RELATIONSHIP.' + 
'RELATING_SHAPE_ASPECT')| 
('PLANT_SPATIAL_CONFIGURATION.ARRANGEMENT_TERMINATION_CONNECTION' IN 
TYPEOF(sar)))) >= 2);
   END_ENTITY;

   ENTITY connector_end_type_class
   SUBTYPE OF (group);
   END_ENTITY;

   ENTITY context_dependent_invisibility
   SUBTYPE OF (invisibility);
      presentation_context : invisibility_context;
   END_ENTITY;

   ENTITY context_dependent_unit
   SUBTYPE OF (named_unit);
      name : label;
   END_ENTITY;

   ENTITY conversion_based_unit
   SUBTYPE OF (named_unit);
      name : label;
      conversion_factor : measure_with_unit;
   END_ENTITY;

   ENTITY coordinated_universal_time_offset;
      hour_offset : INTEGER;
      minute_offset : OPTIONAL INTEGER;
      sense : ahead_or_behind;
   DERIVE
      actual_minute_offset : INTEGER := NVL(minute_offset, 0);
   WHERE
      WR1:
         (0 <= hour_offset) AND (hour_offset < 24);
      WR2:
         (0 <= actual_minute_offset) AND (actual_minute_offset <= 59);
      WR3:
         NOT (((hour_offset <> 0) OR (actual_minute_offset <> 0)) AND 
(sense = exact));
   END_ENTITY;

   ENTITY csg_solid
   SUBTYPE OF (solid_model);
      tree_root_expression : csg_select;
   END_ENTITY;

   ENTITY curve
   SUPERTYPE OF (ONEOF(line, conic, pcurve, surface_curve, 
offset_curve_2d, offset_curve_3d, curve_replica))
   SUBTYPE OF (geometric_representation_item);
   END_ENTITY;

   ENTITY curve_bounded_surface
   SUBTYPE OF (bounded_surface);
      basis_surface : surface;
      boundaries : SET [1:?] OF boundary_curve;
      implicit_outer : BOOLEAN;
   WHERE
      WR1:
         NOT implicit_outer OR (SIZEOF(QUERY (temp <* boundaries| 
('PLANT_SPATIAL_CONFIGURATION.OUTER_BOUNDARY_CURVE' IN TYPEOF(temp)))) 
= 0);
      WR2:
         NOT implicit_outer OR 
('PLANT_SPATIAL_CONFIGURATION.BOUNDED_SURFACE' IN 
TYPEOF(basis_surface));
      WR3:
         SIZEOF(QUERY (temp <* boundaries| 
('PLANT_SPATIAL_CONFIGURATION.OUTER_BOUNDARY_CURVE' IN TYPEOF(temp)))) 
<= 1;
      WR4:
         SIZEOF(QUERY (temp <* boundaries| 
(temp\composite_curve_on_surface.basis_surface[1] <> 
SELF.basis_surface))) = 0;
   END_ENTITY;

   ENTITY curve_replica
   SUBTYPE OF (curve);
      parent_curve : curve;
      transformation : cartesian_transformation_operator;
   WHERE
      WR1:
         transformation.dim = parent_curve.dim;
      WR2:
         acyclic_curve_replica(SELF, parent_curve);
   END_ENTITY;

   ENTITY curve_style;
      name : label;
      curve_font : curve_font_or_scaled_curve_font_select;
      curve_width : size_select;
      curve_colour : colour;
   END_ENTITY;

   ENTITY curve_style_font;
      name : label;
      pattern_list : LIST [1:?] OF curve_style_font_pattern;
   END_ENTITY;

   ENTITY curve_style_font_pattern;
      visible_segment_length : positive_length_measure;
      invisible_segment_length : positive_length_measure;
   END_ENTITY;

   ENTITY curve_style_wide
   SUBTYPE OF (curve_style_font);
      interior_style : fill_area_style;
   END_ENTITY;

   ENTITY cyclide_segment_solid
   SUBTYPE OF (geometric_representation_item);
      position : axis2_placement_3d;
      radius1 : positive_length_measure;
      radius2 : positive_length_measure;
      cone_angle1 : plane_angle_measure;
      cone_angle2 : plane_angle_measure;
      turn_angle : plane_angle_measure;
   END_ENTITY;

   ENTITY cylindrical_surface
   SUBTYPE OF (elementary_surface);
      radius : positive_length_measure;
   END_ENTITY;

   ENTITY data_environment;
      name : label;
      description : text;
      elements : SET [1:?] OF property_definition_representation;
   END_ENTITY;

   ENTITY date
   SUPERTYPE OF (calendar_date);
      year_component : year_number;
   END_ENTITY;

   ENTITY date_and_time;
      date_component : date;
      time_component : local_time;
   END_ENTITY;

   ENTITY date_and_time_assignment
   ABSTRACT SUPERTYPE;
      assigned_date_and_time : date_and_time;
      role : date_time_role;
   END_ENTITY;

   ENTITY date_assignment
   ABSTRACT SUPERTYPE;
      assigned_date : date;
      role : date_role;
   END_ENTITY;

   ENTITY date_role;
      name : label;
   DERIVE
      description : text := get_description_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY date_time_role;
      name : label;
   DERIVE
      description : text := get_description_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
   END_ENTITY;

  ENTITY defined_character_glyph
    SUBTYPE OF(geometric_representation_item);
    definition : defined_glyph_select;
    placement  : axis2_placement;
  END_ENTITY;

   ENTITY defined_symbol
   SUBTYPE OF (geometric_representation_item);
      definition : defined_symbol_select;
      target : symbol_target;
   END_ENTITY;

   ENTITY definitional_representation
   SUBTYPE OF (representation);
   WHERE
      WR1:
         
'PLANT_SPATIAL_CONFIGURATION.PARAMETRIC_REPRESENTATION_CONTEXT' IN 
TYPEOF(SELF\representation.context_of_items);
   END_ENTITY;

   ENTITY degenerate_pcurve
   SUBTYPE OF (point);
      basis_surface : surface;
      reference_to_curve : definitional_representation;
   WHERE
      WR1:
         SIZEOF(reference_to_curve\representation.items) = 1;
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.CURVE' IN 
TYPEOF(reference_to_curve\representation.items[1]);
      WR3:
         
reference_to_curve\representation.
items[1]\geometric_representation_item.dim = 2;
   END_ENTITY;

   ENTITY degenerate_toroidal_surface
   SUBTYPE OF (toroidal_surface);
      select_outer : BOOLEAN;
   WHERE
      WR1:
         major_radius < minor_radius;
   END_ENTITY;

   ENTITY derived_shape_aspect
   SUPERTYPE OF (centre_of_symmetry)
   SUBTYPE OF (shape_aspect);
   INVERSE
      deriving_relationships : SET [1:?] OF shape_aspect_relationship 
FOR relating_shape_aspect;
   WHERE
      WR1:
         SIZEOF(QUERY (dr <* 
SELF\derived_shape_aspect.deriving_relationships| NOT 
('PLANT_SPATIAL_CONFIGURATION.' + 'SHAPE_ASPECT_DERIVING_RELATIONSHIP' 
IN TYPEOF(dr)))) = 0;
   END_ENTITY;

   ENTITY derived_unit;
      elements : SET [1:?] OF derived_unit_element;
   DERIVE
      name : label := get_name_value(SELF);
   WHERE
      WR1:
         (SIZEOF(elements) > 1) OR (SIZEOF(elements) = 1) AND 
(elements[1].exponent <> 1.00000);
      WR2:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'NAME_ATTRIBUTE.NAMED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY derived_unit_element;
      unit : named_unit;
      exponent : REAL;
   END_ENTITY;

   ENTITY description_attribute;
      attribute_value : text;
      described_item : description_attribute_select;
   END_ENTITY;

   ENTITY descriptive_colour
   SUBTYPE OF (colour, descriptive_representation_item);
   END_ENTITY;

   ENTITY descriptive_representation_item
   SUBTYPE OF (representation_item);
      description : text;
   END_ENTITY;

   ENTITY design_arrangement_performance
   SUBTYPE OF (property_definition, characterized_object);
   WHERE
      WR1:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 'PROPERTY_DEFINITION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.ARRANGEMENT_LOAD' IN TYPEOF(pd)))) >= 1;
      WR2:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design arrangement characteristics'))) 
= 1;
      WR3:
         SIZEOF(QUERY (sfc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design arrangement characteristics'))| 
NOT (SIZEOF(sfc.used_representation.items) >= 1))) = 0;
      WR4:
         SIZEOF(QUERY (sfc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design arrangement characteristics'))| 
NOT (SIZEOF(QUERY (it <* sfc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'arrangement data reference'))) <= 1))) = 0;
   END_ENTITY;

   ENTITY design_project
   SUBTYPE OF (organization);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ORGANIZATION_ASSIGNMENT.ASSIGNED_ORGANIZATION')) >= 1;
   END_ENTITY;

   ENTITY design_project_assignment
   SUBTYPE OF (organization_assignment);
      items : SET [1:?] OF design_project_item;
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.DESIGN_PROJECT' IN 
TYPEOF(SELF.assigned_organization);
   END_ENTITY;

   ENTITY dimensional_characteristic_representation;
      dimension : dimensional_characteristic;
      representation : shape_dimension_representation;
   END_ENTITY;

   ENTITY dimensional_exponents;
      length_exponent : REAL;
      mass_exponent : REAL;
      time_exponent : REAL;
      electric_current_exponent : REAL;
      thermodynamic_temperature_exponent : REAL;
      amount_of_substance_exponent : REAL;
      luminous_intensity_exponent : REAL;
   END_ENTITY;

   ENTITY dimensional_location
   SUPERTYPE OF (angular_location)
   SUBTYPE OF (shape_aspect_relationship);
   END_ENTITY;

   ENTITY dimensional_size;
      applies_to : shape_aspect;
      name : label;
   WHERE
      WR1:
         applies_to.product_definitional = TRUE;
   END_ENTITY;

   ENTITY directed_action
   SUBTYPE OF (executed_action);
      directive : action_directive;
   END_ENTITY;

   ENTITY direction
   SUBTYPE OF (geometric_representation_item);
      direction_ratios : LIST [2:3] OF REAL;
   WHERE
      WR1:
         SIZEOF(QUERY (tmp <* direction_ratios| (tmp <> 0.00000))) > 0;
   END_ENTITY;

   ENTITY document;
      id : identifier;
      name : label;
      description : OPTIONAL text;
      kind : document_type;
   INVERSE
      representation_types : SET [0:?] OF document_representation_type 
FOR represented_document;
   END_ENTITY;

   ENTITY document_reference
   ABSTRACT SUPERTYPE;
      assigned_document : document;
      source : label;
   DERIVE
      role : object_role := get_role(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;
   END_ENTITY;

   ENTITY document_relationship;
      name : label;
      description : OPTIONAL text;
      relating_document : document;
      related_document : document;
   END_ENTITY;

   ENTITY document_representation_type;
      name : label;
      represented_document : document;
   END_ENTITY;

   ENTITY document_type;
      product_data_type : label;
   END_ENTITY;

   ENTITY document_usage_constraint;
      source : document;
      subject_element : label;
      subject_element_value : text;
   END_ENTITY;

   ENTITY document_usage_constraint_assignment
   ABSTRACT SUPERTYPE;
      assigned_document_usage : document_usage_constraint;
      role : document_usage_role;
   END_ENTITY;

   ENTITY document_usage_role;
      name : label;
      description : OPTIONAL text;
   END_ENTITY;

   ENTITY draughting_callout
   SUBTYPE OF (geometric_representation_item);
      contents : SET [1:?] OF draughting_callout_element;
   END_ENTITY;

   ENTITY draughting_callout_relationship;
      name : label;
      description : text;
      relating_draughting_callout : draughting_callout;
      related_draughting_callout : draughting_callout;
   END_ENTITY;

   ENTITY drawing_definition;
      drawing_number : identifier;
      drawing_type : OPTIONAL label;
   END_ENTITY;

   ENTITY drawing_revision
   SUBTYPE OF (presentation_set);
      revision_identifier : identifier;
      drawing_identifier : drawing_definition;
      intended_scale : OPTIONAL text;
   UNIQUE
      UR1 : revision_identifier, drawing_identifier;
   END_ENTITY;

   ENTITY drawing_revision_sequence;
      predecessor : drawing_revision;
      successor : drawing_revision;
   WHERE
      WR1:
         predecessor :<>: successor;
   END_ENTITY;

   ENTITY drawing_sheet_revision
   SUBTYPE OF (presentation_area);
      revision_identifier : identifier;
   WHERE
      WR1:
         SIZEOF(QUERY (item <* SELF\representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MAPPED_ITEM' IN TYPEOF(item)) AND 
('PLANT_SPATIAL_CONFIGURATION.DRAWING_SHEET_REVISION' IN 
TYPEOF(item\mapped_item.mapping_source.mapped_representation)))) = 0;
   END_ENTITY;

   ENTITY drawing_sheet_revision_usage
   SUBTYPE OF (area_in_set);
      sheet_number : identifier;
   UNIQUE
      UR1 : sheet_number, in_set;
   WHERE
      WR1:
         ('PLANT_SPATIAL_CONFIGURATION.DRAWING_SHEET_REVISION' IN 
TYPEOF(SELF\area_in_set.area)) AND 
('PLANT_SPATIAL_CONFIGURATION.DRAWING_REVISION' IN 
TYPEOF(SELF\area_in_set.in_set));
   END_ENTITY;

   ENTITY ducting_system
   SUBTYPE OF (product_definition);
   WHERE
      WR1:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PLANT' IN 
TYPEOF(pdr.relating_product_definition.formation.of_product)) AND 
(pdr.relating_product_definition.frame_of_reference.
name = 'functional occurrence'))) = 1;
   END_ENTITY;

   ENTITY eccentric_cone
   SUBTYPE OF (geometric_representation_item);
      position : axis2_placement_3d;
      semi_axis_1 : positive_length_measure;
      semi_axis_2 : positive_length_measure;
      height : positive_length_measure;
      x_offset : length_measure;
      y_offset : length_measure;
      ratio : REAL;
   WHERE
      WR1:
         ratio >= 0.00000;
   END_ENTITY;

   ENTITY edge
   SUPERTYPE OF (ONEOF(edge_curve, oriented_edge))
   SUBTYPE OF (topological_representation_item);
      edge_start : vertex;
      edge_end : vertex;
   END_ENTITY;

   ENTITY edge_curve
   SUBTYPE OF (edge, geometric_representation_item);
      edge_geometry : curve;
      same_sense : BOOLEAN;
   END_ENTITY;

   ENTITY edge_loop
   SUBTYPE OF (loop, path);
   DERIVE
      ne : INTEGER := SIZEOF(SELF\path.edge_list);
   WHERE
      WR1:
         SELF\path.edge_list[1].edge_start :=: 
SELF\path.edge_list[ne].edge_end;
   END_ENTITY;

   ENTITY effectivity
   SUPERTYPE OF (serial_numbered_effectivity);
      id : identifier;
   DERIVE
      name : label := get_name_value(SELF);
      description : text := get_description_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'NAME_ATTRIBUTE.NAMED_ITEM')) <= 1;
      WR2:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY effectivity_assignment
   ABSTRACT SUPERTYPE;
      assigned_effectivity : effectivity;
   DERIVE
      role : object_role := get_role(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;
   END_ENTITY;

   ENTITY effectivity_context_assignment
   ABSTRACT SUPERTYPE;
      assigned_effectivity_assignment : effectivity_assignment;
      role : effectivity_context_role;
   END_ENTITY;

   ENTITY effectivity_context_role;
      name : label;
      description : OPTIONAL text;
   END_ENTITY;

   ENTITY elbow_fitting_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'CLASSIFICATION_ASSIGNMENT.ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))) = 0))) = 0;
      WR2:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (pcd <* QUERY (it <* aca.items| 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))| NOT (SIZEOF(QUERY (aca1 <* 
USEDIN(pcd.formation.of_product, 'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
class_in_tree(aca1.assigned_class, 'elbow'))) = 1))) = 0))) = 0;
   END_ENTITY;

   ENTITY electric_current_measure_with_unit
   SUBTYPE OF (measure_with_unit);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.ELECTRIC_CURRENT_UNIT' IN 
TYPEOF(SELF\measure_with_unit.unit_component);
   END_ENTITY;

   ENTITY electric_current_unit
   SUBTYPE OF (named_unit);
   WHERE
      WR1:
         ((((((SELF\named_unit.dimensions.length_exponent = 0.00000) 
AND (SELF\named_unit.dimensions.mass_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.time_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.electric_current_exponent = 1.00000)) AND 
(SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 
0.00000)) AND (SELF\named_unit.dimensions.amount_of_substance_exponent 
= 0.00000)) AND (SELF\named_unit.dimensions.luminous_intensity_exponent 
= 0.00000);
   END_ENTITY;

   ENTITY electrical_connector_class
   SUBTYPE OF (group);
   END_ENTITY;

   ENTITY electrical_system
   SUBTYPE OF (product_definition);
   WHERE
      WR1:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PLANT' IN 
TYPEOF(pdr.relating_product_definition.formation.of_product)) AND 
(pdr.relating_product_definition.frame_of_reference.
name = 'functional occurrence'))) = 1;
   END_ENTITY;

   ENTITY elementary_surface
   SUPERTYPE OF (ONEOF(plane, cylindrical_surface, conical_surface, 
spherical_surface, toroidal_surface))
   SUBTYPE OF (surface);
      position : axis2_placement_3d;
   END_ENTITY;

   ENTITY ellipse
   SUBTYPE OF (conic);
      semi_axis_1 : positive_length_measure;
      semi_axis_2 : positive_length_measure;
   END_ENTITY;

   ENTITY ellipsoid
   SUBTYPE OF (geometric_representation_item);
      position : axis2_placement_3d;
      semi_axis_1 : positive_length_measure;
      semi_axis_2 : positive_length_measure;
      semi_axis_3 : positive_length_measure;
   END_ENTITY;

   ENTITY evaluated_degenerate_pcurve
   SUBTYPE OF (degenerate_pcurve);
      equivalent_point : cartesian_point;
   END_ENTITY;

   ENTITY executed_action
   SUBTYPE OF (action);
   END_ENTITY;

   ENTITY external_source;
      source_id : source_item;
   DERIVE
      description : text := get_description_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY external_source_relationship;
      name : label;
      description : OPTIONAL text;
      relating_source : external_source;
      related_source : external_source;
   END_ENTITY;

   ENTITY externally_defined_character_glyph
   SUBTYPE OF (externally_defined_item);
   END_ENTITY;

   ENTITY externally_defined_class
   SUBTYPE OF (group, externally_defined_item);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
((SIZEOF(TYPEOF(it) * [ 
'PLANT_SPATIAL_CONFIGURATION.ELECTRICAL_SYSTEM', 
'PLANT_SPATIAL_CONFIGURATION.DUCTING_SYSTEM', 
'PLANT_SPATIAL_CONFIGURATION.INSTRUMENTATION_AND_CONTROL_SYSTEM', 
'PLANT_SPATIAL_CONFIGURATION.MECHANICAL_SYSTEM', 
'PLANT_SPATIAL_CONFIGURATION.MECHANICAL_COMPONENT_DEFINITION', 
'PLANT_SPATIAL_CONFIGURATION.PIPING_SYSTEM', 
'PLANT_SPATIAL_CONFIGURATION.PLANT', 
'PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTOR', 
'PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION', 
'PLANT_SPATIAL_CONFIGURATION.STRUCTURAL_SYSTEM' ]) = 1) OR 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION' IN TYPEOF(it)) AND 
(SIZEOF(QUERY (pc <* it.formation.of_product.frame_of_reference| 
(pc.discipline_type = 'process plant'))) = 1)))) = 0))) = 0;
   END_ENTITY;

   ENTITY externally_defined_curve_font
   SUBTYPE OF (externally_defined_item);
   END_ENTITY;

   ENTITY externally_defined_document
   SUBTYPE OF (document, externally_defined_item);
   END_ENTITY;

   ENTITY externally_defined_hatch_style
   SUBTYPE OF (externally_defined_item, geometric_representation_item);
   END_ENTITY;

   ENTITY externally_defined_item;
      item_id : source_item;
      source : external_source;
   END_ENTITY;

   ENTITY externally_defined_item_relationship;
      name : label;
      description : OPTIONAL text;
      relating_item : externally_defined_item;
      related_item : externally_defined_item;
   END_ENTITY;

   ENTITY externally_defined_plant_item_definition
   SUBTYPE OF (product_definition, externally_defined_item);
   END_ENTITY;

   ENTITY externally_defined_representation_item
   SUBTYPE OF (representation_item, externally_defined_item);
   END_ENTITY;

   ENTITY externally_defined_style
   SUBTYPE OF (externally_defined_item);
   END_ENTITY;

   ENTITY externally_defined_symbol
   SUBTYPE OF (externally_defined_item);
   END_ENTITY;

   ENTITY externally_defined_text_font
   SUBTYPE OF (externally_defined_item);
   END_ENTITY;

   ENTITY externally_defined_tile_style
   SUBTYPE OF (externally_defined_item, geometric_representation_item);
   END_ENTITY;

   ENTITY extruded_area_solid
   SUBTYPE OF (swept_area_solid);
      extruded_direction : direction;
      depth : positive_length_measure;
   WHERE
      WR1:
         
dot_product(SELF\swept_area_solid.swept_area.
basis_surface\elementary_surface.position.p[3], extruded_direction) <> 0.00000;
   END_ENTITY;

   ENTITY extruded_face_solid
   SUBTYPE OF (swept_face_solid);
      extruded_direction : direction;
      depth : positive_length_measure;
   WHERE
      WR1:
         
dot_product(SELF\swept_face_solid.swept_face.
face_geometry\elementary_surface.position.p[3], extruded_direction) <> 0.00000;
   END_ENTITY;

   ENTITY face
   SUPERTYPE OF (ONEOF(face_surface, oriented_face))
   SUBTYPE OF (topological_representation_item);
      bounds : SET [1:?] OF face_bound;
   WHERE
      WR1:
         NOT mixed_loop_type_set(list_to_set(list_face_loops(SELF)));
      WR2:
         SIZEOF(QUERY (temp <* bounds| 
('PLANT_SPATIAL_CONFIGURATION.FACE_OUTER_BOUND' IN TYPEOF(temp)))) <= 
1;
   END_ENTITY;

   ENTITY face_bound
   SUBTYPE OF (topological_representation_item);
      bound : loop;
      orientation : BOOLEAN;
   END_ENTITY;

   ENTITY face_outer_bound
   SUBTYPE OF (face_bound);
   END_ENTITY;

   ENTITY face_surface
   SUBTYPE OF (face, geometric_representation_item);
      face_geometry : surface;
      same_sense : BOOLEAN;
   WHERE
      WR1:
         NOT ('PLANT_SPATIAL_CONFIGURATION.ORIENTED_SURFACE' IN 
TYPEOF(face_geometry));
   END_ENTITY;

   ENTITY faceted_brep
   SUBTYPE OF (manifold_solid_brep);
   END_ENTITY;

   ENTITY fill_area_style;
      name : label;
      fill_styles : SET [1:?] OF fill_style_select;
   WHERE
      WR1:
         SIZEOF(QUERY (fill_style <* SELF.fill_styles| 
('PLANT_SPATIAL_CONFIGURATION.' + 'FILL_AREA_STYLE_COLOUR' IN 
TYPEOF(fill_style)))) <= 1;
   END_ENTITY;

   ENTITY fill_area_style_colour;
      name : label;
      fill_colour : colour;
   END_ENTITY;

   ENTITY fill_area_style_hatching
   SUBTYPE OF (geometric_representation_item);
      hatch_line_appearance : curve_style;
      start_of_next_hatch_line : one_direction_repeat_factor;
      point_of_reference_hatch_line : cartesian_point;
      pattern_start : cartesian_point;
      hatch_line_angle : plane_angle_measure;
   END_ENTITY;

   ENTITY fill_area_style_tile_symbol_with_style
   SUBTYPE OF (geometric_representation_item);
      symbol : annotation_symbol_occurrence;
   END_ENTITY;

   ENTITY fill_area_style_tiles
   SUBTYPE OF (geometric_representation_item);
      tiling_pattern : two_direction_repeat_factor;
      tiles : SET [1:?] OF fill_area_style_tile_shape_select;
      tiling_scale : positive_ratio_measure;
   END_ENTITY;

   ENTITY flange_fitting_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'CLASSIFICATION_ASSIGNMENT.ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))) = 0))) = 0;
      WR2:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'CLASSIFICATION_ASSIGNMENT.ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (pcd <* QUERY (it <* aca.items| 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))| NOT (SIZEOF(QUERY (aca1 <* 
USEDIN(pcd.formation.of_product, 'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
class_in_tree(aca1.assigned_class, 'flange'))) = 1))) = 0))) = 0;
   END_ENTITY;

   ENTITY flange_fitting_neck_type_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))) = 0))) = 0;
      WR2:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (pcd <* QUERY (it <* aca.items| 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))| NOT (SIZEOF(QUERY (aca1 <* 
USEDIN(pcd.formation.of_product, 'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
class_in_tree(aca1.assigned_class, 'flange'))) = 1))) = 0))) = 0;
   END_ENTITY;

   ENTITY founded_item;
   END_ENTITY;

   ENTITY functionally_defined_transformation;
      name : label;
      description : OPTIONAL text;
   END_ENTITY;

   ENTITY geometric_curve_set
   SUBTYPE OF (geometric_set);
   WHERE
      WR1:
         SIZEOF(QUERY (temp <* SELF\geometric_set.elements| 
('PLANT_SPATIAL_CONFIGURATION.SURFACE' IN TYPEOF(temp)))) = 0;
   END_ENTITY;

   ENTITY geometric_representation_context
   SUBTYPE OF (representation_context);
      coordinate_space_dimension : dimension_count;
   END_ENTITY;

   ENTITY geometric_representation_item
   SUPERTYPE OF (ONEOF(point, direction, vector, placement, 
cartesian_transformation_operator, curve, surface, edge_curve, 
face_surface, poly_loop, vertex_point, solid_model, boolean_result, 
sphere, right_circular_cone, right_circular_cylinder, torus, block, 
right_angular_wedge, ellipsoid, rectangular_pyramid, 
cyclide_segment_solid, half_space_solid, half_space_2d, 
shell_based_wireframe_model, geometric_set))
   SUBTYPE OF (representation_item);
   DERIVE
      dim : dimension_count := dimension_of(SELF);
   WHERE
      WR1:
         SIZEOF(QUERY (using_rep <* using_representations(SELF)| NOT 
('PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_REPRESENTATION_CONTEXT' IN 
TYPEOF(using_rep.context_of_items)))) = 0;
   END_ENTITY;

   ENTITY geometric_set
   SUPERTYPE OF (ONEOF(geometric_curve_set, geometric_set_replica))
   SUBTYPE OF (geometric_representation_item);
      elements : SET [1:?] OF geometric_set_select;
   END_ENTITY;

   ENTITY geometric_set_replica
   SUBTYPE OF (geometric_set);
      parent_set : geometric_set;
      transformation : cartesian_transformation_operator;
   DERIVE
      SELF\geometric_set.elements : SET [1:?] OF geometric_set_select 
:= build_transformed_set(transformation, parent_set);
   WHERE
      WR1:
         acyclic_set_replica(SELF, parent_set);
   END_ENTITY;

   ENTITY global_uncertainty_assigned_context
   SUBTYPE OF (representation_context);
      uncertainty : SET [1:?] OF uncertainty_measure_with_unit;
   END_ENTITY;

   ENTITY global_unit_assigned_context
   SUBTYPE OF (representation_context);
      units : SET [1:?] OF unit;
   END_ENTITY;

   ENTITY graphical_transformation
   SUBTYPE OF (item_defined_transformation);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT_2D' IN 
TYPEOF(SELF\item_defined_transformation.transform_item_1);
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.PRESENTATION_SCALED_PLACEMENT' IN 
TYPEOF(SELF\item_defined_transformation.transform_item_2);
   END_ENTITY;

   ENTITY group;
      name : label;
      description : OPTIONAL text;
   DERIVE
      id : identifier := get_id_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ID_ATTRIBUTE.IDENTIFIED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY group_assignment
   ABSTRACT SUPERTYPE;
      assigned_group : group;
   DERIVE
      role : object_role := get_role(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;
   END_ENTITY;

   ENTITY group_relationship;
      name : label;
      description : OPTIONAL text;
      relating_group : group;
      related_group : group;
   END_ENTITY;

   ENTITY half_space_2d
   SUBTYPE OF (geometric_representation_item);
      base_curve : curve;
      agreement_flag : BOOLEAN;
   END_ENTITY;

   ENTITY half_space_solid
   SUBTYPE OF (geometric_representation_item);
      base_surface : surface;
      agreement_flag : BOOLEAN;
   END_ENTITY;

   ENTITY heat_tracing_representation
   SUBTYPE OF (representation);
   END_ENTITY;

   ENTITY hvac_branch_connection
   SUBTYPE OF (shape_aspect_relationship);
   WHERE
      WR1:
         SELF.description = 'branch location';
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.HVAC_SECTION_DEFINITION' IN 
TYPEOF(SELF.relating_shape_aspect.of_shape.definition);
      WR3:
         'PLANT_SPATIAL_CONFIGURATION.HVAC_SECTION_TERMINATION' IN 
TYPEOF(SELF.related_shape_aspect);
   END_ENTITY;

   ENTITY hvac_component_definition
   SUBTYPE OF (product_definition);
   END_ENTITY;

   ENTITY hvac_connector
   SUBTYPE OF (shape_aspect);
   WHERE
      WR1:
         
SELF\shape_aspect.of_shape\property_definition.
definition\product_definition.frame_of_reference\application_context_element.
name IN [ 'functional definition', 'physical definition',
 'functional occurrence', 'physical occurrence' ];
      WR2:
         NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY 
(pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))| NOT (SIZEOF(QUERY (pdr <* 
USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))) = 
1))) = 0);
      WR3:
         NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY 
(pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY 
(pdr <* USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| 
(SIZEOF(dsc.used_representation.items) >= 2))) = 1))) = 0);
      WR4:
         NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY 
(pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY 
(pdr <* USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| (1 
<= SIZEOF(QUERY (it <* dsc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name IN [ 'pressure', 'minimum pressure', 
'maximum pressure' ])))) AND (SIZEOF(QUERY (it <* dsc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name IN [ 'pressure', 'minimum pressure',
 'maximum pressure' ]))) <= 2))) = 1))) = 0);
      WR5:
         NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY 
(pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY 
(pdr <* USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| 
(SIZEOF(QUERY (it <* dsc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'pressure'))) <= 1))) = 1))) = 0);
      WR6:
         NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY 
(pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY 
(pdr <* USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| 
(SIZEOF(QUERY (it <* dsc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'minimum pressure'))) <= 1))) = 1))) = 0);
      WR7:
         NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY 
(pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY 
(pdr <* USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| 
(SIZEOF(QUERY (it <* dsc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'maximum pressure'))) <= 1))) = 1))) = 0);
      WR8:
         NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY 
(pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY 
(pdr <* USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| (1 
<= SIZEOF(QUERY (it <* dsc.used_representation.items| 
(SIZEOF(TYPEOF(it) * [ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name IN 
[ 'temperature', 'minimum temperature', 'maximum temperature' ])))) AND 
(SIZEOF(QUERY (it <* dsc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name IN 
[ 'temperature', 'minimum temperature', 'maximum temperature' ]))) <= 
2))) = 1))) = 0);
      WR9:
         NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY 
(pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY 
(pdr <* USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| 
(SIZEOF(QUERY (it <* dsc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name = 
'temperature'))) <= 1))) = 1))) = 0);
      WR10:
         NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY 
(pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY 
(pdr <* USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| 
(SIZEOF(QUERY (it <* dsc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name = 
'minimum temperature'))) <= 1))) = 1))) = 0);
      WR11:
         NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY 
(pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'hvac service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY 
(pdr <* USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| 
(SIZEOF(QUERY (it <* dsc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name = 
'maximum temperature'))) <= 1))) = 1))) = 0);
      WR12:
         NOT 
(SELF\shape_aspect.of_shape\property_definition.
definition\product_definition.frame_of_reference\application_context_element.
name IN [ 'functional definition', 'functional occurrence' ]) OR
 (SIZEOF(QUERY (pdr <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.SHAPE_REPRESENTATION' IN 
TYPEOF(pdr.used_representation)))) = 0);
   END_ENTITY;

   ENTITY hvac_cross_section
   SUBTYPE OF (shape_aspect);
   END_ENTITY;

   ENTITY hvac_fitting_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.HVAC_COMPONENT_DEFINITION' IN 
TYPEOF(it)))) = 0))) = 0;
      WR2:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (pcd <* QUERY (it <* aca.items| 
('PLANT_SPATIAL_CONFIGURATION.HVAC_COMPONENT_DEFINITION' IN 
TYPEOF(it)))| NOT (SIZEOF(QUERY (aca1 <* 
USEDIN(pcd.formation.of_product, 'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
class_in_tree(aca1.assigned_class, 'hvac fitting'))) = 1))) = 0))) = 0;
   END_ENTITY;

   ENTITY hvac_plant_item_branch_connection
   SUBTYPE OF (shape_aspect_relationship);
   WHERE
      WR1:
         SELF.description = 'branch location';
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.HVAC_SECTION_DEFINITION' IN 
TYPEOF(SELF.relating_shape_aspect.of_shape.definition);
      WR3:
         'PLANT_SPATIAL_CONFIGURATION.HVAC_CONNECTOR' IN 
TYPEOF(SELF.related_shape_aspect);
   END_ENTITY;

   ENTITY hvac_plant_item_connection
   SUBTYPE OF (shape_aspect_relationship);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.HVAC_SECTION_TERMINATION' IN 
TYPEOF(SELF.relating_shape_aspect);
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.HVAC_CONNECTOR' IN 
TYPEOF(SELF.related_shape_aspect);
      WR3:
         
SELF\shape_aspect_relationship.related_shape_aspect.
of_shape\property_definition.definition\product_definition.
frame_of_reference\application_context_element.name = 'physical occurrence';
   END_ENTITY;

   ENTITY hvac_run_definition
   SUBTYPE OF (product_definition);
   WHERE
      WR1:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.HVAC_SYSTEM' IN 
TYPEOF(pdr.relating_product_definition)))) = 1;
      WR2:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATING_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.HVAC_SECTION_DEFINITION' IN 
TYPEOF(pdr.related_product_definition)))) >= 1;
      WR3:
         SELF.frame_of_reference.name = 'functional definition';
      WR4:
         SIZEOF(QUERY (pds <* QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pd)))| NOT (SIZEOF(QUERY (sa <* USEDIN(pds, 
'PLANT_SPATIAL_CONFIGURATION.SHAPE_ASPECT.OF_SHAPE')| 
('PLANT_SPATIAL_CONFIGURATION.HVAC_SECTION_TERMINATION' IN TYPEOF(sa)) 
AND (sa.description = 'hvac run termination'))) <= 2))) = 0;
   END_ENTITY;

   ENTITY hvac_section_definition
   SUBTYPE OF (product_definition);
   WHERE
      WR1:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.HVAC_RUN_DEFINITION' IN 
TYPEOF(pdr.relating_product_definition)))) >= 1;
      WR2:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.SHAPE_DEFINITION' IN TYPEOF(pd)))) >= 1;
      WR3:
         SELF.frame_of_reference\application_context_element.name = 
'functional definition';
      WR4:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'hvac section characteristics'))) = 1;
      WR5:
         SIZEOF(QUERY (hssc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'hvac section characteristics'))| NOT 
((1 <= SIZEOF(QUERY (it <* hssc.used_representation.items| (it.name IN 
[ 'pressure drop', 'maximum pressure drop', 'minimum pressure drop ' 
])))) AND (SIZEOF(QUERY (it <* hssc.used_representation.items| (it.name 
IN [ 'pressure drop', 'maximum pressure drop', 'minimum pressure drop ' 
]))) <= 2)))) = 0;
      WR6:
         SIZEOF(QUERY (hssc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'hvac section characteristics'))| NOT 
(SIZEOF(QUERY (it <* hssc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'pressure drop'))) <= 1))) = 0;
      WR7:
         SIZEOF(QUERY (hssc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'hvac section characteristics'))| NOT 
(SIZEOF(QUERY (it <* hssc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'minimum pressure drop'))) <= 1))) = 0;
      WR8:
         SIZEOF(QUERY (hssc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'hvac section characteristics'))| NOT 
(SIZEOF(QUERY (it <* hssc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'maximum pressure drop'))) <= 1))) = 0;
      WR9:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'hvac section insulation'))) >= 1) OR (SIZEOF(QUERY (si <* 
QUERY (pdr <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'hvac section insulation'))| NOT (SIZEOF(QUERY (pd <* 
USEDIN(si, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (pds <* QUERY (pdr <* USEDIN(pd, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pdr)))| (pds.used_representation.
name = 'hvac section insulation characteristics'))) = 1))) = 0))) = 0);
      WR10:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'hvac section insulation'))) >= 1) OR (SIZEOF(QUERY (si <* 
QUERY (pdr <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'hvac section insulation'))| NOT (SIZEOF(QUERY (pd <* 
USEDIN(si, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN(pd, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pdr)))| (pds.used_representation.
name = 'hvac section insulation characteristics'))|
 (SIZEOF(sic.used_representation.items) >= 1))) = 1))) = 0))) = 0);
      WR11:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'hvac section insulation'))) >= 1) OR (SIZEOF(QUERY (si <* 
QUERY (pdr <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'hvac section insulation'))| NOT (SIZEOF(QUERY (pd <* 
USEDIN(si, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN(pd, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pdr)))| (pds.used_representation.
name = 'hvac section insulation characteristics'))|
 (1 <= SIZEOF(QUERY (it <* sic.used_representation.items|
(SIZEOF(TYPEOF(it) * 
['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name IN [ 'thickness', 'minimum thickness', 'maximum thickness' 
])))) AND (SIZEOF(QUERY (it <* sic.used_representation.items| 
(SIZEOF(TYPEOF(it) * [ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name IN [ 'thickness', 'minimum thickness', 'maximum thickness' 
]))) <= 2))) = 1))) = 0))) = 0);
      WR12:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'hvac section insulation'))) >= 1) OR (SIZEOF(QUERY (si <* 
QUERY (pdr <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'hvac section insulation'))| NOT (SIZEOF(QUERY (pd <* 
USEDIN(si, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN(pd, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pdr)))| (pds.used_representation.
name = 'segment insulation characteristics'))|
 (SIZEOF(QUERY (it <* sic.used_representation.items| 
(SIZEOF(TYPEOF(it) * 
['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name = 'thickness'))) <= 1))) = 1))) = 0))) = 0);
      WR13:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'segment insulation'))) >= 1) OR (SIZEOF(QUERY (si <* QUERY 
(pdr <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'hvac section insulation'))| NOT (SIZEOF(QUERY (pd <* 
USEDIN(si, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN(pd, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pdr)))| (pds.used_representation.
name = 'hvac section insulation characteristics'))|
 (SIZEOF(QUERY (it <* sic.used_representation.items| 
(SIZEOF(TYPEOF(it) * 
['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name = 'minimum thickness'))) <= 1))) = 1))) = 0))) = 0);
      WR14:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'hvac section insulation'))) >= 1) OR (SIZEOF(QUERY (si <* 
QUERY (pdr <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'hvac section insulation'))| NOT (SIZEOF(QUERY (pd <* 
USEDIN(si, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN(pd, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pdr)))| (pds.used_representation.
name = 'hvac section insulation characteristics'))|
 (SIZEOF(QUERY (it <* sic.used_representation.items| 
(SIZEOF(TYPEOF(it) * [ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name = 'maximum thickness'))) <= 1))) = 1))) = 0))) = 0);
      WR15:
         SIZEOF(QUERY (pds <* QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pd)))| NOT (SIZEOF(QUERY (sa <* USEDIN(pds, 
'PLANT_SPATIAL_CONFIGURATION.SHAPE_ASPECT.OF_SHAPE')| 
('PLANT_SPATIAL_CONFIGURATION.HVAC_SECTION_TERMINATION' IN 
TYPEOF(sa)))) = 2))) = 0;
   END_ENTITY;

   ENTITY hvac_section_termination
   SUBTYPE OF (shape_aspect);
   WHERE
      WR1:
         SIZEOF(QUERY (sar <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') + USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT')| NOT 
(SIZEOF(TYPEOF(sar) * [ 
'PLANT_SPATIAL_CONFIGURATION.HVAC_BRANCH_CONNECTION', 
'PLANT_SPATIAL_CONFIGURATION.HVAC_PLANT_ITEM_CONNECTION', 
'PLANT_SPATIAL_CONFIGURATION.HVAC_TERMINATION_CONNECTION' ]) = 1))) = 
0;
      WR2:
         SIZEOF(QUERY (sar <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT')| (SIZEOF(TYPEOF(sar) 
* [ 'PLANT_SPATIAL_CONFIGURATION.HVAC_BRANCH_CONNECTION', 
'PLANT_SPATIAL_CONFIGURATION.HVAC_PLANT_ITEM_CONNECTION' ]) = 1))) = 1;
   END_ENTITY;

   ENTITY hvac_support_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.HVAC_SUPPORT_DEFINITION' IN TYPEOF(it)))) 
= 0))) = 0;
      WR2:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (pcd <* QUERY (it <* aca.items| 
('PLANT_SPATIAL_CONFIGURATION.HVAC_COMPONENT_DEFINITION' IN 
TYPEOF(it)))| NOT (SIZEOF(QUERY (aca1 <* 
USEDIN(pcd.formation.of_product, 'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
class_in_tree(aca1.assigned_class, 'hvac support'))) = 1))) = 0))) = 0;
   END_ENTITY;

   ENTITY hvac_support_definition
   SUBTYPE OF (product_definition);
   END_ENTITY;

   ENTITY hvac_system
   SUBTYPE OF (product_definition);
   WHERE
      WR1:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PLANT' IN 
TYPEOF(pdr.relating_product_definition.formation.of_product)) AND 
(pdr.relating_product_definition.frame_of_reference.
name = 'functional occurrence'))) = 1;
   END_ENTITY;

   ENTITY hvac_termination_connection
   SUBTYPE OF (shape_aspect_relationship);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.HVAC_SECTION_TERMINATION' IN 
TYPEOF(SELF.relating_shape_aspect);
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.HVAC_SECTION_TERMINATION' IN 
TYPEOF(SELF.related_shape_aspect);
   END_ENTITY;

   ENTITY hybrid_shape_representation
   SUBTYPE OF (shape_representation);
   WHERE
      WR1:
         SIZEOF(QUERY (i <* SELF\representation.items| NOT (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.ADVANCED_FACE', 
'PLANT_SPATIAL_CONFIGURATION.BOOLEAN_RESULT', 
'PLANT_SPATIAL_CONFIGURATION.CSG_SOLID', 
'PLANT_SPATIAL_CONFIGURATION.RECTANGULAR_PYRAMID', 
'PLANT_SPATIAL_CONFIGURATION.BLOCK', 
'PLANT_SPATIAL_CONFIGURATION.TORUS', 
'PLANT_SPATIAL_CONFIGURATION.RIGHT_CIRCULAR_CYLINDER', 
'PLANT_SPATIAL_CONFIGURATION.SPHERE', 
'PLANT_SPATIAL_CONFIGURATION.RIGHT_CIRCULAR_CONE', 
'PLANT_SPATIAL_CONFIGURATION.EXTRUDED_AREA_SOLID', 
'PLANT_SPATIAL_CONFIGURATION.REVOLVED_AREA_SOLID', 
'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT_3D', 
'PLANT_SPATIAL_CONFIGURATION.MANIFOLD_SOLID_BREP', 
'PLANT_SPATIAL_CONFIGURATION.SHELL_BASED_WIREFRAME_MODEL', 
'PLANT_SPATIAL_CONFIGURATION.CURVE', 
'PLANT_SPATIAL_CONFIGURATION.POINT', 
'PLANT_SPATIAL_CONFIGURATION.SURFACE', 
'PLANT_SPATIAL_CONFIGURATION.VECTOR', 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.MAPPED_ITEM' ] * TYPEOF(i)) = 1))) = 0;
      WR2:
         SIZEOF(QUERY (mi <* QUERY (item <* SELF\representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MAPPED_ITEM' IN TYPEOF(item)))| NOT 
(SIZEOF([ ('PLANT_SPATIAL_CONFIGURATION.' + 
'PLANT_CSG_SHAPE_REPRESENTATION'), 
'PLANT_SPATIAL_CONFIGURATION.HYBRID_SHAPE_REPRESENTATION' ] * 
TYPEOF(mi\mapped_item.mapping_source.mapped_representation)) = 1))) = 
0;
   END_ENTITY;

   ENTITY hyperbola
   SUBTYPE OF (conic);
      semi_axis : positive_length_measure;
      semi_imag_axis : positive_length_measure;
   END_ENTITY;

   ENTITY id_attribute;
      attribute_value : identifier;
      identified_item : id_attribute_select;
   END_ENTITY;

   ENTITY identification_assignment
   ABSTRACT SUPERTYPE;
      assigned_id : identifier;
      role : identification_role;
   END_ENTITY;

   ENTITY identification_role;
      name : label;
      description : OPTIONAL text;
   END_ENTITY;

   ENTITY inline_equipment
   SUBTYPE OF (piping_component_definition);
   END_ENTITY;

   ENTITY instrumentation_and_control_system
   SUBTYPE OF (product_definition);
   WHERE
      WR1:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PLANT' IN 
TYPEOF(pdr.relating_product_definition.formation.of_product)) AND 
(pdr.relating_product_definition.frame_of_reference.
name = 'functional occurrence'))) = 1;
   END_ENTITY;

   ENTITY interfering_shape_element
   SUBTYPE OF (shape_aspect, shape_aspect_relationship);
   END_ENTITY;

   ENTITY intersection_curve
   SUBTYPE OF (surface_curve);
   WHERE
      WR1:
         SIZEOF(SELF\surface_curve.associated_geometry) = 2;
      WR2:
         associated_surface(SELF\surface_curve.associated_geometry[1]) 
<> associated_surface(SELF\surface_curve.associated_geometry[2]);
   END_ENTITY;

   ENTITY invisibility;
      invisible_items : SET [1:?] OF invisible_item;
   END_ENTITY;

   ENTITY item_defined_transformation;
      name : label;
      description : OPTIONAL text;
      transform_item_1 : representation_item;
      transform_item_2 : representation_item;
   END_ENTITY;

   ENTITY item_identified_representation_usage;
      name : label;
      description : OPTIONAL text;
      definition : represented_definition;
      used_representation : representation;
      identified_item : representation_item;
   WHERE
      WR1:
         SELF.used_representation IN 
using_representations(SELF.identified_item);
   END_ENTITY;

   ENTITY known_source
   SUBTYPE OF (external_source, pre_defined_item);
   WHERE
      WR1:
         SELF\pre_defined_item.name IN [ 'ISO 13584 Dictionary',
 'ISO 13584 Parts Library' ];
   END_ENTITY;

   ENTITY length_measure_with_unit
   SUBTYPE OF (measure_with_unit);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.LENGTH_UNIT' IN 
TYPEOF(SELF\measure_with_unit.unit_component);
   END_ENTITY;

   ENTITY length_unit
   SUBTYPE OF (named_unit);
   WHERE
      WR1:
         ((((((SELF\named_unit.dimensions.length_exponent = 1.00000) 
AND (SELF\named_unit.dimensions.mass_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.time_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.electric_current_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 
0.00000)) AND (SELF\named_unit.dimensions.amount_of_substance_exponent 
= 0.00000)) AND (SELF\named_unit.dimensions.luminous_intensity_exponent 
= 0.00000);
   END_ENTITY;

   ENTITY line
   SUBTYPE OF (curve);
      pnt : cartesian_point;
      dir : vector;
   WHERE
      WR1:
         dir.dim = pnt.dim;
   END_ENTITY;

   ENTITY line_branch_connection
   SUBTYPE OF (shape_aspect_relationship);
   WHERE
      WR1:
         SELF.description = 'branch location';
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_DEFINITION' IN 
TYPEOF(SELF.relating_shape_aspect.of_shape.definition);
      WR3:
         'PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_TERMINATION' 
IN TYPEOF(SELF.related_shape_aspect);
   END_ENTITY;

   ENTITY line_less_piping_system
   SUBTYPE OF (product_definition);
   END_ENTITY;

   ENTITY line_plant_item_branch_connection
   SUBTYPE OF (shape_aspect_relationship);
   END_ENTITY;

   ENTITY line_plant_item_connection
   SUBTYPE OF (shape_aspect_relationship);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_TERMINATION' 
IN TYPEOF(SELF.relating_shape_aspect);
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTOR' IN 
TYPEOF(SELF.related_shape_aspect);
      WR3:
         
SELF\shape_aspect_relationship.related_shape_aspect.
of_shape\property_definition.definition\product_definition.
frame_of_reference\application_context_element.
name = 'physical occurrence';
   END_ENTITY;

   ENTITY line_termination_connection
   SUBTYPE OF (shape_aspect_relationship);
   WHERE
      WR1:
         SIZEOF(TYPEOF(SELF.relating_shape_aspect) * [ 
'PLANT_SPATIAL_CONFIGURATION.CONNECTION_NODE', 
'PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_TERMINATION' ]) >= 1;
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_TERMINATION' 
IN TYPEOF(SELF.related_shape_aspect);
   END_ENTITY;

   ENTITY local_time;
      hour_component : hour_in_day;
      minute_component : OPTIONAL minute_in_hour;
      second_component : OPTIONAL second_in_minute;
      zone : coordinated_universal_time_offset;
   WHERE
      WR1:
         valid_time(SELF);
   END_ENTITY;

   ENTITY loop
   SUPERTYPE OF (ONEOF(vertex_loop, edge_loop, poly_loop))
   SUBTYPE OF (topological_representation_item);
   END_ENTITY;

   ENTITY luminous_intensity_measure_with_unit
   SUBTYPE OF (measure_with_unit);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.LUMINOUS_INTENSITY_UNIT' IN 
TYPEOF(SELF\measure_with_unit.unit_component);
   END_ENTITY;

   ENTITY luminous_intensity_unit
   SUBTYPE OF (named_unit);
   WHERE
      WR1:
         ((((((SELF\named_unit.dimensions.length_exponent = 0.00000) 
AND (SELF\named_unit.dimensions.mass_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.time_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.electric_current_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 
0.00000)) AND (SELF\named_unit.dimensions.amount_of_substance_exponent 
= 0.00000)) AND (SELF\named_unit.dimensions.luminous_intensity_exponent 
= 1.00000);
   END_ENTITY;

   ENTITY make_from_usage_option
   SUBTYPE OF (product_definition_usage);
      ranking : INTEGER;
      ranking_rationale : text;
      quantity : measure_with_unit;
   WHERE
      WR1:
         NOT ('NUMBER' IN TYPEOF(quantity.value_component)) OR 
(quantity.value_component > 0);
   END_ENTITY;

   ENTITY manifold_solid_brep
   SUBTYPE OF (solid_model);
      outer : closed_shell;
   END_ENTITY;

   ENTITY mapped_item
   SUBTYPE OF (representation_item);
      mapping_source : representation_map;
      mapping_target : representation_item;
   WHERE
      WR1:
         acyclic_mapped_representation(using_representations(SELF), [ 
SELF ]);
   END_ENTITY;

   ENTITY mass_measure_with_unit
   SUBTYPE OF (measure_with_unit);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.MASS_UNIT' IN 
TYPEOF(SELF\measure_with_unit.unit_component);
   END_ENTITY;

   ENTITY mass_unit
   SUBTYPE OF (named_unit);
   WHERE
      WR1:
         ((((((SELF\named_unit.dimensions.length_exponent = 0.00000) 
AND (SELF\named_unit.dimensions.mass_exponent = 1.00000)) AND 
(SELF\named_unit.dimensions.time_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.electric_current_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 
0.00000)) AND (SELF\named_unit.dimensions.amount_of_substance_exponent 
= 0.00000)) AND (SELF\named_unit.dimensions.luminous_intensity_exponent 
= 0.00000);
   END_ENTITY;

   ENTITY material_designation;
      name : label;
      definitions : SET [1:?] OF characterized_definition;
   END_ENTITY;

   ENTITY material_designation_characterization;
      name : label;
      description : text;
      designation : material_designation;
      property : characterized_material_property;
   END_ENTITY;

   ENTITY material_property
   SUBTYPE OF (property_definition);
   UNIQUE
      UR1 : SELF\property_definition.name, 
SELF\property_definition.definition;
   WHERE
      WR1:
         ('PLANT_SPATIAL_CONFIGURATION.CHARACTERIZED_OBJECT' IN 
TYPEOF(SELF\property_definition.definition)) OR 
(SIZEOF(bag_to_set(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) - QUERY (temp <* 
bag_to_set(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION'))| 
('PLANT_SPATIAL_CONFIGURATION.' + 'MATERIAL_PROPERTY_REPRESENTATION' IN 
TYPEOF(temp)))) = 0);
   END_ENTITY;

   ENTITY material_property_representation
   SUBTYPE OF (property_definition_representation);
      dependent_environment : data_environment;
   END_ENTITY;

   ENTITY measure_representation_item
   SUBTYPE OF (representation_item, measure_with_unit);
   END_ENTITY;

   ENTITY measure_with_unit
   SUPERTYPE OF (ONEOF(length_measure_with_unit, 
mass_measure_with_unit, time_measure_with_unit, 
electric_current_measure_with_unit, 
thermodynamic_temperature_measure_with_unit, 
celsius_temperature_measure_with_unit, 
amount_of_substance_measure_with_unit, 
luminous_intensity_measure_with_unit, plane_angle_measure_with_unit, 
solid_angle_measure_with_unit, ratio_measure_with_unit));
      value_component : measure_value;
      unit_component : unit;
   WHERE
      WR1:
         valid_units(SELF);
   END_ENTITY;

   ENTITY mechanical_component_class
   SUBTYPE OF (group, characterized_object);
   END_ENTITY;

   ENTITY mechanical_component_definition
   SUBTYPE OF (product_definition);
   END_ENTITY;

   ENTITY mechanical_connector_class
   SUBTYPE OF (group);
   END_ENTITY;

   ENTITY mechanical_system
   SUBTYPE OF (product_definition);
   WHERE
      WR1:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PLANT' IN 
TYPEOF(pdr.relating_product_definition.formation.of_product)) AND 
(pdr.relating_product_definition.frame_of_reference.
name = 'functional occurrence'))) = 1;
   END_ENTITY;

   ENTITY name_assignment
   ABSTRACT SUPERTYPE;
      assigned_name : label;
   DERIVE
      role : object_role := get_role(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ROLE_ASSOCIATION.ITEM_WITH_ROLE')) <= 1;
   END_ENTITY;

   ENTITY name_attribute;
      attribute_value : label;
      named_item : name_attribute_select;
   END_ENTITY;

   ENTITY named_unit
   SUPERTYPE OF (ONEOF(si_unit, conversion_based_unit, 
context_dependent_unit) ANDOR ONEOF(length_unit, mass_unit, time_unit, 
electric_current_unit, thermodynamic_temperature_unit, 
amount_of_substance_unit, luminous_intensity_unit, plane_angle_unit, 
solid_angle_unit, ratio_unit));
      dimensions : dimensional_exponents;
   END_ENTITY;

   ENTITY object_role;
      name : label;
      description : OPTIONAL text;
   END_ENTITY;

   ENTITY offset_curve_2d
   SUBTYPE OF (curve);
      basis_curve : curve;
      distance : length_measure;
      self_intersect : LOGICAL;
   WHERE
      WR1:
         basis_curve.dim = 2;
   END_ENTITY;

   ENTITY offset_curve_3d
   SUBTYPE OF (curve);
      basis_curve : curve;
      distance : length_measure;
      self_intersect : LOGICAL;
      ref_direction : direction;
   WHERE
      WR1:
         (basis_curve.dim = 3) AND (ref_direction.dim = 3);
   END_ENTITY;

   ENTITY offset_surface
   SUBTYPE OF (surface);
      basis_surface : surface;
      distance : length_measure;
      self_intersect : LOGICAL;
   END_ENTITY;

   ENTITY oriented_surface  --geometry_schema
   SUBTYPE OF (surface);
      orientation : BOOLEAN;
   END_ENTITY;

   ENTITY one_direction_repeat_factor
   SUBTYPE OF (geometric_representation_item);
      repeat_factor : vector;
   END_ENTITY;

   ENTITY open_shell
   SUBTYPE OF (connected_face_set);
   END_ENTITY;

   ENTITY organization;
      id : OPTIONAL identifier;
      name : label;
      description : OPTIONAL text;
   END_ENTITY;

   ENTITY organization_assignment
   ABSTRACT SUPERTYPE;
      assigned_organization : organization;
      role : organization_role;
   END_ENTITY;

   ENTITY organization_role;
      name : label;
   DERIVE
      description : text := get_description_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY organizational_project;
      name : label;
      description : OPTIONAL text;
      responsible_organizations : SET [1:?] OF organization;
   DERIVE
      id : identifier := get_id_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ID_ATTRIBUTE.IDENTIFIED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY oriented_closed_shell
   SUBTYPE OF (closed_shell);
      closed_shell_element : closed_shell;
      orientation : BOOLEAN;
   DERIVE
      SELF\connected_face_set.cfs_faces : SET [1:?] OF face := 
conditional_reverse(SELF.orientation, 
SELF.closed_shell_element.cfs_faces);
   WHERE
      WR1:
         NOT ('PLANT_SPATIAL_CONFIGURATION.ORIENTED_CLOSED_SHELL' IN 
TYPEOF(SELF.closed_shell_element));
   END_ENTITY;

   ENTITY oriented_edge
   SUBTYPE OF (edge);
      edge_element : edge;
      orientation : BOOLEAN;
   DERIVE
      SELF\edge.edge_start : vertex := boolean_choose(SELF.orientation, 
SELF.edge_element.edge_start, SELF.edge_element.edge_end);
      SELF\edge.edge_end : vertex := boolean_choose(SELF.orientation, 
SELF.edge_element.edge_end, SELF.edge_element.edge_start);
   WHERE
      WR1:
         NOT ('PLANT_SPATIAL_CONFIGURATION.ORIENTED_EDGE' IN 
TYPEOF(SELF.edge_element));
   END_ENTITY;

   ENTITY oriented_face
   SUBTYPE OF (face);
      face_element : face;
      orientation : BOOLEAN;
   DERIVE
      SELF\face.bounds : SET [1:?] OF face_bound := 
conditional_reverse(SELF.orientation, SELF.face_element.bounds);
   WHERE
      WR1:
         NOT ('PLANT_SPATIAL_CONFIGURATION.ORIENTED_FACE' IN 
TYPEOF(SELF.face_element));
   END_ENTITY;

   ENTITY oriented_open_shell
   SUBTYPE OF (open_shell);
      open_shell_element : open_shell;
      orientation : BOOLEAN;
   DERIVE
      SELF\connected_face_set.cfs_faces : SET [1:?] OF face := 
conditional_reverse(SELF.orientation, 
SELF.open_shell_element.cfs_faces);
   WHERE
      WR1:
         NOT ('PLANT_SPATIAL_CONFIGURATION.ORIENTED_OPEN_SHELL' IN 
TYPEOF(SELF.open_shell_element));
   END_ENTITY;

   ENTITY oriented_path
   SUBTYPE OF (path);
      path_element : path;
      orientation : BOOLEAN;
   DERIVE
      SELF\path.edge_list : LIST [1:?] OF UNIQUE oriented_edge := 
conditional_reverse(SELF.orientation, SELF.path_element.edge_list);
   WHERE
      WR1:
         NOT ('PLANT_SPATIAL_CONFIGURATION.ORIENTED_PATH' IN 
TYPEOF(SELF.path_element));
   END_ENTITY;

   ENTITY outer_boundary_curve
   SUBTYPE OF (boundary_curve);
   END_ENTITY;

   ENTITY parabola
   SUBTYPE OF (conic);
      focal_dist : length_measure;
   WHERE
      WR1:
         focal_dist <> 0.00000;
   END_ENTITY;

   ENTITY parametric_representation_context
   SUBTYPE OF (representation_context);
   END_ENTITY;

   ENTITY path
   SUPERTYPE OF (ONEOF(edge_loop, oriented_path))
   SUBTYPE OF (topological_representation_item);
      edge_list : LIST [1:?] OF UNIQUE oriented_edge;
   WHERE
      WR1:
         path_head_to_tail(SELF);
   END_ENTITY;

   ENTITY pcurve
   SUBTYPE OF (curve);
      basis_surface : surface;
      reference_to_curve : definitional_representation;
   WHERE
      WR1:
         SIZEOF(reference_to_curve\representation.items) = 1;
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.CURVE' IN 
TYPEOF(reference_to_curve\representation.items[1]);
      WR3:
         
reference_to_curve\representation.
items[1]\geometric_representation_item.dim = 2;
   END_ENTITY;

   ENTITY person;
      id : identifier;
      last_name : OPTIONAL label;
      first_name : OPTIONAL label;
      middle_names : OPTIONAL LIST [1:?] OF label;
      prefix_titles : OPTIONAL LIST [1:?] OF label;
      suffix_titles : OPTIONAL LIST [1:?] OF label;
   WHERE
      WR1:
         EXISTS(last_name) OR EXISTS(first_name);
   END_ENTITY;

   ENTITY person_and_organization;
      the_person : person;
      the_organization : organization;
   DERIVE
      name : label := get_name_value(SELF);
      description : text := get_description_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'NAME_ATTRIBUTE.NAMED_ITEM')) <= 1;
      WR2:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY person_and_organization_assignment
   ABSTRACT SUPERTYPE;
      assigned_person_and_organization : person_and_organization;
      role : person_and_organization_role;
   END_ENTITY;

   ENTITY person_and_organization_role;
      name : label;
   DERIVE
      description : text := get_description_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY person_assignment
   ABSTRACT SUPERTYPE;
      assigned_person : person;
      role : person_role;
   END_ENTITY;

   ENTITY person_role;
      name : label;
   DERIVE
      description : text := get_description_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY pipe_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))) = 0))) = 0;
      WR2:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (pcd <* QUERY (it <* aca.items| 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))| NOT (SIZEOF(QUERY (aca1 <* 
USEDIN(pcd.formation.of_product, 'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
class_in_tree(aca1.assigned_class, 'pipe'))) = 1))) = 0))) = 0;
   END_ENTITY;

   ENTITY pipe_closure_fitting_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))) = 0))) = 0;
      WR2:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (pcd <* QUERY (it <* aca.items| 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))| NOT (SIZEOF(QUERY (aca1 <* 
USEDIN(pcd.formation.of_product, 'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
class_in_tree(aca1.assigned_class, 'pipe closure'))) = 1))) = 0))) = 0;
   END_ENTITY;

   ENTITY piping_component_class
   SUBTYPE OF (group, characterized_object);
   END_ENTITY;

   ENTITY piping_component_definition
   SUBTYPE OF (product_definition);
   END_ENTITY;

   ENTITY piping_connector_class
   SUBTYPE OF (group);
   END_ENTITY;

   ENTITY piping_spool_definition
   SUBTYPE OF (product_definition);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATING_PRODUCT_DEFINITION')) > 1;
   END_ENTITY;

   ENTITY piping_support_definition
   SUBTYPE OF (product_definition);
   END_ENTITY;

   ENTITY piping_support_fitting_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.PIPING_SUPPORT_DEFINITION' IN 
TYPEOF(it)))) = 0))) = 0;
      WR2:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (pcd <* QUERY (it <* aca.items| 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))| NOT (SIZEOF(QUERY (aca1 <* 
USEDIN(pcd.formation.of_product, 'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
class_in_tree(aca1.assigned_class, 'piping support'))) = 1))) = 0))) = 
0;
   END_ENTITY;

   ENTITY piping_system
   SUBTYPE OF (product_definition);
   WHERE
      WR1:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PLANT' IN 
TYPEOF(pdr.relating_product_definition.formation.of_product)) AND 
(pdr.relating_product_definition.frame_of_reference.
name = 'functional occurrence'))) = 1;
   END_ENTITY;

   ENTITY placement
   SUPERTYPE OF (ONEOF(axis1_placement, axis2_placement_2d, 
axis2_placement_3d))
   SUBTYPE OF (geometric_representation_item);
      location : cartesian_point;
   END_ENTITY;

   ENTITY planar_box
   SUBTYPE OF (planar_extent);
      placement : axis2_placement;
   END_ENTITY;

   ENTITY planar_extent
   SUBTYPE OF (geometric_representation_item);
      size_in_x : length_measure;
      size_in_y : length_measure;
   END_ENTITY;

   ENTITY plane
   SUBTYPE OF (elementary_surface);
   END_ENTITY;

   ENTITY plane_angle_measure_with_unit
   SUBTYPE OF (measure_with_unit);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.PLANE_ANGLE_UNIT' IN 
TYPEOF(SELF\measure_with_unit.unit_component);
   END_ENTITY;

   ENTITY plane_angle_unit
   SUBTYPE OF (named_unit);
   WHERE
      WR1:
         ((((((SELF\named_unit.dimensions.length_exponent = 0.00000) 
AND (SELF\named_unit.dimensions.mass_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.time_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.electric_current_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 
0.00000)) AND (SELF\named_unit.dimensions.amount_of_substance_exponent 
= 0.00000)) AND (SELF\named_unit.dimensions.luminous_intensity_exponent 
= 0.00000);
   END_ENTITY;

   ENTITY plant
   SUBTYPE OF (product);
   WHERE
      WR1:
         SIZEOF(QUERY (pscoa <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PLANT_SPATIAL_CONFIGURATION_ORGANIZATION_ASSIGNMENT.ITEMS')| 
(pscoa.role.name = 'plant operator'))) + SIZEOF(QUERY (pscpaoa <* 
USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PLANT_SPATIAL_CONFIGURATION_PERSON_AND_ORGANIZATION_ASSIGNMENT.' + 
'ITEMS')| (pscpaoa.role.name = 'plant operator'))) <= 1;
      WR2:
         SIZEOF(QUERY (pscoa <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PLANT_SPATIAL_CONFIGURATION_ORGANIZATION_ASSIGNMENT.ITEMS')| 
(pscoa.role.name = 'plant owner'))) + SIZEOF(QUERY (pscpaoa <* 
USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PLANT_SPATIAL_CONFIGURATION_PERSON_AND_ORGANIZATION_ASSIGNMENT.' + 
'ITEMS')| (pscpaoa.role.name = 'plant owner'))) + SIZEOF(QUERY (pscpa 
<* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PLANT_SPATIAL_CONFIGURATION_PERSON_ASSIGNMENT.ITEMS')| 
(pscpa.role.name = 'plant owner'))) >= 1;
      WR3:
         SIZEOF(QUERY (pscoa <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PLANT_SPATIAL_CONFIGURATION_ORGANIZATION_ASSIGNMENT.ITEMS')| 
(pscoa\organization_assignment.role.name = 'plant project owner'))) + 
SIZEOF(QUERY (pscpaoa <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PLANT_SPATIAL_CONFIGURATION_PERSON_AND_ORGANIZATION_ASSIGNMENT.' + 
'ITEMS')| (pscpaoa\person_and_organization_assignment.role.name = 
'plant project owner'))) >= 1;
      WR4:
         SIZEOF(QUERY (pdf <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_FORMATION.OF_PRODUCT')| NOT (SIZEOF(QUERY (pd <* 
USEDIN(pdf, 
'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION.FORMATION')| 
(pd.frame_of_reference.name = 'functional occurrence'))) <= 1))) = 0;
   END_ENTITY;

   ENTITY plant_arrangement_definition
   SUBTYPE OF (product_definition_with_associated_documents);
   WHERE
      WR1:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.MECHANICAL_SYSTEM' IN 
TYPEOF(pdr.relating_product_definition)))) = 1;
      WR2:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATING_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PLANT_ARRANGEMENT_SEGMENT_DEFINITION' IN 
TYPEOF(pdr.related_product_definition)))) >= 1;
      WR3:
         NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| 
(SIZEOF(USEDIN(pd, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) >= 1))) = 0) OR 
(SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (pdr <* USEDIN(pd, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| (SIZEOF(QUERY (rep <* 
USEDIN(pdr.used_representation.context_of_items, 
'PLANT_SPATIAL_CONFIGURATION.REPRESENTATION.CONTEXT_OF_ITEMS')| 
(SIZEOF(QUERY (prop_def_rep <* USEDIN(rep, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION')| (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.SITE', 
'PLANT_SPATIAL_CONFIGURATION.SITE_BUILDING' ] * 
TYPEOF(prop_def_rep.definition)) = 1) OR 
('PLANT_SPATIAL_CONFIGURATION.PLANT' IN 
TYPEOF(prop_def_rep.definition.definition.formation.of_product)))) >= 
1))) >= 1))) >= 1))) = 0);
      WR4:
         SELF.frame_of_reference.name = 'functional definition';
      WR5:
         SIZEOF(QUERY (pds <* QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pd)))| NOT (SIZEOF(QUERY (sa <* USEDIN(pds, 
'PLANT_SPATIAL_CONFIGURATION.SHAPE_ASPECT.OF_SHAPE')| 
('PLANT_SPATIAL_CONFIGURATION.PLANT_ARRANGEMENT_SEGMENT_TERMINATION' IN 
TYPEOF(sa)) AND (sa.description = 
'mechanical arrangement termination'))) <= 2))) = 0;
   END_ENTITY;

   ENTITY plant_arrangement_segment_definition
   SUBTYPE OF (product_definition);
   WHERE
      WR1:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PLANT_ARRANGEMENT_DEFINITION' IN 
TYPEOF(pdr.relating_product_definition)))) >= 1;
      WR2:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.SHAPE_DEFINITION' IN TYPEOF(pd)))) >= 1;
      WR3:
         SELF.frame_of_reference\application_context_element.name = 
'functional definition';
      WR4:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (pdr <* USEDIN(pd, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 
'arrangement segment characteristics'))) = 1))) = 0;
      WR5:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (lsc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.
name = 'arrangement segment characteristics'))|
 NOT (SIZEOF(lsc.used_representation.items) >= 2))) 
= 0))) = 0;
      WR6:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (lsc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.
name = 'arrangement segment characteristics'))|
 NOT (SIZEOF(QUERY (it <* lsc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'design pressure'))) = 1))) = 0))) = 0;
      WR7:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (lsc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 
'arrangement segment characteristics'))|
NOT (SIZEOF(QUERY (it <* lsc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'design speed'))) = 1))) = 0))) = 0;
      WR8:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (lsc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'line segment characteristics'))| NOT 
(SIZEOF(QUERY (it <* lsc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name = 
'design temperature'))) = 1))) = 0))) = 0;
      WR9:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (lsc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name =
 'arrangement segment characteristics'))|
NOT (SIZEOF(QUERY (it <* lsc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'design torque'))) = 1))) = 0))) = 0;
      WR10:
         SIZEOF(QUERY (pds <* QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pd)))| NOT (SIZEOF(QUERY (sa <* USEDIN(pds, 
'PLANT_SPATIAL_CONFIGURATION.SHAPE_ASPECT.OF_SHAPE')| 
('PLANT_SPATIAL_CONFIGURATION.PLANT_ARRANGEMENT_SEGMENT_TERMINATION' IN 
TYPEOF(sa)))) = 2))) = 0;
   END_ENTITY;

   ENTITY plant_arrangement_segment_termination
   SUBTYPE OF (shape_aspect);
   WHERE
      WR1:
     (SELF.description = 'mechanical arrangement segment termination') AND 
('PLANT_SPATIAL_CONFIGURATION.PLANT_ARRANGEMENT_SEGMENT_DEFINITION' IN 
TYPEOF(SELF.of_shape.definition)) XOR
 (((SELF.description = 'mechanical arrangement termination') AND 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_RELATIONSHIP' IN 
TYPEOF(SELF.of_shape.definition))) AND 
('PLANT_SPATIAL_CONFIGURATION.PLANT_ARRANGEMENT_SEGMENT_DEFINITION' IN 
TYPEOF(SELF.of_shape.definition.related_product_definition))) AND 
('PLANT_SPATIAL_CONFIGURATION.PLANT_ARRANGEMENT_DEFINITION' IN 
TYPEOF(SELF.of_shape.definition.relating_product_definition));
      WR2:
         SIZEOF(QUERY (sar <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') + USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT')| NOT 
(SIZEOF(TYPEOF(sar) * [ 
'PLANT_SPATIAL_CONFIGURATION.ARRANGEMENT_BRANCH_CONNECTION', 
'PLANT_SPATIAL_CONFIGURATION.ARRANGEMENT_PLANT_ITEM_CONNECTION', 
'PLANT_SPATIAL_CONFIGURATION.ARRANGEMENT_TERMINATION_CONNECTION' ]) = 
1))) = 0;
      WR3:
         (SIZEOF(QUERY (sar <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT')| (SIZEOF(TYPEOF(sar) 
* [ 'PLANT_SPATIAL_CONFIGURATION.ARRANGEMENT_BRANCH_CONNECTION', 
'PLANT_SPATIAL_CONFIGURATION.ARRANGEMENT_TERMINATION_CONNECTION' ]) = 
1))) = 1) OR (SIZEOF(QUERY (sar <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT')| NOT 
('PLANT_SPATIAL_CONFIGURATION.ARRANGEMENT_PLANT_ITEM_CONNECTION' IN 
TYPEOF(sar)))) = 0);
   END_ENTITY;

   ENTITY plant_csg_shape_representation
   SUBTYPE OF (shape_representation);
   WHERE
      WR1:
         SIZEOF(QUERY (item <* SELF.items| NOT (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.CSG_SOLID', 
'PLANT_SPATIAL_CONFIGURATION.EXTRUDED_AREA_SOLID', 
'PLANT_SPATIAL_CONFIGURATION.REVOLVED_AREA_SOLID', 
'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT_3D', 
'PLANT_SPATIAL_CONFIGURATION.MAPPED_ITEM' ] * TYPEOF(item)) = 1))) = 0;
      WR2:
         SIZEOF(QUERY (item <* SELF.items| (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.CSG_SOLID', 
'PLANT_SPATIAL_CONFIGURATION.EXTRUDED_AREA_SOLID', 
'PLANT_SPATIAL_CONFIGURATION.REVOLVED_AREA_SOLID', 
'PLANT_SPATIAL_CONFIGURATION.MAPPED_ITEM' ] * TYPEOF(item)) = 1))) >= 
1;
      WR3:
         SIZEOF(QUERY (item <* SELF.items| 
('PLANT_SPATIAL_CONFIGURATION.CSG_SOLID' IN TYPEOF(item)) AND NOT 
valid_advanced_csg_tree(item\csg_solid.tree_root_expression))) = 0;
      WR4:
         SIZEOF(QUERY (mi <* QUERY (item <* SELF.items| 
('PLANT_SPATIAL_CONFIGURATION.MAPPED_ITEM' IN TYPEOF(item)))| NOT 
('PLANT_SPATIAL_CONFIGURATION.' + 'PLANT_CSG_SHAPE_REPRESENTATION' IN 
TYPEOF(mi\mapped_item.mapping_source.mapped_representation)))) = 0;
   END_ENTITY;

   ENTITY plant_design_csg_primitive
   SUBTYPE OF (shape_representation, solid_model);
   WHERE
      WR1:
         SELF.context_of_items.coordinate_space_dimension = 3;
      WR2:
         SELF\representation.name = SELF\representation_item.name;
      WR3:
         SELF\representation.name IN [ 'hemisphere',
 'rectangle to ellipse', 'trimmed sphere', 'trimmed pyramid' ];
      WR4:
         NOT (SELF\representation.name = 'hemisphere') OR 
(SIZEOF(SELF.items) = 2);
      WR5:
         NOT (SELF\representation.name = 'hemisphere') OR (SIZEOF(QUERY 
(it <* SELF.items| (it.name = 'position') AND 
('PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT_3D' IN TYPEOF(it)))) = 
1);
      WR6:
         NOT (SELF\representation.name = 'hemisphere') OR (SIZEOF(QUERY 
(it <* SELF.items| (it.name = 'radius') AND (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2))) = 1);
      WR7:
         NOT (SELF\representation.name = 'rectangle to ellipse') OR 
(SIZEOF(SELF.items) = 8);
      WR8:
         NOT (SELF\representation.name = 'rectangle to ellipse') OR 
(SIZEOF(QUERY (it <* SELF.items| (it.name = 'position') AND 
('PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT_3D' IN TYPEOF(it)))) = 
1);
      WR9:
         NOT (SELF\representation.name = 'rectangle to ellipse') OR 
(SIZEOF(QUERY (it <* SELF.items| ((it.name = 'x size') AND (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2)) AND ('PLANT_SPATIAL_CONFIGURATION.POSITIVE_LENGTH_MEASURE' IN 
TYPEOF(it\measure_with_unit.value_component)))) = 1);
      WR10:
         NOT (SELF\representation.name = 'rectangle to ellipse') OR 
(SIZEOF(QUERY (it <* SELF.items| ((it.name = 'y size') AND (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2)) AND ('PLANT_SPATIAL_CONFIGURATION.POSITIVE_LENGTH_MEASURE' IN 
TYPEOF(it\measure_with_unit.value_component)))) = 1);
      WR11:
         NOT (SELF\representation.name = 'rectangle to ellipse') OR 
(SIZEOF(QUERY (it <* SELF.items| ((it.name = 'height') AND (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2)) AND ('PLANT_SPATIAL_CONFIGURATION.POSITIVE_LENGTH_MEASURE' IN 
TYPEOF(it\measure_with_unit.value_component)))) = 1);
      WR12:
         NOT (SELF\representation.name = 'rectangle to ellipse') OR 
(SIZEOF(QUERY (it <* SELF.items| (it.name = 'x offset') AND (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2))) = 1);
      WR13:
         NOT (SELF\representation.name = 'rectangle to ellipse') OR 
(SIZEOF(QUERY (it <* SELF.items| (it.name = 'y offset') AND (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2))) = 1);
      WR14:
         NOT (SELF\representation.name = 'rectangle to ellipse') OR 
(SIZEOF(QUERY (it <* SELF.items| (it.name = 'semi axis 1') AND 
(SIZEOF([ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2))) = 1);
      WR15:
         NOT (SELF\representation.name = 'rectangle to ellipse') OR 
(SIZEOF(QUERY (it <* SELF.items| (it.name = 'semi axis 2') AND 
(SIZEOF([ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2))) = 1);
      WR16:
         NOT (SELF\representation.name = 'trimmed sphere') OR 
(SIZEOF(SELF.items) = 3);
      WR17:
         NOT (SELF\representation.name = 'trimmed sphere') OR 
(SIZEOF(QUERY (it <* SELF.items| (it.name = 'base sphere') AND 
('PLANT_SPATIAL_CONFIGURATION.SPHERE' IN TYPEOF(it)))) = 1);
      WR18:
         NOT (SELF\representation.name = 'trimmed sphere') OR 
(SIZEOF(QUERY (it <* SELF.items| (it.
name = 'cutting plane normal direction') AND
 ('PLANT_SPATIAL_CONFIGURATION.DIRECTION' IN TYPEOF(it)))) = 1);
      WR19:
         NOT (SELF\representation.name = 'trimmed sphere') OR 
(SIZEOF(QUERY (it <* SELF.items| (it.name = 'height') AND (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2))) = 1);
      WR20:
         NOT (SELF\representation.name = 'trimmed sphere') OR 
(SIZEOF(QUERY (ht <* QUERY (it <* SELF.items| (it.name = 'height') AND 
(SIZEOF([ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2))| NOT (SIZEOF(QUERY (sphre <* QUERY (it <* SELF.items| (it.name = 
'base sphere') AND ('PLANT_SPATIAL_CONFIGURATION.SPHERE' IN 
TYPEOF(it)))| NOT ((-sphre.radius < ht.value_component) AND 
(ht.value_component < sphre.radius)))) = 0))) = 0);
      WR21:
         NOT (SELF\representation.name = 'trimmed pyramid') OR 
(SIZEOF(SELF.items) = 8);
      WR22:
         NOT (SELF\representation.name = 'trimmed pyramid') OR 
(SIZEOF(QUERY (it <* SELF.items| (it.name = 'base position') AND 
('PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT_3D' IN TYPEOF(it)))) = 
1);
      WR23:
         NOT (SELF\representation.name = 'trimmed pyramid') OR 
(SIZEOF(QUERY (it <* SELF.items| (it.name = 'base length') AND 
(SIZEOF([ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2))) = 1);
      WR24:
         NOT (SELF\representation.name = 'trimmed pyramid') OR 
(SIZEOF(QUERY (it <* SELF.items| (it.name = 'base width') AND (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2))) = 1);
      WR25:
         NOT (SELF\representation.name = 'trimmed pyramid') OR 
(SIZEOF(QUERY (it <* SELF.items| (it.name = 'height') AND (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2))) = 1);
      WR26:
         NOT (SELF\representation.name = 'trimmed pyramid') OR 
(SIZEOF(QUERY (it <* SELF.items| (it.name = 'top centre x') AND 
(SIZEOF([ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2))) = 1);
      WR27:
         NOT (SELF\representation.name = 'trimmed pyramid') OR 
(SIZEOF(QUERY (it <* SELF.items| (it.name = 'top centre y') AND 
(SIZEOF([ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2))) = 1);
      WR28:
         NOT (SELF\representation.name = 'trimmed pyramid') OR 
(SIZEOF(QUERY (it <* SELF.items| (it.name = 'top length') AND (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2))) = 1);
      WR29:
         NOT (SELF\representation.name = 'trimmed pyramid') OR 
(SIZEOF(QUERY (it <* SELF.items| (it.name = 'top width') AND (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ] * TYPEOF(it)) 
= 2))) = 1);
   END_ENTITY;

   ENTITY plant_item_connection
   SUBTYPE OF (shape_aspect, shape_aspect_relationship);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTOR' IN 
TYPEOF(SELF\shape_aspect_relationship.relating_shape_aspect);
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTOR' IN 
TYPEOF(SELF\shape_aspect_relationship.related_shape_aspect);
      WR3:
         
SELF\shape_aspect.of_shape\property_definition.
definition\product_definition.frame_of_reference\application_context_element.
name IN [ 'functional occurrence', 'physical occurrence',
 'functional definition', 'physical definition' ];
      WR4:
         
SELF\shape_aspect_relationship.relating_shape_aspect.
of_shape\property_definition.definition\product_definition.
frame_of_reference\application_context_element.
name = SELF\shape_aspect_relationship.related_shape_aspect.
of_shape\property_definition.definition\product_definition.
frame_of_reference\application_context_element.name;
      WR5:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')) >= 1;
      WR6:
         SIZEOF(QUERY (pscca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| NOT (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.CONNECTION_FUNCTIONAL_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.CONNECTION_MOTION_CLASS' ] * 
TYPEOF(pscca.assigned_class)) >= 1))) = 0;
      WR7:
         SIZEOF(QUERY (pdr <* USEDIN(SELF.of_shape.definition, 
'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_RELATIONSHIP.' + 
'RELATED_PRODUCT_DEFINITION')|
 (pdr.name = 'support usage connection'))) <= 1;
   END_ENTITY;

   ENTITY plant_item_connector
   SUBTYPE OF (shape_aspect);
   WHERE
      WR1:
         
SELF\shape_aspect.of_shape\property_definition.
definition\product_definition.frame_of_reference\application_context_element.
name IN [ 'functional definition', 'physical definition',
 'functional occurrence', 'physical occurrence' ];
      WR2:
         SIZEOF(QUERY (pic <* bag_to_set(USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT')) + 
bag_to_set(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT'))| 
('PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTION' IN TYPEOF(pic)))) 
<= 1;
      WR3:
         NOT (SIZEOF(QUERY (aca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
(SIZEOF(TYPEOF(aca.assigned_class) * [ 
'PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.MECHANICAL_CONNECTOR_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASS' ]) = 1))) >= 1) 
OR (NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY (pd 
<* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))| NOT (SIZEOF(QUERY (pdr <* USEDIN(sc, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))) = 
1))) = 0));
      WR4:
         (NOT (SIZEOF(QUERY (aca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
(SIZEOF(TYPEOF(aca.assigned_class) * [ 
'PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASS' ]) = 1))) >= 1) 
OR NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))) >= 1)) OR (SIZEOF(QUERY (sc <* QUERY (pd 
<* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY (pdr <* 
USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| 
(SIZEOF(dsc.used_representation.items) >= 2))) = 1))) = 0);
      WR5:
         NOT (SIZEOF(QUERY (aca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
(SIZEOF(TYPEOF(aca.assigned_class) * [ 
'PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASS' ]) = 1))) >= 1) 
OR (NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY (pd 
<* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY (pdr <* 
USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| (1 
<= SIZEOF(QUERY (it <* dsc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name IN [ 'pressure', 'minimum pressure',
 'maximum pressure' ])))) AND (SIZEOF(QUERY (it <* dsc.
used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name IN [ 'pressure', 'minimum pressure',
 'maximum pressure' ]))) <= 2))) = 1))) = 0));
      WR6:
         NOT (SIZEOF(QUERY (aca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
(SIZEOF(TYPEOF(aca.assigned_class) * [ 
'PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASS' ]) = 1))) >= 1) 
OR (NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY (pd 
<* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY (pdr <* 
USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| 
(SIZEOF(QUERY (it <* dsc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'pressure'))) <= 1))) = 1))) = 0));
      WR7:
         NOT (SIZEOF(QUERY (aca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
(SIZEOF(TYPEOF(aca.assigned_class) * [ 
'PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASS' ]) = 1))) >= 1) 
OR (NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY (pd 
<* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY (pdr <* 
USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| 
(SIZEOF(QUERY (it <* dsc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'minimum pressure'))) <= 1))) = 1))) = 0));
      WR8:
         NOT (SIZEOF(QUERY (aca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
(SIZEOF(TYPEOF(aca.assigned_class) * [ 
'PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASS' ]) = 1))) >= 1) 
OR (NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY (pd 
<* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY (pdr <* 
USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| 
(SIZEOF(QUERY (it <* dsc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'maximum pressure'))) <= 1))) = 1))) = 0));
      WR9:
         NOT (SIZEOF(QUERY (aca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
(SIZEOF(TYPEOF(aca.assigned_class) * [ 
'PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASS' ]) = 1))) >= 1) 
OR (NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY (pd 
<* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY (pdr <* 
USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| (1 
<= SIZEOF(QUERY (it <* dsc.used_representation.items| 
(SIZEOF(TYPEOF(it) * [ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name IN 
[ 'temperature', 'minimum temperature', 'maximum temperature' ])))) AND 
(SIZEOF(QUERY (it <* dsc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name IN 
[ 'temperature', 'minimum temperature', 'maximum temperature' ]))) <= 
2))) = 1))) = 0));
      WR10:
         NOT (SIZEOF(QUERY (aca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
(SIZEOF(TYPEOF(aca.assigned_class) * [ 
'PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASS' ]) = 1))) >= 1) 
OR (NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY (pd 
<* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY (pdr <* 
USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| 
(SIZEOF(QUERY (it <* dsc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name = 
'temperature'))) <= 1))) = 1))) = 0));
      WR11:
         NOT (SIZEOF(QUERY (aca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
(SIZEOF(TYPEOF(aca.assigned_class) * [ 
'PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASS' ]) = 1))) >= 1) 
OR (NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY (pd 
<* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY (pdr <* 
USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| 
(SIZEOF(QUERY (it <* dsc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name = 
'minimum temperature'))) <= 1))) = 1))) = 0));
      WR12:
         NOT (SIZEOF(QUERY (aca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
(SIZEOF(TYPEOF(aca.assigned_class) * [ 
'PLANT_SPATIAL_CONFIGURATION.PIPING_CONNECTOR_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.CONNECTOR_END_TYPE_CLASS' ]) = 1))) >= 1) 
OR (NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))) >= 1) OR (SIZEOF(QUERY (sc <* QUERY (pd 
<* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| (pd.name 
= 'service characteristics'))| NOT (SIZEOF(QUERY (dsc <* QUERY (pdr <* 
USEDIN(sc, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'design service characteristics'))| 
(SIZEOF(QUERY (it <* dsc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name = 
'maximum temperature'))) <= 1))) = 1))) = 0));
      WR13:
         NOT 
(SELF\shape_aspect.of_shape\property_definition.
definition\product_definition.frame_of_reference\application_context_element.
name IN [ 'functional definition', 'functional occurrence' ]) OR
 (SIZEOF(QUERY (pdr <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.SHAPE_REPRESENTATION' IN 
TYPEOF(pdr.used_representation)))) = 0);
   END_ENTITY;

   ENTITY plant_item_interference
   SUBTYPE OF (product_definition_relationship);
   END_ENTITY;

   ENTITY plant_item_route
   SUBTYPE OF (product_definition_shape);
   WHERE
      WR1:
         
SELF\property_definition.definition\product_definition.
frame_of_reference\application_context_element.
name = 'physical occurrence';
      WR2:
         (SIZEOF(TYPEOF(SELF\property_definition.definition) * [ 
'PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_DEFINITION', 
'PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_DEFINITION' ]) = 1) XOR 
(SIZEOF(TYPEOF(SELF\property_definition.definition) * [ 
'PLANT_SPATIAL_CONFIGURATION.PLANT_ARRANGEMENT_DEFINITION', 
'PLANT_SPATIAL_CONFIGURATION.PLANT_ARRANGEMENT_SEGMENT_DEFINITION' ]) = 
1);
   END_ENTITY;

   ENTITY plant_item_weight_representation
   SUBTYPE OF (property_definition_representation);
   WHERE
      WR1:
         SELF.used_representation.name = 'item weight';
      WR2:
         SIZEOF(SELF.used_representation.items) >= 2;
      WR3:
         SIZEOF(QUERY (it <* SELF.used_representation.items| (it.name 
IN [ 'weight value', 'maximum weight value', 'minimum weight value' ]) 
AND NOT (SIZEOF(TYPEOF(it) * [ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.QUALIFIED_REPRESENTATION_ITEM' ]) = 2))) = 
0;
      WR4:
         SIZEOF(QUERY (it <* SELF.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'centre of gravity'))) = 1;
      WR5:
         (1 <= SIZEOF(QUERY (it <* SELF.used_representation.items| 
(it.name IN [ 'weight value', 'maximum weight value',
 'minimum weight value' ])))) AND (SIZEOF(QUERY (it <* SELF.used_representation.items| 
(it.name IN [ 'weight value', 'maximum weight value',
 'minimum weight value' ]))) <= 2);
      WR6:
         SIZEOF(QUERY (it <* 
SELF\property_definition_representation.used_representation.items| 
(it.name IN [ 'maximum weight value', 'minimum weight value' ]) AND NOT 
(SIZEOF(QUERY (tq <* QUERY (qual <* 
it\qualified_representation_item.qualifiers| 
('PLANT_SPATIAL_CONFIGURATION.TYPE_QUALIFIER' IN TYPEOF(qual)))| 
(tq.name = 'operating'))) = 1))) = 0;
   END_ENTITY;

   ENTITY plant_line_definition
   SUBTYPE OF (product_definition_with_associated_documents);
   WHERE
      WR1:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PIPING_SYSTEM' IN 
TYPEOF(pdr.relating_product_definition)))) = 1;
      WR2:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATING_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_DEFINITION' IN 
TYPEOF(pdr.related_product_definition)))) >= 1;
      WR3:
         NOT (SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| 
(SIZEOF(USEDIN(pd, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) >= 1))) = 0) OR 
(SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (pdr <* USEDIN(pd, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| (SIZEOF(QUERY (rep <* 
USEDIN(pdr.used_representation.context_of_items, 
'PLANT_SPATIAL_CONFIGURATION.REPRESENTATION.CONTEXT_OF_ITEMS')| 
(SIZEOF(QUERY (prop_def_rep <* USEDIN(rep, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION')| (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.SITE', 
'PLANT_SPATIAL_CONFIGURATION.SITE_BUILDING' ] * 
TYPEOF(prop_def_rep.definition)) = 1) OR 
('PLANT_SPATIAL_CONFIGURATION.PLANT' IN 
TYPEOF(prop_def_rep.definition.definition.formation.of_product)))) >= 
1))) >= 1))) >= 1))) = 0);
      WR4:
         SELF.frame_of_reference.name = 'functional definition';
      WR5:
         SIZEOF(QUERY (pds <* QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pd)))| NOT (SIZEOF(QUERY (sa <* USEDIN(pds, 
'PLANT_SPATIAL_CONFIGURATION.SHAPE_ASPECT.OF_SHAPE')| 
('PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_TERMINATION' IN 
TYPEOF(sa)) AND (sa.description = 'piping line termination'))) <= 2))) 
= 0;
   END_ENTITY;

   ENTITY plant_line_segment_definition
   SUBTYPE OF (product_definition);
   WHERE
      WR1:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_DEFINITION' IN 
TYPEOF(pdr.relating_product_definition)))) >= 1;
      WR2:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.SHAPE_DEFINITION' IN TYPEOF(pd)))) >= 1;
      WR3:
         SELF.frame_of_reference\application_context_element.name = 
'functional definition';
      WR4:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (pdr <* USEDIN(pd, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'line segment characteristics'))) = 
1))) = 0;
      WR5:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (lsc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'line segment characteristics'))| NOT 
(SIZEOF(lsc.used_representation.items) >= 2))) = 0))) = 0;
      WR6:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (lsc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'line segment characteristics'))| NOT 
(SIZEOF(QUERY (it <* lsc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'design pressure'))) = 1))) = 0))) = 0;
      WR7:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (lsc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'line segment characteristics'))| NOT 
(SIZEOF(QUERY (it <* lsc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name = 
'design temperature'))) = 1))) = 0))) = 0;
      WR8:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (lsc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'line segment characteristics'))| NOT 
(SIZEOF(QUERY (it <* lsc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name = 'elevation'))) <= 1))) = 0))) = 0;
      WR9:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (lsc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'line segment characteristics'))| NOT 
(SIZEOF(QUERY (it <* lsc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'corrosion allowance'))) <= 1))) = 0))) = 0;
      WR10:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'segment insulation'))) >= 1) OR (SIZEOF(QUERY (si <* QUERY 
(pdr <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'segment insulation'))| NOT (SIZEOF(QUERY (pd <* USEDIN(si, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (pds <* QUERY (pdr <* USEDIN(pd, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pdr)))| (pds.used_representation.
name = 'segment insulation characteristics'))) = 1))) = 0))) = 0);
      WR11:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'segment insulation'))) >= 1) OR (SIZEOF(QUERY (si <* QUERY 
(pdr <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'segment insulation'))| NOT (SIZEOF(QUERY (pd <* USEDIN(si, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN(pd, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pdr)))| (pds.used_representation.
name = 'segment insulation characteristics'))|
 (SIZEOF(sic.used_representation.items) >= 1))) = 1))) = 0))) = 0);
      WR12:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'segment insulation'))) >= 1) OR (SIZEOF(QUERY (si <* QUERY 
(pdr <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'segment insulation'))| NOT (SIZEOF(QUERY (pd <* USEDIN(si, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN(pd, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pdr)))| (pds.used_representation.
name = 'segment insulation characteristics'))|
 (1 <= SIZEOF(QUERY (it <* sic.used_representation.items|
 (SIZEOF(TYPEOF(it) * 
['PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name IN [ 'thickness', 'minimum thickness',
 'maximum thickness' ])))) AND (SIZEOF(QUERY (it <* sic.used_representation.items| 
(SIZEOF(TYPEOF(it) * [ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name IN [ 'thickness', 'minimum thickness',
 'maximum thickness' ]))) <= 2))) = 1))) = 0))) = 0);
      WR13:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'segment insulation'))) >= 1) OR (SIZEOF(QUERY (si <* QUERY 
(pdr <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'segment insulation'))| NOT (SIZEOF(QUERY (pd <* USEDIN(si, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN(pd, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pdr)))| (pds.used_representation.
name = 'segment insulation characteristics'))| (SIZEOF(QUERY 
(it <* sic.used_representation.items| (SIZEOF(TYPEOF(it) * [ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name = 'thickness'))) <= 1))) = 1))) = 0))) = 0);
      WR14:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'segment insulation'))) >= 1) OR (SIZEOF(QUERY (si <* QUERY 
(pdr <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'segment insulation'))| NOT (SIZEOF(QUERY (pd <* USEDIN(si, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN(pd, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pdr)))| (pds.used_representation.
name = 'segment insulation characteristics'))|
 (SIZEOF(QUERY (it <* sic.used_representation.items| 
(SIZEOF(TYPEOF(it) * [ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name = 'minimum thickness'))) <= 1))) = 1))) = 0))) = 0);
      WR15:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'segment insulation'))) >= 1) OR (SIZEOF(QUERY (si <* QUERY 
(pdr <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'segment insulation'))| NOT (SIZEOF(QUERY (pd <* USEDIN(si, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN(pd, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pdr)))| (pds.used_representation.
name = 'segment insulation characteristics'))|
 (SIZEOF(QUERY (it <* sic.used_representation.items| 
(SIZEOF(TYPEOF(it) * [ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name = 'maximum thickness'))) <= 1))) = 1))) = 0))) = 0);
      WR16:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'segment insulation'))) >= 1) OR (SIZEOF(QUERY (si <* QUERY 
(pdr <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
(pdr.name = 'segment insulation'))| NOT (SIZEOF(QUERY (pd <* USEDIN(si, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(QUERY (sic <* QUERY (pds <* QUERY (pdr <* USEDIN(pd, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pdr)))| (pds.used_representation.
name = 'segment insulation characteristics'))|
 (SIZEOF(QUERY (it <* sic.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'boundaries'))) <= 1))) = 1))) = 0))) = 0);
      WR17:
         SIZEOF(QUERY (pds <* QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(pd)))| NOT (SIZEOF(QUERY (sa <* USEDIN(pds, 
'PLANT_SPATIAL_CONFIGURATION.SHAPE_ASPECT.OF_SHAPE')| 
('PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_TERMINATION' IN 
TYPEOF(sa)))) = 2))) = 0;
   END_ENTITY;

   ENTITY plant_line_segment_termination
   SUBTYPE OF (shape_aspect);
   WHERE
      WR1:
         (SELF.description = 'piping line segment termination') AND 
('PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_DEFINITION' IN 
TYPEOF(SELF.of_shape.definition)) XOR 
(((SELF.description = 'piping line termination') AND 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_RELATIONSHIP' IN 
TYPEOF(SELF.of_shape.definition))) AND 
('PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_SEGMENT_DEFINITION' IN 
TYPEOF(SELF.of_shape.definition.related_product_definition))) AND 
('PLANT_SPATIAL_CONFIGURATION.PLANT_LINE_DEFINITION' IN 
TYPEOF(SELF.of_shape.definition.relating_product_definition));
      WR2:
         SIZEOF(QUERY (sar <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT') + USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT')| NOT 
(SIZEOF(TYPEOF(sar) * [ 
'PLANT_SPATIAL_CONFIGURATION.LINE_BRANCH_CONNECTION', 
'PLANT_SPATIAL_CONFIGURATION.LINE_PLANT_ITEM_CONNECTION', 
'PLANT_SPATIAL_CONFIGURATION.LINE_TERMINATION_CONNECTION' ]) = 1))) = 
0;
      WR3:
         (SIZEOF(QUERY (sar <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'SHAPE_ASPECT_RELATIONSHIP.RELATED_SHAPE_ASPECT')| (SIZEOF(TYPEOF(sar) 
* [ 'PLANT_SPATIAL_CONFIGURATION.LINE_BRANCH_CONNECTION', 
'PLANT_SPATIAL_CONFIGURATION.LINE_TERMINATION_CONNECTION' ]) = 1))) = 
1) OR (SIZEOF(QUERY (sar <* USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' 
+ 'SHAPE_ASPECT_RELATIONSHIP.RELATING_SHAPE_ASPECT')| NOT 
('PLANT_SPATIAL_CONFIGURATION.LINE_PLANT_ITEM_CONNECTION' IN 
TYPEOF(sar)))) = 0);
   END_ENTITY;

   ENTITY plant_spatial_configuration_change_assignment
   SUBTYPE OF (action_assignment);
      items : SET [1:?] OF change_item;
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.CHANGE_ACTION' IN 
TYPEOF(SELF.assigned_action);
   END_ENTITY;

   ENTITY plant_spatial_configuration_organization_assignment
   SUBTYPE OF (organization_assignment);
      items : SET [1:?] OF 
plant_spatial_configuration_organization_item;
   WHERE
      WR1:
         plant_spatial_configuration_organization_correlation(SELF);
   END_ENTITY;

   ENTITY 
plant_spatial_configuration_person_and_organization_assignment
   SUBTYPE OF (person_and_organization_assignment);
      items : SET [1:?] OF 
plant_spatial_configuration_person_and_organization_item;
   WHERE
      WR1:
         
plant_spatial_configuration_person_and_organization_correlation(SELF);
   END_ENTITY;

   ENTITY plant_spatial_configuration_person_assignment
   SUBTYPE OF (person_assignment);
      items : SET [1:?] OF plant_spatial_configuration_person_item;
   WHERE
      WR1:
         plant_spatial_configuration_person_correlation(SELF);
   END_ENTITY;

   ENTITY point
   SUPERTYPE OF (ONEOF(cartesian_point, point_on_curve, 
point_on_surface, point_replica, degenerate_pcurve))
   SUBTYPE OF (geometric_representation_item);
   END_ENTITY;

   ENTITY point_on_curve
   SUBTYPE OF (point);
      basis_curve : curve;
      point_parameter : parameter_value;
   END_ENTITY;

   ENTITY point_on_surface
   SUBTYPE OF (point);
      basis_surface : surface;
      point_parameter_u : parameter_value;
      point_parameter_v : parameter_value;
   END_ENTITY;

   ENTITY point_replica
   SUBTYPE OF (point);
      parent_pt : point;
      transformation : cartesian_transformation_operator;
   WHERE
      WR1:
         transformation.dim = parent_pt.dim;
      WR2:
         acyclic_point_replica(SELF, parent_pt);
   END_ENTITY;

   ENTITY point_style;
      name : label;
      marker : marker_select;
      marker_size : size_select;
      marker_colour : colour;
   END_ENTITY;

   ENTITY poly_loop
   SUBTYPE OF (loop, geometric_representation_item);
      polygon : LIST [3:?] OF UNIQUE cartesian_point;
   END_ENTITY;

   ENTITY polyline
   SUBTYPE OF (bounded_curve);
      points : LIST [2:?] OF cartesian_point;
   END_ENTITY;

   ENTITY pre_defined_character_glyph
   SUBTYPE OF (pre_defined_item);
   END_ENTITY;

   ENTITY pre_defined_colour
   SUBTYPE OF (pre_defined_item, colour);
   END_ENTITY;

   ENTITY pre_defined_curve_font
   SUBTYPE OF (pre_defined_item);
   END_ENTITY;

   ENTITY pre_defined_item;
      name : label;
   END_ENTITY;

   ENTITY pre_defined_surface_side_style
   SUBTYPE OF (pre_defined_item);
   END_ENTITY;

   ENTITY pre_defined_text_font
   SUBTYPE OF (pre_defined_item);
   END_ENTITY;

   ENTITY precision_qualifier;
      precision_value : INTEGER;
   END_ENTITY;

   ENTITY presentation_area
   SUBTYPE OF (presentation_representation);
   WHERE
      WR1:
         (SIZEOF(QUERY (ais <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 'AREA_IN_SET.AREA')| 
(SIZEOF(USEDIN(ais, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PRESENTATION_SIZE.UNIT')) = 1))) > 0) OR (SIZEOF(USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 'PRESENTATION_SIZE.UNIT')) = 1);
   END_ENTITY;

   ENTITY presentation_layer_assignment;
      name : label;
      description : text;
      assigned_items : SET [1:?] OF layered_item;
   END_ENTITY;

   ENTITY presentation_layer_usage;
      assignment : presentation_layer_assignment;
      presentation : presentation_representation;
   UNIQUE
      UR1 : assignment, presentation;
   END_ENTITY;

   ENTITY presentation_representation
   SUBTYPE OF (representation);
   WHERE
      WR1:
         
SELF\representation.context_of_items\geometric_representation_context.
coordinate_space_dimension = 2;
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_REPRESENTATION_CONTEXT' 
IN TYPEOF(SELF\representation.context_of_items);
   END_ENTITY;

   ENTITY presentation_representation_relationship
   SUBTYPE OF (representation_relationship_with_transformation);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.PRESENTATION_REPRESENTATION' IN 
TYPEOF(SELF\representation_relationship.rep_1);
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.PRESENTATION_REPRESENTATION' IN 
TYPEOF(SELF\representation_relationship.rep_2);
      WR3:
         acyclic_presentation_representation_relationship(SELF,
 [SELF\representation_relationship.rep_2 ]);
      WR4:
         NOT (('PLANT_SPATIAL_CONFIGURATION.PRESENTATION_AREA' IN 
TYPEOF(SELF\representation_relationship.rep_1)) AND NOT (SIZEOF([ 
('PLANT_SPATIAL_CONFIGURATION.' + 'PRODUCT_DATA_REPRESENTATION_VIEW'), 
('PLANT_SPATIAL_CONFIGURATION.' + 
'VIEW_DEPENDENT_ANNOTATION_REPRESENTATION') ] * 
TYPEOF(SELF\representation_relationship.rep_2)) = 0));
      WR5:
         NOT (('PLANT_SPATIAL_CONFIGURATION.PRESENTATION_VIEW' IN 
TYPEOF(SELF\representation_relationship.rep_1)) AND NOT (SIZEOF([ 
('PLANT_SPATIAL_CONFIGURATION.' + 'PRESENTATION_AREA'), 
('PLANT_SPATIAL_CONFIGURATION.' + 'PRESENTATION_VIEW'), 
('PLANT_SPATIAL_CONFIGURATION.' + 
'AREA_DEPENDENT_ANNOTATION_REPRESENTATION') ] * 
TYPEOF(SELF\representation_relationship.rep_2)) = 0));
      WR6:
         NOT ('PLANT_SPATIAL_CONFIGURATION.PRESENTATION_VIEW' IN 
TYPEOF(SELF\representation_relationship.rep_2)) XOR 
('PLANT_SPATIAL_CONFIGURATION.PRESENTATION_AREA' IN 
TYPEOF(SELF\representation_relationship.rep_1));
      WR7:
         NOT ('PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DATA_REPRESENTATION_VIEW' IN 
TYPEOF(SELF\representation_relationship.rep_1) + 
TYPEOF(SELF\representation_relationship.rep_2)) XOR 
('PLANT_SPATIAL_CONFIGURATION.PRESENTATION_VIEW' IN 
TYPEOF(SELF\representation_relationship.rep_1)) AND 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DATA_REPRESENTATION_VIEW' IN 
TYPEOF(SELF\representation_relationship.rep_2));
      WR8:
         'PLANT_SPATIAL_CONFIGURATION.GRAPHICAL_TRANSFORMATION' IN 
TYPEOF(SELF\representation_relationship_with_transformation.
transformation_operator);
   END_ENTITY;

   ENTITY presentation_scaled_placement
   SUBTYPE OF (geometric_representation_item);
      placement : axis2_placement;
      scaling : positive_ratio_measure;
   END_ENTITY;

   ENTITY presentation_set;
   INVERSE
      areas : SET [1:?] OF area_in_set FOR in_set;
   END_ENTITY;

   ENTITY presentation_size;
      unit : presentation_size_assignment_select;
      size : planar_box;
   WHERE
      WR1:
         ('PLANT_SPATIAL_CONFIGURATION.PRESENTATION_REPRESENTATION' IN 
TYPEOF(SELF.unit)) AND item_in_context(SELF.size, 
SELF.unit\representation.context_of_items) OR 
('PLANT_SPATIAL_CONFIGURATION.AREA_IN_SET' IN TYPEOF(SELF.unit)) AND 
(SIZEOF(QUERY (ais <* SELF.unit\area_in_set.in_set.areas| NOT 
item_in_context(SELF.size, ais.area\representation.context_of_items))) 
= 0);
   END_ENTITY;

   ENTITY presentation_style_assignment;
      styles : SET [1:?] OF presentation_style_select;
   WHERE
      WR1:
         SIZEOF(QUERY (style1 <* SELF.styles| NOT (SIZEOF(QUERY (style2 
<* SELF.styles - style1| NOT ((TYPEOF(style1) <> TYPEOF(style2)) OR 
(SIZEOF([ ('PLANT_SPATIAL_CONFIGURATION.' + 'SURFACE_STYLE_USAGE'), 
('PLANT_SPATIAL_CONFIGURATION.' + 'EXTERNALLY_DEFINED_STYLE') ] * 
TYPEOF(style1)) = 1)))) = 0))) = 0;
      WR2:
         SIZEOF(QUERY (style1 <* SELF.styles| 
('PLANT_SPATIAL_CONFIGURATION.SURFACE_STYLE_USAGE' IN TYPEOF(style1)))) 
<= 2;
   END_ENTITY;

   ENTITY presentation_style_by_context
   SUBTYPE OF (presentation_style_assignment);
      style_context : style_context_select;
   END_ENTITY;

   ENTITY presentation_view
   SUBTYPE OF (presentation_representation);
   END_ENTITY;

   ENTITY presentation_with_association
   SUBTYPE OF (presentation_representation);
   WHERE
      WR1:
         SIZEOF(SELF\representation.items) = 1;
      WR2:
         SIZEOF(QUERY (pir <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRESENTED_ITEM_REPRESENTATION.PRESENTATION')| NOT 
('PLANT_SPATIAL_CONFIGURATION.PRESENTED_ITEM_WITH_ASSOCIATION' IN 
TYPEOF(pir.item)))) = 0;
      WR3:
         SIZEOF(QUERY (it <* SELF.items| NOT (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.ANNOTATION_SYMBOL_OCCURRENCE', 
'PLANT_SPATIAL_CONFIGURATION.ANNOTATION_TEXT_OCCURRENCE', 
'PLANT_SPATIAL_CONFIGURATION.ANNOTATION_CURVE_OCCURRENCE', 
'PLANT_SPATIAL_CONFIGURATION.ANNOTATION_POINT_OCCURRENCE' ] * 
TYPEOF(it)) = 1))) = 0;
   END_ENTITY;

   ENTITY presented_item
   ABSTRACT SUPERTYPE;
   END_ENTITY;

   ENTITY presented_item_association
   SUBTYPE OF (presented_item);
      items : SET [1:?] OF presented_item_select;
   END_ENTITY;

   ENTITY presented_item_representation;
      presentation : presentation_representation_select;
      item : presented_item;
   END_ENTITY;

   ENTITY presented_item_with_association
   SUBTYPE OF (presented_item);
      items : SET [1:?] OF associated_item;
   WHERE
      WR1:
         SIZEOF(QUERY (pir <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PRESENTED_ITEM_REPRESENTATION.ITEM')| NOT 
('PLANT_SPATIAL_CONFIGURATION.PRESENTATION_WITH_ASSOCIATION' IN 
TYPEOF(pir.presentation)))) = 0;
   END_ENTITY;

   ENTITY process_capability
   SUBTYPE OF (property_definition);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.PLANT' IN 
TYPEOF(SELF.definition\product_definition.formation.of_product);
      WR2:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.PROPERTY_DEFINITION_REPRESENTATION.' + 
'DEFINITION')| (pdr.used_representation.name = 'production capacity') 
AND NOT (SIZEOF(QUERY (it <* pdr.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'production type'))) = 1))) = 0;
   END_ENTITY;

   ENTITY product;
      id : identifier;
      name : label;
      description : OPTIONAL text;
      frame_of_reference : SET [1:?] OF product_context;
   END_ENTITY;

   ENTITY product_context
   SUBTYPE OF (application_context_element);
      discipline_type : label;
   END_ENTITY;

   ENTITY product_data_representation_view
   SUBTYPE OF (presentation_representation);
   WHERE
      WR1:
         SIZEOF(QUERY (item <* SELF\representation.items| NOT (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.CAMERA_IMAGE', 
'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT' ] * TYPEOF(item)) = 1))) 
= 0;
      WR2:
         SIZEOF(QUERY (item <* SELF\representation.items| 
('PLANT_SPATIAL_CONFIGURATION.CAMERA_IMAGE' IN TYPEOF(item)))) >= 1;
   END_ENTITY;

   ENTITY product_definition;
      id : identifier;
      description : OPTIONAL text;
      formation : product_definition_formation;
      frame_of_reference : product_definition_context;
   DERIVE
      name : label := get_name_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'NAME_ATTRIBUTE.NAMED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY product_definition_context
   SUBTYPE OF (application_context_element);
      life_cycle_stage : label;
   END_ENTITY;

   ENTITY product_definition_formation;
      id : identifier;
      description : OPTIONAL text;
      of_product : product;
   UNIQUE
      UR1 : id, of_product;
   END_ENTITY;

   ENTITY product_definition_formation_relationship;
      id : identifier;
      name : label;
      description : OPTIONAL text;
      relating_product_definition_formation : 
product_definition_formation;
      related_product_definition_formation : 
product_definition_formation;
   END_ENTITY;

   ENTITY product_definition_formation_with_specified_source
   SUBTYPE OF (product_definition_formation);
      make_or_buy : source;
   END_ENTITY;

   ENTITY product_definition_relationship;
      id : identifier;
      name : label;
      description : OPTIONAL text;
      relating_product_definition : product_definition;
      related_product_definition : product_definition;
   END_ENTITY;

   ENTITY product_definition_shape
   SUBTYPE OF (property_definition);
   UNIQUE
      UR1 : SELF\property_definition.definition;
   WHERE
      WR1:
         SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.CHARACTERIZED_PRODUCT_DEFINITION', 
'PLANT_SPATIAL_CONFIGURATION.CHARACTERIZED_OBJECT' ] * 
TYPEOF(SELF\property_definition.definition)) > 0;
   END_ENTITY;

   ENTITY product_definition_substitute;
      description : OPTIONAL text;
      context_relationship : product_definition_relationship;
      substitute_definition : product_definition;
   DERIVE
      name : label := get_name_value(SELF);
   WHERE
      WR1:
         context_relationship.related_product_definition :<>: 
substitute_definition;
      WR2:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'NAME_ATTRIBUTE.NAMED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY product_definition_usage
   SUPERTYPE OF (ONEOF(make_from_usage_option, 
assembly_component_usage))
   SUBTYPE OF (product_definition_relationship);
   UNIQUE
      UR1 : SELF\product_definition_relationship.id, 
SELF\product_definition_relationship.relating_product_definition, 
SELF\product_definition_relationship.related_product_definition;
   WHERE
      WR1:
         acyclic_product_definition_relationship(SELF, [ 
SELF\product_definition_relationship.related_product_definition ], 
'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_USAGE');
   END_ENTITY;

   ENTITY product_definition_with_associated_documents
   SUBTYPE OF (product_definition);
      documentation_ids : SET [1:?] OF document;
   END_ENTITY;

   ENTITY product_material_composition_relationship
   SUBTYPE OF (product_definition_relationship);
      class : label;
      constituent_amount : SET [1:?] OF measure_with_unit;
      composition_basis : label;
      determination_method : text;
   END_ENTITY;

   ENTITY property_definition;
      name : label;
      description : OPTIONAL text;
      definition : characterized_definition;
   DERIVE
      id : identifier := get_id_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ID_ATTRIBUTE.IDENTIFIED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY property_definition_relationship;
      name : label;
      description : text;
      relating_property_definition : property_definition;
      related_property_definition : property_definition;
   END_ENTITY;

   ENTITY property_definition_representation;
      definition : represented_definition;
      used_representation : representation;
   DERIVE
      description : text := get_description_value(SELF);
      name : label := get_name_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
      WR2:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'NAME_ATTRIBUTE.NAMED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY purchase_assignment
   SUBTYPE OF (action_assignment);
      items : SET [1:?] OF purchase_item;
   END_ENTITY;

   ENTITY qualified_representation_item
   SUBTYPE OF (representation_item);
      qualifiers : SET [1:?] OF value_qualifier;
   WHERE
      WR1:
         SIZEOF(QUERY (temp <* qualifiers| 
('PLANT_SPATIAL_CONFIGURATION.PRECISION_QUALIFIER' IN TYPEOF(temp)))) < 
2;
   END_ENTITY;

   ENTITY quasi_uniform_curve
   SUBTYPE OF (b_spline_curve);
   END_ENTITY;

   ENTITY quasi_uniform_surface
   SUBTYPE OF (b_spline_surface);
   END_ENTITY;

   ENTITY ratio_measure_with_unit
   SUBTYPE OF (measure_with_unit);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.RATIO_UNIT' IN 
TYPEOF(SELF\measure_with_unit.unit_component);
   END_ENTITY;

   ENTITY ratio_unit
   SUBTYPE OF (named_unit);
   WHERE
      WR1:
         ((((((SELF\named_unit.dimensions.length_exponent = 0.00000) 
AND (SELF\named_unit.dimensions.mass_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.time_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.electric_current_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 
0.00000)) AND (SELF\named_unit.dimensions.amount_of_substance_exponent 
= 0.00000)) AND (SELF\named_unit.dimensions.luminous_intensity_exponent 
= 0.00000);
   END_ENTITY;

   ENTITY rational_b_spline_curve
   SUBTYPE OF (b_spline_curve);
      weights_data : LIST [2:?] OF REAL;
   DERIVE
      weights : ARRAY [0:upper_index_on_control_points] OF REAL := 
list_to_array(weights_data, 0, upper_index_on_control_points);
   WHERE
      WR1:
         SIZEOF(weights_data) = 
SIZEOF(SELF\b_spline_curve.control_points_list);
      WR2:
         curve_weights_positive(SELF);
   END_ENTITY;

   ENTITY rational_b_spline_surface
   SUBTYPE OF (b_spline_surface);
      weights_data : LIST [2:?] OF LIST [2:?] OF REAL;
   DERIVE
      weights : ARRAY [0:u_upper] OF ARRAY [0:v_upper] OF REAL := 
make_array_of_array(weights_data, 0, u_upper, 0, v_upper);
   WHERE
      WR1:
         (SIZEOF(weights_data) = 
SIZEOF(SELF\b_spline_surface.control_points_list)) AND 
(SIZEOF(weights_data[1]) = 
SIZEOF(SELF\b_spline_surface.control_points_list[1]));
      WR2:
         surface_weights_positive(SELF);
   END_ENTITY;

   ENTITY rectangular_composite_surface
   SUBTYPE OF (bounded_surface);
      segments : LIST [1:?] OF LIST [1:?] OF surface_patch;
   DERIVE
      n_u : INTEGER := SIZEOF(segments);
      n_v : INTEGER := SIZEOF(segments[1]);
   WHERE
      WR1:
         SIZEOF(QUERY (s <* segments| (n_v <> SIZEOF(s)))) = 0;
      WR2:
         constraints_rectangular_composite_surface(SELF);
   END_ENTITY;

   ENTITY rectangular_pyramid
   SUBTYPE OF (geometric_representation_item);
      position : axis2_placement_3d;
      xlength : positive_length_measure;
      ylength : positive_length_measure;
      height : positive_length_measure;
   END_ENTITY;

   ENTITY rectangular_trimmed_surface
   SUBTYPE OF (bounded_surface);
      basis_surface : surface;
      u1 : parameter_value;
      u2 : parameter_value;
      v1 : parameter_value;
      v2 : parameter_value;
      usense : BOOLEAN;
      vsense : BOOLEAN;
   WHERE
      WR1:
         u1 <> u2;
      WR2:
         v1 <> v2;
      WR3:
         (('PLANT_SPATIAL_CONFIGURATION.ELEMENTARY_SURFACE' IN 
TYPEOF(basis_surface)) AND NOT ('PLANT_SPATIAL_CONFIGURATION.PLANE' IN 
TYPEOF(basis_surface)) OR 
('PLANT_SPATIAL_CONFIGURATION.SURFACE_OF_REVOLUTION' IN 
TYPEOF(basis_surface))) OR (usense = (u2 > u1));
      WR4:
         (('PLANT_SPATIAL_CONFIGURATION.SPHERICAL_SURFACE' IN 
TYPEOF(basis_surface)) OR 
('PLANT_SPATIAL_CONFIGURATION.TOROIDAL_SURFACE' IN 
TYPEOF(basis_surface))) OR (vsense = (v2 > v1));
   END_ENTITY;

   ENTITY reducer_fitting_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))) = 0))) = 0;
      WR2:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (pcd <* QUERY (it <* aca.items| 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))| NOT (SIZEOF(QUERY (aca1 <* 
USEDIN(pcd.formation.of_product, 'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
class_in_tree(aca1.assigned_class, 'reducer'))) = 1))) = 0))) = 0;
   END_ENTITY;

   ENTITY reference_geometry
   SUBTYPE OF (derived_shape_aspect);
   WHERE
      WR1:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 'PROPERTY_DEFINITION.DEFINITION')| NOT 
(SIZEOF(USEDIN(pd, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) >= 1))) = 0;
   END_ENTITY;

   ENTITY reinforcing_component_definition
   SUBTYPE OF (product_definition);
   END_ENTITY;

   ENTITY reparametrised_composite_curve_segment
   SUBTYPE OF (composite_curve_segment);
      param_length : parameter_value;
   WHERE
      WR1:
         param_length > 0.00000;
   END_ENTITY;

   ENTITY representation;
      name : label;
      items : SET [1:?] OF representation_item;
      context_of_items : representation_context;
   DERIVE
      id : identifier := get_id_value(SELF);
      description : text := get_description_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ID_ATTRIBUTE.IDENTIFIED_ITEM')) <= 1;
      WR2:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'DESCRIPTION_ATTRIBUTE.DESCRIBED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY representation_context;
      context_identifier : identifier;
      context_type : text;
   INVERSE
      representations_in_context : SET [1:?] OF representation FOR 
context_of_items;
   END_ENTITY;

   ENTITY representation_item;
      name : label;
   WHERE
      WR1:
         SIZEOF(using_representations(SELF)) > 0;
   END_ENTITY;

   ENTITY representation_item_relationship;
      name : label;
      description : OPTIONAL text;
      relating_representation_item : representation_item;
      related_representation_item : representation_item;
   END_ENTITY;

   ENTITY representation_map;
      mapping_origin : representation_item;
      mapped_representation : representation;
   INVERSE
      map_usage : SET [1:?] OF mapped_item FOR mapping_source;
   WHERE
      WR1:
         item_in_context(SELF.mapping_origin, 
SELF.mapped_representation.context_of_items);
   END_ENTITY;

   ENTITY representation_relationship;
      name : label;
      description : OPTIONAL text;
      rep_1 : representation;
      rep_2 : representation;
   END_ENTITY;

   ENTITY representation_relationship_with_transformation
   SUBTYPE OF (representation_relationship);
      transformation_operator : transformation;
   WHERE
      WR1:
         SELF\representation_relationship.rep_1.context_of_items :<>: 
SELF\representation_relationship.rep_2.context_of_items;
   END_ENTITY;

   ENTITY required_material_property
   SUBTYPE OF (material_property);
   WHERE
      WR1:
         (SIZEOF(TYPEOF(SELF\property_definition.definition) * [ 
'PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTOR', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'EXTERNALLY_DEFINED_PLANT_ITEM_DEFINITION') ]) = 1) OR 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION' IN 
TYPEOF(SELF.definition)) AND (SIZEOF(QUERY (pc <* 
SELF\property_definition.definition\product_definition.formation.
of_product.frame_of_reference| (pc.discipline_type = 'process plant'))) = 1);
      WR2:
         SIZEOF(QUERY (ra <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATED_PROPERTY_DEFINITION')| 
(pdr.name = 'requirement allocation'))| 
('PLANT_SPATIAL_CONFIGURATION.MATERIAL_PROPERTY' IN 
TYPEOF(ra.relating_property_definition)))) >= 1;
   END_ENTITY;

   ENTITY reserved_space
   SUBTYPE OF (shape_aspect);
   WHERE
      WR1:
         
SELF\shape_aspect.of_shape\property_definition.
definition\product_definition.frame_of_reference\application_context_element.
name = 'physical occurrence';
   END_ENTITY;

   ENTITY revolved_area_solid
   SUBTYPE OF (swept_area_solid);
      axis : axis1_placement;
      angle : plane_angle_measure;
   DERIVE
      axis_line : line := representation_item('') || 
geometric_representation_item() || curve() || line(axis.location, 
representation_item('') || geometric_representation_item() || 
vector(axis.z, 1.00000));
   END_ENTITY;

   ENTITY revolved_face_solid
   SUBTYPE OF (swept_face_solid);
      axis : axis1_placement;
      angle : plane_angle_measure;
   DERIVE
      axis_line : line := representation_item('') || 
geometric_representation_item() || curve() || line(axis.location, 
representation_item('') || geometric_representation_item() || 
vector(axis.z, 1.00000));
   END_ENTITY;

   ENTITY right_angular_wedge
   SUBTYPE OF (geometric_representation_item);
      position : axis2_placement_3d;
      x : positive_length_measure;
      y : positive_length_measure;
      z : positive_length_measure;
      ltx : length_measure;
   WHERE
      WR1:
         (0.00000 <= ltx) AND (ltx < x);
   END_ENTITY;

   ENTITY right_circular_cone
   SUBTYPE OF (geometric_representation_item);
      position : axis1_placement;
      height : positive_length_measure;
      radius : length_measure;
      semi_angle : plane_angle_measure;
   WHERE
      WR1:
         radius >= 0.00000;
   END_ENTITY;

   ENTITY right_circular_cylinder
   SUBTYPE OF (geometric_representation_item);
      position : axis1_placement;
      height : positive_length_measure;
      radius : positive_length_measure;
   END_ENTITY;

   ENTITY role_association;
      role : object_role;
      item_with_role : role_select;
   END_ENTITY;

   ENTITY seam_curve
   SUBTYPE OF (surface_curve);
   WHERE
      WR1:
         SIZEOF(SELF\surface_curve.associated_geometry) = 2;
      WR2:
         associated_surface(SELF\surface_curve.associated_geometry[1]) 
= associated_surface(SELF\surface_curve.associated_geometry[2]);
      WR3:
         'PLANT_SPATIAL_CONFIGURATION.PCURVE' IN 
TYPEOF(SELF\surface_curve.associated_geometry[1]);
      WR4:
         'PLANT_SPATIAL_CONFIGURATION.PCURVE' IN 
TYPEOF(SELF\surface_curve.associated_geometry[2]);
   END_ENTITY;

   ENTITY serial_numbered_effectivity
   SUBTYPE OF (effectivity);
      effectivity_start_id : identifier;
      effectivity_end_id : OPTIONAL identifier;
   END_ENTITY;

   ENTITY shape_aspect;
      name : label;
      description : OPTIONAL text;
      of_shape : product_definition_shape;
      product_definitional : LOGICAL;
   DERIVE
      id : identifier := get_id_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ID_ATTRIBUTE.IDENTIFIED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY shape_aspect_deriving_relationship
   SUBTYPE OF (shape_aspect_relationship);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.DERIVED_SHAPE_ASPECT' IN 
TYPEOF(SELF\shape_aspect_relationship.relating_shape_aspect);
   END_ENTITY;

   ENTITY shape_aspect_relationship;
      name : label;
      description : OPTIONAL text;
      relating_shape_aspect : shape_aspect;
      related_shape_aspect : shape_aspect;
   DERIVE
      id : identifier := get_id_value(SELF);
   WHERE
      WR1:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'ID_ATTRIBUTE.IDENTIFIED_ITEM')) <= 1;
   END_ENTITY;

   ENTITY shape_definition_representation
   SUBTYPE OF (property_definition_representation);
   WHERE
      WR1:
         ('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_SHAPE' IN 
TYPEOF(SELF.definition)) OR 
('PLANT_SPATIAL_CONFIGURATION.SHAPE_DEFINITION' IN 
TYPEOF(SELF.definition.definition));
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.SHAPE_REPRESENTATION' IN 
TYPEOF(SELF.used_representation);
   END_ENTITY;

   ENTITY shape_dimension_representation
   SUBTYPE OF (shape_representation);
   WHERE
      WR1:
         SIZEOF(QUERY (temp <* SELF\representation.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(temp)))) = 0;
      WR2:
         SIZEOF(SELF\representation.items) <= 3;
      WR3:
         SIZEOF(QUERY (pos_mri <* QUERY (real_mri <* 
SELF\representation.items| ('REAL' IN 
TYPEOF(real_mri\measure_with_unit.value_component)))| NOT 
(pos_mri\measure_with_unit.value_component > 0.00000))) = 0;
   END_ENTITY;

   ENTITY shape_representation
   SUBTYPE OF (representation);
   END_ENTITY;

   ENTITY shell_based_wireframe_model
   SUBTYPE OF (geometric_representation_item);
      sbwm_boundary : SET [1:?] OF shell;
   WHERE
      WR1:
         constraints_geometry_shell_based_wireframe_model(SELF);
   END_ENTITY;

   ENTITY si_unit
   SUBTYPE OF (named_unit);
      prefix : OPTIONAL si_prefix;
      name : si_unit_name;
   DERIVE
      SELF\named_unit.dimensions : dimensional_exponents := 
dimensions_for_si_unit(name);
   END_ENTITY;

   ENTITY site
   SUBTYPE OF (characterized_object, property_definition);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.PLANT' IN 
TYPEOF(SELF\property_definition.definition\product_definition.formation
.of_product);
   END_ENTITY;

   ENTITY site_building
   SUBTYPE OF (property_definition);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.SITE' IN TYPEOF(SELF.definition);
      WR2:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'building number') AND (SIZEOF(QUERY 
(it <* pdr.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM' IN 
TYPEOF(it)))) = 1))) = 1;
      WR3:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| (SIZEOF(QUERY (it <* 
pdr.used_representation.items| ((SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT_2D', 
'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT_3D' ] * TYPEOF(it)) = 1) 
AND (it.name = 'building orientation')) AND (it.location.name = 
'building location'))) = 1))) <= 1;
   END_ENTITY;

   ENTITY site_feature
   SUBTYPE OF (property_definition);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.SITE' IN TYPEOF(SELF.definition);
      WR2:
         SIZEOF(USEDIN(SELF, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')) = 3;
      WR3:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| (SIZEOF(QUERY (it <* 
pdr.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'site feature type'))) = 1))) = 1;
      WR4:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| (SIZEOF(QUERY (it <* 
pdr.used_representation.items| ((SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT_2D', 
'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT_3D' ] * TYPEOF(it)) = 1) 
AND (it.name = 'feature orientation')) AND (it.location.
name = 'feature location'))) = 1))) = 1;
      WR5:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| (SIZEOF(QUERY (it <* 
pdr.used_representation.items| 
(('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM' IN 
TYPEOF(pdr.used_representation)) AND (it.name = 'origin type')) AND 
(it.description IN [ 'man made', 'natural' ]))) = 1))) = 1;
   END_ENTITY;

   ENTITY site_representation
   SUBTYPE OF (shape_representation);
   WHERE
      WR1:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.USED_REPRESENTATION')| NOT 
('PLANT_SPATIAL_CONFIGURATION.SITE' IN 
TYPEOF(pdr.definition.definition)))) = 0;
      WR2:
         SIZEOF(QUERY (item <* SELF.items| NOT (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.CONNECTED_FACE_SET', 
'PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_CURVE_SET' ] * TYPEOF(item)) = 
1))) = 1;
      WR3:
         SIZEOF(QUERY (cfs <* QUERY (item <* SELF.items| 
('PLANT_SPATIAL_CONFIGURATION.CONNECTED_FACE_SET' IN TYPEOF(item)))| 
NOT (SIZEOF(QUERY (fcs <* cfs\connected_face_set.cfs_faces| NOT 
(SIZEOF(QUERY (bnds <* fcs.bounds| NOT 
('PLANT_SPATIAL_CONFIGURATION.POLY_LOOP' IN TYPEOF(bnds.bound)))) = 
0))) = 0))) = 0;
      WR4:
         SIZEOF(QUERY (cfs <* QUERY (item <* SELF.items| 
('PLANT_SPATIAL_CONFIGURATION.CONNECTED_FACE_SET' IN TYPEOF(item)))| 
NOT (SIZEOF(QUERY (fcs <* cfs\connected_face_set.cfs_faces| NOT 
(SIZEOF(QUERY (bnds <* fcs.bounds| NOT 
(SIZEOF(bnds.bound\poly_loop.polygon) = 3))) = 0))) = 0))) = 0;
      WR5:
         SIZEOF(QUERY (gcs <* QUERY (item <* SELF.items| 
('PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_CURVE_SET' IN TYPEOF(item)))| 
NOT (SIZEOF(QUERY (el <* gcs\geometric_set.elements| NOT (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.CARTESIAN_POINT', 
'PLANT_SPATIAL_CONFIGURATION.POLYLINE' ] * TYPEOF(el)) = 1))) = 0))) = 
0;
      WR6:
         SIZEOF(QUERY (gcs <* QUERY (item <* SELF.items| 
('PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_CURVE_SET' IN TYPEOF(item)))| 
NOT (SIZEOF(QUERY (el <* gcs\geometric_set.elements| 
('PLANT_SPATIAL_CONFIGURATION.CARTESIAN_POINT' IN TYPEOF(el)))) >= 1))) 
= 0;
      WR7:
         SIZEOF(QUERY (gcs <* QUERY (item <* SELF.items| 
('PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_CURVE_SET' IN TYPEOF(item)))| 
NOT (SIZEOF(QUERY (pline <* QUERY (el <* gcs\geometric_set.elements| 
('PLANT_SPATIAL_CONFIGURATION.POLYLINE' IN TYPEOF(el)))| NOT 
(SIZEOF(QUERY (pline_pt <* pline\polyline.points| NOT (pline_pt IN 
gcs\geometric_set.elements))) = 0))) = 0))) = 0;
   END_ENTITY;

   ENTITY sited_plant
   SUBTYPE OF (property_definition);
   UNIQUE
      UR1 : SELF\property_definition.definition;
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION' IN 
TYPEOF(SELF.definition);
      WR2:
         SELF.definition.frame_of_reference.
name = 'physical occurrence';
   END_ENTITY;

   ENTITY solid_angle_measure_with_unit
   SUBTYPE OF (measure_with_unit);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.SOLID_ANGLE_UNIT' IN 
TYPEOF(SELF\measure_with_unit.unit_component);
   END_ENTITY;

   ENTITY solid_angle_unit
   SUBTYPE OF (named_unit);
   WHERE
      WR1:
         ((((((SELF\named_unit.dimensions.length_exponent = 0.00000) 
AND (SELF\named_unit.dimensions.mass_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.time_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.electric_current_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 
0.00000)) AND (SELF\named_unit.dimensions.amount_of_substance_exponent 
= 0.00000)) AND (SELF\named_unit.dimensions.luminous_intensity_exponent 
= 0.00000);
   END_ENTITY;

   ENTITY solid_model
   SUPERTYPE OF (ONEOF(csg_solid, manifold_solid_brep, 
swept_face_solid, swept_area_solid))
   SUBTYPE OF (geometric_representation_item);
   END_ENTITY;

   ENTITY spacer_fitting_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))) = 0))) = 0;
      WR2:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (pcd <* QUERY (it <* aca.items| 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))| NOT (SIZEOF(QUERY (aca1 <* 
USEDIN(pcd.formation.of_product, 'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
class_in_tree(aca1.assigned_class, 'spacer'))) = 1))) = 0))) = 0;
   END_ENTITY;

   ENTITY specialty_item_class
   SUBTYPE OF (group);
   END_ENTITY;

   ENTITY sphere
   SUBTYPE OF (geometric_representation_item);
      radius : positive_length_measure;
      centre : point;
   END_ENTITY;

   ENTITY spherical_surface
   SUBTYPE OF (elementary_surface);
      radius : positive_length_measure;
   END_ENTITY;

   ENTITY stream_design_case
   SUBTYPE OF (property_definition, characterized_object);
   WHERE
      WR1:
         SIZEOF(QUERY (pd <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 'PROPERTY_DEFINITION.DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.STREAM_PHASE' IN TYPEOF(pd)))) >= 1;
      WR2:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream flow characteristics'))) = 1;
      WR3:
         SIZEOF(QUERY (sfc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream flow characteristics'))| NOT 
(SIZEOF(sfc.used_representation.items) >= 2))) = 0;
      WR4:
         SIZEOF(QUERY (sfc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream flow characteristics'))| NOT 
((1 <= SIZEOF(QUERY (it <* sfc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name IN [ 'flow rate', 'minimum flow rate', 
'maximum flow rate' ])))) AND (SIZEOF(QUERY (it <* 
sfc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name IN [ 'flow rate', 'minimum flow rate', 
'maximum flow rate' ]))) <= 2)))) = 0;
      WR5:
         SIZEOF(QUERY (sfc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream flow characteristics'))| NOT 
(SIZEOF(QUERY (it <* sfc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'flow rate'))) <= 1))) = 0;
      WR6:
         SIZEOF(QUERY (sfc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream flow characteristics'))| NOT 
(SIZEOF(QUERY (it <* sfc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'minimum flow rate'))) <= 1))) = 0;
      WR7:
         SIZEOF(QUERY (sfc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream flow characteristics'))| NOT 
(SIZEOF(QUERY (it <* sfc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'maximum flow rate'))) <= 1))) = 0;
      WR8:
         SIZEOF(QUERY (sfc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream flow characteristics'))| NOT 
((1 <= SIZEOF(QUERY (it <* sfc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name IN [ 'pressure', 'minimum pressure',
 'maximum pressure' ])))) AND (SIZEOF(QUERY (it <* sfc.
used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name IN [ 'pressure', 'minimum pressure',
 'maximum pressure' ]))) <= 2)))) = 0;
      WR9:
         SIZEOF(QUERY (sfc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream flow characteristics'))| NOT 
(SIZEOF(QUERY (it <* sfc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'pressure'))) <= 1))) = 0;
      WR10:
         SIZEOF(QUERY (sfc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream flow characteristics'))| NOT 
(SIZEOF(QUERY (it <* sfc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'minimum pressure'))) <= 1))) = 0;
      WR11:
         SIZEOF(QUERY (sfc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream flow characteristics'))| NOT 
(SIZEOF(QUERY (it <* sfc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'maximum pressure'))) <= 1))) = 0;
      WR12:
         SIZEOF(QUERY (sfc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream flow characteristics'))| NOT 
(SIZEOF(QUERY (it <* sfc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'stream data reference'))) <= 1))) = 0;
      WR13:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))) >= 
1) OR (SIZEOF(QUERY (sc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))| 
NOT (SIZEOF(QUERY (pdr <* USEDIN(sc.related_property_definition, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'service operating characteristics'))) 
= 1))) = 0);
      WR14:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))) >= 
1) OR (SIZEOF(QUERY (sc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))| 
NOT (SIZEOF(QUERY (soc <* QUERY (pdr <* 
USEDIN(sc.related_property_definition, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'service operating characteristics'))| 
NOT (SIZEOF(soc.used_representation.items) >= 3))) = 0))) = 0);
      WR15:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))) >= 
1) OR (SIZEOF(QUERY (sc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))| 
NOT (SIZEOF(QUERY (soc <* QUERY (pdr <* 
USEDIN(sc.related_property_definition, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'service operating characteristics'))| 
(1 <= SIZEOF(QUERY (it <* soc.used_representation.items| 
(SIZEOF(TYPEOF(it) * [ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name IN 
[ 'temperature', 'minimum temperature', 'maximum temperature' ])))) AND 
(SIZEOF(QUERY (it <* soc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name IN 
[ 'temperature', 'minimum temperature', 'maximum temperature' ]))) <= 
2))) = 1))) = 0);
      WR16:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))) >= 
1) OR (SIZEOF(QUERY (sc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))| 
NOT (SIZEOF(QUERY (soc <* QUERY (pdr <* 
USEDIN(sc.related_property_definition, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'service operating characteristics'))| 
(SIZEOF(QUERY (it <* soc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name = 
'temperature'))) <= 1))) = 1))) = 0);
      WR17:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))) >= 
1) OR (SIZEOF(QUERY (sc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))| 
NOT (SIZEOF(QUERY (soc <* QUERY (pdr <* 
USEDIN(sc.related_property_definition, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'service operating characteristics'))| 
(SIZEOF(QUERY (it <* soc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name = 
'minimum temperature'))) <= 1))) = 1))) = 0);
      WR18:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))) >= 
1) OR (SIZEOF(QUERY (sc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))| 
NOT (SIZEOF(QUERY (soc <* QUERY (pdr <* 
USEDIN(sc.related_property_definition, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'service operating characteristics'))| 
(SIZEOF(QUERY (it <* soc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name = 
'maximum temperature'))) <= 1))) = 1))) = 0);
      WR19:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))) >= 
1) OR (SIZEOF(QUERY (sc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))| 
NOT (SIZEOF(QUERY (soc <* QUERY (pdr <* 
USEDIN(sc.related_property_definition, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'service operating characteristics'))| 
(1 <= SIZEOF(QUERY (it <* soc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name IN [ 'pressure', 'minimum pressure',
 'maximum pressure' ])))) AND (SIZEOF(QUERY (it <* soc.
used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name IN [ 'pressure', 'minimum pressure',
 'maximum pressure' ]))) <= 2))) = 1))) = 0);
      WR20:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))) >= 
1) OR (SIZEOF(QUERY (sc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))| 
NOT (SIZEOF(QUERY (soc <* QUERY (pdr <* 
USEDIN(sc.related_property_definition, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'service operating characteristics'))| 
(SIZEOF(QUERY (it <* soc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'pressure'))) <= 1))) = 1))) = 0);
      WR21:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))) >= 
1) OR (SIZEOF(QUERY (sc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))| 
NOT (SIZEOF(QUERY (soc <* QUERY (pdr <* 
USEDIN(sc.related_property_definition, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'service operating characteristics'))| 
(SIZEOF(QUERY (it <* soc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'minimum pressure'))) <= 1))) = 1))) = 0);
      WR22:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))) >= 
1) OR (SIZEOF(QUERY (sc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))| 
NOT (SIZEOF(QUERY (soc <* QUERY (pdr <* 
USEDIN(sc.related_property_definition, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'service operating characteristics'))| 
(SIZEOF(QUERY (it <* soc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'maximum pressure'))) <= 1))) = 1))) = 0);
      WR23:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))) >= 
1) OR (SIZEOF(QUERY (sc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))| 
NOT (SIZEOF(QUERY (soc <* QUERY (pdr <* 
USEDIN(sc.related_property_definition, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'service operating characteristics'))| 
(1 <= SIZEOF(QUERY (it <* soc.used_representation.items| 
(SIZEOF(TYPEOF(it) * [ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.TIME_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name IN [ 'duration', 'minimum duration', 'maximum duration' ])))) 
AND (SIZEOF(QUERY (it <* soc.used_representation.items| 
(SIZEOF(TYPEOF(it) * [ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.TIME_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name IN [ 'duration', 'minimum duration', 'maximum duration' ]))) 
<= 2))) = 1))) = 0);
      WR24:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))) >= 
1) OR (SIZEOF(QUERY (sc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))| 
NOT (SIZEOF(QUERY (soc <* QUERY (pdr <* 
USEDIN(sc.related_property_definition, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'service operating characteristics'))| 
(SIZEOF(QUERY (it <* soc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.TIME_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name = 'duration'))) <= 1))) = 1))) = 0);
      WR25:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))) >= 
1) OR (SIZEOF(QUERY (sc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))| 
NOT (SIZEOF(QUERY (soc <* QUERY (pdr <* 
USEDIN(sc.related_property_definition, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'service operating characteristics'))| 
(SIZEOF(QUERY (it <* soc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.TIME_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name = 'minimum duration'))) <= 1))) = 1))) = 0);
      WR26:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))) >= 
1) OR (SIZEOF(QUERY (sc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))| 
NOT (SIZEOF(QUERY (soc <* QUERY (pdr <* 
USEDIN(sc.related_property_definition, 'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'service operating characteristics'))| 
(SIZEOF(QUERY (it <* soc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.TIME_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name = 'maximum duration'))) <= 1))) = 1))) = 0);
      WR27:
         NOT (SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))) >= 
1) OR (SIZEOF(QUERY (sc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_RELATIONSHIP.RELATING_PROPERTY_DEFINITION')| 
(pdr.related_property_definition.name = 'service characteristics'))| 
NOT ('PLANT_SPATIAL_CONFIGURATION.PLANT_ITEM_CONNECTOR' IN 
TYPEOF(sc.related_property_definition.definition)))) = 0);
   END_ENTITY;

   ENTITY stream_phase
   SUBTYPE OF (property_definition);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.STREAM_DESIGN_CASE' IN 
TYPEOF(SELF.definition);
      WR2:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream phase characteristics'))) = 1;
      WR3:
         SIZEOF(QUERY (spc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream phase characteristics'))| NOT 
(SIZEOF(spc.used_representation.items) >= 5))) = 0;
      WR4:
         SIZEOF(QUERY (spc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream phase characteristics'))| NOT 
(SIZEOF(QUERY (it <* spc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.RATIO_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name = 'constituent mole fraction'))) = 1))) = 0;
      WR5:
         SIZEOF(QUERY (spc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream phase characteristics'))| NOT 
(SIZEOF(QUERY (it <* spc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'constituents'))) = 1))) = 0;
      WR6:
         SIZEOF(QUERY (spc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream phase characteristics'))| NOT 
(SIZEOF(QUERY (it <* spc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'phase density'))) = 1))) = 0;
      WR7:
         SIZEOF(QUERY (spc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream phase characteristics'))| NOT 
(SIZEOF(QUERY (it <* spc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
'PLANT_SPATIAL_CONFIGURATION.RATIO_MEASURE_WITH_UNIT' ]) = 2) AND 
(it.name = 'phase fraction'))) = 1))) = 0;
      WR8:
         SIZEOF(QUERY (spc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream phase characteristics'))| NOT 
((1 <= SIZEOF(QUERY (it <* spc.used_representation.items| 
(SIZEOF(TYPEOF(it) * [ 
'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name IN 
[ 'temperature', 'minimum temperature', 'maximum temperature' ])))) AND 
(SIZEOF(QUERY (it <* spc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name IN 
[ 'temperature', 'minimum temperature', 'maximum temperature' ]))) <= 
2)))) = 0;
      WR9:
         SIZEOF(QUERY (spc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream phase characteristics'))| NOT 
(SIZEOF(QUERY (it <* spc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name = 
'temperature'))) <= 1))) = 0;
      WR10:
         SIZEOF(QUERY (spc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream phase characteristics'))| NOT 
(SIZEOF(QUERY (it <* spc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name = 
'minimum temperature'))) <= 1))) = 0;
      WR11:
         SIZEOF(QUERY (spc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream phase characteristics'))| NOT 
(SIZEOF(QUERY (it <* spc.used_representation.items| (SIZEOF(TYPEOF(it) 
* [ 'PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'THERMODYNAMIC_TEMPERATURE_MEASURE_WITH_UNIT') ]) = 2) AND (it.name = 
'maximum temperature'))) <= 1))) = 0;
      WR12:
         SIZEOF(QUERY (spc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream phase characteristics'))| NOT 
(SIZEOF(QUERY (it <* spc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'specific gravity'))) <= 1))) = 0;
      WR13:
         SIZEOF(QUERY (spc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream phase characteristics'))| NOT 
(SIZEOF(QUERY (it <* spc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'surface tension'))) <= 1))) = 0;
      WR14:
         SIZEOF(QUERY (spc <* QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PROPERTY_DEFINITION_REPRESENTATION.DEFINITION')| 
(pdr.used_representation.name = 'stream phase characteristics'))| NOT 
(SIZEOF(QUERY (it <* spc.used_representation.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name = 'viscosity'))) <= 1))) = 0;
   END_ENTITY;

   ENTITY structural_load_connector_class
   SUBTYPE OF (group);
   END_ENTITY;

   ENTITY structural_system
   SUBTYPE OF (product_definition);
   WHERE
      WR1:
         SIZEOF(QUERY (pdr <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.' + 
'PRODUCT_DEFINITION_RELATIONSHIP.RELATED_PRODUCT_DEFINITION')| 
('PLANT_SPATIAL_CONFIGURATION.PLANT' IN 
TYPEOF(pdr.relating_product_definition.formation.of_product)) AND 
(pdr.relating_product_definition.frame_of_reference.
name = 'functional occurrence'))) = 1;
   END_ENTITY;

   ENTITY styled_item
   SUBTYPE OF (representation_item);
      styles : SET [1:?] OF presentation_style_assignment;
      item : representation_item;
   WHERE
      WR1:
         (SIZEOF(SELF.styles) = 1) XOR (SIZEOF(QUERY (pres_style <* 
SELF.styles| NOT ('PLANT_SPATIAL_CONFIGURATION.' + 
'PRESENTATION_STYLE_BY_CONTEXT' IN TYPEOF(pres_style)))) = 0);
   END_ENTITY;

   ENTITY support_constraint_representation
   SUBTYPE OF (representation);
   WHERE
      WR1:
         SIZEOF(SELF.items) >= 3;
      WR2:
         SIZEOF(QUERY (it <* SELF.items| 
('PLANT_SPATIAL_CONFIGURATION.MEASURE_REPRESENTATION_ITEM' IN 
TYPEOF(it)) AND (it.name IN [ 'negative x', 'positive x', 'negative y', 
'positive y', 'negative z', 'positive z', 'negative x rotation', 
'positive x rotation', 'negative y rotation', 'positive y rotation', 
'negative z rotation', 'positive z rotation' ]))) = 1;
      WR3:
         SIZEOF(QUERY (it <* SELF.items| 
('PLANT_SPATIAL_CONFIGURATION.RATIO_MEASURE_WITH_UNIT' IN TYPEOF(it)))) 
= 1;
      WR4:
         SIZEOF(QUERY (it <* SELF.items| 
('PLANT_SPATIAL_CONFIGURATION.DESCRIPTIVE_REPRESENTATION_ITEM' IN 
TYPEOF(it)))) = 1;
   END_ENTITY;

   ENTITY surface
   SUPERTYPE OF (ONEOF(elementary_surface, swept_surface, 
bounded_surface, offset_surface, oriented_surface, surface_replica))
   SUBTYPE OF (geometric_representation_item);
   END_ENTITY;

   ENTITY surface_curve
   SUPERTYPE OF (ONEOF(intersection_curve, seam_curve) ANDOR 
bounded_surface_curve)
   SUBTYPE OF (curve);
      curve_3d : curve;
      associated_geometry : LIST [1:2] OF pcurve_or_surface;
      master_representation : preferred_surface_curve_representation;
   DERIVE
      basis_surface : SET [1:2] OF surface := get_basis_surface(SELF);
   WHERE
      WR1:
         curve_3d.dim = 3;
      WR2:
         ('PLANT_SPATIAL_CONFIGURATION.PCURVE' IN 
TYPEOF(associated_geometry[1])) OR (master_representation <> 
pcurve_s1);
      WR3:
         ('PLANT_SPATIAL_CONFIGURATION.PCURVE' IN 
TYPEOF(associated_geometry[2])) OR (master_representation <> 
pcurve_s2);
      WR4:
         NOT ('PLANT_SPATIAL_CONFIGURATION.PCURVE' IN 
TYPEOF(curve_3d));
   END_ENTITY;

   ENTITY surface_of_linear_extrusion
   SUBTYPE OF (swept_surface);
      extrusion_axis : vector;
   END_ENTITY;

   ENTITY surface_of_revolution
   SUBTYPE OF (swept_surface);
      axis_position : axis1_placement;
   DERIVE
      axis_line : line := representation_item('') || 
geometric_representation_item() || curve() || 
line(axis_position.location, representation_item('') || 
geometric_representation_item() || vector(axis_position.z, 1.00000));
   END_ENTITY;

   ENTITY surface_patch
   SUBTYPE OF (founded_item);
      parent_surface : bounded_surface;
      u_transition : transition_code;
      v_transition : transition_code;
      u_sense : BOOLEAN;
      v_sense : BOOLEAN;
   INVERSE
      using_surfaces : BAG [1:?] OF rectangular_composite_surface FOR 
segments;
   WHERE
      WR1:
         NOT ('PLANT_SPATIAL_CONFIGURATION.CURVE_BOUNDED_SURFACE' IN 
TYPEOF(parent_surface));
   END_ENTITY;

   ENTITY surface_replica
   SUBTYPE OF (surface);
      parent_surface : surface;
      transformation : cartesian_transformation_operator_3d;
   WHERE
      WR1:
         acyclic_surface_replica(SELF, parent_surface);
   END_ENTITY;

   ENTITY surface_style_usage;
     side  : surface_side;
     style : surface_side_style_select;
   END_ENTITY;

   ENTITY swage_fitting_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))) = 0))) = 0;
      WR2:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (pcd <* QUERY (it <* aca.items| 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))| NOT (SIZEOF(QUERY (aca1 <* 
USEDIN(pcd.formation.of_product, 'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
class_in_tree(aca.assigned_class, 'swage'))) = 1))) = 0))) = 0;
   END_ENTITY;

   ENTITY swept_area_solid
   SUPERTYPE OF (ONEOF(revolved_area_solid, extruded_area_solid))
   SUBTYPE OF (solid_model);
      swept_area : curve_bounded_surface;
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.PLANE' IN 
TYPEOF(swept_area.basis_surface);
   END_ENTITY;

   ENTITY swept_face_solid
   SUPERTYPE OF (ONEOF(extruded_face_solid, revolved_face_solid))
   SUBTYPE OF (solid_model);
      swept_face : face_surface;
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.PLANE' IN 
TYPEOF(swept_face.face_geometry);
   END_ENTITY;

   ENTITY swept_surface
   SUPERTYPE OF (ONEOF(surface_of_linear_extrusion, 
surface_of_revolution))
   SUBTYPE OF (surface);
      swept_curve : curve;
   END_ENTITY;

   ENTITY symbol_colour;
      colour_of_symbol : colour;
   END_ENTITY;

   ENTITY symbol_representation
   SUBTYPE OF (representation);
   END_ENTITY;

   ENTITY symbol_representation_map
   SUBTYPE OF (representation_map);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.SYMBOL_REPRESENTATION' IN 
TYPEOF(SELF\representation_map.mapped_representation);
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT' IN 
TYPEOF(SELF\representation_map.mapping_origin);
   END_ENTITY;

   ENTITY symbol_representation_relationship
   SUBTYPE OF (representation_relationship_with_transformation);
   WHERE
      WR1:
         acyclic_symbol_representation_relationship(SELF,
 [SELF\representation_relationship.rep_2 ]);
      WR2:
         'PLANT_SPATIAL_CONFIGURATION.SYMBOL_REPRESENTATION' IN 
TYPEOF(SELF\representation_relationship.rep_1);
      WR3:
         'PLANT_SPATIAL_CONFIGURATION.SYMBOL_REPRESENTATION' IN 
TYPEOF(SELF\representation_relationship.rep_2);
   END_ENTITY;

   ENTITY symbol_style;
      name : label;
      style_of_symbol : symbol_style_select;
   END_ENTITY;

   ENTITY symbol_target
   SUBTYPE OF (geometric_representation_item);
      placement : axis2_placement;
      x_scale : positive_ratio_measure;
      y_scale : positive_ratio_measure;
   END_ENTITY;

   ENTITY symmetric_shape_aspect
   SUBTYPE OF (shape_aspect);
   INVERSE
      basis_relationships : SET [1:?] OF shape_aspect_relationship FOR 
relating_shape_aspect;
   WHERE
      WR1:
         SIZEOF(QUERY (x <* 
SELF\symmetric_shape_aspect.basis_relationships| 
('PLANT_SPATIAL_CONFIGURATION.CENTRE_OF_SYMMETRY' IN 
TYPEOF(x\shape_aspect_relationship.related_shape_aspect)))) >= 1;
   END_ENTITY;

   ENTITY system_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
(SIZEOF(TYPEOF(it) * [ 'PLANT_SPATIAL_CONFIGURATION.CABLEWAY_SYSTEM', 
'PLANT_SPATIAL_CONFIGURATION.DUCTING_SYSTEM', 
'PLANT_SPATIAL_CONFIGURATION.ELECTRICAL_SYSTEM', 
'PLANT_SPATIAL_CONFIGURATION.INSTRUMENTATION_AND_CONTROL_SYSTEM', 
'PLANT_SPATIAL_CONFIGURATION.MECHANICAL_SYSTEM', 
'PLANT_SPATIAL_CONFIGURATION.PIPING_SYSTEM', 
'PLANT_SPATIAL_CONFIGURATION.STRUCTURAL_SYSTEM' ]) = 1))) = 0))) = 0;
   END_ENTITY;

   ENTITY system_space
   SUBTYPE OF (product_definition_shape);
   WHERE
      WR1:
         SIZEOF(TYPEOF(SELF.definition) * [ 
'PLANT_SPATIAL_CONFIGURATION.ELECTRICAL_SYSTEM', 
'PLANT_SPATIAL_CONFIGURATION.DUCTING_SYSTEM', 
('PLANT_SPATIAL_CONFIGURATION.' + 
'INSTRUMENTATION_AND_CONTROL_SYSTEM'), 
'PLANT_SPATIAL_CONFIGURATION.MECHANICAL_SYSTEM', 
'PLANT_SPATIAL_CONFIGURATION.PIPING_SYSTEM', 
'PLANT_SPATIAL_CONFIGURATION.STRUCTURAL_SYSTEM' ]) = 1;
   END_ENTITY;

   ENTITY text_literal
   SUBTYPE OF (geometric_representation_item);
      literal : presentable_text;
      placement : axis2_placement;
      alignment : text_alignment;
      path : text_path;
      font : font_select;
   END_ENTITY;

   ENTITY text_literal_with_associated_curves
   SUBTYPE OF (text_literal);
      associated_curves : SET [1:?] OF curve;
   END_ENTITY;

   ENTITY text_literal_with_blanking_box
   SUBTYPE OF (text_literal);
      blanking : planar_box;
   END_ENTITY;

   ENTITY text_literal_with_delineation
   SUBTYPE OF (text_literal);
      delineation : text_delineation;
   END_ENTITY;

   ENTITY text_literal_with_extent
   SUBTYPE OF (text_literal);
      extent : planar_extent;
   END_ENTITY;

   ENTITY text_string_representation
   SUBTYPE OF (representation);
   WHERE
      WR1:
         SIZEOF(QUERY (item <* SELF\representation.items| (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.TEXT_LITERAL', 
'PLANT_SPATIAL_CONFIGURATION.ANNOTATION_TEXT', 
'PLANT_SPATIAL_CONFIGURATION.ANNOTATION_TEXT_CHARACTER', 
'PLANT_SPATIAL_CONFIGURATION.DEFINED_CHARACTER_GLYPH', 
'PLANT_SPATIAL_CONFIGURATION.COMPOSITE_TEXT', 
'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT' ] * TYPEOF(item)) = 0))) 
= 0;
      WR2:
         SIZEOF(QUERY (item <* SELF\representation.items| NOT (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.TEXT_LITERAL', 
'PLANT_SPATIAL_CONFIGURATION.ANNOTATION_TEXT', 
'PLANT_SPATIAL_CONFIGURATION.ANNOTATION_TEXT_CHARACTER', 
'PLANT_SPATIAL_CONFIGURATION.DEFINED_CHARACTER_GLYPH', 
'PLANT_SPATIAL_CONFIGURATION.COMPOSITE_TEXT' ] * TYPEOF(item)) = 0))) 
>= 1;
      WR3:
         SIZEOF(QUERY (a2p <* QUERY (item <* SELF\representation.items| 
('PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT' IN TYPEOF(item)))| NOT 
((SIZEOF(QUERY (at <* QUERY (item <* SELF\representation.items| 
('PLANT_SPATIAL_CONFIGURATION.' + 'ANNOTATION_TEXT' IN TYPEOF(item)))| 
(at\mapped_item.mapping_target :=: a2p))) >= 1) OR (SIZEOF(QUERY (atc 
<* QUERY (item <* SELF\representation.items| 
('PLANT_SPATIAL_CONFIGURATION.' + 'ANNOTATION_TEXT_CHARACTER' IN 
TYPEOF(item)))| (atc\mapped_item.mapping_target :=: a2p))) >= 1)))) = 
0;
   END_ENTITY;

   ENTITY text_style;
      name : label;
      character_appearance : character_style_select;
   END_ENTITY;

   ENTITY text_style_for_defined_font;
      text_colour : colour;
   END_ENTITY;

   ENTITY text_style_with_box_characteristics
   SUBTYPE OF (text_style);
      characteristics : SET [1:4] OF box_characteristic_select;
   WHERE
      WR1:
         SIZEOF(QUERY (c1 <* SELF.characteristics| (SIZEOF(QUERY (c2 <* 
SELF.characteristics - c1| (TYPEOF(c1) = TYPEOF(c2)))) > 0))) = 0;
   END_ENTITY;

   ENTITY text_style_with_mirror
   SUBTYPE OF (text_style);
      mirror_placement : axis2_placement;
   END_ENTITY;

   ENTITY thermodynamic_temperature_measure_with_unit
   SUBTYPE OF (measure_with_unit);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.THERMODYNAMIC_TEMPERATURE_UNIT' 
IN TYPEOF(SELF\measure_with_unit.unit_component);
   END_ENTITY;

   ENTITY thermodynamic_temperature_unit
   SUBTYPE OF (named_unit);
   WHERE
      WR1:
         ((((((SELF\named_unit.dimensions.length_exponent = 0.00000) 
AND (SELF\named_unit.dimensions.mass_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.time_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.electric_current_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 
1.00000)) AND (SELF\named_unit.dimensions.amount_of_substance_exponent 
= 0.00000)) AND (SELF\named_unit.dimensions.luminous_intensity_exponent 
= 0.00000);
   END_ENTITY;

   ENTITY time_measure_with_unit
   SUBTYPE OF (measure_with_unit);
   WHERE
      WR1:
         'PLANT_SPATIAL_CONFIGURATION.TIME_UNIT' IN 
TYPEOF(SELF\measure_with_unit.unit_component);
   END_ENTITY;

   ENTITY time_unit
   SUBTYPE OF (named_unit);
   WHERE
      WR1:
         ((((((SELF\named_unit.dimensions.length_exponent = 0.00000) 
AND (SELF\named_unit.dimensions.mass_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.time_exponent = 1.00000)) AND 
(SELF\named_unit.dimensions.electric_current_exponent = 0.00000)) AND 
(SELF\named_unit.dimensions.thermodynamic_temperature_exponent = 
0.00000)) AND (SELF\named_unit.dimensions.amount_of_substance_exponent 
= 0.00000)) AND (SELF\named_unit.dimensions.luminous_intensity_exponent 
= 0.00000);
   END_ENTITY;

   ENTITY topological_representation_item
   SUPERTYPE OF (ONEOF(vertex, edge, face_bound, face, vertex_shell, 
wire_shell, connected_face_set, loop ANDOR path))
   SUBTYPE OF (representation_item);
   END_ENTITY;

   ENTITY toroidal_surface
   SUBTYPE OF (elementary_surface);
      major_radius : positive_length_measure;
      minor_radius : positive_length_measure;
   END_ENTITY;

   ENTITY torus
   SUBTYPE OF (geometric_representation_item);
      position : axis1_placement;
      major_radius : positive_length_measure;
      minor_radius : positive_length_measure;
   WHERE
      WR1:
         major_radius > minor_radius;
   END_ENTITY;

   ENTITY trimmed_curve
   SUBTYPE OF (bounded_curve);
      basis_curve : curve;
      trim_1 : SET [1:2] OF trimming_select;
      trim_2 : SET [1:2] OF trimming_select;
      sense_agreement : BOOLEAN;
      master_representation : trimming_preference;
   WHERE
      WR1:
         (HIINDEX(trim_1) = 1) OR (TYPEOF(trim_1[1]) <> 
TYPEOF(trim_1[2]));
      WR2:
         (HIINDEX(trim_2) = 1) OR (TYPEOF(trim_2[1]) <> 
TYPEOF(trim_2[2]));
   END_ENTITY;

   ENTITY two_direction_repeat_factor
   SUBTYPE OF (one_direction_repeat_factor);
      second_repeat_factor : vector;
   END_ENTITY;

   ENTITY type_qualifier;
      name : label;
   END_ENTITY;

   ENTITY uncertainty_measure_with_unit
   SUBTYPE OF (measure_with_unit);
      name : label;
      description : OPTIONAL text;
   WHERE
      WR1:
         valid_measure_value(SELF\measure_with_unit.value_component);
   END_ENTITY;

   ENTITY uniform_curve
   SUBTYPE OF (b_spline_curve);
   END_ENTITY;

   ENTITY uniform_surface
   SUBTYPE OF (b_spline_surface);
   END_ENTITY;

   ENTITY valve_class
   SUBTYPE OF (group);
   WHERE
      WR1:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (it <* aca.items| NOT 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))) = 0))) = 0;
      WR2:
         SIZEOF(QUERY (aca <* QUERY (ca <* USEDIN(SELF, 
'PLANT_SPATIAL_CONFIGURATION.CLASSIFICATION_ASSIGNMENT.' + 
'ASSIGNED_CLASS')| 
('PLANT_SPATIAL_CONFIGURATION.APPLIED_CLASSIFICATION_ASSIGNMENT' IN 
TYPEOF(ca)))| NOT (SIZEOF(QUERY (pcd <* QUERY (it <* aca.items| 
('PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_DEFINITION' IN 
TYPEOF(it)))| NOT (SIZEOF(QUERY (aca1 <* 
USEDIN(pcd.formation.of_product, 'PLANT_SPATIAL_CONFIGURATION.' + 
'APPLIED_CLASSIFICATION_ASSIGNMENT.ITEMS')| 
class_in_tree(aca1.assigned_class, 'valve'))) = 1))) = 0))) = 0;
   END_ENTITY;

   ENTITY vector
   SUBTYPE OF (geometric_representation_item);
      orientation : direction;
      magnitude : length_measure;
   WHERE
      WR1:
         magnitude >= 0.00000;
   END_ENTITY;

   ENTITY versioned_action_request;
      id : identifier;
      version : label;
      purpose : text;
      description : OPTIONAL text;
   END_ENTITY;

   ENTITY vertex
   SUBTYPE OF (topological_representation_item);
   END_ENTITY;

   ENTITY vertex_loop
   SUBTYPE OF (loop);
      loop_vertex : vertex;
   END_ENTITY;

   ENTITY vertex_point
   SUBTYPE OF (vertex, geometric_representation_item);
      vertex_geometry : point;
   END_ENTITY;

   ENTITY vertex_shell
   SUBTYPE OF (topological_representation_item);
      vertex_shell_extent : vertex_loop;
   END_ENTITY;

   ENTITY view_dependent_annotation_representation
   SUBTYPE OF (presentation_representation);
   WHERE
      WR1:
         SIZEOF(QUERY (item <* SELF\representation.items| NOT (SIZEOF([ 
('PLANT_SPATIAL_CONFIGURATION.' + 'ANNOTATION_OCCURRENCE'), 
'PLANT_SPATIAL_CONFIGURATION.AXIS2_PLACEMENT' ] * TYPEOF(item)) = 1))) 
= 0;
      WR2:
         SIZEOF(QUERY (item <* SELF\representation.items| 
('PLANT_SPATIAL_CONFIGURATION.ANNOTATION_OCCURRENCE' IN TYPEOF(item)))) 
>= 1;
   END_ENTITY;

   ENTITY wire_shell
   SUBTYPE OF (topological_representation_item);
      wire_shell_extent : SET [1:?] OF loop;
   WHERE
      WR1:
         NOT mixed_loop_type_set(wire_shell_extent);
   END_ENTITY;
(* ***********************************
Functions in the schema plant_spatial_configuration
*********************************** *)
   FUNCTION acyclic_curve_replica
      (rep : curve_replica;
       parent : curve ) : BOOLEAN;
      IF NOT ('PLANT_SPATIAL_CONFIGURATION.CURVE_REPLICA' IN 
TYPEOF(parent)) THEN
         RETURN (TRUE);
      END_IF;
      IF parent :=: rep THEN
         RETURN (FALSE);
      ELSE
         RETURN (acyclic_curve_replica(rep, 
parent\curve_replica.parent_curve));
      END_IF;
   END_FUNCTION;

   FUNCTION acyclic_mapped_representation
      (parent_set : SET OF representation;
       children_set : SET OF representation_item ) : BOOLEAN;
   LOCAL
      x : SET OF representation_item;
      y : SET OF representation_item;
   END_LOCAL;
      x := QUERY (z <* children_set| 
'PLANT_SPATIAL_CONFIGURATION.MAPPED_ITEM' IN TYPEOF(z));
      IF SIZEOF(x) > 0 THEN
         REPEAT i := 1 TO HIINDEX(x);
            IF x[i]\mapped_item.mapping_source.mapped_representation IN 
parent_set THEN
               RETURN (FALSE);
            END_IF;
            IF NOT acyclic_mapped_representation((parent_set + 
x[i]\mapped_item.mapping_source.mapped_representation), 
x[i]\mapped_item.mapping_source.mapped_representation.items) THEN
               RETURN (FALSE);
            END_IF;
         END_REPEAT;
      END_IF;
      x := children_set - x;
      IF SIZEOF(x) > 0 THEN
         REPEAT i := 1 TO HIINDEX(x);
            y := QUERY (z <* bag_to_set(USEDIN(x[i], ''))| 
'PLANT_SPATIAL_CONFIGURATION.REPRESENTATION_ITEM' IN TYPEOF(z));
            IF NOT acyclic_mapped_representation(parent_set, y) THEN
               RETURN (FALSE);
            END_IF;
         END_REPEAT;
      END_IF;
      RETURN (TRUE);
   END_FUNCTION;

   FUNCTION acyclic_point_replica
      (rep : point_replica;
       parent : point ) : BOOLEAN;
      IF NOT ('PLANT_SPATIAL_CONFIGURATION.POINT_REPLICA' IN 
TYPEOF(parent)) THEN
         RETURN (TRUE);
      END_IF;
      IF parent :=: rep THEN
         RETURN (FALSE);
      ELSE
         RETURN (acyclic_point_replica(rep, 
parent\point_replica.parent_pt));
      END_IF;
   END_FUNCTION;

   FUNCTION acyclic_presentation_representation_relationship
      (relation : presentation_representation_relationship;
       children : SET OF presentation_representation ) : BOOLEAN;
   LOCAL
      x : SET OF presentation_representation_relationship;
      local_children : SET OF presentation_representation;
   END_LOCAL;
      REPEAT i := 1 TO HIINDEX(children);
         IF relation\representation_relationship.rep_1 :=: children[i] 
THEN
            RETURN (FALSE);
         END_IF;
      END_REPEAT;
      x := 
bag_to_set(USEDIN(relation\representation_relationship.rep_1, 
'PLANT_SPATIAL_CONFIGURATION.' + 'REPRESENTATION_RELATIONSHIP.REP_2'));
      local_children := children + 
relation\representation_relationship.rep_1;
      IF SIZEOF(x) > 0 THEN
         REPEAT i := 1 TO HIINDEX(x);
            IF NOT 
acyclic_presentation_representation_relationship(x[i], local_children) 
THEN
               RETURN (FALSE);
            END_IF;
         END_REPEAT;
      END_IF;
      RETURN (TRUE);
   END_FUNCTION;
(* ***********************************
Rules in the schema plant_spatial_configuration
*********************************** *)
   RULE application_context_requires_ap_definition FOR 
(application_context, application_protocol_definition );
   WHERE
      WR1:
         SIZEOF(QUERY (ac <* application_context| NOT (SIZEOF(QUERY 
(apd <* application_protocol_definition| (ac :=: apd.application) AND 
(apd.application_interpreted_model_schema_name = 
'plant_spatial_configuration'))) = 1))) = 0;
   END_RULE;

   RULE approval_requires_approval_date_time FOR (approval_date_time, 
approval );
   WHERE
      WR1:
         SIZEOF(QUERY (app <* approval| NOT (SIZEOF(QUERY (adt <* 
approval_date_time| (app :=: adt.dated_approval))) = 1))) = 0;
   END_RULE;

   RULE approval_requires_approval_person_organization FOR 
(approval_person_organization, approval );
   WHERE
      WR1:
         SIZEOF(QUERY (app <* approval| NOT (SIZEOF(QUERY (apo <* 
approval_person_organization| (app :=: apo.authorized_approval))) = 
1))) = 0;
   END_RULE;

   RULE change_action_requires_date FOR (change_action, 
applied_date_assignment );
   WHERE
      WR1:
         SIZEOF(QUERY (ca <* change_action| NOT (SIZEOF(QUERY (pscda <* 
applied_date_assignment| (ca IN pscda.items))) = 1))) = 0;
   END_RULE;

   RULE change_item_requires_creation_date FOR 
(plant_spatial_configuration_change_assignment, applied_date_assignment 
);
   WHERE
      WR1:
         SIZEOF(QUERY (pscca <* 
plant_spatial_configuration_change_assignment| NOT (SIZEOF(QUERY (ch_it 
<* pscca.items| NOT (SIZEOF(QUERY (pscda <* applied_date_assignment| 
NOT (ch_it IN pscda.items) OR (pscda.role.name = 'creation date'))) = 
1))) = 0))) = 0;
   END_RULE;

   RULE change_item_requires_id FOR 
(plant_spatial_configuration_change_assignment, 
change_item_id_assignment );
   WHERE
      WR1:
         SIZEOF(QUERY (pscca <* 
plant_spatial_configuration_change_assignment| NOT (SIZEOF(QUERY (ch_it 
<* pscca.items| NOT (SIZEOF(QUERY (ciia <* change_item_id_assignment| 
(ch_it IN ciia.items))) = 1))) = 0))) = 0;
   END_RULE;

   RULE change_life_cycle_stage_usage_requires_approval FOR 
(versioned_action_request, applied_approval_assignment );
   WHERE
      WR1:
         SIZEOF(QUERY (vareq <* versioned_action_request| NOT 
(SIZEOF(QUERY (pscaa <* applied_approval_assignment| (vareq IN 
pscaa.items))) = 1))) = 0;
   END_RULE;

   RULE change_life_cycle_stage_usage_requires_stage FOR 
(versioned_action_request, action_request_status );
   WHERE
      WR1:
         SIZEOF(QUERY (vareq <* versioned_action_request| NOT 
(SIZEOF(QUERY (ars <* action_request_status| (vareq :=: 
ars.assigned_request))) = 1))) = 0;
   END_RULE;

   RULE compatible_dimension FOR (cartesian_point, direction, 
representation_context, geometric_representation_context );
   WHERE
      WR1:
         SIZEOF(QUERY (x <* cartesian_point| (SIZEOF(QUERY (y <* 
geometric_representation_context| item_in_context(x, y) AND 
(HIINDEX(x.coordinates) <> y.coordinate_space_dimension))) > 0))) = 0;
      WR2:
         SIZEOF(QUERY (x <* direction| (SIZEOF(QUERY (y <* 
geometric_representation_context| item_in_context(x, y) AND 
(HIINDEX(x.direction_ratios) <> y.coordinate_space_dimension))) > 0))) 
= 0;
   END_RULE;

   RULE dependent_instantiable_application_context FOR 
(application_context );
   WHERE
      WR1:
         SIZEOF(QUERY (ac <* application_context| NOT 
(SIZEOF(USEDIN(ac, '')) >= 1))) = 0;
   END_RULE;

   RULE dependent_instantiable_product_context FOR (product_context );
   WHERE
      WR1:
         SIZEOF(QUERY (pc <* product_context| NOT (SIZEOF(USEDIN(pc, 
'')) >= 1))) = 0;
   END_RULE;

   RULE dependent_instantiable_product_definition_context FOR 
(product_definition_context );
   WHERE
      WR1:
         SIZEOF(QUERY (pdc <* product_definition_context| NOT 
(SIZEOF(USEDIN(pdc, '')) >= 1))) = 0;
   END_RULE;

   RULE description_attribute_limited_usage FOR (description_attribute 
);
   WHERE
      WR1: SIZEOF (QUERY (da <* description_attribute |
           NOT (da.attribute_value IN [ 'target entity name',
 'target schema name' ]))) = 0;
      WR2: SIZEOF (QUERY (da <* description_attribute |
           NOT (SIZEOF(TYPEOF(da.described_item) * [ 
'PLANT_SPATIAL_CONFIGURATION.EXTERNAL_SOURCE' ]) = 1))) = 0;
   END_RULE;

   RULE drawing_sheets_not_nested FOR 
(presentation_representation_relationship );
   WHERE
      WR1:
         SIZEOF(QUERY (p_r_r <* 
presentation_representation_relationship| 
('PLANT_SPATIAL_CONFIGURATION.DRAWING_SHEET_REVISION' IN 
TYPEOF(p_r_r.rep_1)) AND 
('PLANT_SPATIAL_CONFIGURATION.DRAWING_SHEET_REVISION' IN 
TYPEOF(p_r_r.rep_2)))) = 0;
   END_RULE;

   RULE mandatory_entity_type_for_external_schema_context FOR 
(external_source );
   WHERE
      WR1:
         SIZEOF(QUERY (tsn <* QUERY (es <* external_source| 
(es.description = 'target schema name'))| NOT (SIZEOF(QUERY (esr <* 
USEDIN(tsn, 'PLANT_SPATIAL_CONFIGURATION.EXTERNAL_SOURCE_RELATIONSHIP.' 
+ 'RELATING_SOURCE')| NOT (esr.related_source.
description = 'target entity name'))) = 0))) = 0;
      WR2:
         SIZEOF(QUERY (tsn <* QUERY (es <* external_source| 
(es.description = 'target entity name'))| NOT (SIZEOF(QUERY (esr <* 
USEDIN(tsn, 'PLANT_SPATIAL_CONFIGURATION.EXTERNAL_SOURCE_RELATIONSHIP.' 
+ 'RELATED_SOURCE')| NOT (esr.relating_source.
description = 'target schema name'))) = 0))) = 0;
   END_RULE;

   RULE product_context_discipline_type_constraint FOR (product_context 
);
   WHERE
      WR1:
         SIZEOF(QUERY (pc <* product_context| NOT (pc.discipline_type = 
'process plant'))) = 0;
   END_RULE;

   RULE product_definition_context_name_constraint FOR 
(product_definition_context );
   WHERE
      WR1:
         SIZEOF(QUERY (pdc <* product_definition_context| NOT (pdc.name 
IN [ 'functional definition', 'physical definition',
 'functional occurrence', 'physical occurrence', 'catalogue definition', 
'fabrication assembly', 'material' ]))) = 0;
   END_RULE;

   RULE product_definition_usage_constraint FOR (product_definition );
   WHERE
      WR1:
         SIZEOF(QUERY (pd <* product_definition| 
(pd.frame_of_reference.name = 'physical occurrence') AND NOT 
(SIZEOF(QUERY (pdr <* USEDIN(pd, 
'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_RELATIONSHIP.' + 
'RELATED_PRODUCT_DEFINITION')| (SIZEOF(TYPEOF(pdr) * [ 
'PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION_USAGE', 
'PLANT_SPATIAL_CONFIGURATION.MAKE_FROM_USAGE_OPTION', 
'PLANT_SPATIAL_CONFIGURATION.ASSEMBLY_COMPONENT_USAGE' ]) = 1))) <= 
1))) = 0;
   END_RULE;

   RULE subtype_exclusive_characterized_object FOR 
(characterized_object );
   WHERE
      WR1:
         SIZEOF(QUERY (co <* characterized_object| NOT (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.PIPING_COMPONENT_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.SITE', 
'PLANT_SPATIAL_CONFIGURATION.STREAM_DESIGN_CASE' ] * TYPEOF(co)) <= 
1))) = 0;
   END_RULE;

   RULE subtype_mandatory_externally_defined_item FOR 
(externally_defined_item );
   WHERE
      WR1:
         SIZEOF(QUERY (edi <* externally_defined_item| NOT (SIZEOF([ 
'PLANT_SPATIAL_CONFIGURATION.CATALOGUE_CONNECTOR', 
'PLANT_SPATIAL_CONFIGURATION.EXTERNALLY_DEFINED_CLASS', 
'PLANT_SPATIAL_CONFIGURATION.EXTERNALLY_DEFINED_PLANT_ITEM_DEFINITION', 
'PLANT_SPATIAL_CONFIGURATION.EXTERNALLY_DEFINED_DOCUMENT' ] * 
TYPEOF(edi)) = 1))) = 0;
   END_RULE;

   RULE subtype_mandatory_pre_defined_item FOR (pre_defined_item );
   WHERE
      WR1:
         SIZEOF(QUERY (pdi <* pre_defined_item| NOT 
('PLANT_SPATIAL_CONFIGURATION.KNOWN_SOURCE' IN TYPEOF(pdi)))) = 0;
   END_RULE;

   RULE subtype_mandatory_shape_representation FOR 
(shape_representation );
   WHERE
      WR1:
         SIZEOF(QUERY (sr <* shape_representation| NOT (SIZEOF([ 
('PLANT_SPATIAL_CONFIGURATION.' + 'PLANT_CSG_SHAPE_REPRESENTATION'), 
'PLANT_SPATIAL_CONFIGURATION.HYBRID_SHAPE_REPRESENTATION', 
'PLANT_SPATIAL_CONFIGURATION.SHAPE_DIMENSION_REPRESENTATION', 
('PLANT_SPATIAL_CONFIGURATION.' + 'SITE_REPRESENTATION'), 
'PLANT_SPATIAL_CONFIGURATION.PLANT_DESIGN_CSG_PRIMITIVE' ] * 
TYPEOF(sr)) = 1))) = 0;
   END_RULE;

   RULE symbol_representation_rule FOR 
(presentation_representation_relationship );
   WHERE
      WR1:
         SIZEOF(QUERY (each_1 <* 
presentation_representation_relationship| NOT 
('PLANT_SPATIAL_CONFIGURATION.' + 'SYMBOL_REPRESENTATION_RELATIONSHIP' 
IN TYPEOF(each_1)) AND (SIZEOF(QUERY (each_2 <* [ 
each_1\representation_relationship.rep_1, 
each_1\representation_relationship.rep_2 ]| 
('PLANT_SPATIAL_CONFIGURATION.SYMBOL_REPRESENTATION' IN 
TYPEOF(each_2)))) > 0))) = 0;
   END_RULE;

   RULE value_for_application_context FOR (application_context );
   WHERE
      WR1:
         SIZEOF(QUERY (ac <* application_context| NOT (ac.application = 
'plant spatial configuration'))) = 0;
   END_RULE;

   RULE version2_p41_object_role_selection FOR (role_association );
   WHERE
      WR1:
         SIZEOF(QUERY (ra <* role_association| NOT 
('PLANT_SPATIAL_CONFIGURATION.' + 
'PLANT_SPATIAL_CONFIGURATION_CHANGE_ASSIGNMENT' IN 
TYPEOF(ra.item_with_role)))) = 0;
   END_RULE;

   RULE version2_p41_uninstantiable_basic_attributes FOR (id_attribute, 
name_attribute );
   WHERE
      WR1:
         SIZEOF(bag_to_set(id_attribute)) = 0;
      WR2:
         SIZEOF(bag_to_set(name_attribute)) = 0;
   END_RULE;


  FUNCTION acyclic_composite_text(start_composite : composite_text;
                                child_text : SET [1:?] OF
                                text_or_character) : LOGICAL;
  LOCAL
   i : INTEGER;
   local_composite_text : SET [0:?] OF composite_text;
   local_annotation_text : SET [0:?] OF annotation_text;
   local_children : SET [0:?] OF text_or_character;
  END_LOCAL;

  local_composite_text := QUERY (child <* child_text |
                          ('PLANT_SPATIAL_CONFIGURATION.COMPOSITE_TEXT'
                           IN TYPEOF (child)));

  IF (SIZEOF (local_composite_text) > 0) THEN
    REPEAT i := 1 TO HIINDEX (local_composite_text);
      IF (start_composite :=: local_composite_text[i]) THEN
        RETURN (FALSE);
      END_IF;
    END_REPEAT;
  END_IF;

  local_children := child_text;

  IF (SIZEOF (local_composite_text)) > 0 THEN
    REPEAT i := 1 TO HIINDEX (local_composite_text);
      local_children := local_children +
                        local_composite_text[i].collected_text;
    END_REPEAT;
  END_IF;

  local_annotation_text := QUERY (child <* child_text |
                          ('PLANT_SPATIAL_CONFIGURATION.ANNOTATION_TEXT'
                           IN TYPEOF (child)));

  IF (SIZEOF (local_annotation_text) > 0) THEN
    REPEAT i := 1 TO HIINDEX (local_annotation_text);
      local_children := local_children +
      QUERY (item <* local_annotation_text[i]\mapped_item.
                     mapping_source.mapped_representation.items |
        SIZEOF(['PLANT_SPATIAL_CONFIGURATION.ANNOTATION_TEXT',
                'PLANT_SPATIAL_CONFIGURATION.COMPOSITE_TEXT'] *
                TYPEOF(item)) > 0);
    END_REPEAT;
  END_IF;

  IF (local_children :<>: child_text) THEN
    RETURN (acyclic_composite_text (start_composite, local_children));
  ELSE
    RETURN (TRUE);
  END_IF;
 END_FUNCTION;

   FUNCTION acyclic_product_definition_relationship
      (relation : product_definition_relationship;
       relatives : SET [1:?] OF product_definition;
       specific_relation : STRING ) : BOOLEAN;
   LOCAL
      x : SET OF product_definition_relationship;
   END_LOCAL;
      IF relation.relating_product_definition IN relatives THEN
         RETURN (FALSE);
      END_IF;
      x := QUERY (pd <* 
bag_to_set(USEDIN(relation.relating_product_definition, 
'PLANT_SPATIAL_CONFIGURATION.' + 'PRODUCT_DEFINITION_RELATIONSHIP.' + 
'RELATED_PRODUCT_DEFINITION'))| specific_relation IN TYPEOF(pd));
      REPEAT i := 1 TO HIINDEX(x);
         IF NOT acyclic_product_definition_relationship(x[i], 
(relatives + relation.relating_product_definition), specific_relation) 
THEN
            RETURN (FALSE);
         END_IF;
      END_REPEAT;
      RETURN (TRUE);
   END_FUNCTION;

   FUNCTION acyclic_set_replica
      (rep : geometric_set_replica;
       parent : geometric_set ) : BOOLEAN;
      IF NOT ('PLANT_SPATIAL_CONFIGURATION.GEOMETRIC_SET_REPLICA' IN 
TYPEOF(parent)) THEN
         RETURN (TRUE);
      END_IF;
      IF parent :=: rep THEN
         RETURN (FALSE);
      ELSE
         RETURN (acyclic_set_replica(rep, 
parent\geometric_set_replica.parent_set));
      END_IF;
   END_FUNCTION;

   FUNCTION acyclic_surface_replica
      (rep : surface_replica;
       parent : surface ) : BOOLEAN;
      IF NOT ('PLANT_SPATIAL_CONFIGURATION.SURFACE_REPLICA' IN 
TYPEOF(parent)) THEN
         RETURN (TRUE);
      END_IF;
      IF parent :=: rep THEN
         RETURN (FALSE);
      ELSE
         RETURN (acyclic_surface_replica(rep, 
parent\surface_replica.parent_surface));
      END_IF;
   END_FUNCTION;

   FUNCTION acyclic_symbol_representation_relationship
      (relation : symbol_representation_relationship;
       children : SET OF symbol_representation ) : BOOLEAN;
   LOCAL
      x : SET OF symbol_representation_relationship;
      local_children : SET OF symbol_representation;
   END_LOCAL;
      REPEAT i := 1 TO HIINDEX(children);
         IF relation\representation_relationship.rep_1 :=: children[i] 
THEN
            RETURN (FALSE);
         END_IF;
      END_REPEAT;
      x := 
bag_to_set(USEDIN(relation\representation_relationship.rep_1, 
'PLANT_SPATIAL_CONFIGURATION.' + 'REPRESENTATION_RELATIONSHIP.' + 
'REP_2'));
      local_children := children + 
relation\representation_relationship.rep_1;
      IF SIZEOF(x) > 0 THEN
         REPEAT i := 1 TO HIINDEX(x);
            IF NOT acyclic_symbol_representation_relationship(x[i], 
local_children) THEN
               RETURN (FALSE);
            END_IF;
         END_REPEAT;
      END_IF;
      RETURN (TRUE);
   END_FUNCTION;

   FUNCTION applied_identification_correlation
      (aia : applied_identification_assignment ) : BOOLEAN;
   LOCAL
      i_role : STRING;
   END_LOCAL;
      i_role := aia\identification_assignment.role.name;
      CASE i_role OF
         'global unambiguous identifier' :
               IF SIZEOF(aia.items) <> SIZEOF(QUERY (x <* aia.items| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION' IN TYPEOF(x)))) THEN
                  RETURN (FALSE);
               END_IF;
         'stock code' :
               IF SIZEOF(aia.items) <> SIZEOF(QUERY (x <* aia.items| 
('PLANT_SPATIAL_CONFIGURATION.PRODUCT_DEFINITION' IN TYPEOF(x)))) THEN
                  RETURN (FALSE);
               END_IF;
         'weld id' :
               IF SIZEOF(aia.items) <> SIZEOF(QUERY (x <* aia.items| 
('PLANT_SPATIAL_CONFIGURATION.MATERIAL_PROPERTY' IN TYPEOF(x)))) THEN
                  RETURN (FALSE);
               END_IF;
         'connecting portion id' :
               IF SIZEOF(aia.items) <> SIZEOF(QUERY (x <* aia.items| 
('PLANT_SPATIAL_CONFIGURATION.MATERIAL_PROPERTY' IN TYPEOF(x)))) THEN
                  RETURN (FALSE);
               END_IF;
         'analysis data point id' :
               IF SIZEOF(aia.items) <> SIZEOF(QUERY (x <* aia.items| 
('PLANT_SPATIAL_CONFIGURATION.SHAPE_ASPECT' IN TYPEOF(x)))) THEN
                  RETURN (FALSE);
               END_IF;
         'document version id' :
               IF SIZEOF(aia.items) <> SIZEOF(QUERY (x <* aia.items| 
('PLANT_SPATIAL_CONFIGURATION.DOCUMENT' IN TYPEOF(x)))) THEN
                  RETURN (FALSE);
               END_IF;
      OTHERWISE :
            RETURN (TRUE);
      END_CASE;
      RETURN (TRUE);
   END_FUNCTION;

   FUNCTION associated_surface
      (arg : pcurve_or_surface ) : surface;
   LOCAL
      surf : surface;
   END_LOCAL;
      IF 'PLANT_SPATIAL_CONFIGURATION.PCURVE' IN TYPEOF(arg) THEN
         surf := arg.basis_surface;
      ELSE
         surf := arg;
      END_IF;
      RETURN (surf);
   END_FUNCTION;

   FUNCTION bag_to_set
      (the_bag : BAG OF GENERIC : intype ) : SET OF GENERIC : intype;
   LOCAL
      the_set : SET OF GENERIC : intype := [];
      i : INTEGER;
   END_LOCAL;
      IF SIZEOF(the_bag) > 0 THEN
         REPEAT i := 1 TO HIINDEX(the_bag) BY 1;
            the_set := the_set + the_bag[i];
         END_REPEAT;
      END_IF;
      RETURN (the_set);
   END_FUNCTION;

   FUNCTION base_axis
      (dim : INTEGER;
       axis1 : direction;
       axis2 : direction;
       axis3 : direction ) : LIST [2:3] OF direction;
   LOCAL
      u : LIST [2:3] OF direction;
      factor : REAL;
      d1 : direction;
      d2 : direction;
   END_LOCAL;
      IF dim = 3 THEN
         d1 := NVL(normalise(axis3), dummy_gri || direction([ 0.00000, 
0.00000, 1.00000 ]));
         d2 := first_proj_axis(d1, axis1);
         u := [ d2, second_proj_axis(d1, d2, axis2), d1 ];
      ELSE
         IF EXISTS(axis1) THEN
            d1 := normalise(axis1);
            u := [ d1, orthogonal_complement(d1) ];
            IF EXISTS(axis2) THEN
               factor := dot_product(axis2, u[2]);
               IF factor < 0.00000 THEN
                  u[2].direction_ratios[1] := -
u[2].direction_ratios[1];
                  u[2].direction_ratios[2] := -
u[2].direction_ratios[2];
               END_IF;
            END_IF;
         ELSE
            IF EXISTS(axis2) THEN
               d1 := normalise(axis2);
               u := [ orthogonal_complement(d1), d1 ];
               u[1].direction_ratios[1] := -u[1].direction_ratios[1];
               u[1].direction_ratios[2] := -u[1].direction_ratios[2];
            ELSE
               u := [ dummy_gri || direction([ 1.00000, 0.00000 ]), 
dummy_gri || direction([ 0.00000, 1.00000 ]) ];
            END_IF;
         END_IF;
      END_IF;
      RETURN (u);
   END_FUNCTION;

   FUNCTION boolean_choose
      (b : BOOLEAN;
       choice1 : GENERIC : item;
       choice2 : GENERIC : item ) : GENERIC : item;
      IF b THEN
         RETURN (choice1);
      ELSE
         RETURN (choice2);
      END_IF;
   END_FUNCTION;

   FUNCTION build_2axes
      (ref_direction : direction ) : LIST [2:2] OF direction;
   LOCAL
      d : direction := NVL(normalise(ref_direction), dummy_gri || 
direction([ 1.00000, 0.00000 ]));
   END_LOCAL;
      RETURN ([ d, orthogonal_complement(d) ]);
   END_FUNCTION;

   FUNCTION build_axes
      (axis : direction;
       ref_direction : direction ) : LIST [3:3] OF direction;
   LOCAL
      d1 : direction;
      d2 : direction;
   END_LOCAL;
      d1 := NVL(normalise(axis), dummy_gri || direction([ 0.00000, 
0.00000, 1.00000 ]));
      d2 := first_proj_axis(d1, ref_direction);
      RETURN ([ d2, normalise(cross_product(d1, d2)).orientation, d1 
]);
   END_FUNCTION;

   FUNCTION build_transformed_set(tr: 
cartesian_transformation_operator;
             gset : geometric_set) : SET [0:?] OF geometric_set_select;
    LOCAL
     s          : SET [1:?] OF geometric_set_select := gset.elements;
     trset      : SET [0:?] OF geometric_set_select := [];
    END_LOCAL;
    REPEAT j := 1 TO SIZEOF(s);
      IF ('PLANT_SPATIAL_CONFIGURATION.CURVE' IN TYPEOF(s[j])) THEN
       trset := trset + dummy_gri || curve() ||curve_replica(s[j],tr); 
ELSE
       IF ('PLANT_SPATIAL_CONFIGURATION.POINT' IN TYPEOF(s[j])) THEN
         trset := trset + dummy_gri || point() || 
point_replica(s[j],tr);
         ELSE
         IF ('PLANT_SPATIAL_CONFIGURATION.SURFACE' IN TYPEOF(s[j])) THEN
           trset := trset + dummy_gri || surface()  || 
surface_replica(s[j],
             tr || cartesian_transformation_operator_3d (?));
         END_IF;
       END_IF;
      END_IF;
    END_REPEAT;
    RETURN(trset);
   END_FUNCTION;

   FUNCTION class_in_tree
      (class : group;
       val : STRING ) : BOOLEAN;
      IF class.name = val THEN
         RETURN (TRUE);
      ELSE
         RETURN (SIZEOF(QUERY (gr <* USEDIN(class, 
'PLANT_SPATIAL_CONFIGURATION.' + 'GROUP_RELATIONSHIP.RELATED_GROUP')| 
class_in_tree(gr.relating_group, val))) = 1);
      END_IF;
      RETURN (FALSE);
   END_FUNCTION;

   FUNCTION closed_shell_reversed
      (a_shell : closed_shell ) : oriented_closed_shell;
   LOCAL
      the_reverse : oriented_closed_shell;
   END_LOCAL;
      IF 'PLANT_SPATIAL_CONFIGURATION.ORIENTED_CLOSED_SHELL' IN 
TYPEOF(a_shell) THEN
         the_reverse := dummy_tri || 
connected_face_set(a_shell\connected_face_set.cfs_faces) || 
closed_shell() || 
oriented_closed_shell(a_shell\oriented_closed_shell.
closed_shell_element, NOT a_shell\oriented_closed_shell.orientation);
      ELSE
         the_reverse := dummy_tri || 
connected_face_set(a_shell\connected_face_set.cfs_faces) || 
closed_shell() || oriented_closed_shell(a_shell, FALSE);
      END_IF;
      RETURN (the_reverse);
   END_FUNCTION;

   FUNCTION conditional_reverse
      (p : BOOLEAN;
       an_item : reversible_topology ) : reversible_topology;
      IF p THEN
         RETURN (an_item);
      ELSE
         RETURN (topology_reversed(an_item));
      END_IF;
   END_FUNCTION;

   FUNCTION constraints_composite_curve_on_surface
      (c : composite_curve_on_surface ) : BOOLEAN;
   LOCAL
      n_segments : INTEGER := SIZEOF(c.segments);
   END_LOCAL;
      REPEAT k := 1 TO n_segments;
         IF (NOT ('PLANT_SPATIAL_CONFIGURATION.PCURVE' IN 
TYPEOF(c\composite_curve.segments[k].parent_curve)) AND NOT 
('PLANT_SPATIAL_CONFIGURATION.SURFACE_CURVE' IN 
TYPEOF(c\composite_curve.segments[k].parent_curve))) AND NOT 
('PLANT_SPATIAL_CONFIGURATION.COMPOSITE_CURVE_ON_SURFACE' IN 
TYPEOF(c\composite_curve.segments[k].parent_curve)) THEN
            RETURN (FALSE);
         END_IF;
      END_REPEAT;
      RETURN (TRUE);
   END_FUNCTION;

   FUNCTION constraints_geometry_shell_based_wireframe_model
      (m : shell_based_wireframe_model ) : BOOLEAN;
   LOCAL
      result : BOOLEAN := TRUE;
   END_LOCAL;
      REPEAT j := 1 TO SIZEOF(m.sbwm_boundary);
         IF NOT ('PLANT_SPATIAL_CONFIGURATION.WIRE_SHELL' IN 
TYPEOF(m.sbwm_boundary[j])) AND NOT 
('PLANT_SPATIAL_CONFIGURATION.VERTEX_SHELL' IN 
TYPEOF(m.sbwm_boundary[j])) THEN
            result := FALSE;
            RETURN (result);
         END_IF;
      END_REPEAT;
      RETURN (result);
   END_FUNCTION;

   FUNCTION constraints_param_b_spline
      (degree : INTEGER;
       up_knots : INTEGER;
       up_cp : INTEGER;
       knot_mult : LIST OF INTEGER;
       knots : LIST OF parameter_value ) : BOOLEAN;
   LOCAL
      result : BOOLEAN := TRUE;
      k : INTEGER;
      sum : INTEGER;
   END_LOCAL;
      sum := knot_mult[1];
      REPEAT i := 2 TO up_knots;
         sum := sum + knot_mult[i];
      END_REPEAT;
      IF (((degree < 1) OR (up_knots < 2)) OR (up_cp < degree)) OR (sum 
<> degree + up_cp + 2) THEN
         result := FALSE;
         RETURN (result);
      END_IF;
      k := knot_mult[1];
      IF (k < 1) OR (k > degree + 1) THEN
         result := FALSE;
         RETURN (result);
      END_IF;
      REPEAT i := 2 TO up_knots;
         IF (knot_mult[i] < 1) OR (knots[i] <= knots[(i - 1)]) THEN
            result := FALSE;
            RETURN (result);
         END_IF;
         k := knot_mult[i];
         IF (i < up_knots) AND (k > degree) THEN
            result := FALSE;
            RETURN (result);
         END_IF;
         IF (i = up_knots) AND (k > degree + 1) THEN
            result := FALSE;
            RETURN (result);
         END_IF;
      END_REPEAT;
      RETURN (result);
   END_FUNCTION;

   FUNCTION constraints_rectangular_composite_surface
      (s : rectangular_composite_surface ) : BOOLEAN;
      REPEAT i := 1 TO s.n_u;
         REPEAT j := 1 TO s.n_v;
            IF NOT (('PLANT_SPATIAL_CONFIGURATION.B_SPLINE_SURFACE' IN 
TYPEOF(s.segments[i][j].parent_surface)) OR 
('PLANT_SPATIAL_CONFIGURATION.RECTANGULAR_TRIMMED_SURFACE' IN 
TYPEOF(s.segments[i][j].parent_surface))) THEN
               RETURN (FALSE);
            END_IF;
         END_REPEAT;
      END_REPEAT;
      REPEAT i := 1 TO s.n_u - 1;
         REPEAT j := 1 TO s.n_v;
            IF s.segments[i][j].u_transition = discontinuous THEN
               RETURN (FALSE);
            END_IF;
         END_REPEAT;
      END_REPEAT;
      REPEAT i := 1 TO s.n_u;
         REPEAT j := 1 TO s.n_v - 1;
            IF s.segments[i][j].v_transition = discontinuous THEN
               RETURN (FALSE);
            END_IF;
         END_REPEAT;
      END_REPEAT;
      RETURN (TRUE);
   END_FUNCTION;

   FUNCTION cross_product
      (arg1 : direction;
       arg2 : direction ) : vector;
   LOCAL
      mag : REAL;
      res : direction;
      v1 : LIST [3:3] OF REAL;
      v2 : LIST [3:3] OF REAL;
      result : vector;
   END_LOCAL;
      IF (NOT EXISTS(arg1) OR (arg1.dim = 2)) OR (NOT EXISTS(arg2) OR 
(arg2.dim = 2)) THEN
         RETURN (?);
      ELSE
         BEGIN
            v1 := normalise(arg1).direction_ratios;
            v2 := normalise(arg2).direction_ratios;
            res := dummy_gri || direction([ (v1[2] * v2[3] - v1[3] * 
v2[2]), (v1[3] * v2[1] - v1[1] * v2[3]), (v1[1] * v2[2] - v1[2] * 
v2[1]) ]);
            mag := 0.00000;
            REPEAT i := 1 TO 3;
               mag := mag + res.direction_ratios[i] * 
res.direction_ratios[i];
            END_REPEAT;
            IF mag > 0.00000 THEN
               result := dummy_gri || vector(res, sqrt(mag));
            ELSE
               result := dummy_gri || vector(arg1, 0.00000);
            END_IF;
            RETURN (result);
         END;
      END_IF;
   END_FUNCTION;

   FUNCTION curve_weights_positive
      (b : rational_b_spline_curve ) : BOOLEAN;
   LOCAL
      result : BOOLEAN := TRUE;
   END_LOCAL;
      REPEAT i := 0 TO b.upper_index_on_control_points;
         IF b.weights[i] <= 0.00000 THEN
            result := FALSE;
            RETURN (result);
         END_IF;
      END_REPEAT;
      RETURN (result);
   END_FUNCTION;

   FUNCTION derive_dimensional_exponents
      (x : unit ) : dimensional_exponents;
   LOCAL
      result : dimensional_exponents := dimensional_exponents(0.00000, 
0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 0.00000);
   END_LOCAL;
      IF 'PLANT_SPATIAL_CONFIGURATION.DERIVED_UNIT' IN TYPEOF(x) THEN
         REPEAT i := LOINDEX(x.elements) TO HIINDEX(x.elements);
            result.length_exponent := result.length_exponent + 
x.elements[i].exponent * x.elements[i].unit.dimensions.length_exponent;
            result.mass_exponent := result.mass_exponent + 
x.elements[i].exponent * x.elements[i].unit.dimensions.mass_exponent;
            result.time_exponent := result.time_exponent + 
x.elements[i].exponent * x.elements[i].unit.dimensions.time_exponent;
            result.electric_current_exponent := 
result.electric_current_exponent + x.elements[i].exponent * 
x.elements[i].unit.dimensions.electric_current_exponent;
            result.thermodynamic_temperature_exponent := 
result.thermodynamic_temperature_exponent + x.elements[i].exponent * 
x.elements[i].unit.dimensions.thermodynamic_temperature_exponent;
            result.amount_of_substance_exponent := 
result.amount_of_substance_exponent + x.elements[i].exponent * 
x.elements[i].unit.dimensions.amount_of_substance_exponent;
            result.luminous_intensity_exponent := 
result.luminous_intensity_exponent + x.elements[i].exponent * 
x.elements[i].unit.dimensions.luminous_intensity_exponent;
         END_REPEAT;
      ELSE
         result := x.dimensions;
      END_IF;
      RETURN (result);
   END_FUNCTION;

   FUNCTION dimension_of
      (item : geometric_representation_item ) : dimension_count;
   LOCAL
      x : SET OF representation;
      y : representation_context;
      dim : dimension_count;
   END_LOCAL;
      IF 'PLANT_SPATIAL_CONFIGURATION.CARTESIAN_POINT' IN TYPEOF(item) 
THEN
         dim := SIZEOF(item\cartesian_point.coordinates);
         RETURN (dim);
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.DIRECTION' IN TYPEOF(item) THEN
         dim := SIZEOF(item\direction.direction_ratios);
         RETURN (dim);
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.VECTOR' IN TYPEOF(item) THEN
         dim := 
SIZEOF(item\vector.orientation\direction.direction_ratios);
         RETURN (dim);
      END_IF;
      x := using_representations(item);
      y := x[1].context_of_items;
      dim := 
y\geometric_representation_context.coordinate_space_dimension;
      RETURN (dim);
   END_FUNCTION;

   FUNCTION dimensions_for_si_unit
      (n : si_unit_name ) : dimensional_exponents;
      CASE n OF
         metre :
               RETURN (dimensional_exponents(1.00000, 0.00000, 0.00000, 
0.00000, 0.00000, 0.00000, 0.00000));
         gram :
               RETURN (dimensional_exponents(0.00000, 1.00000, 0.00000, 
0.00000, 0.00000, 0.00000, 0.00000));
         second :
               RETURN (dimensional_exponents(0.00000, 0.00000, 1.00000, 
0.00000, 0.00000, 0.00000, 0.00000));
         ampere :
               RETURN (dimensional_exponents(0.00000, 0.00000, 0.00000, 
1.00000, 0.00000, 0.00000, 0.00000));
         kelvin :
               RETURN (dimensional_exponents(0.00000, 0.00000, 0.00000, 
0.00000, 1.00000, 0.00000, 0.00000));
         mole :
               RETURN (dimensional_exponents(0.00000, 0.00000, 0.00000, 
0.00000, 0.00000, 1.00000, 0.00000));
         candela :
               RETURN (dimensional_exponents(0.00000, 0.00000, 0.00000, 
0.00000, 0.00000, 0.00000, 1.00000));
         radian :
               RETURN (dimensional_exponents(0.00000, 0.00000, 0.00000, 
0.00000, 0.00000, 0.00000, 0.00000));
         steradian :
               RETURN (dimensional_exponents(0.00000, 0.00000, 0.00000, 
0.00000, 0.00000, 0.00000, 0.00000));
         hertz :
               RETURN (dimensional_exponents(0.00000, 0.00000, -
1.00000, 0.00000, 0.00000, 0.00000, 0.00000));
         newton :
               RETURN (dimensional_exponents(1.00000, 1.00000, -
2.00000, 0.00000, 0.00000, 0.00000, 0.00000));
         pascal :
               RETURN (dimensional_exponents(-1.00000, 1.00000, -
2.00000, 0.00000, 0.00000, 0.00000, 0.00000));
         joule :
               RETURN (dimensional_exponents(2.00000, 1.00000, -
2.00000, 0.00000, 0.00000, 0.00000, 0.00000));
         watt :
               RETURN (dimensional_exponents(2.00000, 1.00000, -
3.00000, 0.00000, 0.00000, 0.00000, 0.00000));
         coulomb :
               RETURN (dimensional_exponents(0.00000, 0.00000, 1.00000, 
1.00000, 0.00000, 0.00000, 0.00000));
         volt :
               RETURN (dimensional_exponents(2.00000, 1.00000, -
3.00000, -1.00000, 0.00000, 0.00000, 0.00000));
         farad :
               RETURN (dimensional_exponents(-2.00000, -1.00000, 
4.00000, 1.00000, 0.00000, 0.00000, 0.00000));
         ohm :
               RETURN (dimensional_exponents(2.00000, 1.00000, -
3.00000, -2.00000, 0.00000, 0.00000, 0.00000));
         siemens :
               RETURN (dimensional_exponents(-2.00000, -1.00000, 
3.00000, 2.00000, 0.00000, 0.00000, 0.00000));
         weber :
               RETURN (dimensional_exponents(2.00000, 1.00000, -
2.00000, -1.00000, 0.00000, 0.00000, 0.00000));
         tesla :
               RETURN (dimensional_exponents(0.00000, 1.00000, -
2.00000, -1.00000, 0.00000, 0.00000, 0.00000));
         henry :
               RETURN (dimensional_exponents(2.00000, 1.00000, -
2.00000, -2.00000, 0.00000, 0.00000, 0.00000));
         degree_Celsius :
               RETURN (dimensional_exponents(0.00000, 0.00000, 0.00000, 
0.00000, 1.00000, 0.00000, 0.00000));
         lumen :
               RETURN (dimensional_exponents(0.00000, 0.00000, 0.00000, 
0.00000, 0.00000, 0.00000, 1.00000));
         lux :
               RETURN (dimensional_exponents(-2.00000, 0.00000, 
0.00000, 0.00000, 0.00000, 0.00000, 1.00000));
         becquerel :
               RETURN (dimensional_exponents(0.00000, 0.00000, -
1.00000, 0.00000, 0.00000, 0.00000, 0.00000));
         gray :
               RETURN (dimensional_exponents(2.00000, 0.00000, -
2.00000, 0.00000, 0.00000, 0.00000, 0.00000));
         sievert :
               RETURN (dimensional_exponents(2.00000, 0.00000, -
2.00000, 0.00000, 0.00000, 0.00000, 0.00000));
      OTHERWISE :
            RETURN (?);
      END_CASE;
   END_FUNCTION;

   FUNCTION dot_product
      (arg1 : direction;
       arg2 : direction ) : REAL;
   LOCAL
      scalar : REAL;
      vec1 : direction;
      vec2 : direction;
      ndim : INTEGER;
   END_LOCAL;
      IF NOT EXISTS(arg1) OR NOT EXISTS(arg2) THEN
         scalar := ?;
      ELSE
         IF arg1.dim <> arg2.dim THEN
            scalar := ?;
         ELSE
            BEGIN
               vec1 := normalise(arg1);
               vec2 := normalise(arg2);
               ndim := arg1.dim;
               scalar := 0.00000;
               REPEAT i := 1 TO ndim;
                  scalar := scalar + vec1.direction_ratios[i] * 
vec2.direction_ratios[i];
               END_REPEAT;
            END;
         END_IF;
      END_IF;
      RETURN (scalar);
   END_FUNCTION;

   FUNCTION edge_reversed
      (an_edge : edge ) : oriented_edge;
   LOCAL
      the_reverse : oriented_edge;
   END_LOCAL;
      IF 'PLANT_SPATIAL_CONFIGURATION.ORIENTED_EDGE' IN TYPEOF(an_edge) 
THEN
         the_reverse := dummy_tri || edge(an_edge.edge_end, 
an_edge.edge_start) || 
oriented_edge(an_edge\oriented_edge.edge_element, NOT 
an_edge\oriented_edge.orientation);
      ELSE
         the_reverse := dummy_tri || edge(an_edge.edge_end, 
an_edge.edge_start) || oriented_edge(an_edge, FALSE);
      END_IF;
      RETURN (the_reverse);
   END_FUNCTION;

   FUNCTION face_bound_reversed
      (a_face_bound : face_bound ) : face_bound;
   LOCAL
      the_reverse : face_bound;
   END_LOCAL;
      IF 'PLANT_SPATIAL_CONFIGURATION.FACE_OUTER_BOUND' IN 
TYPEOF(a_face_bound) THEN
         the_reverse := dummy_tri || 
face_bound(a_face_bound\face_bound.bound, NOT 
a_face_bound\face_bound.orientation) || face_outer_bound();
      ELSE
         the_reverse := dummy_tri || face_bound(a_face_bound.bound, NOT 
a_face_bound.orientation);
      END_IF;
      RETURN (the_reverse);
   END_FUNCTION;

   FUNCTION face_reversed
      (a_face : face ) : oriented_face;
   LOCAL
      the_reverse : oriented_face;
   END_LOCAL;
      IF 'PLANT_SPATIAL_CONFIGURATION.ORIENTED_FACE' IN TYPEOF(a_face) 
THEN
         the_reverse := dummy_tri || 
face(set_of_topology_reversed(a_face.bounds)) || 
oriented_face(a_face\oriented_face.face_element, NOT 
a_face\oriented_face.orientation);
      ELSE
         the_reverse := dummy_tri || 
face(set_of_topology_reversed(a_face.bounds)) || oriented_face(a_face, 
FALSE);
      END_IF;
      RETURN (the_reverse);
   END_FUNCTION;

   FUNCTION first_proj_axis
      (z_axis : direction;
       arg : direction ) : direction;
   LOCAL
      x_axis : direction;
      v : direction;
      z : direction;
      x_vec : vector;
   END_LOCAL;
      IF NOT EXISTS(z_axis) THEN
         RETURN (?);
      ELSE
         z := normalise(z_axis);
         IF NOT EXISTS(arg) THEN
            IF z.direction_ratios <> [ 1.00000, 0.00000, 0.00000 ] THEN
               v := dummy_gri || direction([ 1.00000, 0.00000, 0.00000 
]);
            ELSE
               v := dummy_gri || direction([ 0.00000, 1.00000, 0.00000 
]);
            END_IF;
         ELSE
            IF arg.dim <> 3 THEN
               RETURN (?);
            END_IF;
            IF cross_product(arg, z).magnitude = 0.00000 THEN
               RETURN (?);
            ELSE
               v := normalise(arg);
            END_IF;
         END_IF;
         x_vec := scalar_times_vector(dot_product(v, z), z);
         x_axis := vector_difference(v, x_vec).orientation;
         x_axis := normalise(x_axis);
      END_IF;
      RETURN (x_axis);
   END_FUNCTION;

   FUNCTION get_basis_surface
      (c : curve_on_surface ) : SET [0:2] OF surface;
   LOCAL
      surfs : SET [0:2] OF surface;
      n : INTEGER;
   END_LOCAL;
      surfs := [];
      IF 'PLANT_SPATIAL_CONFIGURATION.PCURVE' IN TYPEOF(c) THEN
         surfs := [ c\pcurve.basis_surface ];
      ELSE
         IF 'PLANT_SPATIAL_CONFIGURATION.SURFACE_CURVE' IN TYPEOF(c) 
THEN
            n := SIZEOF(c\surface_curve.associated_geometry);
            REPEAT i := 1 TO n;
               surfs := surfs + 
associated_surface(c\surface_curve.associated_geometry[i]);
            END_REPEAT;
         END_IF;
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.COMPOSITE_CURVE_ON_SURFACE' IN 
TYPEOF(c) THEN
         n := SIZEOF(c\composite_curve.segments);
         surfs := 
get_basis_surface(c\composite_curve.segments[1].parent_curve);
         IF n > 1 THEN
            REPEAT i := 2 TO n;
               surfs := surfs * 
get_basis_surface(c\composite_curve.segments[i].parent_curve);
            END_REPEAT;
         END_IF;
      END_IF;
      RETURN (surfs);
   END_FUNCTION;

   FUNCTION get_description_value
      (obj : description_attribute_select ) : text;
   LOCAL
      description_bag : BAG OF description_attribute := USEDIN(obj, 
'PLANT_SPATIAL_CONFIGURATION.' + 'DESCRIPTION_ATTRIBUTE.' + 
'DESCRIBED_ITEM');
   END_LOCAL;
      IF SIZEOF(description_bag) = 1 THEN
         RETURN (description_bag[1].attribute_value);
      ELSE
         RETURN (?);
      END_IF;
   END_FUNCTION;

   FUNCTION get_id_value
      (obj : id_attribute_select ) : identifier;
   LOCAL
      id_bag : BAG OF id_attribute := USEDIN(obj, 
'PLANT_SPATIAL_CONFIGURATION.' + 'ID_ATTRIBUTE.' + 'IDENTIFIED_ITEM');
   END_LOCAL;
      IF SIZEOF(id_bag) = 1 THEN
         RETURN (id_bag[1].attribute_value);
      ELSE
         RETURN (?);
      END_IF;
   END_FUNCTION;

   FUNCTION get_name_value
      (obj : name_attribute_select ) : label;
   LOCAL
      name_bag : BAG OF name_attribute := USEDIN(obj, 
'PLANT_SPATIAL_CONFIGURATION.' + 'NAME_ATTRIBUTE.' + 'NAMED_ITEM');
   END_LOCAL;
      IF SIZEOF(name_bag) = 1 THEN
         RETURN (name_bag[1].attribute_value);
      ELSE
         RETURN (?);
      END_IF;
   END_FUNCTION;

   FUNCTION get_role
      (obj : role_select ) : object_role;
   LOCAL
      role_bag : BAG OF role_association := USEDIN(obj, 
'PLANT_SPATIAL_CONFIGURATION.' + 'ROLE_ASSOCIATION.' + 
'ITEM_WITH_ROLE');
   END_LOCAL;
      IF SIZEOF(role_bag) = 1 THEN
         RETURN (role_bag[1].role);
      ELSE
         RETURN (?);
      END_IF;
   END_FUNCTION;

   FUNCTION item_in_context
      (item : representation_item;
       cntxt : representation_context ) : BOOLEAN;
   LOCAL
      y : BAG OF representation_item;
   END_LOCAL;
      IF SIZEOF(USEDIN(item, 
'PLANT_SPATIAL_CONFIGURATION.REPRESENTATION.ITEMS') * 
cntxt.representations_in_context) > 0 THEN
         RETURN (TRUE);
      ELSE
         y := QUERY (z <* USEDIN(item, '')| 
'PLANT_SPATIAL_CONFIGURATION.REPRESENTATION_ITEM' IN TYPEOF(z));
         IF SIZEOF(y) > 0 THEN
            REPEAT i := 1 TO HIINDEX(y);
               IF item_in_context(y[i], cntxt) THEN
                  RETURN (TRUE);
               END_IF;
            END_REPEAT;
         END_IF;
      END_IF;
      RETURN (FALSE);
   END_FUNCTION;

   FUNCTION leap_year
      (year : year_number ) : BOOLEAN;
      IF (year MOD 4 = 0) AND (year MOD 100 <> 0) OR (year MOD 400 = 0) 
THEN
         RETURN (TRUE);
      ELSE
         RETURN (FALSE);
      END_IF;
   END_FUNCTION;

   FUNCTION list_face_loops
      (f : face ) : LIST [0:?] OF loop;
   LOCAL
      loops : LIST [0:?] OF loop := [];
   END_LOCAL;
      REPEAT i := 1 TO SIZEOF(f.bounds);
         loops := loops + f.bounds[i].bound;
      END_REPEAT;
      RETURN (loops);
   END_FUNCTION;

   FUNCTION list_of_topology_reversed
      (a_list : list_of_reversible_topology_item ) : 
list_of_reversible_topology_item;
   LOCAL
      the_reverse : list_of_reversible_topology_item;
   END_LOCAL;
      the_reverse := [];
      REPEAT i := 1 TO SIZEOF(a_list);
         the_reverse := topology_reversed(a_list[i]) + the_reverse;
      END_REPEAT;
      RETURN (the_reverse);
   END_FUNCTION;

   FUNCTION list_to_array
      (lis : LIST [0:?] OF GENERIC : T;
       low : INTEGER;
       u : INTEGER ) : ARRAY OF GENERIC : T;
   LOCAL
      n : INTEGER;
      res : ARRAY [low:u] OF GENERIC : T;
   END_LOCAL;
      n := SIZEOF(lis);
      IF n <> u - low + 1 THEN
         RETURN (?);
      ELSE
         res := [ lis[1] ];
         REPEAT i := 2 TO n;
            res[(low + i - 1)] := lis[i];
         END_REPEAT;
         RETURN (res);
      END_IF;
   END_FUNCTION;

   FUNCTION list_to_set
      (l : LIST [0:?] OF GENERIC : T ) : SET OF GENERIC : T;
   LOCAL
      s : SET OF GENERIC : T := [];
   END_LOCAL;
      REPEAT i := 1 TO SIZEOF(l);
         s := s + l[i];
      END_REPEAT;
      RETURN (s);
   END_FUNCTION;

   FUNCTION make_array_of_array
      (lis : LIST [1:?] OF LIST [1:?] OF GENERIC : T;
       low1 : INTEGER;
       u1 : INTEGER;
       low2 : INTEGER;
       u2 : INTEGER ) : ARRAY OF ARRAY OF GENERIC : T;
   LOCAL
      res : ARRAY [low1:u1] OF ARRAY [low2:u2] OF GENERIC : T;
   END_LOCAL;
      IF u1 - low1 + 1 <> SIZEOF(lis) THEN
         RETURN (?);
      END_IF;
      IF u2 - low2 + 1 <> SIZEOF(lis[1]) THEN
         RETURN (?);
      END_IF;
      res := [ list_to_array(lis[1], low2, u2) ];
      REPEAT i := 2 TO HIINDEX(lis);
         IF u2 - low2 + 1 <> SIZEOF(lis[i]) THEN
            RETURN (?);
         END_IF;
         res[(low1 + i - 1)] := list_to_array(lis[i], low2, u2);
      END_REPEAT;
      RETURN (res);
   END_FUNCTION;

   FUNCTION mixed_loop_type_set
      (l : SET [0:?] OF loop ) : LOGICAL;
   LOCAL
      poly_loop_type : LOGICAL;
   END_LOCAL;
      IF SIZEOF(l) <= 1 THEN
         RETURN (FALSE);
      END_IF;
      poly_loop_type := 'PLANT_SPATIAL_CONFIGURATION.POLY_LOOP' IN 
TYPEOF(l[1]);
      REPEAT i := 2 TO SIZEOF(l);
         IF ('PLANT_SPATIAL_CONFIGURATION.POLY_LOOP' IN TYPEOF(l[i])) 
<> poly_loop_type THEN
            RETURN (TRUE);
         END_IF;
      END_REPEAT;
      RETURN (FALSE);
   END_FUNCTION;

   FUNCTION normalise
      (arg : vector_or_direction ) : vector_or_direction;
   LOCAL
      ndim : INTEGER;
      v : direction;
      result : vector_or_direction;
      vec : vector;
      mag : REAL;
   END_LOCAL;
      IF NOT EXISTS(arg) THEN
         result := ?;
      ELSE
         ndim := arg.dim;
         IF 'PLANT_SPATIAL_CONFIGURATION.VECTOR' IN TYPEOF(arg) THEN
            BEGIN
               v := dummy_gri || 
direction(arg.orientation.direction_ratios);
               IF arg.magnitude = 0.00000 THEN
                  RETURN (?);
               ELSE
                  vec := dummy_gri || vector(v, 1.00000);
               END_IF;
            END;
         ELSE
            v := dummy_gri || direction(arg.direction_ratios);
         END_IF;
         mag := 0.00000;
         REPEAT i := 1 TO ndim;
            mag := mag + v.direction_ratios[i] * v.direction_ratios[i];
         END_REPEAT;
         IF mag > 0.00000 THEN
            mag := sqrt(mag);
            REPEAT i := 1 TO ndim;
               v.direction_ratios[i] := v.direction_ratios[i] / mag;
            END_REPEAT;
            IF 'PLANT_SPATIAL_CONFIGURATION.VECTOR' IN TYPEOF(arg) THEN
               vec.orientation := v;
               result := vec;
            ELSE
               result := v;
            END_IF;
         ELSE
            RETURN (?);
         END_IF;
      END_IF;
      RETURN (result);
   END_FUNCTION;

   FUNCTION open_shell_reversed
      (a_shell : open_shell ) : oriented_open_shell;
   LOCAL
      the_reverse : oriented_open_shell;
   END_LOCAL;
      IF 'PLANT_SPATIAL_CONFIGURATION.ORIENTED_OPEN_SHELL' IN 
TYPEOF(a_shell) THEN
         the_reverse := dummy_tri || 
connected_face_set(a_shell\connected_face_set.cfs_faces) || 
open_shell() || 
oriented_open_shell(a_shell\oriented_open_shell.open_shell_element, NOT 
a_shell\oriented_open_shell.orientation);
      ELSE
         the_reverse := dummy_tri || 
connected_face_set(a_shell\connected_face_set.cfs_faces) || 
open_shell() || oriented_open_shell(a_shell, FALSE);
      END_IF;
      RETURN (the_reverse);
   END_FUNCTION;

   FUNCTION orthogonal_complement
      (vec : direction ) : direction;
   LOCAL
      result : direction;
   END_LOCAL;
      IF (vec.dim <> 2) OR NOT EXISTS(vec) THEN
         RETURN (?);
      ELSE
         result := dummy_gri || direction([ -vec.direction_ratios[2], 
vec.direction_ratios[1] ]);
         RETURN (result);
      END_IF;
   END_FUNCTION;

   FUNCTION path_head_to_tail
      (a_path : path ) : BOOLEAN;
   LOCAL
      n : INTEGER;
      p : BOOLEAN := TRUE;
   END_LOCAL;
      n := SIZEOF(a_path.edge_list);
      REPEAT i := 2 TO n;
         p := p AND (a_path.edge_list[(i - 1)].edge_end :=: 
a_path.edge_list[i].edge_start);
      END_REPEAT;
      RETURN (p);
   END_FUNCTION;

   FUNCTION path_reversed
      (a_path : path ) : oriented_path;
   LOCAL
      the_reverse : oriented_path;
   END_LOCAL;
      IF 'PLANT_SPATIAL_CONFIGURATION.ORIENTED_PATH' IN TYPEOF(a_path) 
THEN
         the_reverse := dummy_tri || 
path(list_of_topology_reversed(a_path.edge_list)) || 
oriented_path(a_path\oriented_path.path_element, NOT 
a_path\oriented_path.orientation);
      ELSE
         the_reverse := dummy_tri || 
path(list_of_topology_reversed(a_path.edge_list)) || 
oriented_path(a_path, FALSE);
      END_IF;
      RETURN (the_reverse);
   END_FUNCTION;

   FUNCTION plant_spatial_configuration_organization_correlation
      (e : plant_spatial_configuration_organization_assignment ) : 
BOOLEAN;
   LOCAL
      o_role : STRING;
   END_LOCAL;
      o_role := e\organization_assignment.role.name;
      CASE o_role OF
         'vendor' :
               IF SIZEOF(e.items) <> SIZEOF(QUERY (x <* e.items| 
(SIZEOF([ 'PLANT_SPATIAL_CONFIGURATION.PRODUCT', 
'PLANT_SPATIAL_CONFIGURATION.DOCUMENT' ] * TYPEOF(x)) = 1))) THEN
                  RETURN (FALSE);
               END_IF;
         'owner' :
               IF SIZEOF(e.items) <> SIZEOF(QUERY (x <* e.items| 
(SIZEOF([ 'PLANT_SPATIAL_CONFIGURATION.SITE', 
'PLANT_SPATIAL_CONFIGURATION.DOCUMENT' ] * TYPEOF(x)) = 1))) THEN
                  RETURN (FALSE);
               END_IF;
         'plant operator' :
               IF SIZEOF(e.items) <> SIZEOF(QUERY (x <* e.items| 
('PLANT_SPATIAL_CONFIGURATION.PLANT' IN TYPEOF(x)))) THEN
                  RETURN (FALSE);
               END_IF;
         'plant owner' :
               IF SIZEOF(e.items) <> SIZEOF(QUERY (x <* e.items| 
('PLANT_SPATIAL_CONFIGURATION.PLANT' IN TYPEOF(x)))) THEN
                  RETURN (FALSE);
               END_IF;
         'project owner' :
               IF SIZEOF(e.items) <> SIZEOF(QUERY (x <* e.items| 
('PLANT_SPATIAL_CONFIGURATION.DESIGN_PROJECT' IN TYPEOF(x)))) THEN
                  RETURN (FALSE);
               END_IF;
         'assessor' :
               IF SIZEOF(e.items) <> SIZEOF(QUERY (x <* e.items| 
('PLANT_SPATIAL_CONFIGURATION.' + 'PRODUCT_DEFINITION_RELATIONSHIP' IN 
TYPEOF(x)))) THEN
                  RETURN (FALSE);
               END_IF;
      OTHERWISE :
            RETURN (TRUE);
      END_CASE;
      RETURN (TRUE);
   END_FUNCTION;

   FUNCTION 
plant_spatial_configuration_person_and_organization_correlation
      (e : 
plant_spatial_configuration_person_and_organization_assignment ) : 
BOOLEAN;
   LOCAL
      po_role : STRING;
   END_LOCAL;
      po_role := e\person_and_organization_assignment.role.name;
      CASE po_role OF
         'owner' :
               IF SIZEOF(e.items) <> SIZEOF(QUERY (x <* e.items| 
(SIZEOF([ 'PLANT_SPATIAL_CONFIGURATION.SITE', 
('PLANT_SPATIAL_CONFIGURATION.' + 'CHANGE_ITEM') ] * TYPEOF(x)) = 1))) 
THEN
                  RETURN (FALSE);
               END_IF;
         'plant owner' :
               IF SIZEOF(e.items) <> SIZEOF(QUERY (x <* e.items| 
('PLANT_SPATIAL_CONFIGURATION.PLANT' IN TYPEOF(x)))) THEN
                  RETURN (FALSE);
               END_IF;
         'plant operator' :
               IF SIZEOF(e.items) <> SIZEOF(QUERY (x <* e.items| 
('PLANT_SPATIAL_CONFIGURATION.PLANT' IN TYPEOF(x)))) THEN
                  RETURN (FALSE);
               END_IF;
      OTHERWISE :
            RETURN (TRUE);
      END_CASE;
      RETURN (TRUE);
   END_FUNCTION;

   FUNCTION plant_spatial_configuration_person_correlation
      (e : plant_spatial_configuration_person_assignment ) : BOOLEAN;
   LOCAL
      p_role : STRING;
   END_LOCAL;
      p_role := e\person_assignment.role.name;
      CASE p_role OF
         'vendor' :
               IF SIZEOF(e.items) <> SIZEOF(QUERY (x <* e.items| 
('PLANT_SPATIAL_CONFIGURATION.DOCUMENT' IN TYPEOF(x)))) THEN
                  RETURN (FALSE);
               END_IF;
         'owner' :
               IF SIZEOF(e.items) <> SIZEOF(QUERY (x <* e.items| 
(SIZEOF([ 'PLANT_SPATIAL_CONFIGURATION.SITE', 
'PLANT_SPATIAL_CONFIGURATION.DOCUMENT' ] * TYPEOF(x)) = 1))) THEN
                  RETURN (FALSE);
               END_IF;
         'plant owner' :
               IF SIZEOF(e.items) <> SIZEOF(QUERY (x <* e.items| 
('PLANT_SPATIAL_CONFIGURATION.PLANT' IN TYPEOF(x)))) THEN
                  RETURN (FALSE);
               END_IF;
         'assessor' :
               IF SIZEOF(e.items) <> SIZEOF(QUERY (x <* e.items| 
('PLANT_SPATIAL_CONFIGURATION.' + 'PRODUCT_DEFINITION_RELATIONSHIP' IN 
TYPEOF(x)))) THEN
                  RETURN (FALSE);
               END_IF;
      OTHERWISE :
            RETURN (TRUE);
      END_CASE;
      RETURN (TRUE);
   END_FUNCTION;

   FUNCTION scalar_times_vector
      (scalar : REAL;
       vec : vector_or_direction ) : vector;
   LOCAL
      v : direction;
      mag : REAL;
      result : vector;
   END_LOCAL;
      IF NOT EXISTS(scalar) OR NOT EXISTS(vec) THEN
         RETURN (?);
      ELSE
         IF 'PLANT_SPATIAL_CONFIGURATION.VECTOR' IN TYPEOF(vec) THEN
            v := dummy_gri || 
direction(vec.orientation.direction_ratios);
            mag := scalar * vec.magnitude;
         ELSE
            v := dummy_gri || direction(vec.direction_ratios);
            mag := scalar;
         END_IF;
         IF mag < 0.00000 THEN
            REPEAT i := 1 TO SIZEOF(v.direction_ratios);
               v.direction_ratios[i] := -v.direction_ratios[i];
            END_REPEAT;
            mag := -mag;
         END_IF;
         result := dummy_gri || vector(normalise(v), mag);
      END_IF;
      RETURN (result);
   END_FUNCTION;

   FUNCTION second_proj_axis
      (z_axis : direction;
       x_axis : direction;
       arg : direction ) : direction;
   LOCAL
      y_axis : vector;
      v : direction;
      temp : vector;
   END_LOCAL;
      IF NOT EXISTS(arg) THEN
         v := dummy_gri || direction([ 0.00000, 1.00000, 0.00000 ]);
      ELSE
         v := arg;
      END_IF;
      temp := scalar_times_vector(dot_product(v, z_axis), z_axis);
      y_axis := vector_difference(v, temp);
      temp := scalar_times_vector(dot_product(v, x_axis), x_axis);
      y_axis := vector_difference(y_axis, temp);
      y_axis := normalise(y_axis);
      RETURN (y_axis.orientation);
   END_FUNCTION;

   FUNCTION set_of_topology_reversed
      (a_set : set_of_reversible_topology_item ) : 
set_of_reversible_topology_item;
   LOCAL
      the_reverse : set_of_reversible_topology_item;
   END_LOCAL;
      the_reverse := [];
      REPEAT i := 1 TO SIZEOF(a_set);
         the_reverse := the_reverse + topology_reversed(a_set[i]);
      END_REPEAT;
      RETURN (the_reverse);
   END_FUNCTION;

   FUNCTION shell_reversed
      (a_shell : shell ) : shell;
      IF 'PLANT_SPATIAL_CONFIGURATION.OPEN_SHELL' IN TYPEOF(a_shell) 
THEN
         RETURN (open_shell_reversed(a_shell));
      ELSE
         IF 'PLANT_SPATIAL_CONFIGURATION.CLOSED_SHELL' IN 
TYPEOF(a_shell) THEN
            RETURN (closed_shell_reversed(a_shell));
         ELSE
            RETURN (?);
         END_IF;
      END_IF;
   END_FUNCTION;

   FUNCTION surface_weights_positive
      (b : rational_b_spline_surface ) : BOOLEAN;
   LOCAL
      result : BOOLEAN := TRUE;
   END_LOCAL;
      REPEAT i := 0 TO b.u_upper;
         REPEAT j := 0 TO b.v_upper;
            IF b.weights[i][j] <= 0.00000 THEN
               result := FALSE;
               RETURN (result);
            END_IF;
         END_REPEAT;
      END_REPEAT;
      RETURN (result);
   END_FUNCTION;

   FUNCTION topology_reversed
      (an_item : reversible_topology ) : reversible_topology;
      IF 'PLANT_SPATIAL_CONFIGURATION.EDGE' IN TYPEOF(an_item) THEN
         RETURN (edge_reversed(an_item));
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.PATH' IN TYPEOF(an_item) THEN
         RETURN (path_reversed(an_item));
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.FACE_BOUND' IN TYPEOF(an_item) 
THEN
         RETURN (face_bound_reversed(an_item));
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.FACE' IN TYPEOF(an_item) THEN
         RETURN (face_reversed(an_item));
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.SHELL' IN TYPEOF(an_item) THEN
         RETURN (shell_reversed(an_item));
      END_IF;
      IF 'SET' IN TYPEOF(an_item) THEN
         RETURN (set_of_topology_reversed(an_item));
      END_IF;
      IF 'LIST' IN TYPEOF(an_item) THEN
         RETURN (list_of_topology_reversed(an_item));
      END_IF;
      RETURN (?);
   END_FUNCTION;

   FUNCTION using_items
      (item : founded_item_select;
       checked_items : SET OF founded_item_select ) : SET OF 
founded_item_select;
   LOCAL
      new_check_items : SET OF founded_item_select;
      result_items : SET OF founded_item_select;
      next_items : SET OF founded_item_select;
   END_LOCAL;
      result_items := [];
      new_check_items := checked_items + item;
      next_items := QUERY (z <* bag_to_set(USEDIN(item, ''))| 
('PLANT_SPATIAL_CONFIGURATION.REPRESENTATION_ITEM' IN TYPEOF(z)) OR 
('PLANT_SPATIAL_CONFIGURATION.FOUNDED_ITEM' IN TYPEOF(z)));
      IF SIZEOF(next_items) > 0 THEN
         REPEAT i := 1 TO HIINDEX(next_items);
            IF NOT (next_items[i] IN new_check_items) THEN
               result_items := result_items + next_items[i] + 
using_items(next_items[i], new_check_items);
            END_IF;
         END_REPEAT;
      END_IF;
      RETURN (result_items);
   END_FUNCTION;

   FUNCTION using_representations
      (item : founded_item_select ) : SET OF representation;
   LOCAL
      results : SET OF representation;
      result_bag : BAG OF representation;
      intermediate_items : SET OF founded_item_select;
   END_LOCAL;
      results := [];
      result_bag := USEDIN(item, 
'PLANT_SPATIAL_CONFIGURATION.REPRESENTATION.ITEMS');
      IF SIZEOF(result_bag) > 0 THEN
         REPEAT i := 1 TO HIINDEX(result_bag);
            results := results + result_bag[i];
         END_REPEAT;
      END_IF;
      intermediate_items := using_items(item, []);
      IF SIZEOF(intermediate_items) > 0 THEN
         REPEAT i := 1 TO HIINDEX(intermediate_items);
            result_bag := USEDIN(intermediate_items[i], 
'PLANT_SPATIAL_CONFIGURATION.REPRESENTATION.ITEMS');
            IF SIZEOF(result_bag) > 0 THEN
               REPEAT j := 1 TO HIINDEX(result_bag);
                  results := results + result_bag[j];
               END_REPEAT;
            END_IF;
         END_REPEAT;
      END_IF;
      RETURN (results);
   END_FUNCTION;

   FUNCTION valid_advanced_csg_tree
      (tree_element : boolean_operand ) : BOOLEAN;
      IF SIZEOF(TYPEOF(tree_element) * [ 
'PLANT_SPATIAL_CONFIGURATION.BLOCK', 
'PLANT_SPATIAL_CONFIGURATION.TORUS', 
'PLANT_SPATIAL_CONFIGURATION.RIGHT_CIRCULAR_CYLINDER', 
'PLANT_SPATIAL_CONFIGURATION.SPHERE', 
'PLANT_SPATIAL_CONFIGURATION.RIGHT_CIRCULAR_CONE', 
'PLANT_SPATIAL_CONFIGURATION.ECCENTRIC_CONE', 
'PLANT_SPATIAL_CONFIGURATION.PLANT_DESIGN_CSG_PRIMITIVE', 
'PLANT_SPATIAL_CONFIGURATION.CYCLIDE_SEGMENT_SOLID', 
'PLANT_SPATIAL_CONFIGURATION.RECTANGULAR_PYRAMID', 
'PLANT_SPATIAL_CONFIGURATION.EXTRUDED_AREA_SOLID', 
'PLANT_SPATIAL_CONFIGURATION.REVOLVED_AREA_SOLID', 
'PLANT_SPATIAL_CONFIGURATION.HALF_SPACE_SOLID' ]) = 1 THEN
         RETURN (TRUE);
      ELSE
         IF 'PLANT_SPATIAL_CONFIGURATION.BOOLEAN_RESULT' IN 
TYPEOF(tree_element) THEN
            IF NOT (tree_element\boolean_result.operator IN [ 
boolean_operator.union, boolean_operator.difference ]) THEN
               RETURN (FALSE);
            END_IF;
            IF 'PLANT_SPATIAL_CONFIGURATION.HALF_SPACE_SOLID' IN 
TYPEOF(tree_element\boolean_result.first_operand) THEN
               IF 'PLANT_SPATIAL_CONFIGURATION.ELEMENTARY_SURFACE' IN 
TYPEOF(tree_element\boolean_result.first_operand\half_space_solid.
base_surface) THEN
                  IF 'PLANT_SPATIAL_CONFIGURATION.HALF_SPACE_SOLID' IN 
TYPEOF(tree_element\boolean_result.second_operand) THEN
                     IF 
'PLANT_SPATIAL_CONFIGURATION.ELEMENTARY_SURFACE' IN 
TYPEOF(tree_element\boolean_result.second_operand\half_space_solid.
base_surface) THEN
                        RETURN (TRUE);
                     ELSE
                        RETURN (FALSE);
                     END_IF;
                  ELSE
                     RETURN 
(valid_advanced_csg_tree(tree_element\boolean_result.second_operand));
                  END_IF;
               ELSE
                  RETURN (FALSE);
               END_IF;
            ELSE
               IF 'PLANT_SPATIAL_CONFIGURATION.HALF_SPACE_SOLID' IN 
TYPEOF(tree_element\boolean_result.second_operand) THEN
                  IF 'PLANT_SPATIAL_CONFIGURATION.ELEMENTARY_SURFACE' 
IN 
TYPEOF(tree_element\boolean_result.second_operand\half_space_solid.
base_surface) THEN
                     RETURN 
(valid_advanced_csg_tree(tree_element\boolean_result.first_operand));
                  ELSE
                     RETURN (FALSE);
                  END_IF;
               ELSE
                  RETURN 
(valid_advanced_csg_tree(tree_element\boolean_result.first_operand) AND 
valid_advanced_csg_tree(tree_element\boolean_result.second_operand));
               END_IF;
            END_IF;
         END_IF;
      END_IF;
      RETURN (FALSE);
   END_FUNCTION;

   FUNCTION valid_calendar_date
      (date : calendar_date ) : LOGICAL;
      CASE date.month_component OF
         1 :
               RETURN ((1 <= date.day_component) AND 
(date.day_component <= 31));
         2 :
               BEGIN
                  IF leap_year(date.year_component) THEN
                     RETURN ((1 <= date.day_component) AND 
(date.day_component <= 29));
                  ELSE
                     RETURN ((1 <= date.day_component) AND 
(date.day_component <= 28));
                  END_IF;
               END;
         3 :
               RETURN ((1 <= date.day_component) AND 
(date.day_component <= 31));
         4 :
               RETURN ((1 <= date.day_component) AND 
(date.day_component <= 30));
         5 :
               RETURN ((1 <= date.day_component) AND 
(date.day_component <= 31));
         6 :
               RETURN ((1 <= date.day_component) AND 
(date.day_component <= 30));
         7 :
               RETURN ((1 <= date.day_component) AND 
(date.day_component <= 31));
         8 :
               RETURN ((1 <= date.day_component) AND 
(date.day_component <= 31));
         9 :
               RETURN ((1 <= date.day_component) AND 
(date.day_component <= 30));
         10 :
               RETURN ((1 <= date.day_component) AND 
(date.day_component <= 31));
         11 :
               RETURN ((1 <= date.day_component) AND 
(date.day_component <= 30));
         12 :
               RETURN ((1 <= date.day_component) AND 
(date.day_component <= 31));
      END_CASE;
      RETURN (FALSE);
   END_FUNCTION;

   FUNCTION valid_measure_value
      (m : measure_value ) : BOOLEAN;
      IF 'REAL' IN TYPEOF(m) THEN
         RETURN (m > 0.00000);
      ELSE
         IF 'INTEGER' IN TYPEOF(m) THEN
            RETURN (m > 0);
         ELSE
            RETURN (TRUE);
         END_IF;
      END_IF;
   END_FUNCTION;

   FUNCTION valid_time
      (time : local_time ) : BOOLEAN;
      IF EXISTS(time.second_component) THEN
         RETURN (EXISTS(time.minute_component));
      ELSE
         RETURN (TRUE);
      END_IF;
   END_FUNCTION;

   FUNCTION valid_units
      (m : measure_with_unit ) : BOOLEAN;
      IF 'PLANT_SPATIAL_CONFIGURATION.LENGTH_MEASURE' IN 
TYPEOF(m.value_component) THEN
         IF derive_dimensional_exponents(m.unit_component) <> 
dimensional_exponents(1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 
0.00000, 0.00000) THEN
            RETURN (FALSE);
         END_IF;
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.MASS_MEASURE' IN 
TYPEOF(m.value_component) THEN
         IF derive_dimensional_exponents(m.unit_component) <> 
dimensional_exponents(0.00000, 1.00000, 0.00000, 0.00000, 0.00000, 
0.00000, 0.00000) THEN
            RETURN (FALSE);
         END_IF;
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.TIME_MEASURE' IN 
TYPEOF(m.value_component) THEN
         IF derive_dimensional_exponents(m.unit_component) <> 
dimensional_exponents(0.00000, 0.00000, 1.00000, 0.00000, 0.00000, 
0.00000, 0.00000) THEN
            RETURN (FALSE);
         END_IF;
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.ELECTRIC_CURRENT_MEASURE' IN 
TYPEOF(m.value_component) THEN
         IF derive_dimensional_exponents(m.unit_component) <> 
dimensional_exponents(0.00000, 0.00000, 0.00000, 1.00000, 0.00000, 
0.00000, 0.00000) THEN
            RETURN (FALSE);
         END_IF;
      END_IF;
      IF 
'PLANT_SPATIAL_CONFIGURATION.THERMODYNAMIC_TEMPERATURE_MEASURE' IN 
TYPEOF(m.value_component) THEN
         IF derive_dimensional_exponents(m.unit_component) <> 
dimensional_exponents(0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 
0.00000, 0.00000) THEN
            RETURN (FALSE);
         END_IF;
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.CELSIUS_TEMPERATURE_MEASURE' IN 
TYPEOF(m.value_component) THEN
         IF derive_dimensional_exponents(m.unit_component) <> 
dimensional_exponents(0.00000, 0.00000, 0.00000, 0.00000, 1.00000, 
0.00000, 0.00000) THEN
            RETURN (FALSE);
         END_IF;
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.AMOUNT_OF_SUBSTANCE_MEASURE' IN 
TYPEOF(m.value_component) THEN
         IF derive_dimensional_exponents(m.unit_component) <> 
dimensional_exponents(0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 
1.00000, 0.00000) THEN
            RETURN (FALSE);
         END_IF;
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.LUMINOUS_INTENSITY_MEASURE' IN 
TYPEOF(m.value_component) THEN
         IF derive_dimensional_exponents(m.unit_component) <> 
dimensional_exponents(0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 
0.00000, 1.00000) THEN
            RETURN (FALSE);
         END_IF;
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.PLANE_ANGLE_MEASURE' IN 
TYPEOF(m.value_component) THEN
         IF derive_dimensional_exponents(m.unit_component) <> 
dimensional_exponents(0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 
0.00000, 0.00000) THEN
            RETURN (FALSE);
         END_IF;
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.SOLID_ANGLE_MEASURE' IN 
TYPEOF(m.value_component) THEN
         IF derive_dimensional_exponents(m.unit_component) <> 
dimensional_exponents(0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 
0.00000, 0.00000) THEN
            RETURN (FALSE);
         END_IF;
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.AREA_MEASURE' IN 
TYPEOF(m.value_component) THEN
         IF derive_dimensional_exponents(m.unit_component) <> 
dimensional_exponents(2.00000, 0.00000, 0.00000, 0.00000, 0.00000, 
0.00000, 0.00000) THEN
            RETURN (FALSE);
         END_IF;
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.VOLUME_MEASURE' IN 
TYPEOF(m.value_component) THEN
         IF derive_dimensional_exponents(m.unit_component) <> 
dimensional_exponents(3.00000, 0.00000, 0.00000, 0.00000, 0.00000, 
0.00000, 0.00000) THEN
            RETURN (FALSE);
         END_IF;
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.RATIO_MEASURE' IN 
TYPEOF(m.value_component) THEN
         IF derive_dimensional_exponents(m.unit_component) <> 
dimensional_exponents(0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 
0.00000, 0.00000) THEN
            RETURN (FALSE);
         END_IF;
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.POSITIVE_LENGTH_MEASURE' IN 
TYPEOF(m.value_component) THEN
         IF derive_dimensional_exponents(m.unit_component) <> 
dimensional_exponents(1.00000, 0.00000, 0.00000, 0.00000, 0.00000, 
0.00000, 0.00000) THEN
            RETURN (FALSE);
         END_IF;
      END_IF;
      IF 'PLANT_SPATIAL_CONFIGURATION.POSITIVE_PLANE_ANGLE_MEASURE' IN 
TYPEOF(m.value_component) THEN
         IF derive_dimensional_exponents(m.unit_component) <> 
dimensional_exponents(0.00000, 0.00000, 0.00000, 0.00000, 0.00000, 
0.00000, 0.00000) THEN
            RETURN (FALSE);
         END_IF;
      END_IF;
      RETURN (TRUE);
   END_FUNCTION;

   FUNCTION vector_difference
      (arg1 : vector_or_direction;
       arg2 : vector_or_direction ) : vector;
   LOCAL
      result : vector;
      res : direction;
      vec1 : direction;
      vec2 : direction;
      mag : REAL;
      mag1 : REAL;
      mag2 : REAL;
      ndim : INTEGER;
   END_LOCAL;
      IF (NOT EXISTS(arg1) OR NOT EXISTS(arg2)) OR (arg1.dim <> 
arg2.dim) THEN
         RETURN (?);
      ELSE
         BEGIN
            IF 'PLANT_SPATIAL_CONFIGURATION.VECTOR' IN TYPEOF(arg1) 
THEN
               mag1 := arg1.magnitude;
               vec1 := arg1.orientation;
            ELSE
               mag1 := 1.00000;
               vec1 := arg1;
            END_IF;
            IF 'PLANT_SPATIAL_CONFIGURATION.VECTOR' IN TYPEOF(arg2) 
THEN
               mag2 := arg2.magnitude;
               vec2 := arg2.orientation;
            ELSE
               mag2 := 1.00000;
               vec2 := arg2;
            END_IF;
            vec1 := normalise(vec1);
            vec2 := normalise(vec2);
            ndim := SIZEOF(vec1.direction_ratios);
            mag := 0.00000;
            res := dummy_gri || direction(vec1.direction_ratios);
            REPEAT i := 1 TO ndim;
               res.direction_ratios[i] := mag1 * 
vec1.direction_ratios[i] + mag2 * vec2.direction_ratios[i];
               mag := mag + res.direction_ratios[i] * 
res.direction_ratios[i];
            END_REPEAT;
            IF mag > 0.00000 THEN
               result := dummy_gri || vector(res, sqrt(mag));
            ELSE
               result := dummy_gri || vector(vec1, 0.00000);
            END_IF;
         END;
      END_IF;
      RETURN (result);
   END_FUNCTION;

(* *********************************** *)

END_SCHEMA;

(* ********************************************************************** *)
