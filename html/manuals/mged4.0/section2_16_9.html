<HEAD>
<TITLE> Building Regions</TITLE>
</HEAD>
<BODY><P>
 <HR> <A NAME=tex2html3471 HREF=chapter2_17.html><IMG ALIGN=MIDDLE SRC="http://admii.arl.army.mil/~bparker/icons/next_motif.gif"></A> <A NAME=tex2html3469 HREF=chapter2_16.html><IMG ALIGN=MIDDLE SRC="http://admii.arl.army.mil/~bparker/icons/up_motif.gif"></A> <A NAME=tex2html3465 HREF=section2_16_8.html><IMG ALIGN=MIDDLE SRC="http://admii.arl.army.mil/~bparker/icons/previous_motif.gif"></A> <A NAME=tex2html3473 HREF=tableofcontents2_1.html><IMG ALIGN=MIDDLE SRC="http://admii.arl.army.mil/~bparker/icons/contents_motif.gif"></A> <BR>
<B> Next:</B> <A NAME=tex2html3472 HREF=chapter2_17.html> BUILDING A ROBOT </A>
<B>Up:</B> <A NAME=tex2html3470 HREF=chapter2_16.html> BUILDING A TIN </A>
<B> Previous:</B> <A NAME=tex2html3466 HREF=section2_16_8.html> Building the Legs</A>
<HR> <P>
<H1><A NAME=SECTION00169000000000000000> Building Regions</A></H1>
<P>
So far, this example has concentrated on describing the basic shapes
involved in making the Tin Woodsman, without concern for establishing
a proper hierarchical structure.  To illustrate this point,
the various solids will be grouped by purpose and composition.
First, a region will be constructed to contain the torso,
and the color of ``cadet blue'' will be assigned:
<P>
<tt>mged&gt; <em>r torso.r u s.1</em> <BR>Defaulting item number to 1001 <BR>Creating region id=1000, air=0, los=100, GIFTmaterial=1 <BR>mged&gt; <em>mater torso.r</em> <BR>Material = <BR>Material?  (CR to skip) <em>plastic</em> <BR>Param = <BR>Parameter string? (CR to skip) <em>[RETURN]</em> <BR>Color = (No color specified) <BR>Color R G B (0..255)? (CR to skip) <em>95 159 159</em> <BR>Inherit = 0:  lower nodes (towards leaves) override <BR>Inheritance (0|1)? (CR to skip) <em>[RETURN]</em> <BR>mged&gt; 
</tt>
<P>
Second, a region will be constructed to contain the collar,
which will be colored red:
<P>
<tt>mged&gt; <em>r collar.r u t.1</em> <BR>Defaulting item number to 1003 <BR>Creating region id=1002, air=0, los=100, GIFTmaterial=1 <BR>mged&gt; <em>mater collar.r</em> <BR>Material = <BR>Material?  (CR to skip) <em>plastic</em> <BR>Param = <BR>Parameter string? (CR to skip)  <em>[RETURN]</em> <BR>Color = (No color specified) <BR>Color R G B (0..255)? (CR to skip) <em>255 127 0</em> <BR>Inherit = 0:  lower nodes (towards leaves) override <BR>Inheritance (0|1)? (CR to skip)  <em>[RETURN]</em> <BR>mged&gt;
</tt>
<P>
Third, a region will be constructed to contain all the limbs,
and a flesh color will be assigned.
Even though none of the limbs touch each other, note how they
are combined with the UNION operation, to create a single
object of uniform composition and color.
<P>
<tt>mged&gt; <em>r limbs.r u e.2 u e.3 u e.4 u e.5 u e.6 u e.7 u e.8 u e.9</em> <BR>Defaulting item number to 1001 <BR>Creating region id=1000, air=0, los=100, GIFTmaterial=1 <BR>mged&gt; <em>mater limbs.r</em> <BR>Material = <BR>Material?  (CR to skip) <em>plastic</em> <BR>Param = <BR>Parameter string? (CR to skip)  <em>[RETURN]</em> <BR>Color = 0 0 0 <BR>Color R G B (0..255)? (CR to skip) <em>255 200 160</em> <BR>Inherit = 0:  lower nodes (towards leaves) override <BR>Inheritance (0|1)? (CR to skip)  <em>[RETURN]</em> <BR>mged&gt; 
</tt>
<P>
Next, the funnel needs to be placed in a region.
For the sake of simplicity, the funnel will be solid, rather
than having a hollow center.
Note that the interior of the funnel overlaps with the top
of the Woodsman's head.
The funnel can be made ``form fitting'' by subtracting out
the overlap zone:
<P>
<tt>mged&gt; <em>r funnel.r u c.1 - e.1 u c.2 - e.1</em> <BR>Defaulting item number to 1004 <BR>Creating region id=1003, air=0, los=100, GIFTmaterial=1 <BR>mged&gt; <em>mater funnel.r</em> <BR>Material = <BR>Material?  (CR to skip) <em>plastic</em> <BR>Param = <BR>Parameter string? (CR to skip) <em>sh=100</em> <BR>Color = (No color specified) <BR>Color R G B (0..255)? (CR to skip) <em>35 107 142</em> <BR>Inherit = 0:  lower nodes (towards leaves) override <BR>Inheritance (0|1)? (CR to skip) 
mged&gt; <em>l funnel.r</em> <BR>funnel.r (len 4) REGION id=1003  (air=0, los=100, GIFTmater=1) - <BR>Material 'plastic' 'sh=100' <BR>Color 35 107 142 <BR>  u c.1 <BR>  - e.1 <BR>  u c.2 <BR>  - e.1 <BR>mged&gt; 
</tt>
<P>
	<A NAME=wm-hat-E HREF="wm-hat-Ebig.gif"><IMG ALIGN=BOTTOM ALT="" SRC="wm-hat-E.gif"></A>
	<A HREF="wm-hat-Ebig.gif">Figure (wm-hat-E): Evaluation of Funnel Hat Region</A>
<P>
Note how the boolean expression was written.
The concept that we need to express here is
the combination of all the funnel parts, minus the
portion of the head that overlaps with the inside of the funnel.
The natural way to write this is
(c.1 union c.2) - e.1
but note that there are no grouping operations permitted in the <em>r</em>
command.
Furthermore, for historic reasons, union operations bind more loosely than
intersection and subtraction, ie, there are implied groups
between union operations.  Thus, the expression above needs to be
rewritten as the the formula:
(c.1 - e.1) union (c.2 - e.1)
which with the binding precedence can be expressed as:
c.1 - e.1 union c.2 - e.1
which is what was entered in the sequence above.
To see the effect that this command had on the shape of ``funnel.r'',
run these commands, the effect of which is shown in 
	<A HREF="wm-hat-Ebig.gif">Figure (wm-hat-E)</A>
:
<P>
<tt>mged&gt; <em>Z </em> <BR>mged&gt; <em>E funnel.r </em> <BR>vectorized in 1 sec <BR>mged&gt; 
</tt>
<P>
These regions should be grouped together into a group,
for convenience in referencing.  This can be done with these commands:
<P>
<tt>mged&gt; <em>g man.g collar.r funnel.r limbs.r torso.r</em> <BR>mged&gt; <em>Z</em> <BR>mged&gt; <em>e man.g</em> <BR>vectorized in 1 sec <BR>mged&gt;
</tt>
<P>
The grouping <em>g</em> command combined the regions, the Zap command <em>Z</em>
cleared the screen, and the edit <em>e man.g</em> command drew the whole
object.
As an exercise, run
the database structure printing command <em>tree man.g</em>
to obtain a simple depiction of the tree structure that has been created.
For the final step of this example, the model will be ray-traced.
Run the command:
<P>
<tt>mged&gt; <em>rt -s128</em> <BR>rt -s50 -M -s128 woodsman.g man.g  <BR>db title:  A Tin Woodsman <BR>Buffering single scanlines <BR>initial dynamic memory use=35152.<BR>Interpreting command stream in old format<BR>GETTREE: 0.01 CPU secs in 1 elapsed secs (1%)<BR><BR>...................Frame     0...................<BR>PREP: 0.01 CPU secs in 0.01 elapsed secs (100%)<BR>shooting at 13 solids in 4 regions              <BR>model X(-2,2), Y(-6,7), Z(-2,2)<BR>Beam radius=0.078125 mm, divergance=0 mm/1mm<BR><BR>SHOT: 3.73 CPU secs in 6 elapsed secs (62.1667%)<BR>Additional dynamic memory used=29728. bytes<BR>3515 solid/ray intersections: 1005 hits + 2510 miss<BR>pruned 28.6%:  13647 model RPP, 8197 dups, 10740 RPP<BR>Frame     0:    16384 pixels in       3.73 sec =    4392.49 pixels/sec<BR>Frame     0:    16384 rays   in       3.73 sec =    4392.49 rays/sec (RTFM)<BR><BR>Press RETURN to reattach<BR><em>[RETURN]</em> <BR>mged&gt; 
</tt>
<P>
<HR> <A NAME=tex2html3471 HREF=chapter2_17.html><IMG ALIGN=MIDDLE SRC="http://admii.arl.army.mil/~bparker/icons/next_motif.gif"></A> <A NAME=tex2html3469 HREF=chapter2_16.html><IMG ALIGN=MIDDLE SRC="http://admii.arl.army.mil/~bparker/icons/up_motif.gif"></A> <A NAME=tex2html3465 HREF=section2_16_8.html><IMG ALIGN=MIDDLE SRC="http://admii.arl.army.mil/~bparker/icons/previous_motif.gif"></A> <A NAME=tex2html3473 HREF=tableofcontents2_1.html><IMG ALIGN=MIDDLE SRC="http://admii.arl.army.mil/~bparker/icons/contents_motif.gif"></A> <BR>
<B> Next:</B> <A NAME=tex2html3472 HREF=chapter2_17.html> BUILDING A ROBOT </A>
<B>Up:</B> <A NAME=tex2html3470 HREF=chapter2_16.html> BUILDING A TIN </A>
<B> Previous:</B> <A NAME=tex2html3466 HREF=section2_16_8.html> Building the Legs</A>
<HR> <P>
<HR>

</BODY>
<P><ADDRESS>
<I> <BR>
Wed Feb 16 13:46:53 EST 1994</I>
