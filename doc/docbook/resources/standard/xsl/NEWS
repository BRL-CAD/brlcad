Changes since the 1.73.2 release

Note: This document lists changes only since the 1.73.2 release. If you instead
want a record of the complete list of changes for the codebase over its entire
history, you can obtain one by running the following commands:

  svn checkout https://docbook.svn.sourceforge.net/svnroot/docbook/trunk/xsl
  svn log --xml --verbose xsl > ChangeHistory.xml

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Table of Contents

Release Notes: 1.74.0

    Gentext
    Common
    FO
    HTML
    Manpages
    Epub
    HTMLHelp
    Eclipse
    JavaHelp
    Roundtrip
    Slides
    Website
    Params
    Profiling
    Lib
    Tools
    Template
    Extensions
    XSL-Saxon
    XSL-Xalan
    XSL-libxslt

Release Notes: 1.74.0

The following is a list of changes that have been made since the 1.73.2
release.

Gentext

The following changes have been made to the gentext code since the 1.73.2
release.

  ● Michael(tm) Smith: locale/id.xml

    Checked in changes to Indonesion locale submitted by Euis Luhuanam a long time ago.

  ● Michael(tm) Smith: locale/lt.xml

    Added changes to Lithuanian locate submitted a long time back by Nikolajus Krauklis.

  ● Michael(tm) Smith: .gitignore; .cvsignore

    renamed a bunch more .cvsignore files to .gitignore (to facilitate use of git-svn)

  ● Michael(tm) Smith: locale/hu.xml

    fixed error in lowercase.alpha definition in Hungarian locale

  ● Michael(tm) Smith: locale/nb.xml

    Corrected language code for nb locale, and restored missing
    "startquote" key.

  ● Michael(tm) Smith: locale/ja.xml

    Committed changes to ja locale file, from Akagi Kobayashi. Adds
    bracket quotes around many xref instances that did not have them
    before.

  ● Michael(tm) Smith: Makefile

    "no" locale is now "nb"

  ● Michael(tm) Smith: locale/nb.xml

    Update Norwegian Bokmål translation. Thanks to Hans F. Nordhaug.

  ● Michael(tm) Smith: locale/no.xml; locale/nb.xml

    per message from Hans F. Nordhaug, correct identifier for
    Norwegian Bokmål is "nb" (not "no") and has been for quite some
    time now...

  ● Michael(tm) Smith: locale/ja.xml

    Converted ja.xml source file to use real unicode characters so
    that the actual glyphs so up when you edit it in a text editor
    (instead of the character references).

  ● Michael(tm) Smith: locale/ja.xml

    Checked in changes to ja.xml locale file. Thanks to Akagi Kobayashi.

  ● Mauritz Jeanson: xsl/xsl.xsl

    Corrected repository URL.

  ● Michael(tm) Smith: locale/it.xml

    Changes from Federico Zenith

  ● Dongsheng Song: locale/zh_cn.xml

    Added missing translations.

Common

The following changes have been made to the common code since the 1.73.2
release.

  ● Keith Fahlgren: Makefile

    Get rid of the rest of the hardcoded buildtools references and actually use DOCBOOK_SVN

  ● Jirka Kosek: common.xsl

  ● Keith Fahlgren: l10n.xsl

    == General epub test support

    $ spec -O ~/.spec.opts spec/epub_spec.rb

    DocBook::Epub
    - should be able to be created
    - should fail on a nonexistent file
    - should be able to render to a file
    - should create a file after rendering
    - should have the correct mimetype after rendering
    - should be valid .epub after rendering an article
    - should be valid .epub after rendering an article without sections
    - should be valid .epub after rendering a book
    - should be valid .epub after rendering a book even if it has one graphic
    - should be valid .epub after rendering a book even if it has many graphics
    - should be valid .epub after rendering a book even if it has many duplicated graphics
    - should report an empty file as invalid
    - should confirm that a valid .epub file is valid
    - should not include PDFs in rendered epub files as valid image inclusions
    - should include a TOC link in rendered epub files for <book>s

    Finished in 20.608395 seconds

    15 examples, 0 failures


    == Verbose epub test coverage against _all_ of the testdocs

    Fails on only (errors truncated):
    1)
    'DocBook::Epub should be able to render a valid .epub for the test document /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/calloutlist.003.xml [30]' FAILED
     expected .epub file to be valid, but validation produced these errors:
     /tmp/epubspecsmoke/calloutlist.003.epub: could not parse OEBPS/index.html: duplicate id: dos

    2)
    'DocBook::Epub should be able to render a valid .epub for the test document /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/cmdsynopsis.001.xml [35]' FAILED
     expected .epub file to be valid, but validation produced these errors:
     /tmp/epubspecsmoke/cmdsynopsis.001.epub/OEBPS/re01.html(5): element "p" from namespace "http://www.w3.org/1999/xhtml" not allowed in this context

    3)
    'DocBook::Epub should be able to render a valid .epub for the test document /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/cmdsynopsis.002.xml [36]' FAILED
     expected .epub file to be valid, but validation produced these errors:
     /tmp/epubspecsmoke/cmdsynopsis.002.epub/OEBPS/index.html(4): element "div" from namespace "http://www.w3.org/1999/xhtml" not allowed in this context

    4)
    'DocBook::Epub should be able to render a valid .epub for the test document /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/extensions.002.xml [50]' FAILED
     expected .epub file to be valid, but validation produced these errors:
     /tmp/epubspecsmoke/extensions.002.epub/OEBPS/index.html(3): attribute "type" from namespace "http://www.w3.org/1999/xlink" not allowed at this point; ignored
    /tmp/epubspecsmoke/extensions.002.epub/OEBPS/index.html(3): attribute "show" from namespace "http://www.w3.org/1999/xlink" not allowed at this point; ignored
    /tmp/epubspecsmoke/extensions.002.epub/OEBPS/index.html(3): attribute "actuate" from namespace "http://www.w3.org/1999/xlink" not allowed at this point; ignored

    5)
    'DocBook::Epub should be able to render a valid .epub for the test document /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/extensions.004.xml [52]' FAILED
     expected .epub file to be valid, but validation produced these errors:
     /tmp/epubspecsmoke/extensions.004.epub/OEBPS/index.html(5): attribute "type" from namespace "http://www.w3.org/1999/xlink" not allowed at this point; ignored
    /tmp/epubspecsmoke/extensions.004.epub/OEBPS/index.html(5): attribute "show" from namespace "http://www.w3.org/1999/xlink" not allowed at this point; ignored
    /tmp/epubspecsmoke/extensions.004.epub/OEBPS/index.html(5): attribute "actuate" from namespace "http://www.w3.org/1999/xlink" not allowed at this point; ignored

    6)
    'DocBook::Epub should be able to render a valid .epub for the test document /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/funcsynopsis.001.xml [65]' FAILED
     expected .epub file to be valid, but validation produced these errors:
     /tmp/epubspecsmoke/funcsynopsis.001.epub/OEBPS/index.html(5): element "code" from namespace "http://www.w3.org/1999/xhtml" not allowed in this context

    7)
    'DocBook::Epub should be able to render a valid .epub for the test document /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/imageobjectco.001.xml [70]' FAILED
     expected .epub file to be valid, but validation produced these errors:
     /tmp/epubspecsmoke/imageobjectco.001.epub/OEBPS/index.html(3): attribute "border" not allowed at this point; ignored

    8)
    'DocBook::Epub should be able to render a valid .epub for the test document /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/olink.001.xml [118]' FAILED
     expected .epub file to be valid, but validation produced these errors:
     /tmp/epubspecsmoke/olink.001.epub/OEBPS/index.html(3): 'OEBPS/file:///sourceforge/projects/docbook/testdocs/tests/olink.001.html': referenced resource missing in the package

    9)
    'DocBook::Epub should be able to render a valid .epub for the test document /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/programlisting.002.xml [129]' FAILED
     expected .epub file to be valid, but validation produced these errors:
     /tmp/epubspecsmoke/programlisting.002.epub/OEBPS/index.html(3): attribute "type" from namespace "http://www.w3.org/1999/xlink" not allowed at this point; ignored
    /tmp/epubspecsmoke/programlisting.002.epub/OEBPS/index.html(3): attribute "show" from namespace "http://www.w3.org/1999/xlink" not allowed at this point; ignored
    /tmp/epubspecsmoke/programlisting.002.epub/OEBPS/index.html(3): attribute "actuate" from namespace "http://www.w3.org/1999/xlink" not allowed at this point; ignored

    10)
    RuntimeError in 'DocBook::Epub should be able to render a valid .epub for the test document /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/programlisting.006.xml [133]'
    Could not render as .epub to /tmp/epubspecsmoke/programlisting.006.epub (xsltproc --xinclude --stringparam chunk.quietly 1 --stringparam callout.graphics.path images/callouts/ --stringparam callout.graphics.number.limit 15 --stringparam callout.graphics.extension .png --stringparam base.dir /tmp/epubspecsmoke/OEBPS/ --stringparam epub.metainf.dir /tmp/epubspecsmoke/META-INF/ --stringparam epub.oebps.dir /tmp/epubspecsmoke/OEBPS/ /Users/keith/work/docbook-dev/trunk/xsl/epub/docbook.xsl /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/programlisting.006.xml)

    11)
    RuntimeError in 'DocBook::Epub should be able to render a valid .epub for the test document /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/programlistingco.002.xml [135]'
    Could not render as .epub to /tmp/epubspecsmoke/programlistingco.002.epub (xsltproc --xinclude --stringparam chunk.quietly 1 --stringparam callout.graphics.path images/callouts/ --stringparam callout.graphics.number.limit 15 --stringparam callout.graphics.extension .png --stringparam base.dir /tmp/epubspecsmoke/OEBPS/ --stringparam epub.metainf.dir /tmp/epubspecsmoke/META-INF/ --stringparam epub.oebps.dir /tmp/epubspecsmoke/OEBPS/ /Users/keith/work/docbook-dev/trunk/xsl/epub/docbook.xsl /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/programlistingco.002.xml)

    12)
    'DocBook::Epub should be able to render a valid .epub for the test document /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/refentry.007.xml [148]' FAILED
     expected .epub file to be valid, but validation produced these errors:
     /tmp/epubspecsmoke/refentry.007.epub/OEBPS/rn01re01.html(5): element "code" from namespace "http://www.w3.org/1999/xhtml" not allowed in this context

    13)
    'DocBook::Epub should be able to render a valid .epub for the test document /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/table.003.xml [191]' FAILED
     expected .epub file to be valid, but validation produced these errors:
     /tmp/epubspecsmoke/table.003.epub/OEBPS/index.html(4): 'ftn.id964170': fragment identifier is not defined in 'OEBPS/index.html'

    14)
    'DocBook::Epub should be able to render a valid .epub for the test document /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/textobject.001.xml [207]' FAILED
     expected .epub file to be valid, but validation produced these errors:
     /tmp/epubspecsmoke/textobject.001.epub/OEBPS/index.html(3): attribute "type" from namespace "http://www.w3.org/1999/xlink" not allowed at this point; ignored
    /tmp/epubspecsmoke/textobject.001.epub/OEBPS/index.html(3): attribute "show" from namespace "http://www.w3.org/1999/xlink" not allowed at this point; ignored
    /tmp/epubspecsmoke/textobject.001.epub/OEBPS/index.html(3): attribute "actuate" from namespace "http://www.w3.org/1999/xlink" not allowed at this point; ignored

    15)
    'DocBook::Epub should be able to render a valid .epub for the test document /Users/keith/work/docbook-dev/trunk/xsl/epub/bin/spec/testdocs/textobject.002.xml [208]' FAILED
     expected .epub file to be valid, but validation produced these errors:
     /tmp/epubspecsmoke/textobject.002.epub/OEBPS/index.html(3): attribute "type" from namespace "http://www.w3.org/1999/xlink" not allowed at this point; ignored
    /tmp/epubspecsmoke/textobject.002.epub/OEBPS/index.html(3): attribute "show" from namespace "http://www.w3.org/1999/xlink" not allowed at this point; ignored
    /tmp/epubspecsmoke/textobject.002.epub/OEBPS/index.html(3): attribute "actuate" from namespace "http://www.w3.org/1999/xlink" not allowed at this point; ignored


    Finished in 629.89194 seconds

    224 examples, 15 failures

    224 examples, 15 failures yields 6% failure rate

  ● Michael(tm) Smith: l10n.xsl

    Added new template "l10.language.name" for retrieving the
    English-language name of the lang setting of the current document.
    Closes #1916837. Thanks to Simon Kennedy.

  ● Michael(tm) Smith: .gitignore; .cvsignore

    renamed all .cvsignore files to .gitignore, to facilitate use of git-svn

  ● Michael(tm) Smith: refentry.xsl

    fixed syntax error

  ● Michael(tm) Smith: refentry.xsl

    fixed a couple of typos

  ● Michael(tm) Smith: refentry.xsl

    refined handling of cases where refentry "source" or "manual"
    metadata is missing or when we use fallback content instead. We
    now report a Warning if we use fallback content.

  ● Michael(tm) Smith: refentry.xsl

    revert part of previous commit that SF stupidity caused me to fuck up

  ● Michael(tm) Smith: refentry.xsl

    don't use refmiscinfo@class=date value as fallback for refentry
    "source" or "manual" metadata fields

  ● Michael(tm) Smith: refentry.xsl

    Made reporting of missing refentry metadata more quiet:

      - we no longer report anything if usable-but-not-preferred
        metadata is found; we just quietly use whatever we manage to
        find

      - we now only report missing "source" metadata if the refentry
        is missing BOTH "source name" and "version" metadata; if it
        has one but not the other, we use whichever one it has and
        don't report anything as missing

    The above changes were made because testing with some "real world"
    source reveals that some authors are intentionally choosing to use
    "non preferred" markup for some metadata, and also choosing to
    omit "source name" or "version" metadata in there DocBook XML. So
    it does no good to give them pedantic reminders about what they
    already know...

    Also, changed code to cause "fixme" text to be inserted in output
    in particular cases:

      - if we can't manage to find any "source" metadata at all, we
        now put fixme text into the output

      - if we can't manage to find any "manual" metadata a all, we
        now put fixme text into the output

    The "source" and "manual" metadata is necessary information, so
    buy putting the fixme stuff in the output, we alert users to the
    need problem of it being missing.

  ● Michael(tm) Smith: refentry.xsl

    When generating manpages output, we no longer report anything if
    the refentry source is missing date or pubdate content. In
    practice, many users intentionally omit the date from the source
    because they explicitly want it to be generated.

  ● Michael(tm) Smith: l10n.xml; .cvsignore; Makefile

    Added in support for building the Galician locale.

  ● Michael(tm) Smith: l10n.xml

    further change needed for switch from no locale to nb.

  ● Michael(tm) Smith: .cvsignore

    ignore nb.xml

  ● Michael(tm) Smith: common.xsl

    Added support for orgname in authorgroup. Thanks to Camille
    Bégnis.

  ● Michael(tm) Smith: Makefile

    "no" locale is now "nb"

  ● Mauritz Jeanson: stripns.xsl

    Removed the template matching "ng:link|db:link" (in order to make @xlink:show
    work with <link> elements). As far as I can tell, this template is no longer needed.

  ● Mauritz Jeanson: entities.ent

    Moved declaration of comment.block.parents entity to common/entities.ent.

  ● Mauritz Jeanson: titles.xsl

    Added an update the fix made in revision 7528 (handling of xref/link in no.anchor.mode mode).
    Having xref in title is not a problem as long as the target is not an ancestor element.
    Closes bug #1838136.

    Note that an xref that is in a title and whose target is an ancestor element is still not
    rendered in the TOC. This could be considered a bug, but on the other hand I cannot really
    see the point in having such an xref in a document.

  ● Mauritz Jeanson: titles.xsl

    Added a "not(ancestor::title)" test to work around "too many nested
    apply-templates" problems when processing xrefs or links in no.anchor.mode mode.
    Hopefully, this closes bug #1811721.

  ● Mauritz Jeanson: titles.xsl

    Removed old template matching "link" in no.anchor.mode mode.

  ● Mauritz Jeanson: titles.xsl

    Process <link> in no.anchor.mode mode with the same template as <xref>.
    Closes bug #1759205 (Empty link in no.anchor.mode mode).

  ● Mauritz Jeanson: titles.xsl

    In no.anchor.mode mode, do not output anchors for elements that are descendants
    of <title>. Previously, having inline elements with @id/@xml:id in <title>s
    resulted in anchors both in the TOC and in the main flow. Closes bug #1797492.

FO

The following changes have been made to the fo code since the 1.73.2 release.

  ● Keith Fahlgren: Makefile

    Get rid of the rest of the hardcoded buildtools references and actually use DOCBOOK_SVN

  ● Mauritz Jeanson: pi.xsl

    Updated documentation for keep-together.

  ● Mauritz Jeanson: task.xsl

    Enabled use of the keep-together PI on task elements.

  ● Jirka Kosek: lists.xsl

  ● Robert Stayton: index.xsl

    FOP1 requires fo:wrapper for inline index entries, not fo:inline.

  ● Robert Stayton: index.xsl

    Fixed non-working inline.or.block template for indexterm wrappers.
    Add fop1 to list of processors using inline.or.block.

  ● Michael(tm) Smith: .gitignore; .cvsignore

    renamed all .cvsignore files to .gitignore, to facilitate use of git-svn

  ● Mauritz Jeanson: table.xsl

    Fixed bug #1891965 (colsep in entytbl not working).

  ● Mauritz Jeanson: titlepage.xsl

    Added support for title in revhistory. Closes bug #1842847.

  ● Mauritz Jeanson: pi.xsl

    Small doc cleanup (dbfo float-type).

  ● Mauritz Jeanson: titlepage.xsl

    Insert commas between multiple copyright holders.

  ● Mauritz Jeanson: autotoc.xsl; division.xsl

    Added modifications to support nested set elements. See bug #1853172.

  ● David Cramer: glossary.xsl

    Added normalize-space to xsl:sorts to avoid missorting of glossterms due to stray leading spaces.

  ● David Cramer: glossary.xsl

    Fixed bug #1854199: glossary.xsl should use the sortas attribute on glossentry

  ● Mauritz Jeanson: inline.xsl

    Added a template for citebiblioid. The hyperlink target is the parent of the referenced biblioid,
    and the "hot text" is the biblioid itself enclosed in brackets.

  ● Mauritz Jeanson: inline.xsl

    Moved declaration of comment.block.parents entity to common/entities.ent.

  ● Mauritz Jeanson: docbook.xsl

    Updated message about unmatched element.

  ● Mauritz Jeanson: param.xweb

    Added link to profiling chapter of TCG.

  ● Mauritz Jeanson: refentry.xsl

    Fixed typo (refsynopsysdiv -> refsynopsisdiv).

  ● David Cramer: fop.xsl; fop1.xsl; ptc.xsl; xep.xsl

    Added test to check generate.index param when generating pdf bookmarks

  ● Mauritz Jeanson: graphics.xsl

    Added support for MathML in imagedata.

  ● Michael(tm) Smith: math.xsl

    Removed unnecessary extra test condition in test express that
    checks for passivetex.

  ● Michael(tm) Smith: math.xsl

    Don't use fo:instream-foreign-object if we are processing with
    passivetex. Closes #1806899. Thanks to Justus Piater.

  ● Mauritz Jeanson: component.xsl

    Added code to output a TOC for an appendix in an article when
    generate.toc='article/appendix toc'. Closes bug #1669658.

  ● Dongsheng Song: biblio-iso690.xsl

    Change encoding from "windows-1250" to "UTF-8".

  ● Mauritz Jeanson: pi.xsl

    Updated documentation for dbfo_label-width.

  ● Mauritz Jeanson: lists.xsl

    Added support for the dbfo_label-width PI in calloutlists.

  ● Robert Stayton: biblio.xsl

    Support finding glossary database entries inside bibliodivs.

  ● Robert Stayton: formal.xsl

    Complete support for <?dbfo pgwide="1"?> for informal
    elements too.

  ● Mauritz Jeanson: table.xsl

    In the table.block template, added a check for the dbfo_keep-together PI, so that
    a table may break (depending on the PI value) at a page break. This was needed
    since the outer fo:block that surrounds fo:table has keep-together.within-column="always"
    by default, which prevents the table from breaking. Closes bug #1740964 (Titled
    table does not respect dbfo PI).

  ● Mauritz Jeanson: pi.xsl

    Added a few missing @role="tcg".

  ● Michael(tm) Smith: xref.xsl

    Corrected dumb error I made in r7435 change.

  ● Mauritz Jeanson: inline.xsl

    Use normalize-space() in glossterm comparisons (as in html/inline.xsl).

  ● Mauritz Jeanson: autoidx.xsl

    Removed the [&scope;] predicate from the target variable in the template with name="reference".
    This filter was the cause of missing index backlinks when @zone and @type were used on indexterms,
    with index.on.type=1. Closes bug #1680836.

  ● Michael(tm) Smith: inline.xsl; xref.xsl; footnote.xsl

    Added capability in FO output for displaying URLs for all
    hyperlinks (elements marked up with xlink:href attributes) in the
    same way as URLs for ulinks are already handled (which is to say,
    either inline or as numbered footnotes).

    Background on this change:
    DocBook 5 allows "ubiquitous" linking, which means you can make
    any element a hyperlink just by adding an xlink:href attribute to
    it, with the value set to an external URL. That's in contrast to
    DocBook 4, which only allows you to use specific elements (e.g.,
    the link and ulink elements) to mark up hyperlinks.

    The existing FO stylesheets have a mechanism for handling display
    of URLs for hyperlinks that are marked up with ulink, but they did
    not handle display of URLs for elements that were marked up with
    xlink:href attributes. This change adds handling for those other
    elements, enabling the URLs they link to be displayed either
    inline or as numbered footnotes (depending on what values the user
    has the ulink.show and ulink.footnotes params set to).

    Note that this change only adds URL display support for elements
    that call the simple.xlink template -- which currently is most
    (but not all) inline elements.

    This change also moves the URL display handling out of the ulink
    template and into a new "hyperlink.url.display" named template;
    the ulink template and the simple.xlink named template now both
    call the hyperlink.url.display template.

    Warning: In the stylesheet code that determines what footnote
    number to assign to each footnote or external hyperlink, there is
    an XPath expression for determining whether a particular
    xlink:href instance is an external hyperlink; that expression is
    necessarily a bit complicated and further testing may reveal that
    it doesn't handle all cases as expected -- so some refinements to
    it may need to be done later.

    Closes #1785519. Thanks to Ken Morse for reporting and
    troubleshooting the problem.

HTML

The following changes have been made to the html code since the 1.73.2 release.

  ● Keith Fahlgren: inline.xsl; synop.xsl

    Work to make HTML and XHTML targets more valid

  ● Keith Fahlgren: table.xsl

    Add better handling for tables that have footnotes in the titles

  ● Keith Fahlgren: biblio.xsl

    Add anchors to bibliodivs

  ● Jirka Kosek: lists.xsl

  ● Keith Fahlgren: formal.xsl; Makefile; htmltbl.xsl

    Initial checkin/merge of epub target from work provided by Paul Norton of Adobe
    and Keith Fahlgren of O'Reilly.

  ● Mauritz Jeanson: biblio.xsl

    Added code for creating URLs from biblioids with @class="doi" (representing Digital
    Object Identifiers). See FR #1934434 and http://doi.org.

    To do: 1) Add support for FO output. 2) Figure out how @class="doi" should be handled
    for bibliorelation, bibliosource and citebiblioid.

  ● Norman Walsh: formal.xsl

    Don't use xsl:copy because it forces the resulting element to be in the same namespace as the source element; in the XHTML stylesheets, that's wrong. But the HTML-to-XHTML converter does the right thing with literal result elements, so use one of them.

  ● Michael(tm) Smith: Makefile

    Added checks and hacks to various makefiles to enable building
    under Cygwin. This stuff is ugly and maybe not worth the mess and
    trouble, but does seem to work as expected and not break anything
    else.

  ● Michael(tm) Smith: docbook.xsl

    added "exslt" namespace binding to html/docbook.xsl file (in
    addition to existing "exsl" binding. reason is because lack of it
    seems to cause processing problems when using the profiled
    version of the stylsheet

  ● Michael(tm) Smith: .cvsignore; .gitignore

    renamed all .cvsignore files to .gitignore, to facilitate use of git-svn

  ● Norman Walsh: chunk-common.xsl

    Rename link

  ● Mauritz Jeanson: table.xsl

    Added a fix to make rowsep apply to the last row of thead in entrytbl.

  ● Michael(tm) Smith: synop.xsl

    Simplified and streamlined handling of output for ANSI-style
    funcprototype output, to correct a problem that was causing type
    data to be lost in the output parameter definitions. For example,
    for an instance like this:
      <paramdef>void *<parameter>dataptr</parameter>[]</paramdef>
    ... the brackets (indicating an array type) were being dropped.

  ● Michael(tm) Smith: synop.xsl

    Changed HTML handling of K&R-style paramdef output. The parameter
    definitions are no longer output in a table (though the prototype
    still is). The reason for the change is that the
    kr-tabular-funcsynopsis-mode template was causing type data to be
    lost in the output parameter definitions. For example, for an
    instance like this:
      <paramdef>void *<parameter>dataptr</parameter>[]</paramdef>
    ... the brackets (indicating an array type) were being dropped.
    The easiest way to deal with the problem is to not try to chop up
    the parameter definitions and display them in table format, but to
    instead just output them as-is. May not look quite as pretty, but
    at least we can be sure no information is being lost...

  ● Michael(tm) Smith: pi.xsl

    updated wording of doc for funcsynopsis-style PI

  ● Michael(tm) Smith: param.xweb; param.ent; synop.xsl

    Removed the funcsynopsis.tabular.threshold param. It's no longer
    being used in the code and hasn't been since mid 2006.

  ● Mauritz Jeanson: graphics.xsl

    Added support for the img.src.path parameter for SVG graphics. Closes bug #1888169.

  ● Mauritz Jeanson: chunk-common.xsl

    Added missing space.

  ● Norman Walsh: component.xsl

    Fix bug where component titles inside info elements were not handled properly

  ● Michael(tm) Smith: pi.xsl

    Moved dbhtml_stop-chunking embedded doc into alphabetical order,
    fixed text of TCG section it see-also'ed.

  ● David Cramer: pi.xsl

    Added support for <?dbhtml stop-chunking?> processing instruction

  ● David Cramer: chunk-common.xsl; pi.xsl

    Added support for <?dbhtml stop-chunking?> processing instruction

  ● David Cramer: glossary.xsl

    Fixed bug #1854199: glossary.xsl should use the sortas attribute on glossentry. Also added normalize-space to avoid missorting due to stray leading spaces.

  ● Mauritz Jeanson: inline.xsl

    Added a template for citebiblioid. The hyperlink target is the parent of the referenced biblioid,
    and the "hot text" is the biblioid itself enclosed in brackets.

  ● Mauritz Jeanson: inline.xsl

    Added support for @xlink:show in the simple.xlink template. The "new" and "replace"
    values are supported (corresponding to values of "_blank" and "_top" for the
    ulink.target parameter). I have assumed that @xlink:show should override ulink.target
    for external URI links. This closes bugs #1762023 and #1727498.

  ● Mauritz Jeanson: inline.xsl

    Moved declaration of comment.block.parents entity to common/entities.ent.

  ● Mauritz Jeanson: param.xweb

    Added link to profiling chapter of TCG.

  ● Dongsheng Song: biblio-iso690.xsl

    Change encoding from "windows-1250" to "UTF-8".

  ● Robert Stayton: biblio.xsl

    Add support in biblio collection to entries in bibliodivs.

  ● Mauritz Jeanson: pi.xsl

    Added missing @role="tcg".

  ● Mauritz Jeanson: chunk-common.xsl; titlepage.xsl

    Refactored legalnotice/revhistory chunking, so that the use.id.as.filename
    parameter as well as the dbhtml_filename PI are taken into account. A new named
    template in titlepage.xsl is used to compute the filename.

  ● Mauritz Jeanson: chunk-common.xsl; titlepage.xsl

    An update to the fix for bug #1790495 (r7433):
    The "ln-" prefix is output only when the legalnotice doesn't have an
    @id/@xml:id, in which case the stylesheets generate an ID value,
    resulting in a filename like "ln-7e0fwgj.html". This is useful because
    without the prefix, you wouldn't know that the file contained a legalnotice.
    The same logic is also applied to revhistory, using an "rh-" prefix.

  ● Mauritz Jeanson: autoidx.xsl

    Removed the [&scope;] predicate from the target variable in the template with name="reference".
    This filter was the cause of missing index backlinks when @zone and @type were used on indexterms,
    with index.on.type=1. Closes bug #1680836.

  ● Mauritz Jeanson: titlepage.xsl

    Added 'ln-' prefix to the name of the legalnotice chunk, in order to match the
    <link href"..."> that is output by make.legalnotice.head.links (chunk-common.xsl).
    Modified the href attribute on the legalnotice link.
    Closes bug #1790495.

Manpages

The following changes have been made to the manpages code since the 1.73.2
release.

  ● Keith Fahlgren: Makefile

    Use DOCBOOK_SVN variable everywhere, please; build with PDF_MAKER

  ● Michael(tm) Smith: other.xsl

    slightly adjusted spacing around admonition markers

  ● Michael(tm) Smith: refentry.xsl; utility.xsl

    make sure refsect3 titles are preceded by a line of space, and
    make the indenting of their child content less severe

  ● Michael(tm) Smith: block.xsl

    only indent verbatim environments in TTY output, not in non-TTY/PS

  ● Michael(tm) Smith: block.xsl

    made another adjustment to correct vertical alignment of admonition marker

  ● Michael(tm) Smith: block.xsl; other.xsl

    Adjusted/corrected alignment of adominition marker in PS/non-TTY output.

  ● Michael(tm) Smith: endnotes.xsl

    For PS/non-TTY output, display footnote/endnote numbers in
    superscript.

  ● Michael(tm) Smith: table.xsl; synop.xsl; utility.xsl

    Changed handling of hanging indents for cmdsynopsis, funcsynopsis,
    and synopfragment such that they now look correct in non-TTY/PS
    output. We now use the groff \w escape to hang by the actual width
    -- in the current font -- of the command, funcdef, or
    synopfragment references number (as opposed to hanging by the
    number of characters). This rendering in TTY output remains the
    same, since the width in monospaced TTY output is the same as the
    number of characters.

    Also, created new synopsis-block-start and synopsis-block-end
    templates to use for cmdsynopsis and funcsynopsis instead of the
    corresponding verbatim-* templates.

    Along with those changes, also corrected a problem that caused the
    content of synopfragment to be dropped, and made a
    vertical-spacing change to adjust spacing around table titles and
    among sibling synopfragment instances.

  ● Michael(tm) Smith: other.xsl

    use common l10.language.name template to retrieve English-language name

  ● Michael(tm) Smith: synop.xsl; inline.xsl

    added comment in code explaining why we don't put filename output
    in italic (despite the fact that man guidelines say we should)

  ● Michael(tm) Smith: inline.xsl

    put filename output in monospace instead of italic

  ● Michael(tm) Smith: synop.xsl

    put cmdsynopsis in monospace

  ● Michael(tm) Smith: inline.xsl

    removed template match for literal. template matches for monospace
    inlines are all imported from the HTML stylesheet

  ● Michael(tm) Smith: block.xsl

    don't indent verbatim environments that are descendants of
    refsynopsisdiv, not put backgrounds behind them

  ● Michael(tm) Smith: inline.xsl

    set output of the literal element in monospace. this causes all
    inline monospace instances in the git man pages to be set in
    monospace (since DocBook XML source for git docs is generated with
    asciidoc and asciidoc consistently outputs only <literal> for
    inline monospace (not <command> or <code> or anything else).
    Of course this only affects non-TTY output...

  ● Michael(tm) Smith: utility.xsl

    Added inline.monoseq named template.

  ● Michael(tm) Smith: utility.xsl

    don't bother using a custom register to store the previous
    font-family value when setting blocks of text in code font; just
    use \F[] .fam with no arg to switch back

  ● Michael(tm) Smith: endnotes.xsl

    put links in blue in PS output (note that this matches how groff
    renders content marked up with the .URL macro)

  ● Michael(tm) Smith: .gitignore; .cvsignore

    renamed all .cvsignore files to .gitignore, to facilitate use of git-svn

  ● Michael(tm) Smith: endnotes.xsl; param.xweb; param.ent

    removed man.links.are.underlined and added man.font.links. Also,
    changed the default font formatting for links to bold.

  ● Michael(tm) Smith: info.xsl

    fixed typo

  ● Michael(tm) Smith: endnotes.xsl; param.xweb; param.ent

    Added new param man.base.url.for.relative.links .. specifies a
    base URL for relative links (for ulink, @xlink:href, imagedata,
    audiodata, videodata) shown in the generated NOTES section of
    man-page output. The value of man.base.url.for.relative.links is
    prepended to any relative URI that is a value of ulink url,
    xlink:href, or fileref attribute.

    If you use relative URIs in link sources in your DocBook refentry
    source, and you leave man.base.url.for.relative.links unset, the
    relative links will appear "as is" in the NOTES section of any
    man-page output generated from your source. That's probably not
    what you want, because such relative links are only usable in the
    context of HTML output. So, to make the links meaningful and
    usable in the context of man-page output, set a value for
    man.base.url.for.relative.links that points
    to the online version of HTML output generated from your DocBook
    refentry source. For example:

      <xsl:param name="man.base.url.for.relative.links"
      >http://www.kernel.org/pub/software/scm/git/docs/</xsl:param>

  ● Michael(tm) Smith: info.xsl

    If a source refentry contains a Documentation or DOCUMENTATION
    section, don't report it as having missing AUTHOR information.
    Also, if missing a contrib/personblurb for a person or org, report
    pointers to http://docbook.sf.net/el/personblurb and to
    http://docbook.sf.net/el/contrib

  ● Michael(tm) Smith: info.xsl

    If we encounter an author|editor|othercredit instance that lacks a
    personblurb or contrib, report it to the user (because that means
    we have no information about that author|editor|othercredit to
    display in the generated AUTHOR|AUTHORS section...)

  ● Michael(tm) Smith: info.xsl; docbook.xsl; other.xsl

    if we can't find any usable author data, emit a warning and insert
    a fixme in the output

  ● Michael(tm) Smith: info.xsl

    fixed bug in indenting of output for contrib instances in AUTHORS
    section. Thanks to Daniel Leidert and the fglrx docs for exposing
    the bug.

  ● Michael(tm) Smith: block.xsl

    for a para or simpara that is the first child of a callout,
    suppress the .sp or .PP that would normally be output (because in
    those cases, the output goes into a table cell, and the .sp or .PP
    markup causes a spurious linebreak before it when displayed

  ● Michael(tm) Smith: lists.xsl

    fixed typos in comments

  ● Michael(tm) Smith: lists.xsl

    Added support for rendering co callouts and calloutlist instances.
    So you can now use simple callouts -- marking up programlisting
    and such with co instances -- and have the callouts displayed in
    man-page output. ("simple callouts" means using co@id and
    callout@arearefs pointing to co@id instances; in man/roff output,
    we can't/don't support markup that uses areaset and area)

  ● Michael(tm) Smith: block.xsl

    only put a line of space after a verbatim if it's followed by a
    text node or a paragraph

  ● Michael(tm) Smith: utility.xsl

    put verbatim environments in slightly smaller font in non-TTY
    output

  ● Michael(tm) Smith: lists.xsl

    minor whitespace-only reformatting of lists.xsl source

  ● Michael(tm) Smith: lists.xsl

    Made refinements/fixes to output of orderedlist and itemizedlist
    -- in part, to get mysql man pages to display correctly. This
    change causes a "\c" continuation marker to be added between
    listitem markers and contents (to ensure that the content remains
    on the same line as the marker when displayed)

  ● Michael(tm) Smith: block.xsl

    put a line of vertical space after all verbatim output that has
    sibling content following it (not just if that sibling content is
    a text node)

  ● Michael(tm) Smith: block.xsl

    refined spacing around titles for admonitions

  ● Michael(tm) Smith: block.xsl; other.xsl

    Deal with case of verbatim environments that have a linebreak
    after the opening tag. Assumption is that users generally don't
    want that linebreak to appear in output, so we do some groff
    hackery to mess with vertical spacing and close the space.

  ● Michael(tm) Smith: inline.xsl

    indexterm instances now produce groff comments like this:

      .\" primary: secondary: tertiary

    remark instances, if non-empty, now produce groff comments

  ● Michael(tm) Smith: charmap.groff.xsl; other.xsl

    convert no-break space character to groff "\ \&" (instead of just
    "\ "). the reason is that if a space occurs at the end of a line,
    our processing causes it to be eaten. a real-world case of this is
    the mysql(1) man page. appending the "\&" prevents that

  ● Michael(tm) Smith: block.xsl

    output "sp" before simpara output, not after it (outputting it
    after results in undesirable whitespace in particular cases; for
    example, in the hg/mercurial docs

  ● Michael(tm) Smith: table.xsl; synop.xsl; utility.xsl

    renamed from title-preamble to pinch.together and replaced "sp -1"
    between synopsis fragments with call to pinch.together instead

  ● Michael(tm) Smith: table.xsl

    use title-preamble template for table titles (instead of "sp -1"
    hack), and "sp 1" after all tables (instead of just "sp"

  ● Michael(tm) Smith: utility.xsl

    created title-preamble template for suppressing line spacing after
    headings

  ● Michael(tm) Smith: synop.xsl

    fixed typo

  ● Michael(tm) Smith: info.xsl

    further refinement of indenting in AUTHORS section

  ● Michael(tm) Smith: block.xsl; other.xsl

    refined handling of admonitions

  ● Michael(tm) Smith: lists.xsl

    Use RS/RE in another place where we had IP ""

  ● Michael(tm) Smith: info.xsl

    Replace (ab)use of IP with "sp -1" in AUTHORS section with RS/RE
    instead.

  ● Michael(tm) Smith: table.xsl; synop.xsl; info.xsl

    changed all instances of ".sp -1n" to ".sp -1"

  ● Michael(tm) Smith: other.xsl

    add extra line before SH heads only in non-TTY output

  ● Michael(tm) Smith: block.xsl

    Reworked output for admonitions (caution, important, note, tip,
    warning). In TTY output, admonitions now get indented. In non-TTY
    output, a colored marker (yellow) is displayed next to them.

  ● Michael(tm) Smith: other.xsl

    Added BM/EM macros for putting a colored marker in margin next to
    a block of text.

  ● Michael(tm) Smith: utility.xsl

    created make.bold.title template by moving title-bolding part out
    from nested-section-title template. This allows the bolding to
    also be used by the template for formatting admonitions

  ● Michael(tm) Smith: info.xsl

    put .br before copyright contents to prevent them from getting run in

  ● Michael(tm) Smith: refentry.xsl; other.xsl; utility.xsl

    made point size of output for Refsect2 and Refsect3 heads bigger

  ● Michael(tm) Smith: other.xsl

    put slightly more space between SH head and underline in non-TTY
    output

  ● Michael(tm) Smith: param.xweb; param.ent; other.xsl

    Added the man.charmap.subset.profile.english parameter and refined
    the handling of charmap subsets to differentiate between English
    and non-English source.

    This way charmap subsets are now handled is this:

    If the value of the man.charmap.use.subset parameter is non-zero,
    and your DocBook source is not written in English (that is, if its
    lang or xml:lang attribute has a value other than en), then the
    character-map subset specified by the man.charmap.subset.profile
    parameter is used instead of the full roff character map.

    Otherwise, if the lang or xml:lang attribute on the root element
    in your DocBook source or on the first refentry element in your
    source has the value en or if it has no lang or xml:lang
    attribute, then the character-map subset specified by the
    man.charmap.subset.profile.english parameter is used instead of
    man.charmap.subset.profile.

    The difference between the two subsets is that
    man.charmap.subset.profile provides mappings for characters in
    Western European languages that are not part of the Roman
    (English) alphabet (ASCII character set).

  ● Michael(tm) Smith: other.xsl

    Various updates, mainly related to uppercasing SH titles:

      - added a "Language: " metadata line to the top comment area of
        output man pages, to indicate the language the page is in

      - added a "toupper" macro of doing locale-aware uppercasing of
        SH titles and cross-references to SH titles; the mechanism
        relies on the uppercase.alpha and lowercase.alpha DocBook
        gentext keys to do locale-aware uppercasing based on the
        language the page is written in

      - added a "string.shuffle" template, which provides a library
        function for "shuffling" two strings together into a single
        string; it takes the first character for the first string, the
        first character from second string, etc. The only current use
        for it is to generate the argument for the groff tr request
        that does string uppercasing.

      - added make.tr.uppercase.arg and make.tr.normalcase.arg named
        templates for use in generating groff code for uppercasing and
        "normal"-casing SH titles

      - made the BB/BE "background drawing" macros have effect only in
        non-TTY output

      - output a few comments in the top part of source

  ● Michael(tm) Smith: utility.xsl

    removed some leftover kruft

  ● Michael(tm) Smith: refentry.xsl

    To create the name(s) for each man page, we now replace any spaces
    in the refname(s) with underscores. This ensures that tools like
    lexgrog(1) will be able to parse the name (lexgrog won't parse
    names that contain spaces).

  ● Michael(tm) Smith: docbook.xsl

    Put a comment into source of man page to indicate where the main
    content starts. (We now have a few of macro definitions at the
    start of the source, so putting this comment in helps those that
    might be viewing the source.)

  ● Michael(tm) Smith: refentry.xsl

    refined mechanism for generating SH titles

  ● Michael(tm) Smith: charmap.groff.xsl

    Added zcaron, Zcaron, scaron, and Scaron to the groff character map.
    This means that generated Finnish man pages will no longer contain
    any raw accented characters -- they'll instead by marked up with
    groff escapes.

  ● Michael(tm) Smith: other.xsl; utility.xsl

    corrected a regression I introduced about a year ago that caused
    dots to be output just as "\." -- instead needs to be "\&." (which
    is what it will be now, after this change)

  ● Michael(tm) Smith: refentry.xsl

    Changed backend handling for generating titles for SH sections and
    for cross-references to those sections. This should have no effect
    on TTY output (behavior should remain the same hopefully) but
    results in titles in normal case (instead of uppercase) in PS
    output.

  ● Michael(tm) Smith: info.xsl

    use make.subheading template to make subheadings for AUTHORS and
    COPYRIGHT sections (instead of harcoding roff markup)

  ● Michael(tm) Smith: block.xsl

    put code font around programlisting etc.

  ● Michael(tm) Smith: synop.xsl; docbook.xsl

    embed custom macro definitions in man pages, plus wrap synopsis in
    code font

  ● Michael(tm) Smith: endnotes.xsl

    use the make.subheading template to generated SH subheading for
    endnotes section.

  ● Michael(tm) Smith: lists.xsl

    Added some templates for generating if-then-else conditional
    markup in groff, so let's use those instead of hard-coding it in
    multiple places...

  ● Michael(tm) Smith: other.xsl; utility.xsl

    Initial checkin of some changes related to making PS/PDF output
    from "man -l -Tps" look better. The current changes:

      - render synopsis and verbatim sections in a monospace/code font

      - put a light-grey background behind all programlisting, screen,
        and literallayout instances

      - prevent SH heads in PS output from being rendered in uppercase
        (as they are in console output)

      - also display xrefs to SH heads in PS output in normal case
        (instead of uppercase)

      - draw a line under SH heads in PS output

    The changes made to the code to support the above features were:

      - added some embedded/custom macros: one for conditionally
        upper-casing SH x-refs, one for redefining the SH macro
        itself, with some conditional handling for PS output, and
        finally a macro for putting a background/screen (filled box)
        around a block of text (e.g., a program listing) in PS output

      - added utility templates for wrapping blocks of text in code
        font; also templates for inline code font

  ● Robert Stayton: refentry.xsl

    refpurpose nodes now get apply-templates instead of just normalize-space().

  ● Michael(tm) Smith: lists.xsl

    Fixed alignment of first lined of text for each listitem in
    orderedlist output for TTY. Existing code seemed to have been
    causing an extra undesirable space to appear.

  ● Michael(tm) Smith: lists.xsl

    Wrapped some roff conditionals around roff markup for orderedlist
    and itemizedlist output, so that the lists look acceptable in PS
    output as well as TTY.

  ● Michael(tm) Smith: pi.xsl; synop.xsl; param.xweb; param.ent

    Added the man.funcsynopsis.style parameter. Has the same effect in
    manpages output as the funcsynopsis.style parameter has in HTML
    output -- except that its default value is 'ansi' instead of 'kr'.

  ● Michael(tm) Smith: synop.xsl

    Reworked handling of K&R funcprototype output. It no longer relies
    on the HTML kr-tabular templates, but instead just does direct
    transformation to roff. For K&R output, it displays the paramdef
    output in an indented list following the prototype.

  ● Michael(tm) Smith: synop.xsl

    Properly integrated handling for K&R output into manpages
    stylesheet. The choice between K&R output and ANSI output is
    currently controlled through use of the (HTML) funcsynopsis.style
    parameter. Note that because the mechanism does currently rely on
    funcsynopsis.style, the default in manpages output is now K&R
    (because that's the default of that param). But I suppose I ought
    to create a man.funcsynopsis.style and make the default for that
    ANSI (to preserve the existing default behavior).

  ● Michael(tm) Smith: docbook.xsl

    added manpages/pi.xsl file

  ● Michael(tm) Smith: .cvsignore; pi.xsl

    Added "dbman funcsynopsis-style" PI and incorporated it into the
    doc build.

  ● Michael(tm) Smith: refentry.xsl

    Fixed regression that caused an unescaped dash to be output
    between refname and refpurpose content. Closes bug #1894244.
    Thanks to Daniel Leidert.

  ● Michael(tm) Smith: other.xsl

    Fixed problem with dots being escaped in filenames of generated
    man files. Closes #1827195. Thanks to Daniel Leidert.

  ● Michael(tm) Smith: inline.xsl

    Added support for processing structfield (was appearing in roff
    output surrounded by HTML <em> tags; fixed so that it gets roff
    ital markup). Closes bug #1858329.  Thanks to Sam Varshavchik.

Epub

The following changes have been made to the epub code since the 1.73.2 release.

  ● Keith Fahlgren: bin/spec/README; bin/spec/epub_realbook_spec.rb

    'Realbook' spec now passes

  ● Keith Fahlgren: bin/dbtoepub; README; bin/spec/README; bin/lib/docbook.rb;
    bin/spec/epub_r⋯

    Very primitive Windows support for dbtoepub reference implementation; README for running tests and for the .epub target in general; shorter realbook test document (still fails for now)

  ● Keith Fahlgren: bin/dbtoepub; bin/spec/epub_regressions_spec.rb; bin/lib/
    docbook.rb; bin/s⋯

    Changes to OPF spine to not duplicate idrefs for documents with parts not at the root; regression specs for same

  ● Keith Fahlgren: docbook.xsl

    Fixing linking to cover @id, distinct from other needs of cover-image-id (again, thanks to Martin Goerner)

  ● Keith Fahlgren: docbook.xsl

    Updating the title of the toc element in the guide to be more explicit (thanks to Martin Goerner)

  ● Keith Fahlgren: bin/spec/examples/amasque_exploded/content.opf; bin/spec/
    examples/amasque_⋯

    Initial checkin/merge of epub target from work provided by Paul Norton of Adobe
    and Keith Fahlgren of O'Reilly.

HTMLHelp

The following changes have been made to the htmlhelp code since the 1.73.2
release.

  ● Keith Fahlgren: Makefile

    Get rid of the rest of the hardcoded buildtools references and actually use DOCBOOK_SVN

  ● Michael(tm) Smith: .gitignore; .cvsignore

    renamed all .cvsignore files to .gitignore, to facilitate use of git-svn

  ● Mauritz Jeanson: htmlhelp-common.xsl

    Added <xsl:with-param name="quiet" select="$chunk.quietly"/> to calls to
    the write.chunk, write.chunk.with.doctype, and write.text.chunk templates.
    This makes chunk.quietly=1 suppress chunk filename messages also for help
    support files (which seems to be what one would expect). See bug #1648360.

Eclipse

The following changes have been made to the eclipse code since the 1.73.2
release.

  ● Keith Fahlgren: Makefile

    Get rid of the rest of the hardcoded buildtools references and actually use DOCBOOK_SVN

  ● Michael(tm) Smith: .cvsignore; .gitignore

    renamed all .cvsignore files to .gitignore, to facilitate use of git-svn

  ● David Cramer: eclipse.xsl

    Use sortas attributes (if they exist) when sorting indexterms

  ● David Cramer: eclipse.xsl

    Added support for indexterm/see in eclipse index.xml

  ● Mauritz Jeanson: eclipse.xsl

    Added <xsl:with-param name="quiet" select="$chunk.quietly"/>
    to helpidx template.

  ● David Cramer: eclipse.xsl

    Generate index.xml file and add related goo to plugin.xml file. Does not yet support see and seealso.

  ● Mauritz Jeanson: eclipse.xsl

    Added <xsl:with-param name="quiet" select="$chunk.quietly"/> to calls to
    the write.chunk, write.chunk.with.doctype, and write.text.chunk templates.
    This makes chunk.quietly=1 suppress chunk filename messages also for help
    support files (which seems to be what one would expect). See bug #1648360.

JavaHelp

The following changes have been made to the javahelp code since the 1.73.2
release.

  ● Keith Fahlgren: Makefile

    Get rid of the rest of the hardcoded buildtools references and actually use DOCBOOK_SVN

  ● Michael(tm) Smith: .gitignore; .cvsignore

    renamed all .cvsignore files to .gitignore, to facilitate use of git-svn

  ● Mauritz Jeanson: javahelp.xsl

    Added <xsl:with-param name="quiet" select="$chunk.quietly"/> to calls to
    the write.chunk, write.chunk.with.doctype, and write.text.chunk templates.
    This makes chunk.quietly=1 suppress chunk filename messages also for help
    support files (which seems to be what one would expect). See bug #1648360.

Roundtrip

The following changes have been made to the roundtrip code since the 1.73.2
release.

  ● Keith Fahlgren: Makefile

    Get rid of the rest of the hardcoded buildtools references and actually use DOCBOOK_SVN

  ● Steve Ball: blocks2dbk.xsl; wordml2normalise.xsl

    fix table/cell borders for wordml, fix formal figure, add emphasis-strong

  ● Michael(tm) Smith: .gitignore; .cvsignore

    renamed all .cvsignore files to .gitignore, to facilitate use of git-svn

  ● Mauritz Jeanson: supported.xml

    Changed @cols to 5.

  ● Steve Ball: blocks2dbk.xsl; blocks2dbk.dtd; template.xml

    added pubdate, fixed metadata handling in biblioentry

  ● Steve Ball: supported.xml

    Added support for edition.

  ● Steve Ball: docbook-pages.xsl; wordml-blocks.xsl; docbook.xsl; wordml.xsl;
    pages-normalise⋯

    Removed stylesheets for old, deprecated conversion method.

  ● Steve Ball: specifications.xml; dbk2ooo.xsl; blocks2dbk.xsl; dbk2pages.xsl;
    blocks2dbk.dtd⋯

    Added support for Open Office, added edition element, improved list and table support in Word and Pages

  ● Steve Ball: normalise-common.xsl; blocks2dbk.xsl; dbk2pages.xsl;
    template-pages.xml; templ⋯

    Fixed bug in WordML table handling, improved table handling for Pages 08, synchronised WordML and Pages templates.

  ● Steve Ball: normalise-common.xsl; blocks2dbk.xsl; wordml2normalise.xsl;
    dbk2wp.xsl

    fix caption, attributes

  ● Steve Ball: specifications.xml; blocks2dbk.xsl; wordml2normalise.xsl;
    blocks2dbk.dtd; temp⋯

    Fixes to table and list handling

  ● Steve Ball: blocks2dbk.xsl

    added support for explicit emphasis character styles

  ● Steve Ball: wordml2normalise.xsl

    added support for customisation in image handling

  ● Steve Ball: blocks2dbk.xsl

    Added inlinemediaobject support for metadata.

  ● Steve Ball: normalise-common.xsl; blocks2dbk.xsl; template.xml;
    dbk2wordml.xsl; dbk2wp.xsl

    Added support file. Added style locking. Conversion bug fixes.

Slides

The following changes have been made to the slides code since the 1.73.2
release.

  ● Keith Fahlgren: xhtml/Makefile; fo/Makefile; html/Makefile

    More stupid makefile changes for slides

  ● Keith Fahlgren: Makefile

    Get rid of the rest of the hardcoded buildtools references and actually use DOCBOOK_SVN

  ● Michael(tm) Smith: fo/Makefile; html/Makefile

    Added checks and hacks to various makefiles to enable building
    under Cygwin. This stuff is ugly and maybe not worth the mess and
    trouble, but does seem to work as expected and not break anything
    else.

  ● Michael(tm) Smith: demo/default/.gitignore; demo/frames1/.gitignore; demo
    /.gitignore; demo⋯

    renamed a bunch more .cvsignore files to .gitignore (to facilitate use of git-svn)

  ● Michael(tm) Smith: graphics/.gitignore; svg/.cvsignore; keynote/.gitignore;
    htmlhelp/.cvsi⋯

    renamed all .cvsignore files to .gitignore, to facilitate use of git-svn

  ● Jirka Kosek: html/plain.xsl

    Added support for showing foil number

Website

The following changes have been made to the website code since the 1.73.2
release.

  ● Keith Fahlgren: Makefile

    Get rid of the rest of the hardcoded buildtools references and actually use DOCBOOK_SVN

  ● Michael(tm) Smith: extensions/saxon64/.classes/.gitignore; extensions/
    xalan2/.classes/com/⋯

    renamed a bunch more .cvsignore files to .gitignore (to facilitate use of git-svn)

  ● Michael(tm) Smith: .gitignore; .cvsignore

    renamed all .cvsignore files to .gitignore, to facilitate use of git-svn

Params

The following changes have been made to the params code since the 1.73.2
release.

  ● Keith Fahlgren: epub.autolabel.xml

    New parameter for epub, epub.autolabel

  ● Mauritz Jeanson: table.frame.border.color.xml; table.cell.padding.xml;
    table.cell.border.t⋯

    Added missing refpurposes and descriptions.

  ● Keith Fahlgren: ade.extensions.xml

    Initial checkin/merge of epub target from work provided by Paul Norton of Adobe
    and Keith Fahlgren of O'Reilly.

  ● Mauritz Jeanson: fop.extensions.xml; fop1.extensions.xml

    Clarified that fop1.extensions is for FOP 0.90 and later. Version 1 is not here yet...

  ● Michael(tm) Smith: man.links.are.underlined.xml;
    man.endnotes.list.enabled.xml; man.font.l⋯

    removed man.links.are.underlined and added man.font.links. Also,
    changed the default font formatting for links to bold.

  ● Michael(tm) Smith: man.base.url.for.relative.links.xml

    Added new param man.base.url.for.relative.links .. specifies a
    base URL for relative links (for ulink, @xlink:href, imagedata,
    audiodata, videodata) shown in the generated NOTES section of
    man-page output. The value of man.base.url.for.relative.links is
    prepended to any relative URI that is a value of ulink url,
    xlink:href, or fileref attribute.

    If you use relative URIs in link sources in your DocBook refentry
    source, and you leave man.base.url.for.relative.links unset, the
    relative links will appear "as is" in the NOTES section of any
    man-page output generated from your source. That's probably not
    what you want, because such relative links are only usable in the
    context of HTML output. So, to make the links meaningful and
    usable in the context of man-page output, set a value for
    man.base.url.for.relative.links that points
    to the online version of HTML output generated from your DocBook
    refentry source. For example:

      <xsl:param name="man.base.url.for.relative.links"
      >http://www.kernel.org/pub/software/scm/git/docs/</xsl:param>

  ● Michael(tm) Smith: man.endnotes.list.enabled.xml

    fixed typo

  ● Michael(tm) Smith: man.string.subst.map.xml

    squeeze .sp\n.sp into a single .sp (to prevent a extra, spurious
    line of whitespace from being inserted after programlisting etc.
    in certain cases)

  ● Michael(tm) Smith: refentry.manual.fallback.profile.xml;
    refentry.source.fallback.profile.⋯

    don't use refmiscinfo@class=date value as fallback for refentry
    "source" or "manual" metadata fields

  ● Michael(tm) Smith: man.charmap.subset.profile.xml; man.charmap.enabled.xml;
    man.charmap.su⋯

    made some further doc tweaks related to the
    man.charmap.subset.profile.english param

  ● Michael(tm) Smith: man.charmap.subset.profile.xml;
    man.charmap.subset.profile.english.xml

    Fixed some typos.

  ● Michael(tm) Smith: man.charmap.subset.profile.xml; man.charmap.enabled.xml;
    man.charmap.su⋯

    Added the man.charmap.subset.profile.english parameter and refined
    the handling of charmap subsets to differentiate between English
    and non-English source.

    This way charmap subsets are now handled is this:

    If the value of the man.charmap.use.subset parameter is non-zero,
    and your DocBook source is not written in English (that is, if its
    lang or xml:lang attribute has a value other than en), then the
    character-map subset specified by the man.charmap.subset.profile
    parameter is used instead of the full roff character map.

    Otherwise, if the lang or xml:lang attribute on the root element
    in your DocBook source or on the first refentry element in your
    source has the value en or if it has no lang or xml:lang
    attribute, then the character-map subset specified by the
    man.charmap.subset.profile.english parameter is used instead of
    man.charmap.subset.profile.

    The difference between the two subsets is that
    man.charmap.subset.profile provides mappings for characters in
    Western European languages that are not part of the Roman
    (English) alphabet (ASCII character set).

  ● Michael(tm) Smith: man.charmap.subset.profile.xml

    Added to default charmap used by manpages:

      - the "letters" part of the 'C1 Controls And Latin-1 Supplement
        (Latin-1 Supplement)' Unicode block
      - Latin Extended-A block (but not all of the characters from
        that block have mappings in groff, so some of them are still
        passed through as-is)

    The effects of this change are that in man pages generated for
    most Western European languages and for Finnish, all characters
    not part of the Roman alphabet are (e.g., "accented" characters)
    are converted to groff escapes.

    Previously, by default we passed through those characters as is
    (and users needed to use the full charmap if they wanted to have
    those characters converted).

    As a result of this change, man pages generated for Western
    European languages will be viewable in some environments in which
    they are not viewable if the "raw" non-Roman characters are in them.

  ● Mauritz Jeanson: generate.legalnotice.link.xml;
    generate.revhistory.link.xml

    Added information on how the filename is computed.

  ● Mauritz Jeanson: default.table.width.xml

    Clarified PI usage.

  ● Michael(tm) Smith: man.funcsynopsis.style.xml

    Added the man.funcsynopsis.style parameter. Has the same effect in
    manpages output as the funcsynopsis.style parameter has in HTML
    output -- except that its default value is 'ansi' instead of 'kr'.

  ● Mauritz Jeanson: table.table.properties.xml; nominal.table.width.xml

    Fixed typo.

  ● Michael(tm) Smith: funcsynopsis.tabular.threshold.xml

    Removed the funcsynopsis.tabular.threshold param. It's no longer
    being used in the code and hasn't been since mid 2006.

  ● Mauritz Jeanson: table.properties.xml

    Set keep-together.within-column to "auto". This seems to be the most sensible
    default value for tables.

  ● Mauritz Jeanson: informal.object.properties.xml;
    admon.graphics.extension.xml; informalequ⋯

    Several small documentation fixes.

  ● Mauritz Jeanson: manifest.in.base.dir.xml

    Wording fixes.

  ● Mauritz Jeanson: header.content.properties.xml;
    footer.content.properties.xml

    Added refpurpose.

  ● Mauritz Jeanson: ulink.footnotes.xml; ulink.show.xml

    Updated for DocBook 5.

  ● Mauritz Jeanson: index.method.xml; glossterm.auto.link.xml

    Spelling and wording fixes.

  ● Mauritz Jeanson: callout.graphics.extension.xml

    Clarifed available graphics formats and extensions.

  ● Mauritz Jeanson: footnote.sep.leader.properties.xml

    Corrected refpurpose.

  ● Jirka Kosek: footnote.properties.xml

    Added more properties which make it possible to render correctly footnotes placed inside verbatim elements.

  ● Mauritz Jeanson: img.src.path.xml

    img.src.path works with inlinegraphic too.

  ● Mauritz Jeanson: saxon.character.representation.xml

    Added TCG link.

  ● Mauritz Jeanson: img.src.path.xml

    Updated description of img.src.path. Bug #1785224 revealed that
    there was a risk of misunderstanding how it works.

Profiling

The following changes have been made to the profiling code since the 1.73.2
release.

  ● Jirka Kosek: xsl2profile.xsl

    Added new rules to profile all content generated by HTML Help (including alias files)

  ● Robert Stayton: profile-mode.xsl

    use mode="profile" instead of xsl:copy-of for attributes so
    they can be more easily customized.

Lib

The following changes have been made to the lib code since the 1.73.2 release.

  ● Keith Fahlgren: Makefile

    Get rid of the rest of the hardcoded buildtools references and actually use DOCBOOK_SVN

  ● Michael(tm) Smith: .gitignore; .cvsignore

    renamed all .cvsignore files to .gitignore, to facilitate use of git-svn

Tools

The following changes have been made to the tools code since the 1.73.2
release.

  ● Michael(tm) Smith: xsl/build/.gitignore; xsl/build/.cvsignore

    renamed all .cvsignore files to .gitignore, to facilitate use of git-svn

  ● Michael(tm) Smith: make/Makefile.DocBook

    various changes and additions to support making with asciidoc as
    an input format

  ● Michael(tm) Smith: make/Makefile.DocBook

    make dblatex the default PDF maker for the example makefile

  ● Michael(tm) Smith: xsl/build/html2roff.xsl

    Reworked handling of K&R funcprototype output. It no longer relies
    on the HTML kr-tabular templates, but instead just does direct
    transformation to roff. For K&R output, it displays the paramdef
    output in an indented list following the prototype.

  ● Mauritz Jeanson: xsl/build/make-xsl-params.xsl

    Made attribute-sets members of the param list. This enables links to attribute-sets in the
    reference documentation.

  ● Michael(tm) Smith: xsl/build/html2roff.xsl

    use .BI handling in K&R funsynopsis output for manpages, just as
    we do already of ANSI output

  ● Michael(tm) Smith: xsl/build/html2roff.xsl

    Implemented initial support for handling tabular K&R output of
    funcprototype in manpages output. Accomplished by adding more
    templates to the intermediate HTML-to-roff stylesheet that the
    build uses to create the manpages/html-synop.xsl stylesheet.

  ● Michael(tm) Smith: xsl/build/doc-link-docbook.xsl

    Made the xsl/tools/xsl/build/doc-link-docbook.xsl stylesheet
    import profile-docbook.xsl, so that we can do profiling of release
    notes. Corrected some problems in the target for the release-notes
    HTML build.

Template

The following changes have been made to the template code since the 1.73.2
release.

  ● Michael(tm) Smith: .gitignore; .cvsignore

    renamed all .cvsignore files to .gitignore, to facilitate use of git-svn

Extensions

The following changes have been made to the extensions code since the 1.73.2
release.

  ● Keith Fahlgren: Makefile

    Get rid of the rest of the hardcoded buildtools references and actually use DOCBOOK_SVN

  ● Keith Fahlgren: Makefile

    Use DOCBOOK_SVN variable everywhere, please; build with PDF_MAKER

  ● Michael(tm) Smith: .gitignore; .cvsignore

    renamed all .cvsignore files to .gitignore, to facilitate use of git-svn

  ● Michael(tm) Smith: Makefile

    moved extensions build targets from master xsl/Makefile to
    xsl/extensions/Makefile

  ● Michael(tm) Smith: .cvsignore

    ignore stuff

  ● Michael(tm) Smith: .cvsignore

    re-adding empty extensions subdir

XSL-Saxon

The following changes have been made to the xsl-saxon code since the 1.73.2
release.

  ● Michael(tm) Smith: VERSION

    bring xsl2, xsl-saxon, and xsl-xalan VERSION files up-to-date with
    recent change to snapshot build infrastructure

  ● Michael(tm) Smith: .gitignore; .cvsignore

    renamed a bunch more .cvsignore files to .gitignore (to facilitate use of git-svn)

  ● Michael(tm) Smith: nbproject/build-impl.xml; nbproject/project.properties

    Changed hard-coded file references in "clean" target to variable
    references. Closes #1792043. Thanks to Daniel Leidert.

  ● Michael(tm) Smith: VERSION; Makefile

    Did post-release wrap-up of xsl-saxon and xsl-xalan dirs

  ● Michael(tm) Smith: nbproject/build-impl.xml; VERSION; Makefile; test

    More tweaks to get release-ready

XSL-Xalan

The following changes have been made to the xsl-xalan code since the 1.73.2
release.

  ● Michael(tm) Smith: VERSION

    bring xsl2, xsl-saxon, and xsl-xalan VERSION files up-to-date with
    recent change to snapshot build infrastructure

  ● Michael(tm) Smith: nbproject/.gitignore; .cvsignore; .gitignore; nbproject
    /.cvsignore

    renamed a bunch more .cvsignore files to .gitignore (to facilitate use of git-svn)

  ● Michael(tm) Smith: nbproject/build-impl.xml

    Changed hard-coded file references in "clean" target to variable
    references. Closes #1792043. Thanks to Daniel Leidert.

  ● Michael(tm) Smith: Makefile; VERSION

    Did post-release wrap-up of xsl-saxon and xsl-xalan dirs

  ● Michael(tm) Smith: Makefile; nbproject/build-impl.xml; VERSION

    More tweaks to get release-ready

XSL-libxslt

The following changes have been made to the xsl-libxslt code since the 1.73.2
release.

  ● Mauritz Jeanson: python/xslt.py

    Print the result to stdout if no outfile has been given.
    Some unnecessary semicolons removed.

  ● Mauritz Jeanson: python/xslt.py

    Added a function that quotes parameter values (to ensure that they are interpreted as strings).
    Replaced deprecated functions from the string module with string methods.

  ● Michael(tm) Smith: python/.gitignore; python/.cvsignore

    renamed a bunch more .cvsignore files to .gitignore (to facilitate use of git-svn)

  ● Michael(tm) Smith: python/README; python/README.LIBXSLT

    renamed xsl-libxslt/python/README to xsl-libxslt/python/README.LIBXSLT

  ● Mauritz Jeanson: python/README

    Tweaked the text a little.

