/*
 *			jove/Cakefile
 *
 *  $Header$
 */

#define SRCDIR	jove
#define PRODUCTS	jove findcom teach-jove
#define	SRCSUFF	.c
#define MANSECTION	1

#define EXTRA_CLEAN	tune.c

#define FILES	xxx

#define JOVE_OBJ	jove_buf.o \
		jove_c.o \
		jove_delete.o \
		jove_disp.o \
		jove_draw.o \
		jove_extend.o \
		jove_funcs.o \
		jove_insert.o \
		jove_io.o \
		jove_main.o \
		jove_marks.o \
		jove_misc.o \
		jove_proc.o \
		jove_re.o \
		jove_screen.o \
		jove_term.o \
		jove_wind.o \
		tune.o


#include "../Cakefile.defs"
#include "../Cakefile.prog"

/* Explicit composition of each product */
/* Do not use LIBES symbol.  We don't need anything but libc */

tune.c:	../SRCDIR/jove_tune.c
	rm -f tune.c
	sed -e \'s;BinDir;BINDIR;\' -e \'s;LibDir;LIBDIR;\' < ../SRCDIR/jove_tune.c > tune.c

tune.o:	tune.c
	CC -c CFLAGS -I../SRCDIR tune.c

jove:	JOVE_OBJ
	sh ../SRCDIR/mkversion.sh
	CC -c CFLAGS version.c
	CC LDFLAGS -o jove JOVE_OBJ version.o LIBTERMLIB
	rm -f version.c version.o

findcom:	findcom.o tune.o
	CC LDFLAGS findcom.o tune.o -o findcom
	rm -f tune.o

teach-jove:	../SRCDIR/teach-jove.sh
	sed -e \'s;BinDir;BINDIR;\' -e \'s;LibDir;LIBDIR;\' < ../SRCDIR/teach-jove.sh > teach-jove

#define EXTRA_INSTALL_TARGETS install-library

#include "../Cakefile.rules"

/* These aren't really manual pages, they're text documents */
install-library&:
	cp ../SRCDIR/describe.com.1 LIBDIR/describe.com
	cp ../SRCDIR/teach-jove.1 LIBDIR/teach-jove
