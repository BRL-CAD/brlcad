/*
 *			rttherm/Cakefile
 *
 *  $Header$
 */

/* This shows up in CFLAGS */
#define CONFIGDEFS	-DRT_MULTISPECTRAL -I''XINCDIR

#define SRCDIR	rttherm
#define PRODUCTS	rttherm ssampview ssamp-bw
#define	SRCSUFF	.c
#define MANSECTION	1

#include "../Cakefile.defs"
#include "../Cakefile.prog"

/* light.h material.h rad.h rdebug.h */
#define FILES	\
	viewtherm ssampview

#if NFS
#	define	RTDIR	../.rt.MTYPE
#else
#	define	RTDIR	../rt
#endif

/*  The "top-half" (user interface) for the RT family of programs */
#define RTUIF	RTDIR/main.o RTDIR/opt.o RTDIR/do.o RTDIR/worker.o RTDIR/material.o

/* Specially compiled versions */
refract.o: ../rt/refract.c
	CC CFLAGS -c ../rt/refract.c

shade.o: ../rt/shade.c
	CC CFLAGS -c ../rt/shade.c

/* Explicit composition of each product */

#define RTTHERM_OBJ	RTUIF viewtherm.o RTDIR/wray.o spectrum.o \
			refract.o shade.o

rttherm:	RTTHERM_OBJ LIBMULTISPECTRAL_DEP LIBRT_DEP LIBBN_DEP LIBBU_DEP LIBFB_DEP
	newvers.sh version "Thermal Multi-Spectral RT"
	CC CFLAGS -c vers.c
	CC LDFLAGS RTTHERM_OBJ vers.o LIBMULTISPECTRAL LIBRT LIBBN LIBFB LIBFB_LIBES LIBBU LIBBU_LIBES LIBES -o rttherm

/* GUI to browse spectral images interactively */
ssampview:	ssampview.o LIBRT_DEP LIBBN_DEP LIBBU_DEP LIBFB_DEP LIBTCL_DEP LIBTK_DEP spectrum.o
	CC LDFLAGS ssampview.o spectrum.o LIBRT LIBBN LIBBU LIBBU_LIBES LIBWDB LIBTK LIBTCL LIBTCL_LIBES LIBFB LIBFB_LIBES LIBES -o ssampview

ssamp-bw:	ssamp-bw.o LIBBN_DEP LIBBU_DEP
	CC LDFLAGS ssamp-bw.o LIBBN LIBBU LIBBU_LIBES LIBES -o ssamp-bw

/* Program to test identity relationship between rgb and spectral reps */
pixtest: pixtest.o LIBRT_DEP LIBBN_DEP LIBBU_DEP LIBTCL_DEP LIBTK_DEP spectrum.o
	CC LDFLAGS pixtest.o spectrum.o LIBRT LIBBN LIBBU LIBBU_LIBES LIBWDB LIBTK LIBTCL LIBTCL_LIBES LIBFB LIBFB_LIBES LIBES -o pixtest

#include "../Cakefile.rules"
